<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>S3F: s3f::s3fnet::DropController Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">S3F
   &#160;<span id="projectnumber">2.1.0_full_version</span>
   </div>
   <div id="projectbrief">Simpler Scalable Simulation Framework + S3F-based Network Testbed (Simulation, OpenVZ-based Emulation, and OpenFlow-based SDN)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classs3f_1_1s3fnet_1_1_drop_controller.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-types">Protected Types</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classs3f_1_1s3fnet_1_1_drop_controller-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">s3f::s3fnet::DropController Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A controller that builds a flow for each received packet to drop all packets it matches (this demonstrates the flow table's basic implementation).  
 <a href="classs3f_1_1s3fnet_1_1_drop_controller.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="openflow__controller_8h_source.html">openflow_controller.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for s3f::s3fnet::DropController:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="classs3f_1_1s3fnet_1_1_drop_controller.png" usemap="#s3f::s3fnet::DropController_map" alt=""/>
  <map id="s3f::s3fnet::DropController_map" name="s3f::s3fnet::DropController_map">
<area href="classs3f_1_1s3fnet_1_1_controller.html" title="An interface for a non-entity-based OpenFlow controller. " alt="s3f::s3fnet::Controller" shape="rect" coords="0,0,159,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa8eb71e66ba139087b47b75ff98cff48"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_drop_controller.html#aa8eb71e66ba139087b47b75ff98cff48">ReceiveFromSwitch</a> (<a class="el" href="classs3f_1_1s3fnet_1_1_open_flow_switch_session.html">OpenFlowSwitchSession</a> *swtch, ofpbuf *buffer)</td></tr>
<tr class="memdesc:aa8eb71e66ba139087b47b75ff98cff48"><td class="mdescLeft">&#160;</td><td class="mdescRight">A switch calls this method to pass a message on to the <a class="el" href="classs3f_1_1s3fnet_1_1_controller.html" title="An interface for a non-entity-based OpenFlow controller. ">Controller</a>.  <a href="#aa8eb71e66ba139087b47b75ff98cff48">More...</a><br/></td></tr>
<tr class="separator:aa8eb71e66ba139087b47b75ff98cff48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6173211dd8cd7767e48913792526ef68"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_controller.html#a6173211dd8cd7767e48913792526ef68">AddSwitch</a> (<a class="el" href="classs3f_1_1s3fnet_1_1_open_flow_switch_session.html">OpenFlowSwitchSession</a> *swtch)</td></tr>
<tr class="memdesc:a6173211dd8cd7767e48913792526ef68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a switch to the controller.  <a href="#a6173211dd8cd7767e48913792526ef68">More...</a><br/></td></tr>
<tr class="separator:a6173211dd8cd7767e48913792526ef68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80ff7d93c33f95df9f2144d0ff4bf446"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_controller.html#a80ff7d93c33f95df9f2144d0ff4bf446">StartDump</a> (<a class="el" href="structs3f_1_1s3fnet_1_1_stats_dump_callback.html">StatsDumpCallback</a> *cb)</td></tr>
<tr class="memdesc:a80ff7d93c33f95df9f2144d0ff4bf446"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts a callback-based, reliable, possibly multi-message reply to a request made by the controller.  <a href="#a80ff7d93c33f95df9f2144d0ff4bf446">More...</a><br/></td></tr>
<tr class="separator:a80ff7d93c33f95df9f2144d0ff4bf446"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a50329c32536baba80c29d2a89e1f18b7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_controller.html#a50329c32536baba80c29d2a89e1f18b7">type</a></td></tr>
<tr class="memdesc:a50329c32536baba80c29d2a89e1f18b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">model of the controller, e.g., learning_switch  <a href="#a50329c32536baba80c29d2a89e1f18b7">More...</a><br/></td></tr>
<tr class="separator:a50329c32536baba80c29d2a89e1f18b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-types"></a>
Protected Types</h2></td></tr>
<tr class="memitem:a9269a87f775ac406e991ec2ea0682187"><td class="memItemLeft" align="right" valign="top">typedef std::set<br class="typebreak"/>
&lt; <a class="el" href="classs3f_1_1s3fnet_1_1_open_flow_switch_session.html">OpenFlowSwitchSession</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_controller.html#a9269a87f775ac406e991ec2ea0682187">Switches_t</a></td></tr>
<tr class="separator:a9269a87f775ac406e991ec2ea0682187"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a3949026ede16af076ff9c2a41aa95895"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_controller.html#a3949026ede16af076ff9c2a41aa95895">SendToSwitch</a> (<a class="el" href="classs3f_1_1s3fnet_1_1_open_flow_switch_session.html">OpenFlowSwitchSession</a> *swtch, void *msg, size_t length)</td></tr>
<tr class="separator:a3949026ede16af076ff9c2a41aa95895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afac66b179ea9f8a3e2bac22c305acf10"><td class="memItemLeft" align="right" valign="top">ofp_flow_mod *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_controller.html#afac66b179ea9f8a3e2bac22c305acf10">BuildFlow</a> (sw_flow_key key, uint32_t buffer_id, uint16_t command, void *acts, size_t actions_len, int idle_timeout, int hard_timeout)</td></tr>
<tr class="separator:afac66b179ea9f8a3e2bac22c305acf10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a464b8f431b0fdd1e043676d0b56fd280"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_controller.html#a464b8f431b0fdd1e043676d0b56fd280">GetPacketType</a> (ofpbuf *buffer)</td></tr>
<tr class="separator:a464b8f431b0fdd1e043676d0b56fd280"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a786ea9169f4435af0a2e284716d7bcbe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classs3f_1_1s3fnet_1_1_controller.html#a9269a87f775ac406e991ec2ea0682187">Switches_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_controller.html#a786ea9169f4435af0a2e284716d7bcbe">m_switches</a></td></tr>
<tr class="memdesc:a786ea9169f4435af0a2e284716d7bcbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">The collection of switches registered to this controller.  <a href="#a786ea9169f4435af0a2e284716d7bcbe">More...</a><br/></td></tr>
<tr class="separator:a786ea9169f4435af0a2e284716d7bcbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A controller that builds a flow for each received packet to drop all packets it matches (this demonstrates the flow table's basic implementation). </p>
<p>When a connected switch passes it a packet that the switch doesn't recognize, the controller configures the switch to make a flow that drops alike packets. </p>

<p>Definition at line <a class="el" href="openflow__controller_8h_source.html#l00126">126</a> of file <a class="el" href="openflow__controller_8h_source.html">openflow_controller.h</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="a9269a87f775ac406e991ec2ea0682187"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::set&lt;<a class="el" href="classs3f_1_1s3fnet_1_1_open_flow_switch_session.html">OpenFlowSwitchSession</a>* &gt; <a class="el" href="classs3f_1_1s3fnet_1_1_controller.html#a9269a87f775ac406e991ec2ea0682187">s3f::s3fnet::Controller::Switches_t</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="openflow__controller_8h_source.html#l00114">114</a> of file <a class="el" href="openflow__controller_8h_source.html">openflow_controller.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa8eb71e66ba139087b47b75ff98cff48"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::DropController::ReceiveFromSwitch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_open_flow_switch_session.html">OpenFlowSwitchSession</a> *&#160;</td>
          <td class="paramname"><em>swtch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ofpbuf *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A switch calls this method to pass a message on to the <a class="el" href="classs3f_1_1s3fnet_1_1_controller.html" title="An interface for a non-entity-based OpenFlow controller. ">Controller</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">swtch</td><td>The switch the message was received from. </td></tr>
    <tr><td class="paramname">buffer</td><td>The message. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented from <a class="el" href="classs3f_1_1s3fnet_1_1_controller.html#ada1c4662fe285ab22f69106455c6df66">s3f::s3fnet::Controller</a>.</p>

<p>Definition at line <a class="el" href="openflow__controller_8cc_source.html#l00107">107</a> of file <a class="el" href="openflow__controller_8cc_source.html">openflow_controller.cc</a>.</p>

<p>References <a class="el" href="openflow__controller_8cc_source.html#l00049">s3f::s3fnet::Controller::BuildFlow()</a>, <a class="el" href="openflow__controller_8cc_source.html#l00079">s3f::s3fnet::Controller::GetPacketType()</a>, <a class="el" href="openflow__controller_8h_source.html#l00115">s3f::s3fnet::Controller::m_switches</a>, <a class="el" href="openflow__controller_8cc_source.html#l00018">OF_CTRL_DUMP</a>, <a class="el" href="openflow__controller_8cc_source.html#l00038">s3f::s3fnet::Controller::SendToSwitch()</a>, and <a class="el" href="openflow__controller_8h_source.html#l00071">s3f::s3fnet::Controller::type</a>.</p>
<div class="fragment"><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;{</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classs3f_1_1s3fnet_1_1_controller.html#a786ea9169f4435af0a2e284716d7bcbe">m_switches</a>.find (swtch) == <a class="code" href="classs3f_1_1s3fnet_1_1_controller.html#a786ea9169f4435af0a2e284716d7bcbe">m_switches</a>.end ())</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                <a class="code" href="openflow__controller_8cc.html#a15925b53e1cf08dd4cacdd4589638e24">OF_CTRL_DUMP</a>( printf(<span class="stringliteral">&quot;Can&#39;t receive from this switch, not registered to the Controller.\n&quot;</span>) );</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        }</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="comment">// We have received any packet at this point, so we pull the header to figure out what type of packet we&#39;re handling.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        uint8_t <a class="code" href="classs3f_1_1s3fnet_1_1_controller.html#a50329c32536baba80c29d2a89e1f18b7">type</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_controller.html#a464b8f431b0fdd1e043676d0b56fd280">GetPacketType</a> (buffer);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <span class="keywordflow">if</span> (type == OFPT_PACKET_IN) <span class="comment">// The switch didn&#39;t understand the packet it received, so it forwarded it to the controller.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                ofp_packet_in * opi = (ofp_packet_in*)ofpbuf_try_pull (buffer, offsetof (ofp_packet_in, data));</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                <span class="keywordtype">int</span> port = ntohs (opi-&gt;in_port);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                <span class="comment">// Create matching key.</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                sw_flow_key key;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                key.wildcards = 0;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                flow_extract (buffer, port != -1 ? port : OFPP_NONE, &amp;key.flow);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                ofp_flow_mod* ofm = <a class="code" href="classs3f_1_1s3fnet_1_1_controller.html#afac66b179ea9f8a3e2bac22c305acf10">BuildFlow</a> (key, opi-&gt;buffer_id, OFPFC_ADD, 0, 0, OFP_FLOW_PERMANENT, OFP_FLOW_PERMANENT);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <a class="code" href="classs3f_1_1s3fnet_1_1_controller.html#a3949026ede16af076ff9c2a41aa95895">SendToSwitch</a> (swtch, ofm, ofm-&gt;header.length);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_controller_html_a464b8f431b0fdd1e043676d0b56fd280"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_controller.html#a464b8f431b0fdd1e043676d0b56fd280">s3f::s3fnet::Controller::GetPacketType</a></div><div class="ttdeci">uint8_t GetPacketType(ofpbuf *buffer)</div><div class="ttdef"><b>Definition:</b> <a href="openflow__controller_8cc_source.html#l00079">openflow_controller.cc:79</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_controller_html_a50329c32536baba80c29d2a89e1f18b7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_controller.html#a50329c32536baba80c29d2a89e1f18b7">s3f::s3fnet::Controller::type</a></div><div class="ttdeci">int type</div><div class="ttdoc">model of the controller, e.g., learning_switch </div><div class="ttdef"><b>Definition:</b> <a href="openflow__controller_8h_source.html#l00071">openflow_controller.h:71</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_controller_html_a3949026ede16af076ff9c2a41aa95895"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_controller.html#a3949026ede16af076ff9c2a41aa95895">s3f::s3fnet::Controller::SendToSwitch</a></div><div class="ttdeci">virtual void SendToSwitch(OpenFlowSwitchSession *swtch, void *msg, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="openflow__controller_8cc_source.html#l00038">openflow_controller.cc:38</a></div></div>
<div class="ttc" id="openflow__controller_8cc_html_a15925b53e1cf08dd4cacdd4589638e24"><div class="ttname"><a href="openflow__controller_8cc.html#a15925b53e1cf08dd4cacdd4589638e24">OF_CTRL_DUMP</a></div><div class="ttdeci">#define OF_CTRL_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="openflow__controller_8cc_source.html#l00018">openflow_controller.cc:18</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_controller_html_afac66b179ea9f8a3e2bac22c305acf10"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_controller.html#afac66b179ea9f8a3e2bac22c305acf10">s3f::s3fnet::Controller::BuildFlow</a></div><div class="ttdeci">ofp_flow_mod * BuildFlow(sw_flow_key key, uint32_t buffer_id, uint16_t command, void *acts, size_t actions_len, int idle_timeout, int hard_timeout)</div><div class="ttdef"><b>Definition:</b> <a href="openflow__controller_8cc_source.html#l00049">openflow_controller.cc:49</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_controller_html_a786ea9169f4435af0a2e284716d7bcbe"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_controller.html#a786ea9169f4435af0a2e284716d7bcbe">s3f::s3fnet::Controller::m_switches</a></div><div class="ttdeci">Switches_t m_switches</div><div class="ttdoc">The collection of switches registered to this controller. </div><div class="ttdef"><b>Definition:</b> <a href="openflow__controller_8h_source.html#l00115">openflow_controller.h:115</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6173211dd8cd7767e48913792526ef68"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::Controller::AddSwitch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_open_flow_switch_session.html">OpenFlowSwitchSession</a> *&#160;</td>
          <td class="paramname"><em>swtch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Adds a switch to the controller. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">swtch</td><td>The switch to register. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classs3f_1_1s3fnet_1_1_learning_controller.html#af76669d5eb706e6fbd92293b6542a3c4">s3f::s3fnet::LearningController</a>.</p>

<p>Definition at line <a class="el" href="openflow__controller_8cc_source.html#l00026">26</a> of file <a class="el" href="openflow__controller_8cc_source.html">openflow_controller.cc</a>.</p>

<p>References <a class="el" href="errhandle_8cc_source.html#l00128">s3f::s3fnet::error_quit()</a>, and <a class="el" href="openflow__controller_8h_source.html#l00115">s3f::s3fnet::Controller::m_switches</a>.</p>

<p>Referenced by <a class="el" href="openflow__controller_8cc_source.html#l00269">s3f::s3fnet::LearningController::AddSwitch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;{</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classs3f_1_1s3fnet_1_1_controller.html#a786ea9169f4435af0a2e284716d7bcbe">m_switches</a>.find (swtch) != <a class="code" href="classs3f_1_1s3fnet_1_1_controller.html#a786ea9169f4435af0a2e284716d7bcbe">m_switches</a>.end ())</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;                <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a> (<span class="stringliteral">&quot;This Controller has already registered this switch!&quot;</span>);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        }</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;                <a class="code" href="classs3f_1_1s3fnet_1_1_controller.html#a786ea9169f4435af0a2e284716d7bcbe">m_switches</a>.insert (swtch);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        }</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;}</div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_aee6e3282670be024dcee8ac3cef67e85"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">s3f::s3fnet::error_quit</a></div><div class="ttdeci">void error_quit(const char *fmt,...)</div><div class="ttdoc">This function is called when there&#39;s a fatal error unrelated to a system call. </div><div class="ttdef"><b>Definition:</b> <a href="errhandle_8cc_source.html#l00128">errhandle.cc:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_controller_html_a786ea9169f4435af0a2e284716d7bcbe"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_controller.html#a786ea9169f4435af0a2e284716d7bcbe">s3f::s3fnet::Controller::m_switches</a></div><div class="ttdeci">Switches_t m_switches</div><div class="ttdoc">The collection of switches registered to this controller. </div><div class="ttdef"><b>Definition:</b> <a href="openflow__controller_8h_source.html#l00115">openflow_controller.h:115</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a80ff7d93c33f95df9f2144d0ff4bf446"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::Controller::StartDump </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structs3f_1_1s3fnet_1_1_stats_dump_callback.html">StatsDumpCallback</a> *&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Starts a callback-based, reliable, possibly multi-message reply to a request made by the controller. </p>
<p>If an incoming request needs to have a reliable reply that might require multiple messages, it can use <a class="el" href="classs3f_1_1s3fnet_1_1_controller.html#a80ff7d93c33f95df9f2144d0ff4bf446" title="Starts a callback-based, reliable, possibly multi-message reply to a request made by the controller...">StartDump()</a> to set up a callback that will be called as buffer space for replies.</p>
<p>A stats request made by the controller is processed by the switch, the switch then calls this method to tell the controller to start asking for information. By default (it can be overridden), the controller stops all work to run through the callback. ReceiveFromSwitch must be defined appropriately to handle the status reply messages generated by the switch, or otherwise the status reply messages will be sent and discarded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>The callback data. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="openflow__controller_8cc_source.html#l00087">87</a> of file <a class="el" href="openflow__controller_8cc_source.html">openflow_controller.cc</a>.</p>

<p>References <a class="el" href="openflow__controller_8cc_source.html#l00018">OF_CTRL_DUMP</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l01350">s3f::s3fnet::OpenFlowSwitchSession::StatsDone()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l01311">s3f::s3fnet::OpenFlowSwitchSession::StatsDump()</a>, and <a class="el" href="openflow__interface_8h_source.html#l00312">s3f::s3fnet::StatsDumpCallback::swtch</a>.</p>

<p>Referenced by <a class="el" href="openflow__switch__session_8cc_source.html#l01360">s3f::s3fnet::OpenFlowSwitchSession::ReceiveStatsRequest()</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordflow">if</span> (cb != 0)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                <span class="keywordtype">int</span> error = 1;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                <span class="keywordflow">while</span> (error &gt; 0) <span class="comment">// Switch&#39;s StatsDump returns 1 if the reply isn&#39;t complete.</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                        error = cb-&gt;swtch-&gt;StatsDump (cb);</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <span class="keywordflow">if</span> (error != 0) <span class="comment">// When the reply is complete, error will equal zero if there&#39;s no errors.</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                {</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                        <a class="code" href="openflow__controller_8cc.html#a15925b53e1cf08dd4cacdd4589638e24">OF_CTRL_DUMP</a> (cout &lt;&lt; <span class="stringliteral">&quot;Dump Callback Error: &quot;</span> &lt;&lt; strerror (-error) &lt;&lt; endl );</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <span class="comment">// Clean up</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                cb-&gt;swtch-&gt;StatsDone (cb);</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        }</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;}</div>
<div class="ttc" id="openflow__controller_8cc_html_a15925b53e1cf08dd4cacdd4589638e24"><div class="ttname"><a href="openflow__controller_8cc.html#a15925b53e1cf08dd4cacdd4589638e24">OF_CTRL_DUMP</a></div><div class="ttdeci">#define OF_CTRL_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="openflow__controller_8cc_source.html#l00018">openflow_controller.cc:18</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3949026ede16af076ff9c2a41aa95895"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::Controller::SendToSwitch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_open_flow_switch_session.html">OpenFlowSwitchSession</a> *&#160;</td>
          <td class="paramname"><em>swtch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>However the controller is implemented, this method is to be used to pass a message on to a switch.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">swtch</td><td>The switch to receive the message. </td></tr>
    <tr><td class="paramname">msg</td><td>The message to send. </td></tr>
    <tr><td class="paramname">length</td><td>The length of the message. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="openflow__controller_8cc_source.html#l00038">38</a> of file <a class="el" href="openflow__controller_8cc_source.html">openflow_controller.cc</a>.</p>

<p>References <a class="el" href="errhandle_8cc_source.html#l00128">s3f::s3fnet::error_quit()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l01438">s3f::s3fnet::OpenFlowSwitchSession::ForwardControlInput()</a>, and <a class="el" href="openflow__controller_8h_source.html#l00115">s3f::s3fnet::Controller::m_switches</a>.</p>

<p>Referenced by <a class="el" href="openflow__controller_8cc_source.html#l00175">s3f::s3fnet::LearningController::process_recv_packet()</a>, and <a class="el" href="openflow__controller_8cc_source.html#l00107">ReceiveFromSwitch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;{</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classs3f_1_1s3fnet_1_1_controller.html#a786ea9169f4435af0a2e284716d7bcbe">m_switches</a>.find (swtch) == <a class="code" href="classs3f_1_1s3fnet_1_1_controller.html#a786ea9169f4435af0a2e284716d7bcbe">m_switches</a>.end ())</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a> (<span class="stringliteral">&quot;Can&#39;t send to this switch, not registered to the Controller.&quot;</span>);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        }</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        swtch-&gt;ForwardControlInput (msg, length);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;}</div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_aee6e3282670be024dcee8ac3cef67e85"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">s3f::s3fnet::error_quit</a></div><div class="ttdeci">void error_quit(const char *fmt,...)</div><div class="ttdoc">This function is called when there&#39;s a fatal error unrelated to a system call. </div><div class="ttdef"><b>Definition:</b> <a href="errhandle_8cc_source.html#l00128">errhandle.cc:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_controller_html_a786ea9169f4435af0a2e284716d7bcbe"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_controller.html#a786ea9169f4435af0a2e284716d7bcbe">s3f::s3fnet::Controller::m_switches</a></div><div class="ttdeci">Switches_t m_switches</div><div class="ttdoc">The collection of switches registered to this controller. </div><div class="ttdef"><b>Definition:</b> <a href="openflow__controller_8h_source.html#l00115">openflow_controller.h:115</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afac66b179ea9f8a3e2bac22c305acf10"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ofp_flow_mod * s3f::s3fnet::Controller::BuildFlow </td>
          <td>(</td>
          <td class="paramtype">sw_flow_key&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>buffer_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>acts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>actions_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idle_timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hard_timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Construct flow data from a matching key to build a flow entry for adding, modifying, or deleting a flow.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The matching key data; used to create a flow that matches the packet. </td></tr>
    <tr><td class="paramname">buffer_id</td><td>The OpenFlow Buffer ID; used to run the actions on the packet if we add or modify the flow. </td></tr>
    <tr><td class="paramname">command</td><td>Whether to add, modify, or delete this flow. </td></tr>
    <tr><td class="paramname">acts</td><td>List of actions to execute. </td></tr>
    <tr><td class="paramname">actions_len</td><td>Length of the actions buffer. </td></tr>
    <tr><td class="paramname">idle_timeout</td><td>Flow expires if left inactive for this amount of time (specify OFP_FLOW_PERMANENT to disable feature). </td></tr>
    <tr><td class="paramname">hard_timeout</td><td>Flow expires after this amount of time (specify OFP_FLOW_PERMANENT to disable feature). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Flow data that when passed to SetFlow will add, modify, or delete a flow it defines. </dd></dl>

<p>Definition at line <a class="el" href="openflow__controller_8cc_source.html#l00049">49</a> of file <a class="el" href="openflow__controller_8cc_source.html">openflow_controller.cc</a>.</p>

<p>Referenced by <a class="el" href="openflow__controller_8cc_source.html#l00175">s3f::s3fnet::LearningController::process_recv_packet()</a>, and <a class="el" href="openflow__controller_8cc_source.html#l00107">ReceiveFromSwitch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;{</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        ofp_flow_mod* ofm = (ofp_flow_mod*)malloc (<span class="keyword">sizeof</span>(ofp_flow_mod) + actions_len);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        ofm-&gt;header.version = OFP_VERSION;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        ofm-&gt;header.type = OFPT_FLOW_MOD;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        ofm-&gt;header.length = htons (<span class="keyword">sizeof</span>(ofp_flow_mod) + actions_len);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        ofm-&gt;command = htons (command);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        ofm-&gt;idle_timeout = htons (idle_timeout);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        ofm-&gt;hard_timeout = htons (hard_timeout);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        ofm-&gt;buffer_id = htonl (buffer_id);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        ofm-&gt;priority = OFP_DEFAULT_PRIORITY;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        memcpy (ofm-&gt;actions,acts,actions_len);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        ofm-&gt;match.wildcards = key.wildcards;                                 <span class="comment">// Wildcard fields</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        ofm-&gt;match.in_port = key.flow.in_port;                                <span class="comment">// Input switch port</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        memcpy (ofm-&gt;match.dl_src, key.flow.dl_src, <span class="keyword">sizeof</span> ofm-&gt;match.dl_src); <span class="comment">// Ethernet source address.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        memcpy (ofm-&gt;match.dl_dst, key.flow.dl_dst, <span class="keyword">sizeof</span> ofm-&gt;match.dl_dst); <span class="comment">// Ethernet destination address.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        ofm-&gt;match.dl_vlan = key.flow.dl_vlan;                                <span class="comment">// Input VLAN OFP_VLAN_NONE;</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        ofm-&gt;match.dl_type = key.flow.dl_type;                                <span class="comment">// Ethernet frame type ETH_TYPE_IP;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        ofm-&gt;match.nw_proto = key.flow.nw_proto;                              <span class="comment">// IP Protocol</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        ofm-&gt;match.nw_src = key.flow.nw_src;                                  <span class="comment">// IP source address</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        ofm-&gt;match.nw_dst = key.flow.nw_dst;                                  <span class="comment">// IP destination address</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        ofm-&gt;match.tp_src = key.flow.tp_src;                                  <span class="comment">// TCP/UDP source port</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        ofm-&gt;match.tp_dst = key.flow.tp_dst;                                  <span class="comment">// TCP/UDP destination port</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        ofm-&gt;match.mpls_label1 = key.flow.mpls_label1;                        <span class="comment">// Top of label stack htonl(MPLS_INVALID_LABEL);</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        ofm-&gt;match.mpls_label2 = key.flow.mpls_label1;                        <span class="comment">// Second label (if available) htonl(MPLS_INVALID_LABEL);</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keywordflow">return</span> ofm;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a464b8f431b0fdd1e043676d0b56fd280"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t s3f::s3fnet::Controller::GetPacketType </td>
          <td>(</td>
          <td class="paramtype">ofpbuf *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Get the packet type on the buffer, which can then be used to determine how to handle the buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The packet in OpenFlow buffer format. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The packet type, as defined in the ofp_type struct. </dd></dl>

<p>Definition at line <a class="el" href="openflow__controller_8cc_source.html#l00079">79</a> of file <a class="el" href="openflow__controller_8cc_source.html">openflow_controller.cc</a>.</p>

<p>References <a class="el" href="openflow__controller_8h_source.html#l00071">s3f::s3fnet::Controller::type</a>.</p>

<p>Referenced by <a class="el" href="openflow__controller_8cc_source.html#l00107">ReceiveFromSwitch()</a>, and <a class="el" href="openflow__controller_8cc_source.html#l00145">s3f::s3fnet::LearningController::ReceiveFromSwitch()</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;{</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        ofp_header* hdr = (ofp_header*)ofpbuf_try_pull (buffer, <span class="keyword">sizeof</span> (ofp_header));</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        uint8_t <a class="code" href="classs3f_1_1s3fnet_1_1_controller.html#a50329c32536baba80c29d2a89e1f18b7">type</a> = hdr-&gt;type;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        ofpbuf_push_uninit (buffer, <span class="keyword">sizeof</span> (ofp_header));</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_controller.html#a50329c32536baba80c29d2a89e1f18b7">type</a>;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_controller_html_a50329c32536baba80c29d2a89e1f18b7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_controller.html#a50329c32536baba80c29d2a89e1f18b7">s3f::s3fnet::Controller::type</a></div><div class="ttdeci">int type</div><div class="ttdoc">model of the controller, e.g., learning_switch </div><div class="ttdef"><b>Definition:</b> <a href="openflow__controller_8h_source.html#l00071">openflow_controller.h:71</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a50329c32536baba80c29d2a89e1f18b7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::Controller::type</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>model of the controller, e.g., learning_switch </p>

<p>Definition at line <a class="el" href="openflow__controller_8h_source.html#l00071">71</a> of file <a class="el" href="openflow__controller_8h_source.html">openflow_controller.h</a>.</p>

<p>Referenced by <a class="el" href="openflow__controller_8cc_source.html#l00079">s3f::s3fnet::Controller::GetPacketType()</a>, <a class="el" href="net_8cc_source.html#l00031">s3f::s3fnet::Net::Net()</a>, <a class="el" href="openflow__controller_8cc_source.html#l00107">ReceiveFromSwitch()</a>, <a class="el" href="openflow__controller_8cc_source.html#l00145">s3f::s3fnet::LearningController::ReceiveFromSwitch()</a>, and <a class="el" href="openflow__switch__session_8cc_source.html#l00270">s3f::s3fnet::OpenFlowSwitchSession::SetController()</a>.</p>

</div>
</div>
<a class="anchor" id="a786ea9169f4435af0a2e284716d7bcbe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classs3f_1_1s3fnet_1_1_controller.html#a9269a87f775ac406e991ec2ea0682187">Switches_t</a> s3f::s3fnet::Controller::m_switches</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The collection of switches registered to this controller. </p>

<p>Definition at line <a class="el" href="openflow__controller_8h_source.html#l00115">115</a> of file <a class="el" href="openflow__controller_8h_source.html">openflow_controller.h</a>.</p>

<p>Referenced by <a class="el" href="openflow__controller_8cc_source.html#l00026">s3f::s3fnet::Controller::AddSwitch()</a>, <a class="el" href="openflow__controller_8cc_source.html#l00107">ReceiveFromSwitch()</a>, <a class="el" href="openflow__controller_8cc_source.html#l00145">s3f::s3fnet::LearningController::ReceiveFromSwitch()</a>, <a class="el" href="openflow__controller_8cc_source.html#l00038">s3f::s3fnet::Controller::SendToSwitch()</a>, and <a class="el" href="openflow__controller_8h_source.html#l00032">s3f::s3fnet::Controller::~Controller()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="openflow__controller_8h_source.html">openflow_controller.h</a></li>
<li><a class="el" href="openflow__controller_8cc_source.html">openflow_controller.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaces3f.html">s3f</a></li><li class="navelem"><a class="el" href="namespaces3f_1_1s3fnet.html">s3fnet</a></li><li class="navelem"><a class="el" href="classs3f_1_1s3fnet_1_1_drop_controller.html">DropController</a></li>
    <li class="footer">Generated on Tue Apr 15 2014 00:36:02 for S3F by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
