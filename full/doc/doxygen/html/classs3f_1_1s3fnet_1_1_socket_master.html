<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>S3F: s3f::s3fnet::SocketMaster Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">S3F
   &#160;<span id="projectnumber">2.1.0_full_version</span>
   </div>
   <div id="projectbrief">Simpler Scalable Simulation Framework + S3F-based Network Testbed (Simulation, OpenVZ-based Emulation, and OpenFlow-based SDN)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classs3f_1_1s3fnet_1_1_socket_master.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="classs3f_1_1s3fnet_1_1_socket_master-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">s3f::s3fnet::SocketMaster Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The socket master protocol session.  
 <a href="classs3f_1_1s3fnet_1_1_socket_master.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="socket__master_8h_source.html">socket_master.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for s3f::s3fnet::SocketMaster:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="classs3f_1_1s3fnet_1_1_socket_master.png" usemap="#s3f::s3fnet::SocketMaster_map" alt=""/>
  <map id="s3f::s3fnet::SocketMaster_map" name="s3f::s3fnet::SocketMaster_map">
<area href="classs3f_1_1s3fnet_1_1_protocol_session.html" title="A protocol layer on the protocol stack. " alt="s3f::s3fnet::ProtocolSession" shape="rect" coords="0,56,166,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a683dd9bc9c34204838e69790fd82f098"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a683dd9bc9c34204838e69790fd82f098">InstantiationType</a> { <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a683dd9bc9c34204838e69790fd82f098ae42986263d7158bc7101239e74796ef9">PROT_UNIQUE_INSTANCE</a> = 0x00, 
<a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a683dd9bc9c34204838e69790fd82f098a3dd8d2d1f947cb4c3b24673626b442e4">PROT_MULTIPLE_INSTANCES</a> = 0x01, 
<a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a683dd9bc9c34204838e69790fd82f098abecaf2bc52af031a71f58a323dee96f3">PROT_MULTIPLE_IMPLEMENTATIONS</a> = 0x02
 }</td></tr>
<tr class="memdesc:a683dd9bc9c34204838e69790fd82f098"><td class="mdescLeft">&#160;</td><td class="mdescRight">Multiple protocol session instantiation type.  <a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a683dd9bc9c34204838e69790fd82f098">More...</a><br/></td></tr>
<tr class="separator:a683dd9bc9c34204838e69790fd82f098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3846269d44f267c44706152b1a78a118"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118">ExecutionStage</a> { <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a19592cb46ffb28c788fd51db257d8798">PSESS_CREATED</a> = 0, 
<a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a3c91a49267ae29962158ec8e5aa75552">PSESS_CONFIGURED</a> = 1, 
<a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118acf01674e118c3a7d2cd7d8d6b6002d9a">PSESS_INITIALIZED</a> = 2, 
<a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a6b110ae59ed74fa48faf95206a60aba4">PSESS_WRAPPED_UP</a> = 3
 }</td></tr>
<tr class="memdesc:a3846269d44f267c44706152b1a78a118"><td class="mdescLeft">&#160;</td><td class="mdescRight">A normal protocol session must go though the following stages.  <a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118">More...</a><br/></td></tr>
<tr class="separator:a3846269d44f267c44706152b1a78a118"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a0fe9ad00a5968cbc54b9d8b80ed0f031"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a0fe9ad00a5968cbc54b9d8b80ed0f031">SocketMaster</a> (<a class="el" href="classs3f_1_1s3fnet_1_1_protocol_graph.html">ProtocolGraph</a> *graph)</td></tr>
<tr class="memdesc:a0fe9ad00a5968cbc54b9d8b80ed0f031"><td class="mdescLeft">&#160;</td><td class="mdescRight">The constructor.  <a href="#a0fe9ad00a5968cbc54b9d8b80ed0f031">More...</a><br/></td></tr>
<tr class="separator:a0fe9ad00a5968cbc54b9d8b80ed0f031"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae053c5db5278283819b4ea96c5fcb593"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#ae053c5db5278283819b4ea96c5fcb593">~SocketMaster</a> ()</td></tr>
<tr class="memdesc:ae053c5db5278283819b4ea96c5fcb593"><td class="mdescLeft">&#160;</td><td class="mdescRight">The destructor.  <a href="#ae053c5db5278283819b4ea96c5fcb593">More...</a><br/></td></tr>
<tr class="separator:ae053c5db5278283819b4ea96c5fcb593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74d720002dc82a18bac0b7bb8bae4ecd"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a74d720002dc82a18bac0b7bb8bae4ecd">getProtocolNumber</a> ()</td></tr>
<tr class="memdesc:a74d720002dc82a18bac0b7bb8bae4ecd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the protocol number.  <a href="#a74d720002dc82a18bac0b7bb8bae4ecd">More...</a><br/></td></tr>
<tr class="separator:a74d720002dc82a18bac0b7bb8bae4ecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3110000e139e96fc41d8ed0e4548f9d"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#ae3110000e139e96fc41d8ed0e4548f9d">init</a> ()</td></tr>
<tr class="memdesc:ae3110000e139e96fc41d8ed0e4548f9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the socket master.  <a href="#ae3110000e139e96fc41d8ed0e4548f9d">More...</a><br/></td></tr>
<tr class="separator:ae3110000e139e96fc41d8ed0e4548f9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af91624546c77ffa9ee39fb481a5323ac"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#af91624546c77ffa9ee39fb481a5323ac">control</a> (int ctrltyp, void *ctrlmsg, <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html">ProtocolSession</a> *sess)</td></tr>
<tr class="memdesc:af91624546c77ffa9ee39fb481a5323ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control messages are passed through this function.  <a href="#af91624546c77ffa9ee39fb481a5323ac">More...</a><br/></td></tr>
<tr class="separator:af91624546c77ffa9ee39fb481a5323ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9aaee72acf7f9fae2d07551a44f799c"><td class="memItemLeft" align="right" valign="top">virtual const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa9aaee72acf7f9fae2d07551a44f799c">psesstype</a> ()</td></tr>
<tr class="separator:aa9aaee72acf7f9fae2d07551a44f799c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4be12a95b5a155e80e7323b63f1d659"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#ae4be12a95b5a155e80e7323b63f1d659">socket</a> ()</td></tr>
<tr class="memdesc:ae4be12a95b5a155e80e7323b63f1d659"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new socket id.  <a href="#ae4be12a95b5a155e80e7323b63f1d659">More...</a><br/></td></tr>
<tr class="separator:ae4be12a95b5a155e80e7323b63f1d659"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53fda11b1130ee4e7e355eaed9f9a328"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a53fda11b1130ee4e7e355eaed9f9a328">bind</a> (int sock, <a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a> source_ip, <a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a> source_port, char *protocol, <a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> options=0)</td></tr>
<tr class="memdesc:a53fda11b1130ee4e7e355eaed9f9a328"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bind the socket Binds the socket with the source ip address, port, and the protocol that maintains the socket.  <a href="#a53fda11b1130ee4e7e355eaed9f9a328">More...</a><br/></td></tr>
<tr class="separator:a53fda11b1130ee4e7e355eaed9f9a328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9663f2fcf4463362bf8e78a19438da4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa9663f2fcf4463362bf8e78a19438da4">listen</a> (int sock, <a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> queuesize)</td></tr>
<tr class="memdesc:aa9663f2fcf4463362bf8e78a19438da4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Listens for incoming connections This function set up the socket so that it can queue up to 'queuesize' number of foreign connection attempts.  <a href="#aa9663f2fcf4463362bf8e78a19438da4">More...</a><br/></td></tr>
<tr class="separator:aa9663f2fcf4463362bf8e78a19438da4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12144430e545672039573d22f11a363c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a12144430e545672039573d22f11a363c">connected</a> (int sock, <a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a> *peer_ip=NULL, <a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a> *peer_port=NULL)</td></tr>
<tr class="memdesc:a12144430e545672039573d22f11a363c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates if the socket is connected.  <a href="#a12144430e545672039573d22f11a363c">More...</a><br/></td></tr>
<tr class="separator:a12144430e545672039573d22f11a363c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9be2a4ec513154f2f342e4132c1189b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#ac9be2a4ec513154f2f342e4132c1189b">eof</a> (int sock)</td></tr>
<tr class="memdesc:ac9be2a4ec513154f2f342e4132c1189b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates end of connection.  <a href="#ac9be2a4ec513154f2f342e4132c1189b">More...</a><br/></td></tr>
<tr class="separator:ac9be2a4ec513154f2f342e4132c1189b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a580cc9f6217555a76195eea53333f641"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a580cc9f6217555a76195eea53333f641">abort</a> (int sock)</td></tr>
<tr class="memdesc:a580cc9f6217555a76195eea53333f641"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the connections and invalidate the socket.  <a href="#a580cc9f6217555a76195eea53333f641">More...</a><br/></td></tr>
<tr class="separator:a580cc9f6217555a76195eea53333f641"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a23a0380446d77d2aa6d3bc664a5f18"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a7a23a0380446d77d2aa6d3bc664a5f18">connect</a> (int sock, <a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a> ip, <a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a> port, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *caller)</td></tr>
<tr class="memdesc:a7a23a0380446d77d2aa6d3bc664a5f18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to remote host This function establishes a connection to the given destination ip and port.  <a href="#a7a23a0380446d77d2aa6d3bc664a5f18">More...</a><br/></td></tr>
<tr class="separator:a7a23a0380446d77d2aa6d3bc664a5f18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4122f85228f29c27b14d36901726428"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#ad4122f85228f29c27b14d36901726428">accept</a> (int sock, bool make_new_socket, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *caller, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *first_conn_notify=0)</td></tr>
<tr class="memdesc:ad4122f85228f29c27b14d36901726428"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for arrival of a connection request.  <a href="#ad4122f85228f29c27b14d36901726428">More...</a><br/></td></tr>
<tr class="separator:ad4122f85228f29c27b14d36901726428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdb0d6623b4205af508d8a9387407911"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#afdb0d6623b4205af508d8a9387407911">send</a> (int sock, <a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> length, <a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *msg, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *caller)</td></tr>
<tr class="memdesc:afdb0d6623b4205af508d8a9387407911"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data to remote host Send a message of the given length and return the number of bytes that have been sent successfully.  <a href="#afdb0d6623b4205af508d8a9387407911">More...</a><br/></td></tr>
<tr class="separator:afdb0d6623b4205af508d8a9387407911"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ae73062577eb5d9c52e22120f35f75b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a6ae73062577eb5d9c52e22120f35f75b">recv</a> (int sock, <a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> bufsiz, <a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *buffer, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *caller)</td></tr>
<tr class="memdesc:a6ae73062577eb5d9c52e22120f35f75b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive data from remote host Receive a message of the given length.  <a href="#a6ae73062577eb5d9c52e22120f35f75b">More...</a><br/></td></tr>
<tr class="separator:a6ae73062577eb5d9c52e22120f35f75b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdfff7f14652217ac5c15c429f564b54"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#acdfff7f14652217ac5c15c429f564b54">close</a> (int sock, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *caller)</td></tr>
<tr class="memdesc:acdfff7f14652217ac5c15c429f564b54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminate the connection Close the connection and invalidate the socket.  <a href="#acdfff7f14652217ac5c15c429f564b54">More...</a><br/></td></tr>
<tr class="separator:acdfff7f14652217ac5c15c429f564b54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5de6e730825a580093d46aa930341768"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a5de6e730825a580093d46aa930341768">config</a> (s3f::dml::Configuration *cfg)</td></tr>
<tr class="memdesc:a5de6e730825a580093d46aa930341768"><td class="mdescLeft">&#160;</td><td class="mdescRight">The config method is used to configure the protocol session from DML description.  <a href="#a5de6e730825a580093d46aa930341768">More...</a><br/></td></tr>
<tr class="separator:a5de6e730825a580093d46aa930341768"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79b1d48edbb1aec6b740de60666414f2"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a79b1d48edbb1aec6b740de60666414f2">wrapup</a> ()</td></tr>
<tr class="memdesc:a79b1d48edbb1aec6b740de60666414f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The method is used to wrap up the protocol session.  <a href="#a79b1d48edbb1aec6b740de60666414f2">More...</a><br/></td></tr>
<tr class="separator:a79b1d48edbb1aec6b740de60666414f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a9fa5693373188218eba85c782583e7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a1a9fa5693373188218eba85c782583e7">pushdown</a> (<a class="el" href="message_8h.html#a093346897a71a253ceb5aaa3785721a0">Activation</a> msg, <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html">ProtocolSession</a> *hi_sess, void *extinfo=0, size_t extinfo_size=0)</td></tr>
<tr class="memdesc:a1a9fa5693373188218eba85c782583e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The original push method is divided into <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a1a9fa5693373188218eba85c782583e7" title="The original push method is divided into pushdown() and push(). ">pushdown()</a> and <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a802569fda5b2814f662ea5b4d39ce767" title="The method is called when a message is pushed down to this protocol session from the protocol session...">push()</a>.  <a href="#a1a9fa5693373188218eba85c782583e7">More...</a><br/></td></tr>
<tr class="separator:a1a9fa5693373188218eba85c782583e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3f962741a6c055135d2cab28ea0b9c8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#af3f962741a6c055135d2cab28ea0b9c8">popup</a> (<a class="el" href="message_8h.html#a093346897a71a253ceb5aaa3785721a0">Activation</a> msg, <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html">ProtocolSession</a> *lo_sess, void *extinfo=0, size_t extinfo_size=0)</td></tr>
<tr class="memdesc:af3f962741a6c055135d2cab28ea0b9c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The original pop method is divided into <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#af3f962741a6c055135d2cab28ea0b9c8" title="The original pop method is divided into popup() and pop(). ">popup()</a> and <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#ad30fc9c677829b84f849716df872fe11" title="The method is called when a message is popped up to this protocol session from the protocol session b...">pop()</a>.  <a href="#af3f962741a6c055135d2cab28ea0b9c8">More...</a><br/></td></tr>
<tr class="separator:af3f962741a6c055135d2cab28ea0b9c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a383bfb5d8385ab3ddbabaeba2e4a38aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_graph.html">ProtocolGraph</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a383bfb5d8385ab3ddbabaeba2e4a38aa">inGraph</a> ()</td></tr>
<tr class="memdesc:a383bfb5d8385ab3ddbabaeba2e4a38aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">The method returns the protocol graph in which this protocol session resides.  <a href="#a383bfb5d8385ab3ddbabaeba2e4a38aa">More...</a><br/></td></tr>
<tr class="separator:a383bfb5d8385ab3ddbabaeba2e4a38aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afadb38bfa4c4daa1049b229d7abce81c"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classs3f_1_1s3fnet_1_1_host.html">Host</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a> ()</td></tr>
<tr class="memdesc:afadb38bfa4c4daa1049b229d7abce81c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a pointer to the host owning this protocol session.  <a href="#afadb38bfa4c4daa1049b229d7abce81c">More...</a><br/></td></tr>
<tr class="separator:afadb38bfa4c4daa1049b229d7abce81c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ffe57c5dfd8cc847d566acf4581b968"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_random_1_1_r_n_g.html">Random::RNG</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a9ffe57c5dfd8cc847d566acf4581b968">getRandom</a> ()</td></tr>
<tr class="memdesc:a9ffe57c5dfd8cc847d566acf4581b968"><td class="mdescLeft">&#160;</td><td class="mdescRight">The method returns a pointer to the random number generator.  <a href="#a9ffe57c5dfd8cc847d566acf4581b968">More...</a><br/></td></tr>
<tr class="separator:a9ffe57c5dfd8cc847d566acf4581b968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a8fc3b0c62b09c82b72268b56abb58c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7a8fc3b0c62b09c82b72268b56abb58c">getNow</a> ()</td></tr>
<tr class="memdesc:a7a8fc3b0c62b09c82b72268b56abb58c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The method returns the current simulation time.  <a href="#a7a8fc3b0c62b09c82b72268b56abb58c">More...</a><br/></td></tr>
<tr class="separator:a7a8fc3b0c62b09c82b72268b56abb58c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0250c97bad17f18ef7037fd76f7e5083"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a0250c97bad17f18ef7037fd76f7e5083">getNowWithThousandSeparator</a> ()</td></tr>
<tr class="memdesc:a0250c97bad17f18ef7037fd76f7e5083"><td class="mdescLeft">&#160;</td><td class="mdescRight">For printing the current simulation time in a better readable format.  <a href="#a0250c97bad17f18ef7037fd76f7e5083">More...</a><br/></td></tr>
<tr class="separator:a0250c97bad17f18ef7037fd76f7e5083"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a422a77ab55edab25263965f7eaf5458e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a422a77ab55edab25263965f7eaf5458e">configured</a> ()</td></tr>
<tr class="memdesc:a422a77ab55edab25263965f7eaf5458e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method returns true if the protocol session has been configured.  <a href="#a422a77ab55edab25263965f7eaf5458e">More...</a><br/></td></tr>
<tr class="separator:a422a77ab55edab25263965f7eaf5458e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca7233711f9c8c606c611ec97ee29cdb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#aca7233711f9c8c606c611ec97ee29cdb">initialized</a> ()</td></tr>
<tr class="memdesc:aca7233711f9c8c606c611ec97ee29cdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method returns true if the protocol session has been initialized.  <a href="#aca7233711f9c8c606c611ec97ee29cdb">More...</a><br/></td></tr>
<tr class="separator:aca7233711f9c8c606c611ec97ee29cdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac934416dd1e279568a3bef2e8a6b045d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#ac934416dd1e279568a3bef2e8a6b045d">wrapped_up</a> ()</td></tr>
<tr class="memdesc:ac934416dd1e279568a3bef2e8a6b045d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method returns true if the protocol session has been wrapped up.  <a href="#ac934416dd1e279568a3bef2e8a6b045d">More...</a><br/></td></tr>
<tr class="separator:ac934416dd1e279568a3bef2e8a6b045d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a7eedcbe4da39cba727d26f1339ac7c47"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7eedcbe4da39cba727d26f1339ac7c47">name</a></td></tr>
<tr class="memdesc:a7eedcbe4da39cba727d26f1339ac7c47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Symbolic name of the protocol this session implements.  <a href="#a7eedcbe4da39cba727d26f1339ac7c47">More...</a><br/></td></tr>
<tr class="separator:a7eedcbe4da39cba727d26f1339ac7c47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bb8b1c69b73b59173827f60dc2cacd0"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a4bb8b1c69b73b59173827f60dc2cacd0">version</a></td></tr>
<tr class="memdesc:a4bb8b1c69b73b59173827f60dc2cacd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Version number of this protocol implemenntation, represented as a floating point number (e.g., 1.23).  <a href="#a4bb8b1c69b73b59173827f60dc2cacd0">More...</a><br/></td></tr>
<tr class="separator:a4bb8b1c69b73b59173827f60dc2cacd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6085e2d490de56b7feec0941b37cf8fe"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a6085e2d490de56b7feec0941b37cf8fe">use</a></td></tr>
<tr class="memdesc:a6085e2d490de56b7feec0941b37cf8fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of the protocol class from which this protocol session is instantiated.  <a href="#a6085e2d490de56b7feec0941b37cf8fe">More...</a><br/></td></tr>
<tr class="separator:a6085e2d490de56b7feec0941b37cf8fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aa51a58df2b6af30fc17f80eb8193344e"><td class="memItemLeft" align="right" valign="top">typedef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a> (int, <a class="el" href="classs3f_1_1s3fnet_1_1_socket.html">Socket</a> *) SOCK_MAP</td></tr>
<tr class="separator:aa51a58df2b6af30fc17f80eb8193344e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a184dec7b5d13fa4b9459d46bf75902be"><td class="memItemLeft" align="right" valign="top">typedef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a184dec7b5d13fa4b9459d46bf75902be">S3FNET_SET</a> (int) SOCK_SET</td></tr>
<tr class="separator:a184dec7b5d13fa4b9459d46bf75902be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a399f44fe5680907c95aff451e414c98e"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a399f44fe5680907c95aff451e414c98e">instantiation_type</a> ()</td></tr>
<tr class="memdesc:a399f44fe5680907c95aff451e414c98e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method controls how protocol instances can coexist with one another.  <a href="#a399f44fe5680907c95aff451e414c98e">More...</a><br/></td></tr>
<tr class="separator:a399f44fe5680907c95aff451e414c98e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a3ac0eb241a2a18527be17fa1f4271f89"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a3ac0eb241a2a18527be17fa1f4271f89">new_sockid</a></td></tr>
<tr class="memdesc:a3ac0eb241a2a18527be17fa1f4271f89"><td class="mdescLeft">&#160;</td><td class="mdescRight">The next available socket id.  <a href="#a3ac0eb241a2a18527be17fa1f4271f89">More...</a><br/></td></tr>
<tr class="separator:a3ac0eb241a2a18527be17fa1f4271f89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88eb3246f5fcb3424d5e72198a2f9062"><td class="memItemLeft" align="right" valign="top">SOCK_MAP&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a></td></tr>
<tr class="memdesc:a88eb3246f5fcb3424d5e72198a2f9062"><td class="mdescLeft">&#160;</td><td class="mdescRight">A map from a socket id to a bound socket.  <a href="#a88eb3246f5fcb3424d5e72198a2f9062">More...</a><br/></td></tr>
<tr class="separator:a88eb3246f5fcb3424d5e72198a2f9062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43975cb9dfee4f948fd1b08f7127a59a"><td class="memItemLeft" align="right" valign="top">SOCK_SET&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a43975cb9dfee4f948fd1b08f7127a59a">unbound_socks</a></td></tr>
<tr class="memdesc:a43975cb9dfee4f948fd1b08f7127a59a"><td class="mdescLeft">&#160;</td><td class="mdescRight">A set of unbound socket ids.  <a href="#a43975cb9dfee4f948fd1b08f7127a59a">More...</a><br/></td></tr>
<tr class="separator:a43975cb9dfee4f948fd1b08f7127a59a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e93967a56c673f625b486d2fe389067"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_graph.html">ProtocolGraph</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a9e93967a56c673f625b486d2fe389067">ingraph</a></td></tr>
<tr class="memdesc:a9e93967a56c673f625b486d2fe389067"><td class="mdescLeft">&#160;</td><td class="mdescRight">Points to the protocol graph.  <a href="#a9e93967a56c673f625b486d2fe389067">More...</a><br/></td></tr>
<tr class="separator:a9e93967a56c673f625b486d2fe389067"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41caeb7af8ef9b2d1b3ead0bedfe63c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_random_1_1_r_n_g.html">Random::RNG</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a41caeb7af8ef9b2d1b3ead0bedfe63c9">sess_rng</a></td></tr>
<tr class="memdesc:a41caeb7af8ef9b2d1b3ead0bedfe63c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to a random number generator.  <a href="#a41caeb7af8ef9b2d1b3ead0bedfe63c9">More...</a><br/></td></tr>
<tr class="separator:a41caeb7af8ef9b2d1b3ead0bedfe63c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a446b7857e72ac901402821230f5bcd60"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a446b7857e72ac901402821230f5bcd60">stage</a></td></tr>
<tr class="memdesc:a446b7857e72ac901402821230f5bcd60"><td class="mdescLeft">&#160;</td><td class="mdescRight">This variable indicates the current stage of this protocol session.  <a href="#a446b7857e72ac901402821230f5bcd60">More...</a><br/></td></tr>
<tr class="separator:a446b7857e72ac901402821230f5bcd60"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a43fa41d42fe459891c947da54e43c725"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a43fa41d42fe459891c947da54e43c725">connect1</a> (int sock, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *caller)</td></tr>
<tr class="memdesc:a43fa41d42fe459891c947da54e43c725"><td class="mdescLeft">&#160;</td><td class="mdescRight">continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a43fa41d42fe459891c947da54e43c725" title="continuations of the method connect1() in the standard socket interface ">connect1()</a> in the standard socket interface  <a href="#a43fa41d42fe459891c947da54e43c725">More...</a><br/></td></tr>
<tr class="separator:a43fa41d42fe459891c947da54e43c725"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f7d681bae5d5265e9a2db34eef1ca7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f7d681bae5d5265e9a2db34eef1ca7e">accept1a</a> (int sock, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *caller)</td></tr>
<tr class="memdesc:a8f7d681bae5d5265e9a2db34eef1ca7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f7d681bae5d5265e9a2db34eef1ca7e" title="continuations of the method accept1a() in the standard socket interface ">accept1a()</a> in the standard socket interface  <a href="#a8f7d681bae5d5265e9a2db34eef1ca7e">More...</a><br/></td></tr>
<tr class="separator:a8f7d681bae5d5265e9a2db34eef1ca7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ef1fbddfa27da700ff93752a4aa3dea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a0ef1fbddfa27da700ff93752a4aa3dea">accept1b</a> (int sock, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *caller)</td></tr>
<tr class="memdesc:a0ef1fbddfa27da700ff93752a4aa3dea"><td class="mdescLeft">&#160;</td><td class="mdescRight">continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a0ef1fbddfa27da700ff93752a4aa3dea" title="continuations of the method accept1b() in the standard socket interface ">accept1b()</a> in the standard socket interface  <a href="#a0ef1fbddfa27da700ff93752a4aa3dea">More...</a><br/></td></tr>
<tr class="separator:a0ef1fbddfa27da700ff93752a4aa3dea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a330ff9858e4d98f47f8c57e1156fd9f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a330ff9858e4d98f47f8c57e1156fd9f7">accept2a</a> (int sock, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *caller)</td></tr>
<tr class="memdesc:a330ff9858e4d98f47f8c57e1156fd9f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a330ff9858e4d98f47f8c57e1156fd9f7" title="continuations of the method accept2a() in the standard socket interface ">accept2a()</a> in the standard socket interface  <a href="#a330ff9858e4d98f47f8c57e1156fd9f7">More...</a><br/></td></tr>
<tr class="separator:a330ff9858e4d98f47f8c57e1156fd9f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0f0a978a425a30debc0a8aa6b3115e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#ab0f0a978a425a30debc0a8aa6b3115e9">accept2b</a> (int sock, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *caller)</td></tr>
<tr class="memdesc:ab0f0a978a425a30debc0a8aa6b3115e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#ab0f0a978a425a30debc0a8aa6b3115e9" title="continuations of the method accept2b() in the standard socket interface ">accept2b()</a> in the standard socket interface  <a href="#ab0f0a978a425a30debc0a8aa6b3115e9">More...</a><br/></td></tr>
<tr class="separator:ab0f0a978a425a30debc0a8aa6b3115e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fc57b3e2b67c0c2039db749eee91d62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a9fc57b3e2b67c0c2039db749eee91d62">send1</a> (int sock, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *caller)</td></tr>
<tr class="memdesc:a9fc57b3e2b67c0c2039db749eee91d62"><td class="mdescLeft">&#160;</td><td class="mdescRight">continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a9fc57b3e2b67c0c2039db749eee91d62" title="continuations of the method send1() in the standard socket interface ">send1()</a> in the standard socket interface  <a href="#a9fc57b3e2b67c0c2039db749eee91d62">More...</a><br/></td></tr>
<tr class="separator:a9fc57b3e2b67c0c2039db749eee91d62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf78472dc051c0ee79c28e09112fca2e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#acf78472dc051c0ee79c28e09112fca2e">recv1</a> (int sock, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *caller)</td></tr>
<tr class="memdesc:acf78472dc051c0ee79c28e09112fca2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#acf78472dc051c0ee79c28e09112fca2e" title="continuations of the method recv1() in the standard socket interface ">recv1()</a> in the standard socket interface  <a href="#acf78472dc051c0ee79c28e09112fca2e">More...</a><br/></td></tr>
<tr class="separator:acf78472dc051c0ee79c28e09112fca2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fac33c0676bd3a7454ecb691ee75334"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8fac33c0676bd3a7454ecb691ee75334">close1</a> (int sock, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *caller)</td></tr>
<tr class="memdesc:a8fac33c0676bd3a7454ecb691ee75334"><td class="mdescLeft">&#160;</td><td class="mdescRight">continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8fac33c0676bd3a7454ecb691ee75334" title="continuations of the method close1() in the standard socket interface ">close1()</a> in the standard socket interface  <a href="#a8fac33c0676bd3a7454ecb691ee75334">More...</a><br/></td></tr>
<tr class="separator:a8fac33c0676bd3a7454ecb691ee75334"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f51c3d95df184e2fddcc4ec952a0763"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">block_till</a> (int sockid, <a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> mask, bool anysignal, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *caller)</td></tr>
<tr class="memdesc:a8f51c3d95df184e2fddcc4ec952a0763"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if we need to block and prepares to do so.  <a href="#a8f51c3d95df184e2fddcc4ec952a0763">More...</a><br/></td></tr>
<tr class="separator:a8f51c3d95df184e2fddcc4ec952a0763"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea8fede2e65f593f58333685773181e7"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aea8fede2e65f593f58333685773181e7">push</a> (<a class="el" href="message_8h.html#a093346897a71a253ceb5aaa3785721a0">Activation</a> msg, <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html">ProtocolSession</a> *hi_sess, void *extinfo=0, size_t extinfo_size=0)</td></tr>
<tr class="memdesc:aea8fede2e65f593f58333685773181e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push to lower protocol layer.  <a href="#aea8fede2e65f593f58333685773181e7">More...</a><br/></td></tr>
<tr class="separator:aea8fede2e65f593f58333685773181e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbe1aac4a071dc033a7adcedf311692c"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#abbe1aac4a071dc033a7adcedf311692c">pop</a> (<a class="el" href="message_8h.html#a093346897a71a253ceb5aaa3785721a0">Activation</a> msg, <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html">ProtocolSession</a> *lo_sess, void *extinfo=0, size_t extinfo_size=0)</td></tr>
<tr class="memdesc:abbe1aac4a071dc033a7adcedf311692c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pop to higher protocol layer.  <a href="#abbe1aac4a071dc033a7adcedf311692c">More...</a><br/></td></tr>
<tr class="separator:abbe1aac4a071dc033a7adcedf311692c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The socket master protocol session. </p>
<p>The socket master protocol session is used to manage sockets; it provides an interface between socket protocol sessions (such as tcp and udp socket sessions) and the underlying protocols. This implementation consists of non-blocking calls in the socket interface. </p>

<p>Definition at line <a class="el" href="socket__master_8h_source.html#l00077">77</a> of file <a class="el" href="socket__master_8h_source.html">socket_master.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="a683dd9bc9c34204838e69790fd82f098"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a683dd9bc9c34204838e69790fd82f098">s3f::s3fnet::ProtocolSession::InstantiationType</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Multiple protocol session instantiation type. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a683dd9bc9c34204838e69790fd82f098ae42986263d7158bc7101239e74796ef9"></a>PROT_UNIQUE_INSTANCE</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a683dd9bc9c34204838e69790fd82f098a3dd8d2d1f947cb4c3b24673626b442e4"></a>PROT_MULTIPLE_INSTANCES</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a683dd9bc9c34204838e69790fd82f098abecaf2bc52af031a71f58a323dee96f3"></a>PROT_MULTIPLE_IMPLEMENTATIONS</em>&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="protocol__session_8h_source.html#l00044">44</a> of file <a class="el" href="protocol__session_8h_source.html">protocol_session.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                         {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a683dd9bc9c34204838e69790fd82f098ae42986263d7158bc7101239e74796ef9">PROT_UNIQUE_INSTANCE</a>                = 0x00,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a683dd9bc9c34204838e69790fd82f098a3dd8d2d1f947cb4c3b24673626b442e4">PROT_MULTIPLE_INSTANCES</a>             = 0x01,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a683dd9bc9c34204838e69790fd82f098abecaf2bc52af031a71f58a323dee96f3">PROT_MULTIPLE_IMPLEMENTATIONS</a>       = 0x02</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;  };</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a683dd9bc9c34204838e69790fd82f098ae42986263d7158bc7101239e74796ef9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a683dd9bc9c34204838e69790fd82f098ae42986263d7158bc7101239e74796ef9">s3f::s3fnet::ProtocolSession::PROT_UNIQUE_INSTANCE</a></div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00045">protocol_session.h:45</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a683dd9bc9c34204838e69790fd82f098a3dd8d2d1f947cb4c3b24673626b442e4"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a683dd9bc9c34204838e69790fd82f098a3dd8d2d1f947cb4c3b24673626b442e4">s3f::s3fnet::ProtocolSession::PROT_MULTIPLE_INSTANCES</a></div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00046">protocol_session.h:46</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a683dd9bc9c34204838e69790fd82f098abecaf2bc52af031a71f58a323dee96f3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a683dd9bc9c34204838e69790fd82f098abecaf2bc52af031a71f58a323dee96f3">s3f::s3fnet::ProtocolSession::PROT_MULTIPLE_IMPLEMENTATIONS</a></div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00047">protocol_session.h:47</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3846269d44f267c44706152b1a78a118"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118">s3f::s3fnet::ProtocolSession::ExecutionStage</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A normal protocol session must go though the following stages. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="a3846269d44f267c44706152b1a78a118a19592cb46ffb28c788fd51db257d8798"></a>PSESS_CREATED</em>&#160;</td><td class="fielddoc">
<p>this protocol session has just been created </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a3846269d44f267c44706152b1a78a118a3c91a49267ae29962158ec8e5aa75552"></a>PSESS_CONFIGURED</em>&#160;</td><td class="fielddoc">
<p>the config method of this protocol session has been called </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a3846269d44f267c44706152b1a78a118acf01674e118c3a7d2cd7d8d6b6002d9a"></a>PSESS_INITIALIZED</em>&#160;</td><td class="fielddoc">
<p>the init method of this protocol session has been called </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="a3846269d44f267c44706152b1a78a118a6b110ae59ed74fa48faf95206a60aba4"></a>PSESS_WRAPPED_UP</em>&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="protocol__session_8h_source.html#l00051">51</a> of file <a class="el" href="protocol__session_8h_source.html">protocol_session.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                      {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a19592cb46ffb28c788fd51db257d8798">PSESS_CREATED</a>       = 0, </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a3c91a49267ae29962158ec8e5aa75552">PSESS_CONFIGURED</a>    = 1, </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118acf01674e118c3a7d2cd7d8d6b6002d9a">PSESS_INITIALIZED</a>   = 2, </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a6b110ae59ed74fa48faf95206a60aba4">PSESS_WRAPPED_UP</a>    = 3 </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  };</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a3846269d44f267c44706152b1a78a118a3c91a49267ae29962158ec8e5aa75552"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a3c91a49267ae29962158ec8e5aa75552">s3f::s3fnet::ProtocolSession::PSESS_CONFIGURED</a></div><div class="ttdoc">the config method of this protocol session has been called </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00053">protocol_session.h:53</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a3846269d44f267c44706152b1a78a118a6b110ae59ed74fa48faf95206a60aba4"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a6b110ae59ed74fa48faf95206a60aba4">s3f::s3fnet::ProtocolSession::PSESS_WRAPPED_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00055">protocol_session.h:55</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a3846269d44f267c44706152b1a78a118acf01674e118c3a7d2cd7d8d6b6002d9a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118acf01674e118c3a7d2cd7d8d6b6002d9a">s3f::s3fnet::ProtocolSession::PSESS_INITIALIZED</a></div><div class="ttdoc">the init method of this protocol session has been called </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00054">protocol_session.h:54</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a3846269d44f267c44706152b1a78a118a19592cb46ffb28c788fd51db257d8798"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a19592cb46ffb28c788fd51db257d8798">s3f::s3fnet::ProtocolSession::PSESS_CREATED</a></div><div class="ttdoc">this protocol session has just been created </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00052">protocol_session.h:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a0fe9ad00a5968cbc54b9d8b80ed0f031"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">s3f::s3fnet::SocketMaster::SocketMaster </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_graph.html">ProtocolGraph</a> *&#160;</td>
          <td class="paramname"><em>graph</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The constructor. </p>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00025">25</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, and <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>.</p>
<div class="fragment"><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;                                               : <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a191ad0501ff266c035a8bc46da1a01a1">ProtocolSession</a>(graph), <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a3ac0eb241a2a18527be17fa1f4271f89">new_sockid</a>(0)</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;{</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] new socket master session.\n&quot;</span>, <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString()));</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;}</div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a191ad0501ff266c035a8bc46da1a01a1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a191ad0501ff266c035a8bc46da1a01a1">s3f::s3fnet::ProtocolSession::ProtocolSession</a></div><div class="ttdeci">ProtocolSession(ProtocolGraph *graph)</div><div class="ttdoc">The constructor is protected; only called from ProtocolGraph. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00134">protocol_session.cc:134</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a3ac0eb241a2a18527be17fa1f4271f89"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a3ac0eb241a2a18527be17fa1f4271f89">s3f::s3fnet::SocketMaster::new_sockid</a></div><div class="ttdeci">int new_sockid</div><div class="ttdoc">The next available socket id. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00276">socket_master.h:276</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae053c5db5278283819b4ea96c5fcb593"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">s3f::s3fnet::SocketMaster::~SocketMaster </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The destructor. </p>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00030">30</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, and <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keywordflow">for</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.begin(); iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end(); iter++)</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="comment">// the sessions are reclaimed by the tcp/udp master; sever the</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">// link here prevents the destructor of Socket class to double</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="comment">// reclaim the sessions.</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    (*iter).second-&gt;session = 0;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    (*iter).second-&gt;release();</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  }</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a74d720002dc82a18bac0b7bb8bae4ecd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int s3f::s3fnet::SocketMaster::getProtocolNumber </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the protocol number. </p>
<p>Returns the protocol number specifying the relationship between this protocol and the other protocols defined in the same protocol stack. </p>
<dl class="section return"><dt>Returns</dt><dd>protocol number for <a class="el" href="classs3f_1_1s3fnet_1_1_socket.html" title="The socket information. ">Socket</a> protocol </dd></dl>

<p>Implements <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#ad429740335f45371f2bce23c753dfa6f">s3f::s3fnet::ProtocolSession</a>.</p>

<p>Definition at line <a class="el" href="socket__master_8h_source.html#l00093">93</a> of file <a class="el" href="socket__master_8h_source.html">socket_master.h</a>.</p>

<p>References <a class="el" href="s3fnet_8h_source.html#l00132">s3f::s3fnet::S3FNET_PROTOCOL_TYPE_SOCKET</a>.</p>
<div class="fragment"><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="namespaces3f_1_1s3fnet.html#a2d885d995be52ebf39a06e881ec67919a9801272276b491faeb9ba4f523592be8">S3FNET_PROTOCOL_TYPE_SOCKET</a>; }</div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a2d885d995be52ebf39a06e881ec67919a9801272276b491faeb9ba4f523592be8"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a2d885d995be52ebf39a06e881ec67919a9801272276b491faeb9ba4f523592be8">s3f::s3fnet::S3FNET_PROTOCOL_TYPE_SOCKET</a></div><div class="ttdoc">The Socket protocol. </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00132">s3fnet.h:132</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae3110000e139e96fc41d8ed0e4548f9d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the socket master. </p>

<p>Reimplemented from <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#ac21a50a19e7b326bd8b97f7844f45856">s3f::s3fnet::ProtocolSession</a>.</p>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00042">42</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="errhandle_8cc_source.html#l00128">s3f::s3fnet::error_quit()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="protocol__session_8cc_source.html#l00041">s3f::s3fnet::ProtocolSession::init()</a>, <a class="el" href="protocol__session_8h_source.html#l00063">s3f::s3fnet::ProtocolSession::name</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, and <a class="el" href="s3fnet_8h_source.html#l00080">SOCKET_PROTOCOL_NAME</a>.</p>
<div class="fragment"><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{  </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] init.\n&quot;</span>, <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString()));</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#ac21a50a19e7b326bd8b97f7844f45856">ProtocolSession::init</a>(); </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordflow">if</span>(strcasecmp(<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7eedcbe4da39cba727d26f1339ac7c47">name</a>, <a class="code" href="s3fnet_8h.html#ae214302b1db84f42246be4e58c615c12">SOCKET_PROTOCOL_NAME</a>))</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: SocketMaster::init(), unmatched protocol name: \&quot;%s\&quot;, &quot;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;               <span class="stringliteral">&quot;expecting \&quot;SOCKET\&quot;.\n&quot;</span>, <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7eedcbe4da39cba727d26f1339ac7c47">name</a>);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_ac21a50a19e7b326bd8b97f7844f45856"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#ac21a50a19e7b326bd8b97f7844f45856">s3f::s3fnet::ProtocolSession::init</a></div><div class="ttdeci">virtual void init()</div><div class="ttdoc">The method is used to initialize the protocol session once the protocol session has been created and ...</div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00041">protocol_session.cc:41</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_aee6e3282670be024dcee8ac3cef67e85"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">s3f::s3fnet::error_quit</a></div><div class="ttdeci">void error_quit(const char *fmt,...)</div><div class="ttdoc">This function is called when there&#39;s a fatal error unrelated to a system call. </div><div class="ttdef"><b>Definition:</b> <a href="errhandle_8cc_source.html#l00128">errhandle.cc:128</a></div></div>
<div class="ttc" id="s3fnet_8h_html_ae214302b1db84f42246be4e58c615c12"><div class="ttname"><a href="s3fnet_8h.html#ae214302b1db84f42246be4e58c615c12">SOCKET_PROTOCOL_NAME</a></div><div class="ttdeci">#define SOCKET_PROTOCOL_NAME</div><div class="ttdoc">Socket layer session name. </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00080">s3fnet.h:80</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a7eedcbe4da39cba727d26f1339ac7c47"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7eedcbe4da39cba727d26f1339ac7c47">s3f::s3fnet::ProtocolSession::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Symbolic name of the protocol this session implements. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00063">protocol_session.h:63</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af91624546c77ffa9ee39fb481a5323ac"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::SocketMaster::control </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ctrltyp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctrlmsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html">ProtocolSession</a> *&#160;</td>
          <td class="paramname"><em>sess</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Control messages are passed through this function. </p>

<p>Reimplemented from <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a806b5f5786984f8bc40421e92d19fe3e">s3f::s3fnet::ProtocolSession</a>.</p>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00052">52</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00427">s3f::s3fnet::Socket::bytes_completed</a>, <a class="el" href="socket__session_8h_source.html#l00423">s3f::s3fnet::Socket::continuation</a>, <a class="el" href="protocol__session_8cc_source.html#l00092">s3f::s3fnet::ProtocolSession::control()</a>, <a class="el" href="socket__session_8h_source.html#l00295">s3f::s3fnet::SocketSignal::DATA_AVAILABLE</a>, <a class="el" href="errhandle_8cc_source.html#l00149">s3f::s3fnet::error_retn()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__session_8h_source.html#l00415">s3f::s3fnet::Socket::mask</a>, <a class="el" href="socket__session_8h_source.html#l00311">s3f::s3fnet::SocketSignal::nbytes</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="socket__session_8h_source.html#l00296">s3f::s3fnet::SocketSignal::OK_TO_SEND</a>, <a class="el" href="socket__session_8h_source.html#l00268">s3f::s3fnet::SocketSession::reinit()</a>, <a class="el" href="socket__session_8h_source.html#l00372">s3f::s3fnet::Socket::reinit()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__session_8h_source.html#l00409">s3f::s3fnet::Socket::session</a>, <a class="el" href="socket__session_8h_source.html#l00308">s3f::s3fnet::SocketSignal::signal</a>, <a class="el" href="s3fnet_8h_source.html#l00354">s3f::s3fnet::SOCK_CTRL_CLEAR_SIGNAL</a>, <a class="el" href="s3fnet_8h_source.html#l00356">s3f::s3fnet::SOCK_CTRL_DETACH_SESSION</a>, <a class="el" href="s3fnet_8h_source.html#l00358">s3f::s3fnet::SOCK_CTRL_GET_APP_SESSION</a>, <a class="el" href="s3fnet_8h_source.html#l00357">s3f::s3fnet::SOCK_CTRL_REINIT</a>, <a class="el" href="s3fnet_8h_source.html#l00355">s3f::s3fnet::SOCK_CTRL_SET_SIGNAL</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, <a class="el" href="socket__session_8h_source.html#l00305">s3f::s3fnet::SocketSignal::sockid</a>, and <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>.</p>
<div class="fragment"><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;{</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  SocketSignal* socksig = (SocketSignal*)ctrlmsg;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="keywordflow">if</span>(ctrltyp == <a class="code" href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223ac511a737624c20243f9fd4f3a01df343">SOCK_CTRL_SET_SIGNAL</a> ||</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;     ctrltyp == <a class="code" href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223a9e2c646b01b9b4c17a98f72c8df1db2f">SOCK_CTRL_CLEAR_SIGNAL</a> ||</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;     ctrltyp == <a class="code" href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223a6415b52b083907772ba210862ea71265">SOCK_CTRL_DETACH_SESSION</a> ||</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;     ctrltyp == <a class="code" href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223a0c371100d960d5f7d9d2329648b7b10e">SOCK_CTRL_REINIT</a> ||</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;     ctrltyp == <a class="code" href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223a7928ddecbb186189bcee5de7a9b6d8e4">SOCK_CTRL_GET_APP_SESSION</a>)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    assert(socksig);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(socksig-&gt;sockid);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="keywordflow">if</span>(!mysocket)</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#a258421f2f63d29185a3c6daf9e4efbcf">error_retn</a>(<span class="stringliteral">&quot;WARNING: SocketMaster::control(), unknown socket: %d (type %d)\n&quot;</span>, socksig-&gt;sockid, ctrltyp);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <span class="keywordflow">if</span>(ctrltyp == <a class="code" href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223ac511a737624c20243f9fd4f3a01df343">SOCK_CTRL_SET_SIGNAL</a>)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: control(), SOCK_CTRL_SET_SIGNAL (before): socket=%d &quot;</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                     <span class="stringliteral">&quot;(mask=%08x, state=%08x), signal=%08x, nbytes=%u.\n&quot;</span>,</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                     <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(),</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                     socksig-&gt;sockid, mysocket-&gt;mask, mysocket-&gt;state, </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                     socksig-&gt;signal, socksig-&gt;nbytes));</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span>((socksig-&gt;signal &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">SocketSignal::DATA_AVAILABLE</a>) ||</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;       (socksig-&gt;signal &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda">SocketSignal::OK_TO_SEND</a>))</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    {</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      mysocket-&gt;bytes_completed += socksig-&gt;nbytes;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    }</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// if there&#39;s something new that the state doesn&#39;t include</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span>(~mysocket-&gt;state &amp; socksig-&gt;signal)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      mysocket-&gt;state |= socksig-&gt;signal; <span class="comment">// include it</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="comment">// if the newly added is what we&#39;re waiting for</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <span class="keywordflow">if</span>(socksig-&gt;signal &amp; mysocket-&gt;mask)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;          <span class="comment">// clear up the data available flag for next receive</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordflow">if</span>(mysocket-&gt;state &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">SocketSignal::DATA_AVAILABLE</a>)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;          mysocket-&gt;state &amp;= ~SocketSignal::DATA_AVAILABLE;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;unblocking: signal=%08x, state=%08x\n&quot;</span>, socksig-&gt;signal, mysocket-&gt;state));</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        assert(mysocket-&gt;continuation &amp;&amp; ((BSocketContinuation*)mysocket-&gt;continuation)-&gt;next_stage);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        void (<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a0fe9ad00a5968cbc54b9d8b80ed0f031">SocketMaster</a>::*fct)(int, BSocketContinuation*) = ((BSocketContinuation*)mysocket-&gt;continuation)-&gt;next_stage;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        ((BSocketContinuation*)mysocket-&gt;continuation)-&gt;next_stage = 0;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        (this-&gt;*fct)(socksig-&gt;sockid, ((BSocketContinuation*)mysocket-&gt;continuation));</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      }</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: control(), SOCK_CTRL_SET_SIGNAL (after): socket=%d &quot;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                     <span class="stringliteral">&quot;(mask=%08x, state=%08x), signal=%08x, nbytes=%u.\n&quot;</span>,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                     <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(),</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                     socksig-&gt;sockid, mysocket-&gt;mask, mysocket-&gt;state, </div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                     socksig-&gt;signal, socksig-&gt;nbytes));</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(ctrltyp == <a class="code" href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223a9e2c646b01b9b4c17a98f72c8df1db2f">SOCK_CTRL_CLEAR_SIGNAL</a>)</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: control(), SOCK_CTRL_CLEAR_SIGNAL (before): socket=%d &quot;</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                     <span class="stringliteral">&quot;(mask=%08x, state=%08x), signal=%08x.\n&quot;</span>,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                     <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(),</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                     socksig-&gt;sockid, mysocket-&gt;mask, mysocket-&gt;state, socksig-&gt;signal));</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    mysocket-&gt;state &amp;= ~socksig-&gt;signal;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: control(), SOCK_CTRL_CLEAR_SIGNAL (after): socket=%d &quot;</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                     <span class="stringliteral">&quot;(mask=%08x, state=%08x), signal=%08x.\n&quot;</span>,</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                     <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(),</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                     socksig-&gt;sockid, mysocket-&gt;mask, mysocket-&gt;state, socksig-&gt;signal));</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(ctrltyp == <a class="code" href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223a6415b52b083907772ba210862ea71265">SOCK_CTRL_DETACH_SESSION</a>)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">/*SOCK_DUMP(printf(&quot;[host=\&quot;%s\&quot;] %ld: control(), SOCK_CTRL_DETACH_SESSION: socket=%d.\n&quot;,</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">      inHost()-&gt;nhi.toString(), inHost()-&gt;now(), socksig-&gt;sockid));*/</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    mysocket-&gt;session = 0;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(ctrltyp == <a class="code" href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223a0c371100d960d5f7d9d2329648b7b10e">SOCK_CTRL_REINIT</a>)</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">/*SOCK_DUMP(printf(&quot;[host=\&quot;%s\&quot;] %ld: control(), SOCK_CTRL_REINIT: socket=%d.\n&quot;,</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">      inHost()-&gt;nhi.toString(), inHost()-&gt;now(), socksig-&gt;sockid));*/</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    mysocket-&gt;session-&gt;reinit();</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    mysocket-&gt;reinit();</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(ctrltyp == <a class="code" href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223a7928ddecbb186189bcee5de7a9b6d8e4">SOCK_CTRL_GET_APP_SESSION</a>)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">/*SOCK_DUMP(printf(&quot;[host=\&quot;%s\&quot;] %ld: control(), SOCK_CTRL_GET_APP_SESSION: socket=%d.\n&quot;,</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">      inHost()-&gt;nhi.toString(), inHost()-&gt;now(), socksig-&gt;sockid));*/</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">/*...*/</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a806b5f5786984f8bc40421e92d19fe3e">ProtocolSession::control</a>(ctrltyp, ctrlmsg, sess);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a258421f2f63d29185a3c6daf9e4efbcf"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a258421f2f63d29185a3c6daf9e4efbcf">s3f::s3fnet::error_retn</a></div><div class="ttdeci">void error_retn(const char *fmt,...)</div><div class="ttdoc">This function is called when there&#39;s a non-fatal error unrelated to a system call. </div><div class="ttdef"><b>Definition:</b> <a href="errhandle_8cc_source.html#l00149">errhandle.cc:149</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a378ed67967dbfd4a8ddba9fb8c13f223a0c371100d960d5f7d9d2329648b7b10e"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223a0c371100d960d5f7d9d2329648b7b10e">s3f::s3fnet::SOCK_CTRL_REINIT</a></div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00357">s3fnet.h:357</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a806b5f5786984f8bc40421e92d19fe3e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a806b5f5786984f8bc40421e92d19fe3e">s3f::s3fnet::ProtocolSession::control</a></div><div class="ttdeci">virtual int control(int ctrltyp, void *ctrlmsg, ProtocolSession *sess)</div><div class="ttdoc">The control method is used by the protocol session to receive control messages (or information querie...</div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00092">protocol_session.cc:92</a></div></div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">s3f::s3fnet::SocketSignal::DATA_AVAILABLE</a></div><div class="ttdoc">data is available </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00295">socket_session.h:295</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a378ed67967dbfd4a8ddba9fb8c13f223a6415b52b083907772ba210862ea71265"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223a6415b52b083907772ba210862ea71265">s3f::s3fnet::SOCK_CTRL_DETACH_SESSION</a></div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00356">s3fnet.h:356</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a378ed67967dbfd4a8ddba9fb8c13f223a9e2c646b01b9b4c17a98f72c8df1db2f"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223a9e2c646b01b9b4c17a98f72c8df1db2f">s3f::s3fnet::SOCK_CTRL_CLEAR_SIGNAL</a></div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00354">s3fnet.h:354</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda">s3f::s3fnet::SocketSignal::OK_TO_SEND</a></div><div class="ttdoc">clear to send data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00296">socket_session.h:296</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a0fe9ad00a5968cbc54b9d8b80ed0f031"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a0fe9ad00a5968cbc54b9d8b80ed0f031">s3f::s3fnet::SocketMaster::SocketMaster</a></div><div class="ttdeci">SocketMaster(ProtocolGraph *graph)</div><div class="ttdoc">The constructor. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00025">socket_master.cc:25</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a378ed67967dbfd4a8ddba9fb8c13f223a7928ddecbb186189bcee5de7a9b6d8e4"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223a7928ddecbb186189bcee5de7a9b6d8e4">s3f::s3fnet::SOCK_CTRL_GET_APP_SESSION</a></div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00358">s3fnet.h:358</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a378ed67967dbfd4a8ddba9fb8c13f223ac511a737624c20243f9fd4f3a01df343"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223ac511a737624c20243f9fd4f3a01df343">s3f::s3fnet::SOCK_CTRL_SET_SIGNAL</a></div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00355">s3fnet.h:355</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa9aaee72acf7f9fae2d07551a44f799c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual const char* s3f::s3fnet::SocketMaster::psesstype </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reimplemented from <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7089cc1e64ae5238d584e140a54ac046">s3f::s3fnet::ProtocolSession</a>.</p>

<p>Definition at line <a class="el" href="socket__master_8h_source.html#l00101">101</a> of file <a class="el" href="socket__master_8h_source.html">socket_master.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;BLOCKING_SOCKET&quot;</span>; } <span class="comment">// DEBUG</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae4be12a95b5a155e80e7323b63f1d659"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::SocketMaster::socket </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a new socket id. </p>
<dl class="section return"><dt>Returns</dt><dd>socket id, -1 means error </dd></dl>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00162">162</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="protocol__session_8cc_source.html#l00123">s3f::s3fnet::ProtocolSession::getNow()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__master_8h_source.html#l00276">new_sockid</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, and <a class="el" href="socket__master_8h_source.html#l00285">unbound_socks</a>.</p>

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00535">accept2a()</a>, <a class="el" href="udp__server_8cc_source.html#l00283">s3f::s3fnet::UDPServerSession::request_received()</a>, <a class="el" href="udp__server_8cc_source.html#l00253">s3f::s3fnet::UDPServerSession::start_on()</a>, <a class="el" href="udp__client_8cc_source.html#l00358">s3f::s3fnet::UDPClientSession::start_on()</a>, <a class="el" href="tcp__server_8cc_source.html#l00224">s3f::s3fnet::TCPServerSession::start_on()</a>, <a class="el" href="tcp__client_8cc_source.html#l00363">s3f::s3fnet::TCPClientSession::start_on()</a>, and <a class="el" href="blocking__tcp__client_8cc_source.html#l00362">s3f::s3fnet::BTCPClientSession::start_on()</a>.</p>
<div class="fragment"><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;{</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordtype">bool</span> overlap = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">do</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  { <span class="comment">// go linearly till we find a socket id not used</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a3ac0eb241a2a18527be17fa1f4271f89">new_sockid</a>++;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a3ac0eb241a2a18527be17fa1f4271f89">new_sockid</a> &lt; 0)</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a3ac0eb241a2a18527be17fa1f4271f89">new_sockid</a> = 1; <span class="comment">// start from one if wrapped around</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">if</span>(overlap) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <span class="keywordflow">else</span> overlap = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  } <span class="keywordflow">while</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a3ac0eb241a2a18527be17fa1f4271f89">new_sockid</a>) != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end() ||</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;          <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a43975cb9dfee4f948fd1b08f7127a59a">unbound_socks</a>.find(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a3ac0eb241a2a18527be17fa1f4271f89">new_sockid</a>) != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a43975cb9dfee4f948fd1b08f7127a59a">unbound_socks</a>.end());</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a43975cb9dfee4f948fd1b08f7127a59a">unbound_socks</a>.insert(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a3ac0eb241a2a18527be17fa1f4271f89">new_sockid</a>);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: socket(), new socket %d.\n&quot;</span>,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7a8fc3b0c62b09c82b72268b56abb58c">getNow</a>(), <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a3ac0eb241a2a18527be17fa1f4271f89">new_sockid</a>));</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a3ac0eb241a2a18527be17fa1f4271f89">new_sockid</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a43975cb9dfee4f948fd1b08f7127a59a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a43975cb9dfee4f948fd1b08f7127a59a">s3f::s3fnet::SocketMaster::unbound_socks</a></div><div class="ttdeci">SOCK_SET unbound_socks</div><div class="ttdoc">A set of unbound socket ids. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00285">socket_master.h:285</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a7a8fc3b0c62b09c82b72268b56abb58c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7a8fc3b0c62b09c82b72268b56abb58c">s3f::s3fnet::ProtocolSession::getNow</a></div><div class="ttdeci">ltime_t getNow()</div><div class="ttdoc">The method returns the current simulation time. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00123">protocol_session.cc:123</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a3ac0eb241a2a18527be17fa1f4271f89"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a3ac0eb241a2a18527be17fa1f4271f89">s3f::s3fnet::SocketMaster::new_sockid</a></div><div class="ttdeci">int new_sockid</div><div class="ttdoc">The next available socket id. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00276">socket_master.h:276</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a53fda11b1130ee4e7e355eaed9f9a328"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::SocketMaster::bind </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a>&#160;</td>
          <td class="paramname"><em>source_ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a>&#160;</td>
          <td class="paramname"><em>source_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>protocol</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>options</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bind the socket Binds the socket with the source ip address, port, and the protocol that maintains the socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>the socket id </td></tr>
    <tr><td class="paramname">source_ip</td><td>the source ip address </td></tr>
    <tr><td class="paramname">source_port</td><td>the source port </td></tr>
    <tr><td class="paramname">protocol</td><td>the protocol to be used over the socket (ie to choose TCP or UDP) </td></tr>
    <tr><td class="paramname">options</td><td>socket option flags </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if socket is bound successfully, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00183">183</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_session_master.html#abdf982985dedadae59fa42cab19ecf4e">s3f::s3fnet::SessionMaster::createSession()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="ip__prefix_8cc_source.html#l00041">s3f::s3fnet::IPPrefix::ip2txt()</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="socket__session_8h_source.html#l00369">s3f::s3fnet::Socket::release()</a>, <a class="el" href="shstl_8h_source.html#l00044">S3FNET_MAKE_PAIR</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a184dec7b5d13fa4b9459d46bf75902be">S3FNET_SET()</a>, <a class="el" href="socket__session_8h_source.html#l00409">s3f::s3fnet::Socket::session</a>, <a class="el" href="protocol__graph_8cc_source.html#l00075">s3f::s3fnet::ProtocolGraph::sessionForName()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a8c4f49c6dd370171179404f0bd3d487d">s3f::s3fnet::SocketSession::setSource()</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, and <a class="el" href="socket__master_8h_source.html#l00285">unbound_socks</a>.</p>

<p>Referenced by <a class="el" href="udp__server_8cc_source.html#l00283">s3f::s3fnet::UDPServerSession::request_received()</a>, <a class="el" href="udp__server_8cc_source.html#l00253">s3f::s3fnet::UDPServerSession::start_on()</a>, <a class="el" href="udp__client_8cc_source.html#l00358">s3f::s3fnet::UDPClientSession::start_on()</a>, <a class="el" href="tcp__server_8cc_source.html#l00224">s3f::s3fnet::TCPServerSession::start_on()</a>, <a class="el" href="tcp__client_8cc_source.html#l00363">s3f::s3fnet::TCPClientSession::start_on()</a>, and <a class="el" href="blocking__tcp__client_8cc_source.html#l00362">s3f::s3fnet::BTCPClientSession::start_on()</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;{</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: bind(): socket=%d, src_ip=\&quot;%s\&quot;, src_port=%d, &quot;</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                   <span class="stringliteral">&quot;prot=\&quot;%s\&quot;, opt=%u.\n&quot;</span>, <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(),</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, <a class="code" href="classs3f_1_1s3fnet_1_1_i_p_prefix.html#a4649010db0c18ea0c15e1d42e96467e8">IPPrefix::ip2txt</a>(src_ip), src_port,</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                   ((protocol == 0) ? <span class="stringliteral">&quot;&lt;NULL&gt;&quot;</span> : protocol), options));</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  SessionMaster* proto = (SessionMaster*)<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_graph.html#a0d5b2f9a8212dabae84ce6d894a9cfae">sessionForName</a>(protocol);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="keywordflow">if</span>(!proto)</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;bind(), protocol %s not found on host \&quot;%s\&quot;.\n&quot;</span>,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                     ((protocol == 0) ? <span class="stringliteral">&quot;&lt;NULL&gt;&quot;</span> : protocol), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString()));</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a184dec7b5d13fa4b9459d46bf75902be">S3FNET_SET</a>(<span class="keywordtype">int</span>)::iterator setiter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a43975cb9dfee4f948fd1b08f7127a59a">unbound_socks</a>.find(sock);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">if</span>(setiter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a43975cb9dfee4f948fd1b08f7127a59a">unbound_socks</a>.end())</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="comment">// create a new socket</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    mysocket = <span class="keyword">new</span> Socket(); </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    assert(mysocket);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">// get new session</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    mysocket-&gt;session = proto-&gt;createSession(sock);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    assert(mysocket-&gt;session);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// set the src in session</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">if</span>(!mysocket-&gt;session-&gt;setSource(src_ip, src_port))</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      mysocket-&gt;release();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="comment">// move from unbound to bound socket list</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a43975cb9dfee4f948fd1b08f7127a59a">unbound_socks</a>.erase(setiter);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.insert(<a class="code" href="shstl_8h.html#ae26f071070e35be838d3e85c13120f00">S3FNET_MAKE_PAIR</a>(sock, mysocket));</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div>
<div class="ttc" id="shstl_8h_html_ae26f071070e35be838d3e85c13120f00"><div class="ttname"><a href="shstl_8h.html#ae26f071070e35be838d3e85c13120f00">S3FNET_MAKE_PAIR</a></div><div class="ttdeci">#define S3FNET_MAKE_PAIR(x, y)</div><div class="ttdoc">std::make_pair(x,y) in shared memory. </div><div class="ttdef"><b>Definition:</b> <a href="shstl_8h_source.html#l00044">shstl.h:44</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a184dec7b5d13fa4b9459d46bf75902be"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a184dec7b5d13fa4b9459d46bf75902be">s3f::s3fnet::SocketMaster::S3FNET_SET</a></div><div class="ttdeci">typedef S3FNET_SET(int) SOCK_SET</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a43975cb9dfee4f948fd1b08f7127a59a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a43975cb9dfee4f948fd1b08f7127a59a">s3f::s3fnet::SocketMaster::unbound_socks</a></div><div class="ttdeci">SOCK_SET unbound_socks</div><div class="ttdoc">A set of unbound socket ids. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00285">socket_master.h:285</a></div></div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_i_p_prefix_html_a4649010db0c18ea0c15e1d42e96467e8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_i_p_prefix.html#a4649010db0c18ea0c15e1d42e96467e8">s3f::s3fnet::IPPrefix::ip2txt</a></div><div class="ttdeci">static char * ip2txt(IPADDR ip, char *str)</div><div class="ttdoc">Convert an IP prefix to a string. </div><div class="ttdef"><b>Definition:</b> <a href="ip__prefix_8cc_source.html#l00041">ip_prefix.cc:41</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_graph_html_a0d5b2f9a8212dabae84ce6d894a9cfae"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_graph.html#a0d5b2f9a8212dabae84ce6d894a9cfae">s3f::s3fnet::ProtocolGraph::sessionForName</a></div><div class="ttdeci">ProtocolSession * sessionForName(char *pname)</div><div class="ttdoc">If a protocol session has been created and registered under the given name, the method returns the pr...</div><div class="ttdef"><b>Definition:</b> <a href="protocol__graph_8cc_source.html#l00075">protocol_graph.cc:75</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa9663f2fcf4463362bf8e78a19438da4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::SocketMaster::listen </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>queuesize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Listens for incoming connections This function set up the socket so that it can queue up to 'queuesize' number of foreign connection attempts. </p>
<p>The function returns true on success. This function is actually not implemented; it's a placeholder. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>the socket id </td></tr>
    <tr><td class="paramname">queuesize</td><td>the number of connections to queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00228">228</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#aec021280ede42e402b92d1acbdf94e88">s3f::s3fnet::SocketSession::connected()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a95d5063f90b0a34c5d0fa3780c24e532">s3f::s3fnet::SocketSession::listen()</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__session_8h_source.html#l00409">s3f::s3fnet::Socket::session</a>, and <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>.</p>

<p>Referenced by <a class="el" href="udp__server_8cc_source.html#l00253">s3f::s3fnet::UDPServerSession::start_on()</a>.</p>
<div class="fragment"><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;{</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: listen(): socket=%d, queuesize=%u.\n&quot;</span>,</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, queuesize));</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  <span class="keywordflow">if</span>(mysocket &amp;&amp; mysocket-&gt;session &amp;&amp; !mysocket-&gt;session-&gt;connected())</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> mysocket-&gt;session-&gt;listen();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a12144430e545672039573d22f11a363c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::SocketMaster::connected </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a> *&#160;</td>
          <td class="paramname"><em>peer_ip</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a> *&#160;</td>
          <td class="paramname"><em>peer_port</em> = <code>NULL</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates if the socket is connected. </p>
<p>A side effect of this function is that the destination ip address and port number are also returned if the parameters provided are not NULL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>the socket id </td></tr>
    <tr><td class="paramname">peer_ip</td><td>address of ipv4 structure to write destination ip into on success </td></tr>
    <tr><td class="paramname">peer_port</td><td>address of port structure to write destination port into on success </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the socket is connected, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00240">240</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#aec021280ede42e402b92d1acbdf94e88">s3f::s3fnet::SocketSession::connected()</a>, <a class="el" href="socket__session_8h_source.html#l00138">s3f::s3fnet::SessionID::dst_ip</a>, <a class="el" href="socket__session_8h_source.html#l00144">s3f::s3fnet::SessionID::dst_port</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="ip__prefix_8cc_source.html#l00041">s3f::s3fnet::IPPrefix::ip2txt()</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__session_8h_source.html#l00409">s3f::s3fnet::Socket::session</a>, and <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>.</p>

<p>Referenced by <a class="el" href="udp__server_8cc_source.html#l00283">s3f::s3fnet::UDPServerSession::request_received()</a>.</p>
<div class="fragment"><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: connected(): socket=%d.\n&quot;</span>,</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock));</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">if</span>(mysocket)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">if</span>(mysocket-&gt;session &amp;&amp; mysocket-&gt;session-&gt;connected())</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    {</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keywordflow">if</span>(ip != 0) *ip = mysocket-&gt;session-&gt;dst_ip;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">if</span>(port != 0) *port = mysocket-&gt;session-&gt;dst_port;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;destination ip=\&quot;%s\&quot;, port=%d.\n&quot;</span>,</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                       <a class="code" href="classs3f_1_1s3fnet_1_1_i_p_prefix.html#a4649010db0c18ea0c15e1d42e96467e8">IPPrefix::ip2txt</a>(mysocket-&gt;session-&gt;dst_ip),</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                       mysocket-&gt;session-&gt;dst_port));</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_i_p_prefix_html_a4649010db0c18ea0c15e1d42e96467e8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_i_p_prefix.html#a4649010db0c18ea0c15e1d42e96467e8">s3f::s3fnet::IPPrefix::ip2txt</a></div><div class="ttdeci">static char * ip2txt(IPADDR ip, char *str)</div><div class="ttdoc">Convert an IP prefix to a string. </div><div class="ttdef"><b>Definition:</b> <a href="ip__prefix_8cc_source.html#l00041">ip_prefix.cc:41</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac9be2a4ec513154f2f342e4132c1189b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::SocketMaster::eof </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates end of connection. </p>
<p>Returns true if the socket has no more data and the peer has closed the connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>the socket id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if socket has no more data and connection is closed, false otherwise </dd></dl>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00262">262</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00336">s3f::s3fnet::Socket::DATA_AVAILABLE</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, <a class="el" href="socket__session_8h_source.html#l00339">s3f::s3fnet::Socket::SOCK_EOF</a>, and <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>.</p>
<div class="fragment"><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;{</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: eof(): socket=%d.\n&quot;</span>,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock));</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <span class="keywordflow">if</span>(mysocket)</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span>((mysocket-&gt;state &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddabb98e238db6cc63e6127e9a51c2ef749">Socket::SOCK_EOF</a>) &amp;&amp; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;       !(mysocket-&gt;state &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda88dc6e40cb856c71ea48fc8c67f70bc7">Socket::DATA_AVAILABLE</a>))</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;true.\n&quot;</span>));</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;true.\n&quot;</span>));</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// if we can&#39;t find the open socket, it&#39;s true</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda88dc6e40cb856c71ea48fc8c67f70bc7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda88dc6e40cb856c71ea48fc8c67f70bc7">s3f::s3fnet::Socket::DATA_AVAILABLE</a></div><div class="ttdoc">data is available </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00336">socket_session.h:336</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77ddabb98e238db6cc63e6127e9a51c2ef749"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddabb98e238db6cc63e6127e9a51c2ef749">s3f::s3fnet::Socket::SOCK_EOF</a></div><div class="ttdoc">no more data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00339">socket_session.h:339</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a580cc9f6217555a76195eea53333f641"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::abort </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the connections and invalidate the socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>the socket id </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00283">283</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#af3eeb69a381eee6efa002ef12dc2ea87">s3f::s3fnet::SocketSession::abort()</a>, <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00398">s3f::s3fnet::Socket::die_slowly()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__session_8h_source.html#l00378">s3f::s3fnet::Socket::is_active()</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="socket__session_8h_source.html#l00369">s3f::s3fnet::Socket::release()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__session_8h_source.html#l00409">s3f::s3fnet::Socket::session</a>, and <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>.</p>

<p>Referenced by <a class="el" href="udp__client_8cc_source.html#l00077">s3f::s3fnet::UDPClientSessionContinuation::failure()</a>, <a class="el" href="tcp__client_8cc_source.html#l00081">s3f::s3fnet::TCPClientSessionContinuation::failure()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00093">s3f::s3fnet::BTCPClientSessionContinuation::failure()</a>, <a class="el" href="udp__client_8cc_source.html#l00521">s3f::s3fnet::UDPClientSession::timeout()</a>, <a class="el" href="tcp__client_8cc_source.html#l00528">s3f::s3fnet::TCPClientSession::timeout()</a>, and <a class="el" href="blocking__tcp__client_8cc_source.html#l00512">s3f::s3fnet::BTCPClientSession::timeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: abort(): socket=%d.\n&quot;</span>,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock));</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="keywordflow">if</span>(mysocket)</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">if</span>(mysocket-&gt;session) mysocket-&gt;session-&gt;abort();</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span>(mysocket-&gt;is_active()) mysocket-&gt;die_slowly();</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      <span class="comment">// the destructor will call release method---which will detach</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      <span class="comment">// the socket session from the socket, remove the socket session</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <span class="comment">// from the session master, and then reclaim the socket</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="comment">// session---before the socket is reclaimed</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      mysocket-&gt;release();</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.erase(sock);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    }</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  }</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7a23a0380446d77d2aa6d3bc664a5f18"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::connect </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a>&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a>&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connect to remote host This function establishes a connection to the given destination ip and port. </p>
<p>The success method of the continuation will be called on success. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>the socket id </td></tr>
    <tr><td class="paramname">ip</td><td>the destination ip address </td></tr>
    <tr><td class="paramname">port</td><td>the destination port </td></tr>
    <tr><td class="paramname">caller</td><td>the blocking socket continuation </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00333">333</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8cc_source.html#l00306">block_till()</a>, <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00335">s3f::s3fnet::Socket::CONN_RESET</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a226203f1339d9c21b88e6d66a50372cb">s3f::s3fnet::SocketSession::connect()</a>, <a class="el" href="socket__master_8cc_source.html#l00365">connect1()</a>, <a class="el" href="socket__session_8h_source.html#l00343">s3f::s3fnet::Socket::CONNECT_ACTIVE</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#aec021280ede42e402b92d1acbdf94e88">s3f::s3fnet::SocketSession::connected()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#ab4c23ca7a96769466d7749e5eeae7c94">s3f::s3fnet::BSocketContinuation::failure()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="ip__prefix_8cc_source.html#l00041">s3f::s3fnet::IPPrefix::ip2txt()</a>, <a class="el" href="socket__master_8h_source.html#l00065">s3f::s3fnet::BSocketContinuation::next_stage</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="socket__session_8h_source.html#l00337">s3f::s3fnet::Socket::OK_TO_SEND</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__session_8h_source.html#l00409">s3f::s3fnet::Socket::session</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, and <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>.</p>

<p>Referenced by <a class="el" href="udp__server_8cc_source.html#l00283">s3f::s3fnet::UDPServerSession::request_received()</a>, <a class="el" href="udp__client_8cc_source.html#l00358">s3f::s3fnet::UDPClientSession::start_on()</a>, <a class="el" href="tcp__client_8cc_source.html#l00363">s3f::s3fnet::TCPClientSession::start_on()</a>, and <a class="el" href="blocking__tcp__client_8cc_source.html#l00362">s3f::s3fnet::BTCPClientSession::start_on()</a>.</p>
<div class="fragment"><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;{</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  assert(caller);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="keywordflow">if</span>(!mysocket || <span class="comment">// if the socket is not bound</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;     !mysocket-&gt;session || <span class="comment">// this shouldn&#39;t happen</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;     mysocket-&gt;session-&gt;connected() ||  <span class="comment">// if the socket has been connected</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;     (mysocket-&gt;state &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddaabfe6457a90355729d44b4f5ce12eef4">Socket::CONNECT_ACTIVE</a>)) <span class="comment">// if the socket is connecting</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;  {</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  }</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: connect(): socket=%d (state=%08x), ip=\&quot;%s\&quot;, port=%d.\n&quot;</span>,</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state, <a class="code" href="classs3f_1_1s3fnet_1_1_i_p_prefix.html#a4649010db0c18ea0c15e1d42e96467e8">IPPrefix::ip2txt</a>(ip), port));</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="comment">// initiate the connection</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordflow">if</span>(!mysocket-&gt;session-&gt;connect(ip, port))</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  {</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <span class="comment">// set the connect active flag up</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  mysocket-&gt;state |= <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddaabfe6457a90355729d44b4f5ce12eef4">Socket::CONNECT_ACTIVE</a>;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  caller-&gt;next_stage = &amp;<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a43fa41d42fe459891c947da54e43c725">SocketMaster::connect1</a>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">block_till</a>(sock, <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddab34f19a317b3dcb64abca781dd24bcd1">Socket::OK_TO_SEND</a>|<a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">Socket::CONN_RESET</a>, <span class="keyword">false</span>, caller);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_i_p_prefix_html_a4649010db0c18ea0c15e1d42e96467e8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_i_p_prefix.html#a4649010db0c18ea0c15e1d42e96467e8">s3f::s3fnet::IPPrefix::ip2txt</a></div><div class="ttdeci">static char * ip2txt(IPADDR ip, char *str)</div><div class="ttdoc">Convert an IP prefix to a string. </div><div class="ttdef"><b>Definition:</b> <a href="ip__prefix_8cc_source.html#l00041">ip_prefix.cc:41</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a43fa41d42fe459891c947da54e43c725"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a43fa41d42fe459891c947da54e43c725">s3f::s3fnet::SocketMaster::connect1</a></div><div class="ttdeci">void connect1(int sock, BSocketContinuation *caller)</div><div class="ttdoc">continuations of the method connect1() in the standard socket interface </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00365">socket_master.cc:365</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77ddab34f19a317b3dcb64abca781dd24bcd1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddab34f19a317b3dcb64abca781dd24bcd1">s3f::s3fnet::Socket::OK_TO_SEND</a></div><div class="ttdoc">clear to send data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00337">socket_session.h:337</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a8f51c3d95df184e2fddcc4ec952a0763"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">s3f::s3fnet::SocketMaster::block_till</a></div><div class="ttdeci">void block_till(int sockid, uint32 mask, bool anysignal, BSocketContinuation *caller)</div><div class="ttdoc">Checks if we need to block and prepares to do so. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00306">socket_master.cc:306</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77ddaabfe6457a90355729d44b4f5ce12eef4"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddaabfe6457a90355729d44b4f5ce12eef4">s3f::s3fnet::Socket::CONNECT_ACTIVE</a></div><div class="ttdoc">connect is in progress </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00343">socket_session.h:343</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">s3f::s3fnet::Socket::CONN_RESET</a></div><div class="ttdoc">connection reset </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00335">socket_session.h:335</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad4122f85228f29c27b14d36901726428"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::accept </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>make_new_socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>caller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>first_conn_notify</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks for arrival of a connection request. </p>
<p>If successful, the success function of the continuation will be called and the return value will be set as the new socket number corresponding to the new connection just established. The failure function of the continuation will be called if an error occurred. If make_new_socket is false, the new connection will use the same socket id as provided in the parameter. If first_conn_notify is not NULL, the success method of this continuation will be called to signal the first connection. The first connection signal is an indication the application process should fork a new process to handle an incoming connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>the socket id </td></tr>
    <tr><td class="paramname">make_new_socket</td><td>whether to fork a new process for incoming connections </td></tr>
    <tr><td class="paramname">caller</td><td>the blocking socket continuation </td></tr>
    <tr><td class="paramname">first_conn_notify</td><td>contination to notify socket of first connection </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00403">403</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8cc_source.html#l00443">accept1a()</a>, <a class="el" href="socket__master_8cc_source.html#l00489">accept1b()</a>, <a class="el" href="socket__master_8cc_source.html#l00306">block_till()</a>, <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00077">s3f::s3fnet::SocketContinuation::chain_continuation</a>, <a class="el" href="socket__session_8h_source.html#l00335">s3f::s3fnet::Socket::CONN_RESET</a>, <a class="el" href="socket__session_8h_source.html#l00343">s3f::s3fnet::Socket::CONNECT_ACTIVE</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#aec021280ede42e402b92d1acbdf94e88">s3f::s3fnet::SocketSession::connected()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#ab4c23ca7a96769466d7749e5eeae7c94">s3f::s3fnet::BSocketContinuation::failure()</a>, <a class="el" href="socket__session_8h_source.html#l00341">s3f::s3fnet::Socket::FIRST_CONNECTION</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a95d5063f90b0a34c5d0fa3780c24e532">s3f::s3fnet::SocketSession::listen()</a>, <a class="el" href="socket__master_8h_source.html#l00065">s3f::s3fnet::BSocketContinuation::next_stage</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__session_8h_source.html#l00409">s3f::s3fnet::Socket::session</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, and <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>.</p>

<p>Referenced by <a class="el" href="tcp__server_8cc_source.html#l00250">s3f::s3fnet::TCPServerSession::handle_client()</a>.</p>
<div class="fragment"><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;{</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;  assert(caller);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  <span class="keywordflow">if</span>(!mysocket || <span class="comment">// if the socket is not bound</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;     !mysocket-&gt;session || <span class="comment">// this shouldn&#39;t happen</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;     mysocket-&gt;session-&gt;connected() || <span class="comment">// if the socket has been connected</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;     (mysocket-&gt;state &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddaabfe6457a90355729d44b4f5ce12eef4">Socket::CONNECT_ACTIVE</a>)) <span class="comment">// if the socket is connecting</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;  {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;  }</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: accept(), socket=%d (state=%08x), make_new_sock=%d.\n&quot;</span>,</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state, make_new_socket));</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;  <span class="comment">// initiate the passive listen</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;  <span class="keywordflow">if</span>(!mysocket-&gt;session-&gt;listen())</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;  {</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  <span class="comment">// flip the connect active flag</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  mysocket-&gt;state |= <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddaabfe6457a90355729d44b4f5ce12eef4">Socket::CONNECT_ACTIVE</a>;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  <span class="comment">// we capture the first connection signal as an indication the</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;  <span class="comment">// application process should fork a new process to handle the</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;  <span class="comment">// incoming connection.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;  <span class="keywordflow">if</span>(make_new_socket) caller-&gt;next_stage = &amp;<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f7d681bae5d5265e9a2db34eef1ca7e">SocketMaster::accept1a</a>;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;  <span class="keywordflow">else</span> caller-&gt;next_stage = &amp;<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a0ef1fbddfa27da700ff93752a4aa3dea">SocketMaster::accept1b</a>;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;  caller-&gt;chain_continuation = first_conn_notify;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">block_till</a>(sock, <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda02466cd9bdf2928064dd1af6d4fab218">Socket::FIRST_CONNECTION</a>|<a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">Socket::CONN_RESET</a>, <span class="keyword">false</span>, caller);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a8f7d681bae5d5265e9a2db34eef1ca7e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f7d681bae5d5265e9a2db34eef1ca7e">s3f::s3fnet::SocketMaster::accept1a</a></div><div class="ttdeci">void accept1a(int sock, BSocketContinuation *caller)</div><div class="ttdoc">continuations of the method accept1a() in the standard socket interface </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00443">socket_master.cc:443</a></div></div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a0ef1fbddfa27da700ff93752a4aa3dea"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a0ef1fbddfa27da700ff93752a4aa3dea">s3f::s3fnet::SocketMaster::accept1b</a></div><div class="ttdeci">void accept1b(int sock, BSocketContinuation *caller)</div><div class="ttdoc">continuations of the method accept1b() in the standard socket interface </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00489">socket_master.cc:489</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda02466cd9bdf2928064dd1af6d4fab218"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda02466cd9bdf2928064dd1af6d4fab218">s3f::s3fnet::Socket::FIRST_CONNECTION</a></div><div class="ttdoc">is the first connection </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00341">socket_session.h:341</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a8f51c3d95df184e2fddcc4ec952a0763"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">s3f::s3fnet::SocketMaster::block_till</a></div><div class="ttdeci">void block_till(int sockid, uint32 mask, bool anysignal, BSocketContinuation *caller)</div><div class="ttdoc">Checks if we need to block and prepares to do so. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00306">socket_master.cc:306</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77ddaabfe6457a90355729d44b4f5ce12eef4"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddaabfe6457a90355729d44b4f5ce12eef4">s3f::s3fnet::Socket::CONNECT_ACTIVE</a></div><div class="ttdoc">connect is in progress </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00343">socket_session.h:343</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">s3f::s3fnet::Socket::CONN_RESET</a></div><div class="ttdoc">connection reset </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00335">socket_session.h:335</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afdb0d6623b4205af508d8a9387407911"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::send </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send data to remote host Send a message of the given length and return the number of bytes that have been sent successfully. </p>
<p>The failure function of the continuation will be called if there is an error. Otherwise, the success method is called and the return value is the number of bytes got transferred successfully. If the msg parameter is not NULL, a real message will be sent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>the socket id </td></tr>
    <tr><td class="paramname">length</td><td>the size of the message in bytes </td></tr>
    <tr><td class="paramname">msg</td><td>the message byte buffer </td></tr>
    <tr><td class="paramname">caller</td><td>the blocking socket continuation </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00637">637</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8cc_source.html#l00306">block_till()</a>, <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00427">s3f::s3fnet::Socket::bytes_completed</a>, <a class="el" href="socket__session_8h_source.html#l00335">s3f::s3fnet::Socket::CONN_RESET</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#aec021280ede42e402b92d1acbdf94e88">s3f::s3fnet::SocketSession::connected()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#ab4c23ca7a96769466d7749e5eeae7c94">s3f::s3fnet::BSocketContinuation::failure()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__master_8h_source.html#l00065">s3f::s3fnet::BSocketContinuation::next_stage</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="socket__session_8h_source.html#l00337">s3f::s3fnet::Socket::OK_TO_SEND</a>, <a class="el" href="socket__session_8h_source.html#l00071">s3f::s3fnet::SocketContinuation::retval</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a5d687ac3d1edc89a116a970ffed86640">s3f::s3fnet::SocketSession::send()</a>, <a class="el" href="socket__master_8cc_source.html#l00679">send1()</a>, <a class="el" href="socket__session_8h_source.html#l00409">s3f::s3fnet::Socket::session</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>, and <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#a6bfc3c1226633e87a3ec16b005e89d2f">s3f::s3fnet::BSocketContinuation::success()</a>.</p>

<p>Referenced by <a class="el" href="udp__server_8cc_source.html#l00339">s3f::s3fnet::UDPServerSession::interval_elapsed()</a>, <a class="el" href="tcp__server_8cc_source.html#l00288">s3f::s3fnet::TCPServerSession::sending_data()</a>, <a class="el" href="udp__client_8cc_source.html#l00390">s3f::s3fnet::UDPClientSession::server_connected()</a>, and <a class="el" href="tcp__client_8cc_source.html#l00394">s3f::s3fnet::TCPClientSession::server_connected()</a>.</p>
<div class="fragment"><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;{</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  assert(caller);</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">if</span>(!mysocket || !mysocket-&gt;session || !mysocket-&gt;session-&gt;connected())</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;  {</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;  }</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: send(), socket=%d (state=%08x), length=%u (%s).\n&quot;</span>,</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state, length, msg?<span class="stringliteral">&quot;real&quot;</span>:<span class="stringliteral">&quot;virtual&quot;</span>));</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="comment">// initiate the send</span></div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  mysocket-&gt;bytes_completed = mysocket-&gt;session-&gt;send(length, msg);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;bytes_completed &lt; 0)</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="comment">// if initially the message has been sent completely in all, no more</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="comment">// waiting is necessary; otherwise, one must wait for the OK_TO_SEND</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  <span class="comment">// (or CONN_RESET) signal to get the true number of bytes that have</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;  <span class="comment">// completed the transmission</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;bytes_completed &lt; length)</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;  {</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    caller-&gt;next_stage = &amp;<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a9fc57b3e2b67c0c2039db749eee91d62">SocketMaster::send1</a>;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">block_till</a>(sock, <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddab34f19a317b3dcb64abca781dd24bcd1">Socket::OK_TO_SEND</a>|<a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">Socket::CONN_RESET</a>, <span class="keyword">false</span>, caller);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;  }</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: send(), socket=%d (state=%08x), sent all %u bytes, immediately.\n&quot;</span>,</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                     <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state, length));</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    caller-&gt;retval = length;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    caller-&gt;success();</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  }</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a9fc57b3e2b67c0c2039db749eee91d62"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a9fc57b3e2b67c0c2039db749eee91d62">s3f::s3fnet::SocketMaster::send1</a></div><div class="ttdeci">void send1(int sock, BSocketContinuation *caller)</div><div class="ttdoc">continuations of the method send1() in the standard socket interface </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00679">socket_master.cc:679</a></div></div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77ddab34f19a317b3dcb64abca781dd24bcd1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddab34f19a317b3dcb64abca781dd24bcd1">s3f::s3fnet::Socket::OK_TO_SEND</a></div><div class="ttdoc">clear to send data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00337">socket_session.h:337</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a8f51c3d95df184e2fddcc4ec952a0763"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">s3f::s3fnet::SocketMaster::block_till</a></div><div class="ttdeci">void block_till(int sockid, uint32 mask, bool anysignal, BSocketContinuation *caller)</div><div class="ttdoc">Checks if we need to block and prepares to do so. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00306">socket_master.cc:306</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">s3f::s3fnet::Socket::CONN_RESET</a></div><div class="ttdoc">connection reset </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00335">socket_session.h:335</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6ae73062577eb5d9c52e22120f35f75b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::recv </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>bufsiz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive data from remote host Receive a message of the given length. </p>
<p>On success, the success method of the continuation will be called and the return value will be set to the number of bytes that have been received successfully. The failure method of the continuation will be called if there is an error. If the buffer parameter is not NULL and if the arrived packet contains a real message, the message will be copied to the message buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>the socket id </td></tr>
    <tr><td class="paramname">bufsiz</td><td>the size of the buffer to read into </td></tr>
    <tr><td class="paramname">buffer</td><td>the buffer to read into </td></tr>
    <tr><td class="paramname">caller</td><td>the blocking socket continuation </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00717">717</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8cc_source.html#l00306">block_till()</a>, <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00427">s3f::s3fnet::Socket::bytes_completed</a>, <a class="el" href="socket__session_8h_source.html#l00335">s3f::s3fnet::Socket::CONN_RESET</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#aec021280ede42e402b92d1acbdf94e88">s3f::s3fnet::SocketSession::connected()</a>, <a class="el" href="socket__session_8h_source.html#l00336">s3f::s3fnet::Socket::DATA_AVAILABLE</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#ab4c23ca7a96769466d7749e5eeae7c94">s3f::s3fnet::BSocketContinuation::failure()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__master_8h_source.html#l00065">s3f::s3fnet::BSocketContinuation::next_stage</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#ac450fc1f9ac9a98e049674e736ec7b70">s3f::s3fnet::SocketSession::recv()</a>, <a class="el" href="socket__master_8cc_source.html#l00759">recv1()</a>, <a class="el" href="socket__session_8h_source.html#l00071">s3f::s3fnet::SocketContinuation::retval</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__session_8h_source.html#l00409">s3f::s3fnet::Socket::session</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, <a class="el" href="socket__session_8h_source.html#l00339">s3f::s3fnet::Socket::SOCK_EOF</a>, <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>, and <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#a6bfc3c1226633e87a3ec16b005e89d2f">s3f::s3fnet::BSocketContinuation::success()</a>.</p>

<p>Referenced by <a class="el" href="tcp__server_8cc_source.html#l00258">s3f::s3fnet::TCPServerSession::connection_accepted()</a>, <a class="el" href="udp__client_8cc_source.html#l00430">s3f::s3fnet::UDPClientSession::data_received()</a>, <a class="el" href="tcp__client_8cc_source.html#l00434">s3f::s3fnet::TCPClientSession::data_received()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00417">s3f::s3fnet::BTCPClientSession::data_received()</a>, <a class="el" href="udp__server_8cc_source.html#l00276">s3f::s3fnet::UDPServerSession::handle_client()</a>, <a class="el" href="udp__client_8cc_source.html#l00408">s3f::s3fnet::UDPClientSession::request_sent()</a>, <a class="el" href="tcp__client_8cc_source.html#l00412">s3f::s3fnet::TCPClientSession::request_sent()</a>, and <a class="el" href="blocking__tcp__client_8cc_source.html#l00395">s3f::s3fnet::BTCPClientSession::server_connected()</a>.</p>
<div class="fragment"><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;{</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;  assert(caller);</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <span class="keywordflow">if</span>(!mysocket || !mysocket-&gt;session || !mysocket-&gt;session-&gt;connected())</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  {</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;  }</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: recv(), socket=%d (state=%08x), bufsiz=%u.\n&quot;</span>,</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state, bufsiz));</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;  <span class="comment">// initiate the receive; it&#39;s possible we received nothing at this stage</span></div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  mysocket-&gt;bytes_completed = mysocket-&gt;session-&gt;recv(bufsiz, buffer);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;bytes_completed &lt; 0)</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;  {</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;  }</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  <span class="comment">// if initially the message has been received completely in all, no</span></div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="comment">// more waiting is necessary; otherwise, one must wait for the</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  <span class="comment">// SOCK_EOF or DATA_AVAILABLE (or CONN_RESET) signal to get the true</span></div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="comment">// number of bytes that have completed the transmission</span></div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;bytes_completed &lt; bufsiz)</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;  {</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    caller-&gt;next_stage = &amp;<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#acf78472dc051c0ee79c28e09112fca2e">SocketMaster::recv1</a>;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">block_till</a>(sock, <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddabb98e238db6cc63e6127e9a51c2ef749">Socket::SOCK_EOF</a>|<a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda88dc6e40cb856c71ea48fc8c67f70bc7">Socket::DATA_AVAILABLE</a>|<a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">Socket::CONN_RESET</a>, <span class="keyword">false</span>, caller);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  }</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  {</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: send(), socket=%d (state=%08x), received all %u bytes, immediately.\n&quot;</span>,</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                     <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state, bufsiz));</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    caller-&gt;retval = bufsiz;</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    caller-&gt;success();</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;  }</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_acf78472dc051c0ee79c28e09112fca2e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#acf78472dc051c0ee79c28e09112fca2e">s3f::s3fnet::SocketMaster::recv1</a></div><div class="ttdeci">void recv1(int sock, BSocketContinuation *caller)</div><div class="ttdoc">continuations of the method recv1() in the standard socket interface </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00759">socket_master.cc:759</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda88dc6e40cb856c71ea48fc8c67f70bc7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda88dc6e40cb856c71ea48fc8c67f70bc7">s3f::s3fnet::Socket::DATA_AVAILABLE</a></div><div class="ttdoc">data is available </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00336">socket_session.h:336</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77ddabb98e238db6cc63e6127e9a51c2ef749"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddabb98e238db6cc63e6127e9a51c2ef749">s3f::s3fnet::Socket::SOCK_EOF</a></div><div class="ttdoc">no more data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00339">socket_session.h:339</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a8f51c3d95df184e2fddcc4ec952a0763"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">s3f::s3fnet::SocketMaster::block_till</a></div><div class="ttdeci">void block_till(int sockid, uint32 mask, bool anysignal, BSocketContinuation *caller)</div><div class="ttdoc">Checks if we need to block and prepares to do so. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00306">socket_master.cc:306</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">s3f::s3fnet::Socket::CONN_RESET</a></div><div class="ttdoc">connection reset </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00335">socket_session.h:335</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acdfff7f14652217ac5c15c429f564b54"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::close </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Terminate the connection Close the connection and invalidate the socket. </p>
<p>The success method of the continuation will be called on success. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>the socket id </td></tr>
    <tr><td class="paramname">caller</td><td>the blocking socket continuation </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00802">802</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8cc_source.html#l00306">block_till()</a>, <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__master_8cc_source.html#l00846">close1()</a>, <a class="el" href="socket__session_8h_source.html#l00338">s3f::s3fnet::Socket::CONN_CLOSED</a>, <a class="el" href="socket__session_8h_source.html#l00335">s3f::s3fnet::Socket::CONN_RESET</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#aec021280ede42e402b92d1acbdf94e88">s3f::s3fnet::SocketSession::connected()</a>, <a class="el" href="socket__session_8h_source.html#l00398">s3f::s3fnet::Socket::die_slowly()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a9c116ae47df625c46acfd06e30ccfc30">s3f::s3fnet::SocketSession::disconnect()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#ab4c23ca7a96769466d7749e5eeae7c94">s3f::s3fnet::BSocketContinuation::failure()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__session_8h_source.html#l00378">s3f::s3fnet::Socket::is_active()</a>, <a class="el" href="socket__master_8h_source.html#l00065">s3f::s3fnet::BSocketContinuation::next_stage</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="socket__session_8h_source.html#l00372">s3f::s3fnet::Socket::reinit()</a>, <a class="el" href="socket__session_8h_source.html#l00369">s3f::s3fnet::Socket::release()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__session_8h_source.html#l00409">s3f::s3fnet::Socket::session</a>, <a class="el" href="socket__session_8h_source.html#l00342">s3f::s3fnet::Socket::SESSION_RELEASED</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>, and <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#a6bfc3c1226633e87a3ec16b005e89d2f">s3f::s3fnet::BSocketContinuation::success()</a>.</p>

<p>Referenced by <a class="el" href="udp__client_8cc_source.html#l00430">s3f::s3fnet::UDPClientSession::data_received()</a>, <a class="el" href="tcp__client_8cc_source.html#l00434">s3f::s3fnet::TCPClientSession::data_received()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00417">s3f::s3fnet::BTCPClientSession::data_received()</a>, <a class="el" href="udp__server_8cc_source.html#l00348">s3f::s3fnet::UDPServerSession::data_sent()</a>, and <a class="el" href="tcp__server_8cc_source.html#l00299">s3f::s3fnet::TCPServerSession::data_sent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;{</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;  assert(caller);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;  <span class="keywordflow">if</span>(!mysocket)</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;  {</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;  }</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: close(), socket=%d (state=%08x).\n&quot;</span>,</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;session &amp;&amp; mysocket-&gt;session-&gt;connected())</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;  {</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="comment">// proceed to disconnect</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;    mysocket-&gt;session-&gt;disconnect();</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      </div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;    caller-&gt;next_stage = &amp;<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8fac33c0676bd3a7454ecb691ee75334">SocketMaster::close1</a>;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">block_till</a>(sock, <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">Socket::CONN_RESET</a>|<a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddae5a36e8d40730816b40c00dd2b868414">Socket::CONN_CLOSED</a>|<a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddafc214b3e759b812204f58f5677f78a85">Socket::SESSION_RELEASED</a>, <span class="keyword">false</span>, caller);</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;  }</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;  {</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: close(), socket=%d (state=%08x), not connected (no blocking).\n&quot;</span>,</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;                     <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;    mysocket-&gt;reinit();</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">if</span>(mysocket-&gt;is_active()) mysocket-&gt;die_slowly();</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    {</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="comment">// the destructor will call release method---which will detach</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="comment">// the socket session from the socket, remove the socket session</span></div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="comment">// from the session master, and then reclaim the socket</span></div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="comment">// session---before the socket is reclaimed</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      mysocket-&gt;release();</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.erase(sock);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    }</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    caller-&gt;success();</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;  }</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77ddae5a36e8d40730816b40c00dd2b868414"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddae5a36e8d40730816b40c00dd2b868414">s3f::s3fnet::Socket::CONN_CLOSED</a></div><div class="ttdoc">connection is closed </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00338">socket_session.h:338</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a8fac33c0676bd3a7454ecb691ee75334"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a8fac33c0676bd3a7454ecb691ee75334">s3f::s3fnet::SocketMaster::close1</a></div><div class="ttdeci">void close1(int sock, BSocketContinuation *caller)</div><div class="ttdoc">continuations of the method close1() in the standard socket interface </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00846">socket_master.cc:846</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77ddafc214b3e759b812204f58f5677f78a85"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddafc214b3e759b812204f58f5677f78a85">s3f::s3fnet::Socket::SESSION_RELEASED</a></div><div class="ttdoc">session has already been released </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00342">socket_session.h:342</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a8f51c3d95df184e2fddcc4ec952a0763"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">s3f::s3fnet::SocketMaster::block_till</a></div><div class="ttdeci">void block_till(int sockid, uint32 mask, bool anysignal, BSocketContinuation *caller)</div><div class="ttdoc">Checks if we need to block and prepares to do so. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00306">socket_master.cc:306</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">s3f::s3fnet::Socket::CONN_RESET</a></div><div class="ttdoc">connection reset </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00335">socket_session.h:335</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a43fa41d42fe459891c947da54e43c725"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::connect1 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a43fa41d42fe459891c947da54e43c725" title="continuations of the method connect1() in the standard socket interface ">connect1()</a> in the standard socket interface </p>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00365">365</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00335">s3f::s3fnet::Socket::CONN_RESET</a>, <a class="el" href="socket__session_8h_source.html#l00393">s3f::s3fnet::Socket::deactivate()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#ab4c23ca7a96769466d7749e5eeae7c94">s3f::s3fnet::BSocketContinuation::failure()</a>, <a class="el" href="socket__session_8h_source.html#l00405">s3f::s3fnet::Socket::has_died()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__session_8h_source.html#l00378">s3f::s3fnet::Socket::is_active()</a>, <a class="el" href="socket__session_8h_source.html#l00415">s3f::s3fnet::Socket::mask</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="socket__session_8h_source.html#l00372">s3f::s3fnet::Socket::reinit()</a>, <a class="el" href="socket__session_8h_source.html#l00369">s3f::s3fnet::Socket::release()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>, and <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#a6bfc3c1226633e87a3ec16b005e89d2f">s3f::s3fnet::BSocketContinuation::success()</a>.</p>

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00333">connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;{</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  assert(caller);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <span class="keywordflow">if</span>(!mysocket) { caller-&gt;failure(); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  mysocket-&gt;deactivate();</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  mysocket-&gt;mask = 0;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;  <span class="comment">// flip the connect active flag</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;  mysocket-&gt;state &amp;= ~Socket::CONNECT_ACTIVE;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;has_died() &amp;&amp; !mysocket-&gt;is_active())</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    mysocket-&gt;release();</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.erase(sock);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="comment">// the socket could have been reset</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;state &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">Socket::CONN_RESET</a>)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: connect(): socket=%d (state=%08x), reset.\n&quot;</span>,</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                     <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    mysocket-&gt;reinit();</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  }</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: connect(): socket=%d (state=%08x), continuing.\n&quot;</span>,</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  caller-&gt;success();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">s3f::s3fnet::Socket::CONN_RESET</a></div><div class="ttdoc">connection reset </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00335">socket_session.h:335</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8f7d681bae5d5265e9a2db34eef1ca7e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::accept1a </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f7d681bae5d5265e9a2db34eef1ca7e" title="continuations of the method accept1a() in the standard socket interface ">accept1a()</a> in the standard socket interface </p>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00443">443</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8cc_source.html#l00535">accept2a()</a>, <a class="el" href="socket__master_8cc_source.html#l00306">block_till()</a>, <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00077">s3f::s3fnet::SocketContinuation::chain_continuation</a>, <a class="el" href="socket__session_8h_source.html#l00335">s3f::s3fnet::Socket::CONN_RESET</a>, <a class="el" href="socket__session_8h_source.html#l00343">s3f::s3fnet::Socket::CONNECT_ACTIVE</a>, <a class="el" href="socket__session_8h_source.html#l00393">s3f::s3fnet::Socket::deactivate()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#ab4c23ca7a96769466d7749e5eeae7c94">s3f::s3fnet::BSocketContinuation::failure()</a>, <a class="el" href="socket__session_8h_source.html#l00405">s3f::s3fnet::Socket::has_died()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__session_8h_source.html#l00378">s3f::s3fnet::Socket::is_active()</a>, <a class="el" href="socket__session_8h_source.html#l00415">s3f::s3fnet::Socket::mask</a>, <a class="el" href="socket__master_8h_source.html#l00065">s3f::s3fnet::BSocketContinuation::next_stage</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="socket__session_8h_source.html#l00337">s3f::s3fnet::Socket::OK_TO_SEND</a>, <a class="el" href="socket__session_8h_source.html#l00372">s3f::s3fnet::Socket::reinit()</a>, <a class="el" href="socket__session_8h_source.html#l00369">s3f::s3fnet::Socket::release()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, and <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>.</p>

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00403">accept()</a>.</p>
<div class="fragment"><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;{</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;  assert(caller);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;  <span class="keywordflow">if</span>(!mysocket) { caller-&gt;failure(); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;  mysocket-&gt;deactivate();</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;  mysocket-&gt;mask = 0;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;  <span class="comment">// flip the active connection flag</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;  mysocket-&gt;state &amp;= ~Socket::CONNECT_ACTIVE;</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;has_died() &amp;&amp; !mysocket-&gt;is_active())</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;  {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    mysocket-&gt;release();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.erase(sock);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;  }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;state &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">Socket::CONN_RESET</a>)</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;  {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: accept(): socket=%d (state=%08x), reset.\n&quot;</span>,</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                     <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    mysocket-&gt;reinit();</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: accept(), socket=%d (state=%08x), first connection.\n&quot;</span>,</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  <span class="comment">// notify first connection</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  <span class="keywordflow">if</span>(caller-&gt;chain_continuation)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    ((BSocketContinuation*)caller-&gt;chain_continuation)-&gt;success();</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <span class="comment">// flip the connect active flag</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;  mysocket-&gt;state |= <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddaabfe6457a90355729d44b4f5ce12eef4">Socket::CONNECT_ACTIVE</a>;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  caller-&gt;next_stage = &amp;<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a330ff9858e4d98f47f8c57e1156fd9f7">SocketMaster::accept2a</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">block_till</a>(sock, <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddab34f19a317b3dcb64abca781dd24bcd1">Socket::OK_TO_SEND</a>|<a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">Socket::CONN_RESET</a>, <span class="keyword">false</span>, caller);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77ddab34f19a317b3dcb64abca781dd24bcd1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddab34f19a317b3dcb64abca781dd24bcd1">s3f::s3fnet::Socket::OK_TO_SEND</a></div><div class="ttdoc">clear to send data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00337">socket_session.h:337</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a8f51c3d95df184e2fddcc4ec952a0763"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">s3f::s3fnet::SocketMaster::block_till</a></div><div class="ttdeci">void block_till(int sockid, uint32 mask, bool anysignal, BSocketContinuation *caller)</div><div class="ttdoc">Checks if we need to block and prepares to do so. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00306">socket_master.cc:306</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77ddaabfe6457a90355729d44b4f5ce12eef4"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddaabfe6457a90355729d44b4f5ce12eef4">s3f::s3fnet::Socket::CONNECT_ACTIVE</a></div><div class="ttdoc">connect is in progress </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00343">socket_session.h:343</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">s3f::s3fnet::Socket::CONN_RESET</a></div><div class="ttdoc">connection reset </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00335">socket_session.h:335</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a330ff9858e4d98f47f8c57e1156fd9f7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a330ff9858e4d98f47f8c57e1156fd9f7">s3f::s3fnet::SocketMaster::accept2a</a></div><div class="ttdeci">void accept2a(int sock, BSocketContinuation *caller)</div><div class="ttdoc">continuations of the method accept2a() in the standard socket interface </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00535">socket_master.cc:535</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0ef1fbddfa27da700ff93752a4aa3dea"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::accept1b </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a0ef1fbddfa27da700ff93752a4aa3dea" title="continuations of the method accept1b() in the standard socket interface ">accept1b()</a> in the standard socket interface </p>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00489">489</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8cc_source.html#l00600">accept2b()</a>, <a class="el" href="socket__master_8cc_source.html#l00306">block_till()</a>, <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00077">s3f::s3fnet::SocketContinuation::chain_continuation</a>, <a class="el" href="socket__session_8h_source.html#l00335">s3f::s3fnet::Socket::CONN_RESET</a>, <a class="el" href="socket__session_8h_source.html#l00343">s3f::s3fnet::Socket::CONNECT_ACTIVE</a>, <a class="el" href="socket__session_8h_source.html#l00393">s3f::s3fnet::Socket::deactivate()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#ab4c23ca7a96769466d7749e5eeae7c94">s3f::s3fnet::BSocketContinuation::failure()</a>, <a class="el" href="socket__session_8h_source.html#l00405">s3f::s3fnet::Socket::has_died()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__session_8h_source.html#l00378">s3f::s3fnet::Socket::is_active()</a>, <a class="el" href="socket__session_8h_source.html#l00415">s3f::s3fnet::Socket::mask</a>, <a class="el" href="socket__master_8h_source.html#l00065">s3f::s3fnet::BSocketContinuation::next_stage</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="socket__session_8h_source.html#l00337">s3f::s3fnet::Socket::OK_TO_SEND</a>, <a class="el" href="socket__session_8h_source.html#l00372">s3f::s3fnet::Socket::reinit()</a>, <a class="el" href="socket__session_8h_source.html#l00369">s3f::s3fnet::Socket::release()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, and <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>.</p>

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00403">accept()</a>.</p>
<div class="fragment"><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;{</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;  assert(caller);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  <span class="keywordflow">if</span>(!mysocket) { caller-&gt;failure(); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  mysocket-&gt;deactivate();</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  mysocket-&gt;mask = 0;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="comment">// flip the active connection flag</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;  mysocket-&gt;state &amp;= ~Socket::CONNECT_ACTIVE;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;has_died() &amp;&amp; !mysocket-&gt;is_active())</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;  {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    mysocket-&gt;release();</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.erase(sock);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;  }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;state &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">Socket::CONN_RESET</a>)</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: accept(): socket=%d (state=%08x), reset.\n&quot;</span>,</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                     <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    mysocket-&gt;reinit();</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  }</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: accept(), socket=%d (state=%08x), first connection.\n&quot;</span>,</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;  <span class="comment">// notify first connection</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordflow">if</span>(caller-&gt;chain_continuation)</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    ((BSocketContinuation*)caller-&gt;chain_continuation)-&gt;success();</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;  <span class="comment">// flip the connect active flag</span></div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;  mysocket-&gt;state |= <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddaabfe6457a90355729d44b4f5ce12eef4">Socket::CONNECT_ACTIVE</a>;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;  caller-&gt;next_stage = &amp;<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#ab0f0a978a425a30debc0a8aa6b3115e9">SocketMaster::accept2b</a>;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">block_till</a>(sock, <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddab34f19a317b3dcb64abca781dd24bcd1">Socket::OK_TO_SEND</a>|<a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">Socket::CONN_RESET</a>, <span class="keyword">false</span>, caller);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_ab0f0a978a425a30debc0a8aa6b3115e9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#ab0f0a978a425a30debc0a8aa6b3115e9">s3f::s3fnet::SocketMaster::accept2b</a></div><div class="ttdeci">void accept2b(int sock, BSocketContinuation *caller)</div><div class="ttdoc">continuations of the method accept2b() in the standard socket interface </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00600">socket_master.cc:600</a></div></div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77ddab34f19a317b3dcb64abca781dd24bcd1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddab34f19a317b3dcb64abca781dd24bcd1">s3f::s3fnet::Socket::OK_TO_SEND</a></div><div class="ttdoc">clear to send data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00337">socket_session.h:337</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a8f51c3d95df184e2fddcc4ec952a0763"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a8f51c3d95df184e2fddcc4ec952a0763">s3f::s3fnet::SocketMaster::block_till</a></div><div class="ttdeci">void block_till(int sockid, uint32 mask, bool anysignal, BSocketContinuation *caller)</div><div class="ttdoc">Checks if we need to block and prepares to do so. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00306">socket_master.cc:306</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77ddaabfe6457a90355729d44b4f5ce12eef4"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddaabfe6457a90355729d44b4f5ce12eef4">s3f::s3fnet::Socket::CONNECT_ACTIVE</a></div><div class="ttdoc">connect is in progress </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00343">socket_session.h:343</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">s3f::s3fnet::Socket::CONN_RESET</a></div><div class="ttdoc">connection reset </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00335">socket_session.h:335</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a330ff9858e4d98f47f8c57e1156fd9f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::accept2a </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a330ff9858e4d98f47f8c57e1156fd9f7" title="continuations of the method accept2a() in the standard socket interface ">accept2a()</a> in the standard socket interface </p>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00535">535</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00335">s3f::s3fnet::Socket::CONN_RESET</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_session_master.html#abdf982985dedadae59fa42cab19ecf4e">s3f::s3fnet::SessionMaster::createSession()</a>, <a class="el" href="socket__session_8h_source.html#l00393">s3f::s3fnet::Socket::deactivate()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#ab4c23ca7a96769466d7749e5eeae7c94">s3f::s3fnet::BSocketContinuation::failure()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a5f85d65696a79c0c6e1948659c77131e">s3f::s3fnet::SocketSession::getSessionMaster()</a>, <a class="el" href="socket__session_8h_source.html#l00405">s3f::s3fnet::Socket::has_died()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__session_8h_source.html#l00378">s3f::s3fnet::Socket::is_active()</a>, <a class="el" href="socket__session_8h_source.html#l00415">s3f::s3fnet::Socket::mask</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="socket__session_8h_source.html#l00372">s3f::s3fnet::Socket::reinit()</a>, <a class="el" href="socket__session_8h_source.html#l00369">s3f::s3fnet::Socket::release()</a>, <a class="el" href="socket__session_8h_source.html#l00071">s3f::s3fnet::SocketContinuation::retval</a>, <a class="el" href="shstl_8h_source.html#l00044">S3FNET_MAKE_PAIR</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__session_8h_source.html#l00409">s3f::s3fnet::Socket::session</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a1009aeaa435bcc763e3ea779a3b158eb">s3f::s3fnet::SocketSession::setSocketID()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a8c4f49c6dd370171179404f0bd3d487d">s3f::s3fnet::SocketSession::setSource()</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, <a class="el" href="socket__master_8cc_source.html#l00162">socket()</a>, <a class="el" href="socket__session_8h_source.html#l00135">s3f::s3fnet::SessionID::src_ip</a>, <a class="el" href="socket__session_8h_source.html#l00141">s3f::s3fnet::SessionID::src_port</a>, <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#a6bfc3c1226633e87a3ec16b005e89d2f">s3f::s3fnet::BSocketContinuation::success()</a>, and <a class="el" href="socket__master_8h_source.html#l00285">unbound_socks</a>.</p>

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00443">accept1a()</a>.</p>
<div class="fragment"><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;{</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;  assert(caller);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;  <span class="keywordflow">if</span>(!mysocket) { caller-&gt;failure(); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;  mysocket-&gt;deactivate();</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;  mysocket-&gt;mask = 0;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;  <span class="comment">// flip the active connection flag</span></div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;  mysocket-&gt;state &amp;= ~Socket::CONNECT_ACTIVE;</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;has_died() &amp;&amp; !mysocket-&gt;is_active())</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;  {</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    mysocket-&gt;release();</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.erase(sock);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    caller-&gt;failure(); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;  }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;state &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">Socket::CONN_RESET</a>)</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;  {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: accept(): socket=%d (state=%08x), reset.\n&quot;</span>,</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                     <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    mysocket-&gt;reinit();</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    caller-&gt;failure(); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;  }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: accept(), socket=%d (state=%08x), continuing.\n&quot;</span>,</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;  <span class="comment">// create a new session for the original socket</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;  SocketSession* session = mysocket-&gt;session-&gt;getSessionMaster()-&gt;createSession(sock);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;  assert(session);</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;  <span class="keywordflow">if</span>(!session-&gt;setSource(mysocket-&gt;session-&gt;src_ip, mysocket-&gt;session-&gt;src_port))</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="keyword">delete</span> session;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    caller-&gt;failure();</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;  }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;  </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;  <span class="keywordtype">int</span> new_sock = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#ae4be12a95b5a155e80e7323b63f1d659">socket</a>(); <span class="comment">// unbound at first</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;  Socket* new_mysocket = <span class="keyword">new</span> Socket();</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;  assert(new_mysocket);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;  </div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;  <span class="comment">// copy the old socket to the new one and put it in the</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;  <span class="comment">// bound_socks list</span></div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;  new_mysocket-&gt;session = mysocket-&gt;session;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;  new_mysocket-&gt;state   = mysocket-&gt;state;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;  new_mysocket-&gt;session-&gt;setSocketID(new_sock);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a43975cb9dfee4f948fd1b08f7127a59a">unbound_socks</a>.erase(new_sock);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.insert(<a class="code" href="shstl_8h.html#ae26f071070e35be838d3e85c13120f00">S3FNET_MAKE_PAIR</a>(new_sock, new_mysocket));</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;  <span class="comment">// assign the newly created session to old socket (old socket</span></div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;  <span class="comment">// remains in bound table) and reset its state</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  mysocket-&gt;session = session; </div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;  mysocket-&gt;reinit();</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;  </div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;  caller-&gt;retval = new_sock;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;  caller-&gt;success();</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;}</div>
<div class="ttc" id="shstl_8h_html_ae26f071070e35be838d3e85c13120f00"><div class="ttname"><a href="shstl_8h.html#ae26f071070e35be838d3e85c13120f00">S3FNET_MAKE_PAIR</a></div><div class="ttdeci">#define S3FNET_MAKE_PAIR(x, y)</div><div class="ttdoc">std::make_pair(x,y) in shared memory. </div><div class="ttdef"><b>Definition:</b> <a href="shstl_8h_source.html#l00044">shstl.h:44</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a43975cb9dfee4f948fd1b08f7127a59a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a43975cb9dfee4f948fd1b08f7127a59a">s3f::s3fnet::SocketMaster::unbound_socks</a></div><div class="ttdeci">SOCK_SET unbound_socks</div><div class="ttdoc">A set of unbound socket ids. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00285">socket_master.h:285</a></div></div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_ae4be12a95b5a155e80e7323b63f1d659"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#ae4be12a95b5a155e80e7323b63f1d659">s3f::s3fnet::SocketMaster::socket</a></div><div class="ttdeci">int socket()</div><div class="ttdoc">Returns a new socket id. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00162">socket_master.cc:162</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">s3f::s3fnet::Socket::CONN_RESET</a></div><div class="ttdoc">connection reset </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00335">socket_session.h:335</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab0f0a978a425a30debc0a8aa6b3115e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::accept2b </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#ab0f0a978a425a30debc0a8aa6b3115e9" title="continuations of the method accept2b() in the standard socket interface ">accept2b()</a> in the standard socket interface </p>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00600">600</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00335">s3f::s3fnet::Socket::CONN_RESET</a>, <a class="el" href="socket__session_8h_source.html#l00393">s3f::s3fnet::Socket::deactivate()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#ab4c23ca7a96769466d7749e5eeae7c94">s3f::s3fnet::BSocketContinuation::failure()</a>, <a class="el" href="socket__session_8h_source.html#l00405">s3f::s3fnet::Socket::has_died()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__session_8h_source.html#l00378">s3f::s3fnet::Socket::is_active()</a>, <a class="el" href="socket__session_8h_source.html#l00415">s3f::s3fnet::Socket::mask</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="socket__session_8h_source.html#l00372">s3f::s3fnet::Socket::reinit()</a>, <a class="el" href="socket__session_8h_source.html#l00369">s3f::s3fnet::Socket::release()</a>, <a class="el" href="socket__session_8h_source.html#l00071">s3f::s3fnet::SocketContinuation::retval</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>, and <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#a6bfc3c1226633e87a3ec16b005e89d2f">s3f::s3fnet::BSocketContinuation::success()</a>.</p>

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00489">accept1b()</a>.</p>
<div class="fragment"><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;{</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;  assert(caller);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <span class="keywordflow">if</span>(!mysocket) { caller-&gt;failure(); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  mysocket-&gt;deactivate();</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;  mysocket-&gt;mask = 0;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;  <span class="comment">// flip the active connection flag</span></div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;  mysocket-&gt;state &amp;= ~Socket::CONNECT_ACTIVE;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;has_died() &amp;&amp; !mysocket-&gt;is_active())</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;  {</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    mysocket-&gt;release();</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.erase(sock);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    caller-&gt;failure(); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  }</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;state &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">Socket::CONN_RESET</a>)</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: accept(): socket=%d (state=%08x), reset.\n&quot;</span>,</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                     <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    mysocket-&gt;reinit();</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    caller-&gt;failure(); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;  }</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: accept(), socket=%d (state=%08x), continuing.\n&quot;</span>,</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;  caller-&gt;retval = sock;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;  caller-&gt;success();</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">s3f::s3fnet::Socket::CONN_RESET</a></div><div class="ttdoc">connection reset </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00335">socket_session.h:335</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9fc57b3e2b67c0c2039db749eee91d62"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::send1 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a9fc57b3e2b67c0c2039db749eee91d62" title="continuations of the method send1() in the standard socket interface ">send1()</a> in the standard socket interface </p>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00679">679</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00427">s3f::s3fnet::Socket::bytes_completed</a>, <a class="el" href="socket__session_8h_source.html#l00335">s3f::s3fnet::Socket::CONN_RESET</a>, <a class="el" href="socket__session_8h_source.html#l00393">s3f::s3fnet::Socket::deactivate()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#ab4c23ca7a96769466d7749e5eeae7c94">s3f::s3fnet::BSocketContinuation::failure()</a>, <a class="el" href="socket__session_8h_source.html#l00405">s3f::s3fnet::Socket::has_died()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__session_8h_source.html#l00378">s3f::s3fnet::Socket::is_active()</a>, <a class="el" href="socket__session_8h_source.html#l00415">s3f::s3fnet::Socket::mask</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="socket__session_8h_source.html#l00372">s3f::s3fnet::Socket::reinit()</a>, <a class="el" href="socket__session_8h_source.html#l00369">s3f::s3fnet::Socket::release()</a>, <a class="el" href="socket__session_8h_source.html#l00071">s3f::s3fnet::SocketContinuation::retval</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>, and <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#a6bfc3c1226633e87a3ec16b005e89d2f">s3f::s3fnet::BSocketContinuation::success()</a>.</p>

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00637">send()</a>.</p>
<div class="fragment"><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;{</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;  assert(caller);</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordflow">if</span>(!mysocket) { caller-&gt;failure(); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  mysocket-&gt;deactivate();</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  mysocket-&gt;mask = 0;</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;has_died() &amp;&amp; !mysocket-&gt;is_active())</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;  {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    mysocket-&gt;release();</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.erase(sock);</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    caller-&gt;failure(); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;  }</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;state &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">Socket::CONN_RESET</a>)</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;  {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: send(): socket=%d (state=%08x), reset.\n&quot;</span>,</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                     <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    mysocket-&gt;reinit();</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">// we don&#39;t bail out here; we need to return the number of bytes</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">// sent so far unless nothing&#39;s been sent</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">if</span>(mysocket-&gt;bytes_completed == 0)</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    {</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      caller-&gt;failure(); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    }</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;  }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: send(), socket=%d (state=%08x), sent %u bytes.\n&quot;</span>,</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state, mysocket-&gt;bytes_completed));</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;  caller-&gt;retval = mysocket-&gt;bytes_completed;</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;  caller-&gt;success();</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">s3f::s3fnet::Socket::CONN_RESET</a></div><div class="ttdoc">connection reset </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00335">socket_session.h:335</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acf78472dc051c0ee79c28e09112fca2e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::recv1 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#acf78472dc051c0ee79c28e09112fca2e" title="continuations of the method recv1() in the standard socket interface ">recv1()</a> in the standard socket interface </p>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00759">759</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00427">s3f::s3fnet::Socket::bytes_completed</a>, <a class="el" href="socket__session_8h_source.html#l00335">s3f::s3fnet::Socket::CONN_RESET</a>, <a class="el" href="socket__session_8h_source.html#l00393">s3f::s3fnet::Socket::deactivate()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#ab4c23ca7a96769466d7749e5eeae7c94">s3f::s3fnet::BSocketContinuation::failure()</a>, <a class="el" href="socket__session_8h_source.html#l00405">s3f::s3fnet::Socket::has_died()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__session_8h_source.html#l00378">s3f::s3fnet::Socket::is_active()</a>, <a class="el" href="socket__session_8h_source.html#l00415">s3f::s3fnet::Socket::mask</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="socket__session_8h_source.html#l00372">s3f::s3fnet::Socket::reinit()</a>, <a class="el" href="socket__session_8h_source.html#l00369">s3f::s3fnet::Socket::release()</a>, <a class="el" href="socket__session_8h_source.html#l00071">s3f::s3fnet::SocketContinuation::retval</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, <a class="el" href="socket__session_8h_source.html#l00339">s3f::s3fnet::Socket::SOCK_EOF</a>, <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>, and <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#a6bfc3c1226633e87a3ec16b005e89d2f">s3f::s3fnet::BSocketContinuation::success()</a>.</p>

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00717">recv()</a>.</p>
<div class="fragment"><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;{</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  assert(caller);</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  <span class="keywordflow">if</span>(!mysocket) { caller-&gt;failure(); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  mysocket-&gt;deactivate();</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;  mysocket-&gt;mask = 0;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;has_died() &amp;&amp; !mysocket-&gt;is_active())</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;  {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;    mysocket-&gt;release();</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.erase(sock);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;    caller-&gt;failure(); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;  }</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;state &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">Socket::CONN_RESET</a>)</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;  {</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: recv(): socket=%d (state=%08x), reset.\n&quot;</span>,</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                     <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;    mysocket-&gt;reinit();</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;    <span class="comment">// we don&#39;t bail out here; we need to return the number of bytes</span></div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    <span class="comment">// received so far</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    <span class="keywordflow">if</span>(mysocket-&gt;bytes_completed == 0)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;    {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      caller-&gt;failure(); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;    }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;  }</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;  <span class="keywordflow">if</span>((mysocket-&gt;state &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddabb98e238db6cc63e6127e9a51c2ef749">Socket::SOCK_EOF</a>) &amp;&amp; mysocket-&gt;bytes_completed == 0)</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;  {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    caller-&gt;failure(); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;  }</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: recv(), socket=%d (state=%08x), received %u bytes.\n&quot;</span>,</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state, mysocket-&gt;bytes_completed));</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;  caller-&gt;retval = mysocket-&gt;bytes_completed;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;  caller-&gt;success();</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77ddabb98e238db6cc63e6127e9a51c2ef749"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddabb98e238db6cc63e6127e9a51c2ef749">s3f::s3fnet::Socket::SOCK_EOF</a></div><div class="ttdoc">no more data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00339">socket_session.h:339</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77dda1d48367b30384ba5b50a74fb6b63721f">s3f::s3fnet::Socket::CONN_RESET</a></div><div class="ttdoc">connection reset </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00335">socket_session.h:335</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8fac33c0676bd3a7454ecb691ee75334"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::close1 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>continuations of the method <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#a8fac33c0676bd3a7454ecb691ee75334" title="continuations of the method close1() in the standard socket interface ">close1()</a> in the standard socket interface </p>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00846">846</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00393">s3f::s3fnet::Socket::deactivate()</a>, <a class="el" href="socket__session_8h_source.html#l00398">s3f::s3fnet::Socket::die_slowly()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#ab4c23ca7a96769466d7749e5eeae7c94">s3f::s3fnet::BSocketContinuation::failure()</a>, <a class="el" href="socket__session_8h_source.html#l00405">s3f::s3fnet::Socket::has_died()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__session_8h_source.html#l00378">s3f::s3fnet::Socket::is_active()</a>, <a class="el" href="socket__session_8h_source.html#l00415">s3f::s3fnet::Socket::mask</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="socket__session_8h_source.html#l00372">s3f::s3fnet::Socket::reinit()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a08bceb3d5859458407b05387f01d3ebb">s3f::s3fnet::SocketSession::release()</a>, <a class="el" href="socket__session_8h_source.html#l00369">s3f::s3fnet::Socket::release()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__session_8h_source.html#l00409">s3f::s3fnet::Socket::session</a>, <a class="el" href="socket__session_8h_source.html#l00342">s3f::s3fnet::Socket::SESSION_RELEASED</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>, and <a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html#a6bfc3c1226633e87a3ec16b005e89d2f">s3f::s3fnet::BSocketContinuation::success()</a>.</p>

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00802">close()</a>.</p>
<div class="fragment"><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;{</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  assert(caller);</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;  <span class="keywordflow">if</span>(!mysocket) { caller-&gt;failure(); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;  mysocket-&gt;deactivate();</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;  mysocket-&gt;mask = 0;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: close(), socket=%d (state=%08x), continuing.\n&quot;</span>,</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state));</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;has_died() &amp;&amp; !mysocket-&gt;is_active())</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;  {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    mysocket-&gt;release();</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.erase(sock);</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    caller-&gt;failure(); <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  }</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;session &amp;&amp; (mysocket-&gt;state &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddafc214b3e759b812204f58f5677f78a85">Socket::SESSION_RELEASED</a>))</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;  {</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    mysocket-&gt;session-&gt;release();</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;  }</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;  mysocket-&gt;reinit();</div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;  <span class="keywordflow">if</span>(mysocket-&gt;is_active()) mysocket-&gt;die_slowly();</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;  {</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    <span class="comment">// the destructor will call release method---which will detach</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;    <span class="comment">// the socket session from the socket, remove the socket session</span></div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;    <span class="comment">// from the session master, and then reclaim the socket</span></div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;    <span class="comment">// session---before the socket is reclaimed</span></div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;    mysocket-&gt;release();</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.erase(sock);</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;  }</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;  caller-&gt;success();</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_html_ac04bfbccfd79436b8122c5c74d3b77ddafc214b3e759b812204f58f5677f78a85"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket.html#ac04bfbccfd79436b8122c5c74d3b77ddafc214b3e759b812204f58f5677f78a85">s3f::s3fnet::Socket::SESSION_RELEASED</a></div><div class="ttdoc">session has already been released </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00342">socket_session.h:342</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8f51c3d95df184e2fddcc4ec952a0763"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::SocketMaster::block_till </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>anysignal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_b_socket_continuation.html">BSocketContinuation</a> *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Checks if we need to block and prepares to do so. </p>
<p>This is a "replacement" of the block_till in the original ssfnet blocking socket master, which actually simulated blocking the simulated process itself instead of using continuations. Here, we basically just set masks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sockid</td><td>the socket id </td></tr>
    <tr><td class="paramname">mask</td><td>the mask to wait for </td></tr>
    <tr><td class="paramname">anysignal</td><td>whether to wake on any signal </td></tr>
    <tr><td class="paramname">caller</td><td>the blocking socket continuation </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00306">306</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="socket__session_8h_source.html#l00386">s3f::s3fnet::Socket::activate()</a>, <a class="el" href="socket__master_8h_source.html#l00282">bound_socks</a>, <a class="el" href="socket__session_8h_source.html#l00423">s3f::s3fnet::Socket::continuation</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="socket__session_8h_source.html#l00415">s3f::s3fnet::Socket::mask</a>, <a class="el" href="socket__master_8h_source.html#l00065">s3f::s3fnet::BSocketContinuation::next_stage</a>, <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP()</a>, <a class="el" href="socket__master_8cc_source.html#l00017">SOCK_DUMP</a>, and <a class="el" href="socket__session_8h_source.html#l00412">s3f::s3fnet::Socket::state</a>.</p>

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00403">accept()</a>, <a class="el" href="socket__master_8cc_source.html#l00443">accept1a()</a>, <a class="el" href="socket__master_8cc_source.html#l00489">accept1b()</a>, <a class="el" href="socket__master_8cc_source.html#l00802">close()</a>, <a class="el" href="socket__master_8cc_source.html#l00333">connect()</a>, <a class="el" href="socket__master_8cc_source.html#l00717">recv()</a>, and <a class="el" href="socket__master_8cc_source.html#l00637">send()</a>.</p>
<div class="fragment"><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;{</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  Socket* mysocket = 0;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">S3FNET_MAP</a>(<span class="keywordtype">int</span>, Socket*)::iterator iter = <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.find(sock);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;  <span class="keywordflow">if</span>(iter != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">bound_socks</a>.end()) mysocket = (*iter).second;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="keywordflow">if</span>(!mysocket) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %ld: block_till(): socket=%d (state=%08x), mask=%08x, any=%d.\n&quot;</span>,</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                   <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;nhi.toString(), <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>(), sock, mysocket-&gt;state, mask, anysignal));</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;  <span class="keywordflow">if</span>(!(mask &amp; mysocket-&gt;state)) <span class="comment">// no match</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">if</span>(anysignal) mysocket-&gt;mask = 0xffffffff;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">else</span> mysocket-&gt;mask = (mask &amp; ~mysocket-&gt;state);</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <a class="code" href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a>(printf(<span class="stringliteral">&quot;suspend: mask=%08x, state=%08x.\n&quot;</span>, mysocket-&gt;mask, mysocket-&gt;state));</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    mysocket-&gt;activate();</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    mysocket-&gt;continuation = (SocketContinuation*)caller;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">else</span> <span class="comment">// no blocking, continue to the next stage</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  {</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    assert(caller-&gt;next_stage);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    void (<a class="code" href="classs3f_1_1s3fnet_1_1_socket_master.html#a0fe9ad00a5968cbc54b9d8b80ed0f031">SocketMaster</a>::*fct)(int, BSocketContinuation*) = caller-&gt;next_stage;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    caller-&gt;next_stage = 0;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    (this-&gt;*fct)(sock, caller);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  }</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="socket__master_8cc_html_a0119d4f01c661fd58745ef3b9145ed80"><div class="ttname"><a href="socket__master_8cc.html#a0119d4f01c661fd58745ef3b9145ed80">SOCK_DUMP</a></div><div class="ttdeci">#define SOCK_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00017">socket_master.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_aa51a58df2b6af30fc17f80eb8193344e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#aa51a58df2b6af30fc17f80eb8193344e">s3f::s3fnet::SocketMaster::S3FNET_MAP</a></div><div class="ttdeci">typedef S3FNET_MAP(int, Socket *) SOCK_MAP</div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a0fe9ad00a5968cbc54b9d8b80ed0f031"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a0fe9ad00a5968cbc54b9d8b80ed0f031">s3f::s3fnet::SocketMaster::SocketMaster</a></div><div class="ttdeci">SocketMaster(ProtocolGraph *graph)</div><div class="ttdoc">The constructor. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8cc_source.html#l00025">socket_master.cc:25</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_master_html_a88eb3246f5fcb3424d5e72198a2f9062"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_master.html#a88eb3246f5fcb3424d5e72198a2f9062">s3f::s3fnet::SocketMaster::bound_socks</a></div><div class="ttdeci">SOCK_MAP bound_socks</div><div class="ttdoc">A map from a socket id to a bound socket. </div><div class="ttdef"><b>Definition:</b> <a href="socket__master_8h_source.html#l00282">socket_master.h:282</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa51a58df2b6af30fc17f80eb8193344e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef s3f::s3fnet::SocketMaster::S3FNET_MAP </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_socket.html">Socket</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00283">abort()</a>, <a class="el" href="socket__master_8cc_source.html#l00403">accept()</a>, <a class="el" href="socket__master_8cc_source.html#l00443">accept1a()</a>, <a class="el" href="socket__master_8cc_source.html#l00489">accept1b()</a>, <a class="el" href="socket__master_8cc_source.html#l00535">accept2a()</a>, <a class="el" href="socket__master_8cc_source.html#l00600">accept2b()</a>, <a class="el" href="socket__master_8cc_source.html#l00183">bind()</a>, <a class="el" href="socket__master_8cc_source.html#l00306">block_till()</a>, <a class="el" href="socket__master_8cc_source.html#l00802">close()</a>, <a class="el" href="socket__master_8cc_source.html#l00846">close1()</a>, <a class="el" href="socket__master_8cc_source.html#l00333">connect()</a>, <a class="el" href="socket__master_8cc_source.html#l00365">connect1()</a>, <a class="el" href="socket__master_8cc_source.html#l00240">connected()</a>, <a class="el" href="socket__master_8cc_source.html#l00052">control()</a>, <a class="el" href="socket__master_8cc_source.html#l00262">eof()</a>, <a class="el" href="socket__master_8cc_source.html#l00228">listen()</a>, <a class="el" href="socket__master_8cc_source.html#l00717">recv()</a>, <a class="el" href="socket__master_8cc_source.html#l00759">recv1()</a>, <a class="el" href="socket__master_8cc_source.html#l00637">send()</a>, <a class="el" href="socket__master_8cc_source.html#l00679">send1()</a>, and <a class="el" href="socket__master_8cc_source.html#l00030">~SocketMaster()</a>.</p>

</div>
</div>
<a class="anchor" id="a184dec7b5d13fa4b9459d46bf75902be"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef s3f::s3fnet::SocketMaster::S3FNET_SET </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00183">bind()</a>.</p>

</div>
</div>
<a class="anchor" id="aea8fede2e65f593f58333685773181e7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::SocketMaster::push </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="message_8h.html#a093346897a71a253ceb5aaa3785721a0">Activation</a>&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html">ProtocolSession</a> *&#160;</td>
          <td class="paramname"><em>hi_sess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>extinfo</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>extinfo_size</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Push to lower protocol layer. </p>
<p>The push method is not supposed to be called for socket master protocol session; it's defined here to prevent misuse. </p>

<p>Reimplemented from <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a802569fda5b2814f662ea5b4d39ce767">s3f::s3fnet::ProtocolSession</a>.</p>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00150">150</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="errhandle_8cc_source.html#l00128">s3f::s3fnet::error_quit()</a>.</p>
<div class="fragment"><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: SocketMaster::push() should not be called.\n&quot;</span>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_aee6e3282670be024dcee8ac3cef67e85"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">s3f::s3fnet::error_quit</a></div><div class="ttdeci">void error_quit(const char *fmt,...)</div><div class="ttdoc">This function is called when there&#39;s a fatal error unrelated to a system call. </div><div class="ttdef"><b>Definition:</b> <a href="errhandle_8cc_source.html#l00128">errhandle.cc:128</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abbe1aac4a071dc033a7adcedf311692c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::SocketMaster::pop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="message_8h.html#a093346897a71a253ceb5aaa3785721a0">Activation</a>&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html">ProtocolSession</a> *&#160;</td>
          <td class="paramname"><em>lo_sess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>extinfo</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>extinfo_size</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pop to higher protocol layer. </p>
<p>The pop method is not supposed to be called for socket master protocol session; it's defined here to prevent misuse. </p>

<p>Reimplemented from <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#ad30fc9c677829b84f849716df872fe11">s3f::s3fnet::ProtocolSession</a>.</p>

<p>Definition at line <a class="el" href="socket__master_8cc_source.html#l00156">156</a> of file <a class="el" href="socket__master_8cc_source.html">socket_master.cc</a>.</p>

<p>References <a class="el" href="errhandle_8cc_source.html#l00128">s3f::s3fnet::error_quit()</a>.</p>
<div class="fragment"><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: SocketMaster::pop() should not be called.\n&quot;</span>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_aee6e3282670be024dcee8ac3cef67e85"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">s3f::s3fnet::error_quit</a></div><div class="ttdeci">void error_quit(const char *fmt,...)</div><div class="ttdoc">This function is called when there&#39;s a fatal error unrelated to a system call. </div><div class="ttdef"><b>Definition:</b> <a href="errhandle_8cc_source.html#l00128">errhandle.cc:128</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5de6e730825a580093d46aa930341768"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::ProtocolSession::config </td>
          <td>(</td>
          <td class="paramtype">s3f::dml::Configuration *&#160;</td>
          <td class="paramname"><em>cfg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The config method is used to configure the protocol session from DML description. </p>
<p>It is expected to be called first, right after the <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html" title="A protocol layer on the protocol stack. ">ProtocolSession</a> object is created and before the init method is called. A DML configuration should be passed as an argument to the method and it should be the value (a list of attributes) of a 'session' attribute (inside 'graph'). The default behavior of this method is to find out 'name' and 'use' attributes. The derived class should override this method to obtain protocol specific parameters from the DML description. However, the derived class must not forget to call this method in the base class so that the default behavior is carried out. The config method recognizes the following attributes: </p>
<ul>
<li>
<b>name</b>: name of the protocol session (required) </li>
<li>
<b>use</b>: protocol class name (required) </li>
</ul>
<p>It is important to note that the timer still cannot be used at this stage since the owner community hasn't been resolved. It has to wait until after the init method is called. </p>

<p>Reimplemented in <a class="el" href="classs3f_1_1s3fnet_1_1_n_b_t_c_p_server_session.html#ac55e6177f849107adff452e7f6da0952">s3f::s3fnet::NBTCPServerSession</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_i_p_session.html#a2e9691ebb8d38b288d5e5ce5b786276e">s3f::s3fnet::IPSession</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_open_flow_switch_session.html#ad07916ad622da7dbe1eba9005e8e2c35">s3f::s3fnet::OpenFlowSwitchSession</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_b_t_c_p_client_session.html#a320c98573cb32c871cf25cb13f12ab91">s3f::s3fnet::BTCPClientSession</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_n_b_t_c_p_client_session.html#afac678c877e5ea1d674ef57d92a6033f">s3f::s3fnet::NBTCPClientSession</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a49e6e4f253dabfdfff606c91182a9004">s3f::s3fnet::TCPMaster</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_server_session.html#a1780d03bf77dedeff58fe2bd2ac897ab">s3f::s3fnet::TCPServerSession</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_u_d_p_client_session.html#a6999fbfc31e4bfa451337cb5b4a6be59">s3f::s3fnet::UDPClientSession</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_simple_phy.html#a53c29dde31458f6357c2c255b46a67f8">s3f::s3fnet::SimplePhy</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_u_d_p_server_session.html#a9351649aa562a42593bef59ea4a599d5">s3f::s3fnet::UDPServerSession</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_open_v_z_event_session.html#a25b34f89c8e9cac03df099e776b83dfd">s3f::s3fnet::OpenVZEventSession</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_open_flow_controller_session.html#a80c8835af95ed55aa7fa1aa0ece839af">s3f::s3fnet::OpenFlowControllerSession</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_client_session.html#a8010342300c95504ba22a70ad9d0e878">s3f::s3fnet::TCPClientSession</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_dummy_session.html#a743663de668981278bd79d8e574b2120">s3f::s3fnet::DummySession</a>, and <a class="el" href="classs3f_1_1s3fnet_1_1_u_d_p_master.html#a910911cb3f90b167dc94f906d9b635b4">s3f::s3fnet::UDPMaster</a>.</p>

<p>Definition at line <a class="el" href="protocol__session_8cc_source.html#l00021">21</a> of file <a class="el" href="protocol__session_8cc_source.html">protocol_session.cc</a>.</p>

<p>References <a class="el" href="protocol__session_8h_source.html#l00221">s3f::s3fnet::ProtocolSession::configured()</a>, <a class="el" href="errhandle_8cc_source.html#l00128">s3f::s3fnet::error_quit()</a>, <a class="el" href="protocol__session_8h_source.html#l00063">s3f::s3fnet::ProtocolSession::name</a>, <a class="el" href="protocol__session_8h_source.html#l00053">s3f::s3fnet::ProtocolSession::PSESS_CONFIGURED</a>, <a class="el" href="shstl_8h_source.html#l00091">s3f::s3fnet::sstrdup()</a>, <a class="el" href="protocol__session_8h_source.html#l00346">s3f::s3fnet::ProtocolSession::stage</a>, and <a class="el" href="protocol__session_8h_source.html#l00079">s3f::s3fnet::ProtocolSession::use</a>.</p>

<p>Referenced by <a class="el" href="udp__master_8cc_source.html#l00043">s3f::s3fnet::UDPMaster::config()</a>, <a class="el" href="dummy__session_8cc_source.html#l00042">s3f::s3fnet::DummySession::config()</a>, <a class="el" href="tcp__client_8cc_source.html#l00159">s3f::s3fnet::TCPClientSession::config()</a>, <a class="el" href="openflow__controller__session_8cc_source.html#l00042">s3f::s3fnet::OpenFlowControllerSession::config()</a>, <a class="el" href="open_v_z_emu__event__session_8cc_source.html#l00051">s3f::s3fnet::OpenVZEventSession::config()</a>, <a class="el" href="udp__server_8cc_source.html#l00158">s3f::s3fnet::UDPServerSession::config()</a>, <a class="el" href="simple__phy_8cc_source.html#l00040">s3f::s3fnet::SimplePhy::config()</a>, <a class="el" href="udp__client_8cc_source.html#l00156">s3f::s3fnet::UDPClientSession::config()</a>, <a class="el" href="tcp__server_8cc_source.html#l00150">s3f::s3fnet::TCPServerSession::config()</a>, <a class="el" href="tcp__master_8cc_source.html#l00106">s3f::s3fnet::TCPMaster::config()</a>, <a class="el" href="network__interface_8cc_source.html#l00055">s3f::s3fnet::NetworkInterface::config()</a>, <a class="el" href="nb__tcp__client_8cc_source.html#l00237">s3f::s3fnet::NBTCPClientSession::config()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00169">s3f::s3fnet::BTCPClientSession::config()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00096">s3f::s3fnet::OpenFlowSwitchSession::config()</a>, <a class="el" href="ip__session_8cc_source.html#l00060">s3f::s3fnet::IPSession::config()</a>, <a class="el" href="nb__tcp__server_8cc_source.html#l00279">s3f::s3fnet::NBTCPServerSession::config()</a>, and <a class="el" href="protocol__graph_8cc_source.html#l00108">s3f::s3fnet::ProtocolGraph::config_session()</a>.</p>
<div class="fragment"><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;{</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a422a77ab55edab25263965f7eaf5458e">configured</a>())</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: duplicate calls to ProtocolSession::config(): &quot;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;               <span class="stringliteral">&quot;session name is \&quot;%s\&quot;.\n&quot;</span>, <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7eedcbe4da39cba727d26f1339ac7c47">name</a>);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <span class="keywordflow">else</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a446b7857e72ac901402821230f5bcd60">stage</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a3c91a49267ae29962158ec8e5aa75552">PSESS_CONFIGURED</a>;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="keywordtype">char</span>* myname = (<span class="keywordtype">char</span>*)cfg-&gt;findSingle(<span class="stringliteral">&quot;name&quot;</span>);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keywordflow">if</span>(myname &amp;&amp; s3f::dml::dmlConfig::isConf(myname))</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: ProtocolSession::config(), invalid NAME attribute.\n&quot;</span>);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <span class="keywordflow">if</span>(myname) <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7eedcbe4da39cba727d26f1339ac7c47">name</a> = <a class="code" href="namespaces3f_1_1s3fnet.html#aac6cd0d84981c618dec88d4ebbffa75e">sstrdup</a>(myname);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <span class="keywordflow">else</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7eedcbe4da39cba727d26f1339ac7c47">name</a> = 0; <span class="comment">// cannot do assertion because it may happen for a &quot;default&quot; interface</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordtype">char</span>* myuse  = (<span class="keywordtype">char</span>*)cfg-&gt;findSingle(<span class="stringliteral">&quot;use&quot;</span>);</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordflow">if</span>(myuse &amp;&amp; s3f::dml::dmlConfig::isConf(myuse))</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: ProtocolSession::config(), invalid USE attribute.\n&quot;</span>);</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">if</span>(myuse)  <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a6085e2d490de56b7feec0941b37cf8fe">use</a> = <a class="code" href="namespaces3f_1_1s3fnet.html#aac6cd0d84981c618dec88d4ebbffa75e">sstrdup</a>(myuse);</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <span class="keywordflow">else</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a6085e2d490de56b7feec0941b37cf8fe">use</a> = 0; <span class="comment">// cannot do assertion because it may happen for a &quot;default&quot; interface</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_aac6cd0d84981c618dec88d4ebbffa75e"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#aac6cd0d84981c618dec88d4ebbffa75e">s3f::s3fnet::sstrdup</a></div><div class="ttdeci">char * sstrdup(const char *s)</div><div class="ttdoc">Make a duplicate string in shared memory. </div><div class="ttdef"><b>Definition:</b> <a href="shstl_8h_source.html#l00091">shstl.h:91</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a3846269d44f267c44706152b1a78a118a3c91a49267ae29962158ec8e5aa75552"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a3c91a49267ae29962158ec8e5aa75552">s3f::s3fnet::ProtocolSession::PSESS_CONFIGURED</a></div><div class="ttdoc">the config method of this protocol session has been called </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00053">protocol_session.h:53</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a446b7857e72ac901402821230f5bcd60"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a446b7857e72ac901402821230f5bcd60">s3f::s3fnet::ProtocolSession::stage</a></div><div class="ttdeci">int stage</div><div class="ttdoc">This variable indicates the current stage of this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00346">protocol_session.h:346</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_aee6e3282670be024dcee8ac3cef67e85"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">s3f::s3fnet::error_quit</a></div><div class="ttdeci">void error_quit(const char *fmt,...)</div><div class="ttdoc">This function is called when there&#39;s a fatal error unrelated to a system call. </div><div class="ttdef"><b>Definition:</b> <a href="errhandle_8cc_source.html#l00128">errhandle.cc:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a6085e2d490de56b7feec0941b37cf8fe"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a6085e2d490de56b7feec0941b37cf8fe">s3f::s3fnet::ProtocolSession::use</a></div><div class="ttdeci">char * use</div><div class="ttdoc">Name of the protocol class from which this protocol session is instantiated. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00079">protocol_session.h:79</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a7eedcbe4da39cba727d26f1339ac7c47"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7eedcbe4da39cba727d26f1339ac7c47">s3f::s3fnet::ProtocolSession::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Symbolic name of the protocol this session implements. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00063">protocol_session.h:63</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a422a77ab55edab25263965f7eaf5458e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a422a77ab55edab25263965f7eaf5458e">s3f::s3fnet::ProtocolSession::configured</a></div><div class="ttdeci">int configured()</div><div class="ttdoc">This method returns true if the protocol session has been configured. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00221">protocol_session.h:221</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a79b1d48edbb1aec6b740de60666414f2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::ProtocolSession::wrapup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The method is used to wrap up the protocol session. </p>
<p>It is called when the simulation finishes. It is designed to give user a chance to report simulation statistics. The default behavior is doing nothing. Subclass may override this method for protocol specific dealings. Note that there is no specific order in which wrapup is called for protocol sessions in a protocol graph. </p>

<p>Definition at line <a class="el" href="protocol__session_8cc_source.html#l00059">59</a> of file <a class="el" href="protocol__session_8cc_source.html">protocol_session.cc</a>.</p>

<p>References <a class="el" href="errhandle_8cc_source.html#l00128">s3f::s3fnet::error_quit()</a>, <a class="el" href="protocol__session_8h_source.html#l00233">s3f::s3fnet::ProtocolSession::initialized()</a>, <a class="el" href="protocol__session_8h_source.html#l00063">s3f::s3fnet::ProtocolSession::name</a>, <a class="el" href="protocol__session_8h_source.html#l00055">s3f::s3fnet::ProtocolSession::PSESS_WRAPPED_UP</a>, <a class="el" href="protocol__session_8h_source.html#l00346">s3f::s3fnet::ProtocolSession::stage</a>, and <a class="el" href="protocol__session_8h_source.html#l00245">s3f::s3fnet::ProtocolSession::wrapped_up()</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="comment">// Make sure this init function at the base class should be called</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  <span class="comment">// by the derived function!</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="keywordflow">if</span>(!<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#aca7233711f9c8c606c611ec97ee29cdb">initialized</a>()) </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: ProtocolSession \&quot;%s\&quot; wrapup() called before init(), &quot;</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;               <span class="stringliteral">&quot;forgot to call base class&#39;s init() in your derived class?\n&quot;</span>, <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7eedcbe4da39cba727d26f1339ac7c47">name</a>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#ac934416dd1e279568a3bef2e8a6b045d">wrapped_up</a>())</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: duplicate calls to ProtocolSession::wrapup(): &quot;</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;               <span class="stringliteral">&quot;session name is \&quot;%s\&quot;.\n&quot;</span>, <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7eedcbe4da39cba727d26f1339ac7c47">name</a>);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordflow">else</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a446b7857e72ac901402821230f5bcd60">stage</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a6b110ae59ed74fa48faf95206a60aba4">PSESS_WRAPPED_UP</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_ac934416dd1e279568a3bef2e8a6b045d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#ac934416dd1e279568a3bef2e8a6b045d">s3f::s3fnet::ProtocolSession::wrapped_up</a></div><div class="ttdeci">int wrapped_up()</div><div class="ttdoc">This method returns true if the protocol session has been wrapped up. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00245">protocol_session.h:245</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a446b7857e72ac901402821230f5bcd60"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a446b7857e72ac901402821230f5bcd60">s3f::s3fnet::ProtocolSession::stage</a></div><div class="ttdeci">int stage</div><div class="ttdoc">This variable indicates the current stage of this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00346">protocol_session.h:346</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a3846269d44f267c44706152b1a78a118a6b110ae59ed74fa48faf95206a60aba4"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a6b110ae59ed74fa48faf95206a60aba4">s3f::s3fnet::ProtocolSession::PSESS_WRAPPED_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00055">protocol_session.h:55</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_aee6e3282670be024dcee8ac3cef67e85"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">s3f::s3fnet::error_quit</a></div><div class="ttdeci">void error_quit(const char *fmt,...)</div><div class="ttdoc">This function is called when there&#39;s a fatal error unrelated to a system call. </div><div class="ttdef"><b>Definition:</b> <a href="errhandle_8cc_source.html#l00128">errhandle.cc:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_aca7233711f9c8c606c611ec97ee29cdb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#aca7233711f9c8c606c611ec97ee29cdb">s3f::s3fnet::ProtocolSession::initialized</a></div><div class="ttdeci">int initialized()</div><div class="ttdoc">This method returns true if the protocol session has been initialized. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00233">protocol_session.h:233</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a7eedcbe4da39cba727d26f1339ac7c47"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7eedcbe4da39cba727d26f1339ac7c47">s3f::s3fnet::ProtocolSession::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">Symbolic name of the protocol this session implements. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00063">protocol_session.h:63</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1a9fa5693373188218eba85c782583e7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::ProtocolSession::pushdown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="message_8h.html#a093346897a71a253ceb5aaa3785721a0">Activation</a>&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html">ProtocolSession</a> *&#160;</td>
          <td class="paramname"><em>hi_sess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>extinfo</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>extinfo_size</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The original push method is divided into <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a1a9fa5693373188218eba85c782583e7" title="The original push method is divided into pushdown() and push(). ">pushdown()</a> and <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a802569fda5b2814f662ea5b4d39ce767" title="The method is called when a message is pushed down to this protocol session from the protocol session...">push()</a>. </p>
<p>The pushdown method is the generic part of the code, which is reserved for modeling the handling of messages transferred between protocol layers. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a802569fda5b2814f662ea5b4d39ce767" title="The method is called when a message is pushed down to this protocol session from the protocol session...">ProtocolSession::push</a> method for details. </dd></dl>

<p>Definition at line <a class="el" href="protocol__session_8cc_source.html#l00072">72</a> of file <a class="el" href="protocol__session_8cc_source.html">protocol_session.cc</a>.</p>

<p>References <a class="el" href="protocol__session_8cc_source.html#l00082">s3f::s3fnet::ProtocolSession::push()</a>.</p>

<p>Referenced by <a class="el" href="dummy__session_8cc_source.html#l00160">s3f::s3fnet::DummySession::callback_body()</a>, <a class="el" href="open_v_z_emu__event__session_8cc_source.html#l00118">s3f::s3fnet::OpenVZEventSession::callback_body()</a>, <a class="el" href="ip__session_8cc_source.html#l00148">s3f::s3fnet::IPSession::control()</a>, <a class="el" href="ip__session_8cc_source.html#l00494">s3f::s3fnet::IPSession::handle_pop_pkt()</a>, <a class="el" href="openflow__controller__session_8cc_source.html#l00297">s3f::s3fnet::LearningControllerSession::HandleInquiryMessageFromOFSwitch()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00706">s3f::s3fnet::OpenFlowSwitchSession::OutputControl()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00610">s3f::s3fnet::OpenFlowSwitchSession::OutputPacket()</a>, <a class="el" href="simple__mac_8cc_source.html#l00052">s3f::s3fnet::SimpleMac::push()</a>, <a class="el" href="udp__master_8cc_source.html#l00102">s3f::s3fnet::UDPMaster::push()</a>, <a class="el" href="tcp__master_8cc_source.html#l00409">s3f::s3fnet::TCPMaster::push()</a>, <a class="el" href="ip__session_8cc_source.html#l00282">s3f::s3fnet::IPSession::push()</a>, <a class="el" href="udp__session_8cc_source.html#l00144">s3f::s3fnet::UDPSession::send()</a>, and <a class="el" href="tcp__sender_8cc_source.html#l00055">s3f::s3fnet::TCPSession::send_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a802569fda5b2814f662ea5b4d39ce767">push</a>(msg, hi_sess, extinfo, extinfo_size);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a802569fda5b2814f662ea5b4d39ce767"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a802569fda5b2814f662ea5b4d39ce767">s3f::s3fnet::ProtocolSession::push</a></div><div class="ttdeci">virtual int push(Activation msg, ProtocolSession *hi_sess, void *extinfo=0, size_t extinfo_size=0)</div><div class="ttdoc">The method is called when a message is pushed down to this protocol session from the protocol session...</div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00082">protocol_session.cc:82</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af3f962741a6c055135d2cab28ea0b9c8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::ProtocolSession::popup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="message_8h.html#a093346897a71a253ceb5aaa3785721a0">Activation</a>&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html">ProtocolSession</a> *&#160;</td>
          <td class="paramname"><em>lo_sess</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>extinfo</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>extinfo_size</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The original pop method is divided into <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#af3f962741a6c055135d2cab28ea0b9c8" title="The original pop method is divided into popup() and pop(). ">popup()</a> and <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#ad30fc9c677829b84f849716df872fe11" title="The method is called when a message is popped up to this protocol session from the protocol session b...">pop()</a>. </p>
<p>The popup method is the generic part of the code, which is reserved for modeling the handling of messages transferred between protocol layers. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#ad30fc9c677829b84f849716df872fe11" title="The method is called when a message is popped up to this protocol session from the protocol session b...">ProtocolSession::pop</a> method for details. </dd></dl>

<p>Definition at line <a class="el" href="protocol__session_8cc_source.html#l00077">77</a> of file <a class="el" href="protocol__session_8cc_source.html">protocol_session.cc</a>.</p>

<p>References <a class="el" href="protocol__session_8cc_source.html#l00087">s3f::s3fnet::ProtocolSession::pop()</a>.</p>

<p>Referenced by <a class="el" href="ip__session_8cc_source.html#l00567">s3f::s3fnet::IPSession::handle_pop_local_pkt()</a>, <a class="el" href="simple__mac_8cc_source.html#l00088">s3f::s3fnet::SimpleMac::pop()</a>, <a class="el" href="ip__session_8cc_source.html#l00282">s3f::s3fnet::IPSession::push()</a>, and <a class="el" href="simple__phy_8cc_source.html#l00167">s3f::s3fnet::SimplePhy::receivePacket()</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#ad30fc9c677829b84f849716df872fe11">pop</a>(msg, lo_sess, extinfo, extinfo_size);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_ad30fc9c677829b84f849716df872fe11"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#ad30fc9c677829b84f849716df872fe11">s3f::s3fnet::ProtocolSession::pop</a></div><div class="ttdeci">virtual int pop(Activation msg, ProtocolSession *lo_sess, void *extinfo=0, size_t extinfo_size=0)</div><div class="ttdoc">The method is called when a message is popped up to this protocol session from the protocol session b...</div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00087">protocol_session.cc:87</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a383bfb5d8385ab3ddbabaeba2e4a38aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_graph.html">ProtocolGraph</a>* s3f::s3fnet::ProtocolSession::inGraph </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The method returns the protocol graph in which this protocol session resides. </p>

<p>Definition at line <a class="el" href="protocol__session_8h_source.html#l00178">178</a> of file <a class="el" href="protocol__session_8h_source.html">protocol_session.h</a>.</p>

<p>References <a class="el" href="protocol__session_8h_source.html#l00335">s3f::s3fnet::ProtocolSession::ingraph</a>.</p>

<p>Referenced by <a class="el" href="simple__phy_8cc_source.html#l00040">s3f::s3fnet::SimplePhy::config()</a>, <a class="el" href="simple__phy_8cc_source.html#l00183">s3f::s3fnet::SimplePhy::control()</a>, <a class="el" href="droptail__queue_8cc_source.html#l00036">s3f::s3fnet::DroptailQueue::enqueue()</a>, <a class="el" href="red__queue_8cc_source.html#l00156">s3f::s3fnet::RedQueue::enqueue()</a>, <a class="el" href="simple__mac_8cc_source.html#l00041">s3f::s3fnet::SimpleMac::init()</a>, <a class="el" href="simple__phy_8cc_source.html#l00130">s3f::s3fnet::SimplePhy::init()</a>, <a class="el" href="red__queue_8cc_source.html#l00121">s3f::s3fnet::RedQueue::init()</a>, <a class="el" href="simple__mac_8cc_source.html#l00088">s3f::s3fnet::SimpleMac::pop()</a>, <a class="el" href="simple__mac_8cc_source.html#l00052">s3f::s3fnet::SimpleMac::push()</a>, <a class="el" href="simple__phy_8cc_source.html#l00145">s3f::s3fnet::SimplePhy::push()</a>, <a class="el" href="simple__phy_8cc_source.html#l00167">s3f::s3fnet::SimplePhy::receivePacket()</a>, <a class="el" href="simple__phy_8cc_source.html#l00158">s3f::s3fnet::SimplePhy::sendPacket()</a>, <a class="el" href="simple__mac_8cc_source.html#l00031">s3f::s3fnet::SimpleMac::SimpleMac()</a>, <a class="el" href="simple__phy_8cc_source.html#l00028">s3f::s3fnet::SimplePhy::SimplePhy()</a>, <a class="el" href="simple__mac_8cc_source.html#l00036">s3f::s3fnet::SimpleMac::~SimpleMac()</a>, and <a class="el" href="simple__phy_8cc_source.html#l00034">s3f::s3fnet::SimplePhy::~SimplePhy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a9e93967a56c673f625b486d2fe389067">ingraph</a>; }</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a9e93967a56c673f625b486d2fe389067"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a9e93967a56c673f625b486d2fe389067">s3f::s3fnet::ProtocolSession::ingraph</a></div><div class="ttdeci">ProtocolGraph * ingraph</div><div class="ttdoc">Points to the protocol graph. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00335">protocol_session.h:335</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afadb38bfa4c4daa1049b229d7abce81c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classs3f_1_1s3fnet_1_1_host.html">Host</a> * s3f::s3fnet::ProtocolSession::inHost </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return a pointer to the host owning this protocol session. </p>

<p>Reimplemented in <a class="el" href="classs3f_1_1s3fnet_1_1_nic_protocol_session.html#a176a88375c43e4cba63c97bf6c3acc79">s3f::s3fnet::NicProtocolSession</a>.</p>

<p>Definition at line <a class="el" href="protocol__session_8cc_source.html#l00118">118</a> of file <a class="el" href="protocol__session_8cc_source.html">protocol_session.cc</a>.</p>

<p>References <a class="el" href="protocol__session_8h_source.html#l00335">s3f::s3fnet::ProtocolSession::ingraph</a>.</p>

<p>Referenced by <a class="el" href="udp__session_8cc_source.html#l00095">s3f::s3fnet::UDPSession::abort()</a>, <a class="el" href="socket__master_8cc_source.html#l00283">abort()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00294">s3f::s3fnet::NBSocketMaster::abort()</a>, <a class="el" href="socket__master_8cc_source.html#l00403">accept()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00435">s3f::s3fnet::NBSocketMaster::accept()</a>, <a class="el" href="socket__master_8cc_source.html#l00443">accept1a()</a>, <a class="el" href="socket__master_8cc_source.html#l00489">accept1b()</a>, <a class="el" href="socket__master_8cc_source.html#l00535">accept2a()</a>, <a class="el" href="socket__master_8cc_source.html#l00600">accept2b()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l01140">s3f::s3fnet::OpenFlowSwitchSession::AddFlow()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00163">s3f::s3fnet::TCPSession::backoff_timeout()</a>, <a class="el" href="socket__master_8cc_source.html#l00183">bind()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00194">s3f::s3fnet::NBSocketMaster::bind()</a>, <a class="el" href="socket__master_8cc_source.html#l00306">block_till()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00317">s3f::s3fnet::NBSocketMaster::block_till()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00161">s3f::s3fnet::BTCPClientSession::BTCPClientSession()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00423">s3f::s3fnet::OpenFlowSwitchSession::BufferFromPacket()</a>, <a class="el" href="dummy__session_8cc_source.html#l00160">s3f::s3fnet::DummySession::callback_body()</a>, <a class="el" href="open_v_z_emu__event__session_8cc_source.html#l00118">s3f::s3fnet::OpenVZEventSession::callback_body()</a>, <a class="el" href="udp__session_8cc_source.html#l00134">s3f::s3fnet::UDPSession::clear_app_state()</a>, <a class="el" href="udp__server_8cc_source.html#l00326">s3f::s3fnet::UDPServerSession::client_connected()</a>, <a class="el" href="socket__master_8cc_source.html#l00802">close()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00808">s3f::s3fnet::NBSocketMaster::close()</a>, <a class="el" href="socket__master_8cc_source.html#l00846">close1()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00867">s3f::s3fnet::NBSocketMaster::close1()</a>, <a class="el" href="udp__master_8cc_source.html#l00043">s3f::s3fnet::UDPMaster::config()</a>, <a class="el" href="dummy__session_8cc_source.html#l00042">s3f::s3fnet::DummySession::config()</a>, <a class="el" href="tcp__client_8cc_source.html#l00159">s3f::s3fnet::TCPClientSession::config()</a>, <a class="el" href="udp__server_8cc_source.html#l00158">s3f::s3fnet::UDPServerSession::config()</a>, <a class="el" href="udp__client_8cc_source.html#l00156">s3f::s3fnet::UDPClientSession::config()</a>, <a class="el" href="tcp__server_8cc_source.html#l00150">s3f::s3fnet::TCPServerSession::config()</a>, <a class="el" href="tcp__master_8cc_source.html#l00106">s3f::s3fnet::TCPMaster::config()</a>, <a class="el" href="nb__tcp__client_8cc_source.html#l00237">s3f::s3fnet::NBTCPClientSession::config()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00169">s3f::s3fnet::BTCPClientSession::config()</a>, <a class="el" href="ip__session_8cc_source.html#l00060">s3f::s3fnet::IPSession::config()</a>, <a class="el" href="nb__tcp__server_8cc_source.html#l00279">s3f::s3fnet::NBTCPServerSession::config()</a>, <a class="el" href="udp__session_8cc_source.html#l00041">s3f::s3fnet::UDPSession::connect()</a>, <a class="el" href="socket__master_8cc_source.html#l00333">connect()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00346">s3f::s3fnet::NBSocketMaster::connect()</a>, <a class="el" href="socket__master_8cc_source.html#l00365">connect1()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00396">s3f::s3fnet::NBSocketMaster::connect1()</a>, <a class="el" href="socket__master_8cc_source.html#l00240">connected()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00251">s3f::s3fnet::NBSocketMaster::connected()</a>, <a class="el" href="udp__master_8cc_source.html#l00086">s3f::s3fnet::UDPMaster::control()</a>, <a class="el" href="socket__master_8cc_source.html#l00052">control()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00052">s3f::s3fnet::NBSocketMaster::control()</a>, <a class="el" href="ip__session_8cc_source.html#l00148">s3f::s3fnet::IPSession::control()</a>, <a class="el" href="tcp__master_8cc_source.html#l00472">s3f::s3fnet::TCPMaster::createSession()</a>, <a class="el" href="udp__client_8cc_source.html#l00430">s3f::s3fnet::UDPClientSession::data_received()</a>, <a class="el" href="tcp__client_8cc_source.html#l00434">s3f::s3fnet::TCPClientSession::data_received()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00417">s3f::s3fnet::BTCPClientSession::data_received()</a>, <a class="el" href="udp__server_8cc_source.html#l00348">s3f::s3fnet::UDPServerSession::data_sent()</a>, <a class="el" href="tcp__server_8cc_source.html#l00299">s3f::s3fnet::TCPServerSession::data_sent()</a>, <a class="el" href="udp__session_8cc_source.html#l00058">s3f::s3fnet::UDPSession::disconnect()</a>, <a class="el" href="tcp__master_8cc_source.html#l00547">s3f::s3fnet::TCPMaster::enableFastTimeout()</a>, <a class="el" href="socket__master_8cc_source.html#l00262">eof()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00273">s3f::s3fnet::NBSocketMaster::eof()</a>, <a class="el" href="udp__client_8cc_source.html#l00077">s3f::s3fnet::UDPClientSessionContinuation::failure()</a>, <a class="el" href="udp__server_8cc_source.html#l00078">s3f::s3fnet::UDPServerSessionContinuation::failure()</a>, <a class="el" href="tcp__server_8cc_source.html#l00081">s3f::s3fnet::TCPServerSessionContinuation::failure()</a>, <a class="el" href="tcp__client_8cc_source.html#l00081">s3f::s3fnet::TCPClientSessionContinuation::failure()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00093">s3f::s3fnet::BTCPClientSessionContinuation::failure()</a>, <a class="el" href="tcp__master_8cc_source.html#l00579">s3f::s3fnet::TCPMaster::fast_timer_callback_body()</a>, <a class="el" href="openflow__interface_8cc_source.html#l00184">s3f::s3fnet::Stats::FlowStatsDump()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00850">s3f::s3fnet::OpenFlowSwitchSession::FlowTableLookup()</a>, <a class="el" href="ip__session_8cc_source.html#l00489">s3f::s3fnet::IPSession::get_parent_by_protocol()</a>, <a class="el" href="udp__client_8cc_source.html#l00486">s3f::s3fnet::UDPClientSession::get_random_server()</a>, <a class="el" href="nb__tcp__client_8cc_source.html#l00133">s3f::s3fnet::NBTCPClientSession::get_random_server()</a>, <a class="el" href="tcp__client_8cc_source.html#l00490">s3f::s3fnet::TCPClientSession::get_random_server()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00473">s3f::s3fnet::BTCPClientSession::get_random_server()</a>, <a class="el" href="protocol__session_8cc_source.html#l00123">s3f::s3fnet::ProtocolSession::getNow()</a>, <a class="el" href="protocol__session_8cc_source.html#l00128">s3f::s3fnet::ProtocolSession::getNowWithThousandSeparator()</a>, <a class="el" href="ip__session_8cc_source.html#l00567">s3f::s3fnet::IPSession::handle_pop_local_pkt()</a>, <a class="el" href="ip__session_8cc_source.html#l00494">s3f::s3fnet::IPSession::handle_pop_pkt()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l01415">s3f::s3fnet::OpenFlowSwitchSession::HandleControlInput()</a>, <a class="el" href="openflow__controller__session_8cc_source.html#l00297">s3f::s3fnet::LearningControllerSession::HandleInquiryMessageFromOFSwitch()</a>, <a class="el" href="dummy__session_8cc_source.html#l00116">s3f::s3fnet::DummySession::init()</a>, <a class="el" href="udp__master_8cc_source.html#l00067">s3f::s3fnet::UDPMaster::init()</a>, <a class="el" href="openflow__controller__session_8cc_source.html#l00048">s3f::s3fnet::OpenFlowControllerSession::init()</a>, <a class="el" href="open_v_z_emu__event__session_8cc_source.html#l00060">s3f::s3fnet::OpenVZEventSession::init()</a>, <a class="el" href="tcp__client_8cc_source.html#l00285">s3f::s3fnet::TCPClientSession::init()</a>, <a class="el" href="udp__server_8cc_source.html#l00229">s3f::s3fnet::UDPServerSession::init()</a>, <a class="el" href="udp__client_8cc_source.html#l00281">s3f::s3fnet::UDPClientSession::init()</a>, <a class="el" href="tcp__server_8cc_source.html#l00201">s3f::s3fnet::TCPServerSession::init()</a>, <a class="el" href="tcp__master_8cc_source.html#l00374">s3f::s3fnet::TCPMaster::init()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00112">s3f::s3fnet::OpenFlowSwitchSession::init()</a>, <a class="el" href="nb__tcp__client_8cc_source.html#l00282">s3f::s3fnet::NBTCPClientSession::init()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00284">s3f::s3fnet::BTCPClientSession::init()</a>, <a class="el" href="socket__master_8cc_source.html#l00042">init()</a>, <a class="el" href="ip__session_8cc_source.html#l00076">s3f::s3fnet::IPSession::init()</a>, <a class="el" href="protocol__session_8cc_source.html#l00041">s3f::s3fnet::ProtocolSession::init()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00042">s3f::s3fnet::NBSocketMaster::init()</a>, <a class="el" href="nb__tcp__server_8cc_source.html#l00330">s3f::s3fnet::NBTCPServerSession::init()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">s3f::s3fnet::TCPSession::init_state_closed()</a>, <a class="el" href="open_v_z_emu__event__session_8cc_source.html#l00076">s3f::s3fnet::OpenVZEventSession::injectEvent()</a>, <a class="el" href="ip__session_8cc_source.html#l00030">s3f::s3fnet::IPSession::IPSession()</a>, <a class="el" href="udp__session_8cc_source.html#l00068">s3f::s3fnet::UDPSession::listen()</a>, <a class="el" href="socket__master_8cc_source.html#l00228">listen()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00239">s3f::s3fnet::NBSocketMaster::listen()</a>, <a class="el" href="ip__session_8cc_source.html#l00437">s3f::s3fnet::IPSession::load_forwarding_table()</a>, <a class="el" href="udp__client_8cc_source.html#l00310">s3f::s3fnet::UDPClientSession::main_proc()</a>, <a class="el" href="tcp__client_8cc_source.html#l00314">s3f::s3fnet::TCPClientSession::main_proc()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00313">s3f::s3fnet::BTCPClientSession::main_proc()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l01227">s3f::s3fnet::OpenFlowSwitchSession::ModFlow()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00025">s3f::s3fnet::NBSocketMaster::NBSocketMaster()</a>, <a class="el" href="nb__tcp__client_8cc_source.html#l00124">s3f::s3fnet::NBTCPClientSession::NBTCPClientSession()</a>, <a class="el" href="nb__tcp__server_8cc_source.html#l00204">s3f::s3fnet::NBTCPServerSession::NBTCPServerSession()</a>, <a class="el" href="nb__tcp__client_8cc_source.html#l00199">s3f::s3fnet::NBTCPClientSession::non_blocking_loop()</a>, <a class="el" href="nb__tcp__server_8cc_source.html#l00244">s3f::s3fnet::NBTCPServerSession::non_blocking_loop()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00706">s3f::s3fnet::OpenFlowSwitchSession::OutputControl()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00610">s3f::s3fnet::OpenFlowSwitchSession::OutputPacket()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00636">s3f::s3fnet::OpenFlowSwitchSession::OutputPort()</a>, <a class="el" href="openflow__controller__session_8cc_source.html#l00078">s3f::s3fnet::OpenFlowControllerSession::pop()</a>, <a class="el" href="udp__master_8cc_source.html#l00109">s3f::s3fnet::UDPMaster::pop()</a>, <a class="el" href="open_v_z_emu__event__session_8cc_source.html#l00155">s3f::s3fnet::OpenVZEventSession::pop()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00161">s3f::s3fnet::OpenFlowSwitchSession::pop()</a>, <a class="el" href="tcp__master_8cc_source.html#l00416">s3f::s3fnet::TCPMaster::pop()</a>, <a class="el" href="ip__session_8cc_source.html#l00410">s3f::s3fnet::IPSession::pop()</a>, <a class="el" href="openflow__controller_8cc_source.html#l00175">s3f::s3fnet::LearningController::process_recv_packet()</a>, <a class="el" href="udp__master_8cc_source.html#l00102">s3f::s3fnet::UDPMaster::push()</a>, <a class="el" href="tcp__master_8cc_source.html#l00409">s3f::s3fnet::TCPMaster::push()</a>, <a class="el" href="ip__session_8cc_source.html#l00282">s3f::s3fnet::IPSession::push()</a>, <a class="el" href="udp__session_8cc_source.html#l00189">s3f::s3fnet::UDPSession::receive()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00040">s3f::s3fnet::TCPSession::receive()</a>, <a class="el" href="openflow__controller__session_8cc_source.html#l00193">s3f::s3fnet::LearningControllerSession::ReceiveFromSwitch()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l01028">s3f::s3fnet::OpenFlowSwitchSession::ReceivePacketOut()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l01076">s3f::s3fnet::OpenFlowSwitchSession::ReceivePortMod()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l01360">s3f::s3fnet::OpenFlowSwitchSession::ReceiveStatsRequest()</a>, <a class="el" href="socket__master_8cc_source.html#l00717">recv()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00706">s3f::s3fnet::NBSocketMaster::recv()</a>, <a class="el" href="socket__master_8cc_source.html#l00759">recv1()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00764">s3f::s3fnet::NBSocketMaster::recv1()</a>, <a class="el" href="udp__server_8cc_source.html#l00283">s3f::s3fnet::UDPServerSession::request_received()</a>, <a class="el" href="tcp__server_8cc_source.html#l00272">s3f::s3fnet::TCPServerSession::request_received()</a>, <a class="el" href="udp__client_8cc_source.html#l00408">s3f::s3fnet::UDPClientSession::request_sent()</a>, <a class="el" href="tcp__client_8cc_source.html#l00412">s3f::s3fnet::TCPClientSession::request_sent()</a>, <a class="el" href="nb__tcp__client_8cc_source.html#l00093">s3f::s3fnet::NBTCPClientSessionContinuation::resume()</a>, <a class="el" href="nb__tcp__server_8cc_source.html#l00104">s3f::s3fnet::NBTCPServerSessionContinuation::resume()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00893">s3f::s3fnet::OpenFlowSwitchSession::RunThroughFlowTable()</a>, <a class="el" href="udp__session_8cc_source.html#l00144">s3f::s3fnet::UDPSession::send()</a>, <a class="el" href="socket__master_8cc_source.html#l00637">send()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00609">s3f::s3fnet::NBSocketMaster::send()</a>, <a class="el" href="socket__master_8cc_source.html#l00679">send1()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00667">s3f::s3fnet::NBSocketMaster::send1()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">s3f::s3fnet::TCPSession::send_data()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00823">s3f::s3fnet::OpenFlowSwitchSession::SendFlowExpired()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00686">s3f::s3fnet::OpenFlowSwitchSession::SendOpenflowBuffer()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00808">s3f::s3fnet::OpenFlowSwitchSession::SendPortStatus()</a>, <a class="el" href="udp__client_8cc_source.html#l00390">s3f::s3fnet::UDPClientSession::server_connected()</a>, <a class="el" href="tcp__client_8cc_source.html#l00394">s3f::s3fnet::TCPClientSession::server_connected()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00395">s3f::s3fnet::BTCPClientSession::server_connected()</a>, <a class="el" href="udp__server_8cc_source.html#l00371">s3f::s3fnet::UDPServerSession::session_closed()</a>, <a class="el" href="udp__client_8cc_source.html#l00465">s3f::s3fnet::UDPClientSession::session_closed()</a>, <a class="el" href="tcp__client_8cc_source.html#l00469">s3f::s3fnet::TCPClientSession::session_closed()</a>, <a class="el" href="tcp__server_8cc_source.html#l00322">s3f::s3fnet::TCPServerSession::session_closed()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00452">s3f::s3fnet::BTCPClientSession::session_closed()</a>, <a class="el" href="tcp__master_8cc_source.html#l00520">s3f::s3fnet::TCPMaster::setConnected()</a>, <a class="el" href="openflow__switch__session_8cc_source.html#l00270">s3f::s3fnet::OpenFlowSwitchSession::SetController()</a>, <a class="el" href="tcp__master_8cc_source.html#l00538">s3f::s3fnet::TCPMaster::setIdle()</a>, <a class="el" href="tcp__master_8cc_source.html#l00529">s3f::s3fnet::TCPMaster::setListening()</a>, <a class="el" href="udp__session_8cc_source.html#l00084">s3f::s3fnet::UDPSession::setSource()</a>, <a class="el" href="tcp__master_8cc_source.html#l00610">s3f::s3fnet::TCPMaster::slow_timer_callback_body()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00029">s3f::s3fnet::TCPSession::slowTimeoutHandling()</a>, <a class="el" href="socket__master_8cc_source.html#l00162">socket()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00173">s3f::s3fnet::NBSocketMaster::socket()</a>, <a class="el" href="socket__master_8cc_source.html#l00025">SocketMaster()</a>, <a class="el" href="udp__server_8cc_source.html#l00253">s3f::s3fnet::UDPServerSession::start_on()</a>, <a class="el" href="udp__client_8cc_source.html#l00358">s3f::s3fnet::UDPClientSession::start_on()</a>, <a class="el" href="tcp__server_8cc_source.html#l00224">s3f::s3fnet::TCPServerSession::start_on()</a>, <a class="el" href="tcp__client_8cc_source.html#l00363">s3f::s3fnet::TCPClientSession::start_on()</a>, <a class="el" href="nb__tcp__client_8cc_source.html#l00173">s3f::s3fnet::NBTCPClientSession::start_on()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00362">s3f::s3fnet::BTCPClientSession::start_on()</a>, <a class="el" href="nb__tcp__server_8cc_source.html#l00215">s3f::s3fnet::NBTCPServerSession::start_on()</a>, <a class="el" href="nb__tcp__server_8cc_source.html#l00074">s3f::s3fnet::NBTCPServerSessionContinuation::success()</a>, <a class="el" href="tcp__client_8cc_source.html#l00151">s3f::s3fnet::TCPClientSession::TCPClientSession()</a>, <a class="el" href="tcp__master_8cc_source.html#l00052">s3f::s3fnet::TCPMaster::TCPMaster()</a>, <a class="el" href="tcp__server_8cc_source.html#l00142">s3f::s3fnet::TCPServerSession::TCPServerSession()</a>, <a class="el" href="tcp__session_8cc_source.html#l00029">s3f::s3fnet::TCPSession::TCPSession()</a>, <a class="el" href="udp__client_8cc_source.html#l00521">s3f::s3fnet::UDPClientSession::timeout()</a>, <a class="el" href="tcp__client_8cc_source.html#l00528">s3f::s3fnet::TCPClientSession::timeout()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00512">s3f::s3fnet::BTCPClientSession::timeout()</a>, <a class="el" href="udp__client_8cc_source.html#l00148">s3f::s3fnet::UDPClientSession::UDPClientSession()</a>, <a class="el" href="udp__master_8cc_source.html#l00030">s3f::s3fnet::UDPMaster::UDPMaster()</a>, <a class="el" href="udp__server_8cc_source.html#l00150">s3f::s3fnet::UDPServerSession::UDPServerSession()</a>, <a class="el" href="udp__session_8cc_source.html#l00024">s3f::s3fnet::UDPSession::UDPSession()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00134">s3f::s3fnet::TCPSession::update_timeout()</a>, <a class="el" href="ip__session_8cc_source.html#l00423">s3f::s3fnet::IPSession::verify_local_ip_address()</a>, and <a class="el" href="udp__session_8cc_source.html#l00118">s3f::s3fnet::UDPSession::wake_app()</a>.</p>
<div class="fragment"><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span><a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a912b690126957a1ad90d0c373a4ad4d0">Host</a>*<span class="keyword">&gt;</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a9e93967a56c673f625b486d2fe389067">ingraph</a>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a9e93967a56c673f625b486d2fe389067"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a9e93967a56c673f625b486d2fe389067">s3f::s3fnet::ProtocolSession::ingraph</a></div><div class="ttdeci">ProtocolGraph * ingraph</div><div class="ttdoc">Points to the protocol graph. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00335">protocol_session.h:335</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a912b690126957a1ad90d0c373a4ad4d0"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a912b690126957a1ad90d0c373a4ad4d0">s3f::s3fnet::ProtocolSession::Host</a></div><div class="ttdeci">friend class Host</div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00040">protocol_session.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9ffe57c5dfd8cc847d566acf4581b968"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_random_1_1_r_n_g.html">Random::RNG</a>* s3f::s3fnet::ProtocolSession::getRandom </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The method returns a pointer to the random number generator. </p>

<p>Definition at line <a class="el" href="protocol__session_8h_source.html#l00200">200</a> of file <a class="el" href="protocol__session_8h_source.html">protocol_session.h</a>.</p>

<p>References <a class="el" href="protocol__session_8h_source.html#l00338">s3f::s3fnet::ProtocolSession::sess_rng</a>.</p>

<p>Referenced by <a class="el" href="droptail__queue_8cc_source.html#l00074">s3f::s3fnet::DroptailQueue::calibrate()</a>, <a class="el" href="red__queue_8cc_source.html#l00196">s3f::s3fnet::RedQueue::calibrate()</a>, <a class="el" href="dummy__session_8cc_source.html#l00160">s3f::s3fnet::DummySession::callback_body()</a>, <a class="el" href="red__queue_8cc_source.html#l00156">s3f::s3fnet::RedQueue::enqueue()</a>, <a class="el" href="udp__client_8cc_source.html#l00486">s3f::s3fnet::UDPClientSession::get_random_server()</a>, <a class="el" href="nb__tcp__client_8cc_source.html#l00133">s3f::s3fnet::NBTCPClientSession::get_random_server()</a>, <a class="el" href="tcp__client_8cc_source.html#l00490">s3f::s3fnet::TCPClientSession::get_random_server()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00473">s3f::s3fnet::BTCPClientSession::get_random_server()</a>, <a class="el" href="dummy__session_8cc_source.html#l00116">s3f::s3fnet::DummySession::init()</a>, <a class="el" href="tcp__client_8cc_source.html#l00285">s3f::s3fnet::TCPClientSession::init()</a>, <a class="el" href="udp__client_8cc_source.html#l00281">s3f::s3fnet::UDPClientSession::init()</a>, <a class="el" href="tcp__master_8cc_source.html#l00374">s3f::s3fnet::TCPMaster::init()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00284">s3f::s3fnet::BTCPClientSession::init()</a>, <a class="el" href="udp__client_8cc_source.html#l00310">s3f::s3fnet::UDPClientSession::main_proc()</a>, <a class="el" href="tcp__client_8cc_source.html#l00314">s3f::s3fnet::TCPClientSession::main_proc()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00313">s3f::s3fnet::BTCPClientSession::main_proc()</a>, and <a class="el" href="network__interface_8cc_source.html#l00216">s3f::s3fnet::NetworkInterface::receivePacket()</a>.</p>
<div class="fragment"><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a41caeb7af8ef9b2d1b3ead0bedfe63c9">sess_rng</a>;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a41caeb7af8ef9b2d1b3ead0bedfe63c9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a41caeb7af8ef9b2d1b3ead0bedfe63c9">s3f::s3fnet::ProtocolSession::sess_rng</a></div><div class="ttdeci">Random::RNG * sess_rng</div><div class="ttdoc">Pointer to a random number generator. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00338">protocol_session.h:338</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7a8fc3b0c62b09c82b72268b56abb58c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> s3f::s3fnet::ProtocolSession::getNow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The method returns the current simulation time. </p>
<p>To be safe, please do NOT call this function after initialization and before wrapup phase. That is, it is unsafe to call this method in the constructor, destructor, config, init, and wrapup methods. The time service is carried out by the host's owner community. This method just directs the call to the community. It's given here for convenience. </p>

<p>Definition at line <a class="el" href="protocol__session_8cc_source.html#l00123">123</a> of file <a class="el" href="protocol__session_8cc_source.html">protocol_session.cc</a>.</p>

<p>References <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, and <a class="el" href="entity_8cc_source.html#l00111">Entity::now()</a>.</p>

<p>Referenced by <a class="el" href="droptail__queue_8cc_source.html#l00074">s3f::s3fnet::DroptailQueue::calibrate()</a>, <a class="el" href="red__queue_8cc_source.html#l00196">s3f::s3fnet::RedQueue::calibrate()</a>, <a class="el" href="udp__client_8cc_source.html#l00430">s3f::s3fnet::UDPClientSession::data_received()</a>, <a class="el" href="tcp__client_8cc_source.html#l00434">s3f::s3fnet::TCPClientSession::data_received()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00417">s3f::s3fnet::BTCPClientSession::data_received()</a>, <a class="el" href="tcp__master_8cc_source.html#l00547">s3f::s3fnet::TCPMaster::enableFastTimeout()</a>, <a class="el" href="droptail__queue_8cc_source.html#l00036">s3f::s3fnet::DroptailQueue::enqueue()</a>, <a class="el" href="red__queue_8cc_source.html#l00156">s3f::s3fnet::RedQueue::enqueue()</a>, <a class="el" href="tcp__master_8cc_source.html#l00579">s3f::s3fnet::TCPMaster::fast_timer_callback_body()</a>, <a class="el" href="open_v_z_emu__event__session_8cc_source.html#l00076">s3f::s3fnet::OpenVZEventSession::injectEvent()</a>, <a class="el" href="tcp__session_8h_source.html#l00385">s3f::s3fnet::TCPSession::now()</a>, <a class="el" href="open_v_z_emu__event__session_8cc_source.html#l00155">s3f::s3fnet::OpenVZEventSession::pop()</a>, <a class="el" href="tcp__master_8cc_source.html#l00610">s3f::s3fnet::TCPMaster::slow_timer_callback_body()</a>, <a class="el" href="socket__master_8cc_source.html#l00162">socket()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00173">s3f::s3fnet::NBSocketMaster::socket()</a>, <a class="el" href="udp__client_8cc_source.html#l00358">s3f::s3fnet::UDPClientSession::start_on()</a>, <a class="el" href="tcp__client_8cc_source.html#l00363">s3f::s3fnet::TCPClientSession::start_on()</a>, and <a class="el" href="blocking__tcp__client_8cc_source.html#l00362">s3f::s3fnet::BTCPClientSession::start_on()</a>.</p>
<div class="fragment"><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;{</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">now</a>();</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div>
<div class="ttc" id="class_entity_html_a303433dc2088519a44e8a56922ec1f0c"><div class="ttname"><a href="class_entity.html#a303433dc2088519a44e8a56922ec1f0c">Entity::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">Time on Entity&#39;s Timeline, either the time at which the current (or most recent) event on the timelin...</div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00111">entity.cc:111</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0250c97bad17f18ef7037fd76f7e5083"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char * s3f::s3fnet::ProtocolSession::getNowWithThousandSeparator </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>For printing the current simulation time in a better readable format. </p>

<p>Definition at line <a class="el" href="protocol__session_8cc_source.html#l00128">128</a> of file <a class="el" href="protocol__session_8cc_source.html">protocol_session.cc</a>.</p>

<p>References <a class="el" href="host_8cc_source.html#l00316">s3f::s3fnet::Host::getNowWithThousandSeparator()</a>, and <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>.</p>

<p>Referenced by <a class="el" href="udp__session_8cc_source.html#l00095">s3f::s3fnet::UDPSession::abort()</a>, <a class="el" href="dummy__session_8cc_source.html#l00160">s3f::s3fnet::DummySession::callback_body()</a>, <a class="el" href="open_v_z_emu__event__session_8cc_source.html#l00118">s3f::s3fnet::OpenVZEventSession::callback_body()</a>, <a class="el" href="udp__session_8cc_source.html#l00134">s3f::s3fnet::UDPSession::clear_app_state()</a>, <a class="el" href="udp__session_8cc_source.html#l00041">s3f::s3fnet::UDPSession::connect()</a>, <a class="el" href="tcp__master_8cc_source.html#l00472">s3f::s3fnet::TCPMaster::createSession()</a>, <a class="el" href="udp__client_8cc_source.html#l00430">s3f::s3fnet::UDPClientSession::data_received()</a>, <a class="el" href="tcp__client_8cc_source.html#l00434">s3f::s3fnet::TCPClientSession::data_received()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00417">s3f::s3fnet::BTCPClientSession::data_received()</a>, <a class="el" href="udp__server_8cc_source.html#l00348">s3f::s3fnet::UDPServerSession::data_sent()</a>, <a class="el" href="tcp__server_8cc_source.html#l00299">s3f::s3fnet::TCPServerSession::data_sent()</a>, <a class="el" href="udp__session_8cc_source.html#l00058">s3f::s3fnet::UDPSession::disconnect()</a>, <a class="el" href="red__queue_8cc_source.html#l00156">s3f::s3fnet::RedQueue::enqueue()</a>, <a class="el" href="udp__client_8cc_source.html#l00486">s3f::s3fnet::UDPClientSession::get_random_server()</a>, <a class="el" href="nb__tcp__client_8cc_source.html#l00133">s3f::s3fnet::NBTCPClientSession::get_random_server()</a>, <a class="el" href="tcp__client_8cc_source.html#l00490">s3f::s3fnet::TCPClientSession::get_random_server()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00473">s3f::s3fnet::BTCPClientSession::get_random_server()</a>, <a class="el" href="ip__session_8cc_source.html#l00567">s3f::s3fnet::IPSession::handle_pop_local_pkt()</a>, <a class="el" href="ip__session_8cc_source.html#l00494">s3f::s3fnet::IPSession::handle_pop_pkt()</a>, <a class="el" href="tcp__client_8cc_source.html#l00285">s3f::s3fnet::TCPClientSession::init()</a>, <a class="el" href="udp__client_8cc_source.html#l00281">s3f::s3fnet::UDPClientSession::init()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00284">s3f::s3fnet::BTCPClientSession::init()</a>, <a class="el" href="open_v_z_emu__event__session_8cc_source.html#l00076">s3f::s3fnet::OpenVZEventSession::injectEvent()</a>, <a class="el" href="udp__session_8cc_source.html#l00068">s3f::s3fnet::UDPSession::listen()</a>, <a class="el" href="udp__client_8cc_source.html#l00310">s3f::s3fnet::UDPClientSession::main_proc()</a>, <a class="el" href="tcp__client_8cc_source.html#l00314">s3f::s3fnet::TCPClientSession::main_proc()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00313">s3f::s3fnet::BTCPClientSession::main_proc()</a>, <a class="el" href="dummy__session_8cc_source.html#l00200">s3f::s3fnet::DummySession::pop()</a>, <a class="el" href="simple__mac_8cc_source.html#l00088">s3f::s3fnet::SimpleMac::pop()</a>, <a class="el" href="open_v_z_emu__event__session_8cc_source.html#l00155">s3f::s3fnet::OpenVZEventSession::pop()</a>, <a class="el" href="udp__master_8cc_source.html#l00109">s3f::s3fnet::UDPMaster::pop()</a>, <a class="el" href="tcp__master_8cc_source.html#l00416">s3f::s3fnet::TCPMaster::pop()</a>, <a class="el" href="ip__session_8cc_source.html#l00410">s3f::s3fnet::IPSession::pop()</a>, <a class="el" href="simple__mac_8cc_source.html#l00052">s3f::s3fnet::SimpleMac::push()</a>, <a class="el" href="udp__master_8cc_source.html#l00102">s3f::s3fnet::UDPMaster::push()</a>, <a class="el" href="simple__phy_8cc_source.html#l00145">s3f::s3fnet::SimplePhy::push()</a>, <a class="el" href="tcp__master_8cc_source.html#l00409">s3f::s3fnet::TCPMaster::push()</a>, <a class="el" href="ip__session_8cc_source.html#l00282">s3f::s3fnet::IPSession::push()</a>, <a class="el" href="udp__session_8cc_source.html#l00189">s3f::s3fnet::UDPSession::receive()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00040">s3f::s3fnet::TCPSession::receive()</a>, <a class="el" href="simple__phy_8cc_source.html#l00167">s3f::s3fnet::SimplePhy::receivePacket()</a>, <a class="el" href="udp__server_8cc_source.html#l00283">s3f::s3fnet::UDPServerSession::request_received()</a>, <a class="el" href="tcp__server_8cc_source.html#l00272">s3f::s3fnet::TCPServerSession::request_received()</a>, <a class="el" href="udp__client_8cc_source.html#l00408">s3f::s3fnet::UDPClientSession::request_sent()</a>, <a class="el" href="tcp__client_8cc_source.html#l00412">s3f::s3fnet::TCPClientSession::request_sent()</a>, <a class="el" href="udp__session_8cc_source.html#l00144">s3f::s3fnet::UDPSession::send()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">s3f::s3fnet::TCPSession::send_data()</a>, <a class="el" href="simple__phy_8cc_source.html#l00158">s3f::s3fnet::SimplePhy::sendPacket()</a>, <a class="el" href="udp__client_8cc_source.html#l00390">s3f::s3fnet::UDPClientSession::server_connected()</a>, <a class="el" href="tcp__client_8cc_source.html#l00394">s3f::s3fnet::TCPClientSession::server_connected()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00395">s3f::s3fnet::BTCPClientSession::server_connected()</a>, <a class="el" href="udp__server_8cc_source.html#l00371">s3f::s3fnet::UDPServerSession::session_closed()</a>, <a class="el" href="udp__client_8cc_source.html#l00465">s3f::s3fnet::UDPClientSession::session_closed()</a>, <a class="el" href="tcp__client_8cc_source.html#l00469">s3f::s3fnet::TCPClientSession::session_closed()</a>, <a class="el" href="tcp__server_8cc_source.html#l00322">s3f::s3fnet::TCPServerSession::session_closed()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00452">s3f::s3fnet::BTCPClientSession::session_closed()</a>, <a class="el" href="tcp__master_8cc_source.html#l00520">s3f::s3fnet::TCPMaster::setConnected()</a>, <a class="el" href="tcp__master_8cc_source.html#l00538">s3f::s3fnet::TCPMaster::setIdle()</a>, <a class="el" href="tcp__master_8cc_source.html#l00529">s3f::s3fnet::TCPMaster::setListening()</a>, <a class="el" href="udp__session_8cc_source.html#l00084">s3f::s3fnet::UDPSession::setSource()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00029">s3f::s3fnet::TCPSession::slowTimeoutHandling()</a>, <a class="el" href="udp__server_8cc_source.html#l00253">s3f::s3fnet::UDPServerSession::start_on()</a>, <a class="el" href="udp__client_8cc_source.html#l00358">s3f::s3fnet::UDPClientSession::start_on()</a>, <a class="el" href="tcp__server_8cc_source.html#l00224">s3f::s3fnet::TCPServerSession::start_on()</a>, <a class="el" href="tcp__client_8cc_source.html#l00363">s3f::s3fnet::TCPClientSession::start_on()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00362">s3f::s3fnet::BTCPClientSession::start_on()</a>, <a class="el" href="tcp__session_8cc_source.html#l00029">s3f::s3fnet::TCPSession::TCPSession()</a>, <a class="el" href="udp__client_8cc_source.html#l00521">s3f::s3fnet::UDPClientSession::timeout()</a>, <a class="el" href="tcp__client_8cc_source.html#l00528">s3f::s3fnet::TCPClientSession::timeout()</a>, <a class="el" href="blocking__tcp__client_8cc_source.html#l00512">s3f::s3fnet::BTCPClientSession::timeout()</a>, <a class="el" href="udp__session_8cc_source.html#l00024">s3f::s3fnet::UDPSession::UDPSession()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00134">s3f::s3fnet::TCPSession::update_timeout()</a>, and <a class="el" href="udp__session_8cc_source.html#l00118">s3f::s3fnet::UDPSession::wake_app()</a>.</p>
<div class="fragment"><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;{</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_host.html#ad4e79d11c09dc928b370fbfc5e9c1296">getNowWithThousandSeparator</a>();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_host_html_ad4e79d11c09dc928b370fbfc5e9c1296"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_host.html#ad4e79d11c09dc928b370fbfc5e9c1296">s3f::s3fnet::Host::getNowWithThousandSeparator</a></div><div class="ttdeci">char * getNowWithThousandSeparator()</div><div class="ttdoc">print out the current simulation time with thousand separator </div><div class="ttdef"><b>Definition:</b> <a href="host_8cc_source.html#l00316">host.cc:316</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a422a77ab55edab25263965f7eaf5458e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::ProtocolSession::configured </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method returns true if the protocol session has been configured. </p>
<p>This method is used to make sure we configure the protocol session before initializing it. </p>

<p>Definition at line <a class="el" href="protocol__session_8h_source.html#l00221">221</a> of file <a class="el" href="protocol__session_8h_source.html">protocol_session.h</a>.</p>

<p>References <a class="el" href="protocol__session_8h_source.html#l00053">s3f::s3fnet::ProtocolSession::PSESS_CONFIGURED</a>, and <a class="el" href="protocol__session_8h_source.html#l00346">s3f::s3fnet::ProtocolSession::stage</a>.</p>

<p>Referenced by <a class="el" href="protocol__session_8cc_source.html#l00021">s3f::s3fnet::ProtocolSession::config()</a>, and <a class="el" href="protocol__session_8cc_source.html#l00041">s3f::s3fnet::ProtocolSession::init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a446b7857e72ac901402821230f5bcd60">stage</a> &gt;= <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a3c91a49267ae29962158ec8e5aa75552">PSESS_CONFIGURED</a>; }</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a3846269d44f267c44706152b1a78a118a3c91a49267ae29962158ec8e5aa75552"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a3c91a49267ae29962158ec8e5aa75552">s3f::s3fnet::ProtocolSession::PSESS_CONFIGURED</a></div><div class="ttdoc">the config method of this protocol session has been called </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00053">protocol_session.h:53</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a446b7857e72ac901402821230f5bcd60"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a446b7857e72ac901402821230f5bcd60">s3f::s3fnet::ProtocolSession::stage</a></div><div class="ttdeci">int stage</div><div class="ttdoc">This variable indicates the current stage of this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00346">protocol_session.h:346</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aca7233711f9c8c606c611ec97ee29cdb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::ProtocolSession::initialized </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method returns true if the protocol session has been initialized. </p>
<p>This can be used to sequence calls to the init method of protocol sessions. For example, if protocol session A requires protocol session B to be initialized before A can be initialized, A's init method can call B's init method as long as B's <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#aca7233711f9c8c606c611ec97ee29cdb" title="This method returns true if the protocol session has been initialized. ">initialized()</a> returns true. The system does not enforce any ordering in its calls the init methods of all protocol sessions declared in the dml configuration. </p>

<p>Definition at line <a class="el" href="protocol__session_8h_source.html#l00233">233</a> of file <a class="el" href="protocol__session_8h_source.html">protocol_session.h</a>.</p>

<p>References <a class="el" href="protocol__session_8h_source.html#l00054">s3f::s3fnet::ProtocolSession::PSESS_INITIALIZED</a>, and <a class="el" href="protocol__session_8h_source.html#l00346">s3f::s3fnet::ProtocolSession::stage</a>.</p>

<p>Referenced by <a class="el" href="protocol__session_8cc_source.html#l00041">s3f::s3fnet::ProtocolSession::init()</a>, and <a class="el" href="protocol__session_8cc_source.html#l00059">s3f::s3fnet::ProtocolSession::wrapup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a446b7857e72ac901402821230f5bcd60">stage</a> &gt;= <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118acf01674e118c3a7d2cd7d8d6b6002d9a">PSESS_INITIALIZED</a>; }</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a446b7857e72ac901402821230f5bcd60"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a446b7857e72ac901402821230f5bcd60">s3f::s3fnet::ProtocolSession::stage</a></div><div class="ttdeci">int stage</div><div class="ttdoc">This variable indicates the current stage of this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00346">protocol_session.h:346</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a3846269d44f267c44706152b1a78a118acf01674e118c3a7d2cd7d8d6b6002d9a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118acf01674e118c3a7d2cd7d8d6b6002d9a">s3f::s3fnet::ProtocolSession::PSESS_INITIALIZED</a></div><div class="ttdoc">the init method of this protocol session has been called </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00054">protocol_session.h:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac934416dd1e279568a3bef2e8a6b045d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::ProtocolSession::wrapped_up </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method returns true if the protocol session has been wrapped up. </p>
<p>This can be used to sequence calls to the wrapup method of protocol sessions. For example, if protocol session A requires protocol session B to be wrapped up before A can be wrapped up, A's wrapup method can call B's wrapup method as long as B's <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#ac934416dd1e279568a3bef2e8a6b045d" title="This method returns true if the protocol session has been wrapped up. ">wrapped_up()</a> returns true. The system does not enforce any ordering in its calls the wrapup methods of all protocol sessions declared in the dml configuration. </p>

<p>Definition at line <a class="el" href="protocol__session_8h_source.html#l00245">245</a> of file <a class="el" href="protocol__session_8h_source.html">protocol_session.h</a>.</p>

<p>References <a class="el" href="protocol__session_8h_source.html#l00055">s3f::s3fnet::ProtocolSession::PSESS_WRAPPED_UP</a>, and <a class="el" href="protocol__session_8h_source.html#l00346">s3f::s3fnet::ProtocolSession::stage</a>.</p>

<p>Referenced by <a class="el" href="protocol__session_8cc_source.html#l00059">s3f::s3fnet::ProtocolSession::wrapup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a446b7857e72ac901402821230f5bcd60">stage</a> &gt;= <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a6b110ae59ed74fa48faf95206a60aba4">PSESS_WRAPPED_UP</a>; }</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a446b7857e72ac901402821230f5bcd60"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a446b7857e72ac901402821230f5bcd60">s3f::s3fnet::ProtocolSession::stage</a></div><div class="ttdeci">int stage</div><div class="ttdoc">This variable indicates the current stage of this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00346">protocol_session.h:346</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a3846269d44f267c44706152b1a78a118a6b110ae59ed74fa48faf95206a60aba4"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a3846269d44f267c44706152b1a78a118a6b110ae59ed74fa48faf95206a60aba4">s3f::s3fnet::ProtocolSession::PSESS_WRAPPED_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00055">protocol_session.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a399f44fe5680907c95aff451e414c98e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int s3f::s3fnet::ProtocolSession::instantiation_type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">virtual</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method controls how protocol instances can coexist with one another. </p>
<p>It returns one of the following: </p>
<ul>
<li>
PROT_UNIQUE_INSTANCE (default): allows only one instance for each type of protocol per protocol stack; </li>
<li>
PROT_MULTIPLE_INSTANCES: allows multiple instances of the same implementation for each type of protocol per protocol stack; </li>
<li>
PROT_MULTIPLE_IMPLEMENTATIONS: allows multiple instances from different implementations of the same protocol to exist on the protocol stack. </li>
</ul>

<p>Reimplemented in <a class="el" href="classs3f_1_1s3fnet_1_1_b_t_c_p_client_session.html#a534c623ca099aabc030db725429acec2">s3f::s3fnet::BTCPClientSession</a>, and <a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_client_session.html#a4f991d67621b12fb8b807813ce750487">s3f::s3fnet::TCPClientSession</a>.</p>

<p>Definition at line <a class="el" href="protocol__session_8h_source.html#l00269">269</a> of file <a class="el" href="protocol__session_8h_source.html">protocol_session.h</a>.</p>

<p>References <a class="el" href="protocol__session_8h_source.html#l00045">s3f::s3fnet::ProtocolSession::PROT_UNIQUE_INSTANCE</a>.</p>

<p>Referenced by <a class="el" href="protocol__graph_8cc_source.html#l00141">s3f::s3fnet::ProtocolGraph::insert_session()</a>.</p>
<div class="fragment"><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a683dd9bc9c34204838e69790fd82f098ae42986263d7158bc7101239e74796ef9">PROT_UNIQUE_INSTANCE</a>; }</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a683dd9bc9c34204838e69790fd82f098ae42986263d7158bc7101239e74796ef9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a683dd9bc9c34204838e69790fd82f098ae42986263d7158bc7101239e74796ef9">s3f::s3fnet::ProtocolSession::PROT_UNIQUE_INSTANCE</a></div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00045">protocol_session.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a3ac0eb241a2a18527be17fa1f4271f89"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::SocketMaster::new_sockid</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The next available socket id. </p>

<p>Definition at line <a class="el" href="socket__master_8h_source.html#l00276">276</a> of file <a class="el" href="socket__master_8h_source.html">socket_master.h</a>.</p>

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00162">socket()</a>.</p>

</div>
</div>
<a class="anchor" id="a88eb3246f5fcb3424d5e72198a2f9062"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SOCK_MAP s3f::s3fnet::SocketMaster::bound_socks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A map from a socket id to a bound socket. </p>

<p>Definition at line <a class="el" href="socket__master_8h_source.html#l00282">282</a> of file <a class="el" href="socket__master_8h_source.html">socket_master.h</a>.</p>

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00283">abort()</a>, <a class="el" href="socket__master_8cc_source.html#l00403">accept()</a>, <a class="el" href="socket__master_8cc_source.html#l00443">accept1a()</a>, <a class="el" href="socket__master_8cc_source.html#l00489">accept1b()</a>, <a class="el" href="socket__master_8cc_source.html#l00535">accept2a()</a>, <a class="el" href="socket__master_8cc_source.html#l00600">accept2b()</a>, <a class="el" href="socket__master_8cc_source.html#l00183">bind()</a>, <a class="el" href="socket__master_8cc_source.html#l00306">block_till()</a>, <a class="el" href="socket__master_8cc_source.html#l00802">close()</a>, <a class="el" href="socket__master_8cc_source.html#l00846">close1()</a>, <a class="el" href="socket__master_8cc_source.html#l00333">connect()</a>, <a class="el" href="socket__master_8cc_source.html#l00365">connect1()</a>, <a class="el" href="socket__master_8cc_source.html#l00240">connected()</a>, <a class="el" href="socket__master_8cc_source.html#l00052">control()</a>, <a class="el" href="socket__master_8cc_source.html#l00262">eof()</a>, <a class="el" href="socket__master_8cc_source.html#l00228">listen()</a>, <a class="el" href="socket__master_8cc_source.html#l00717">recv()</a>, <a class="el" href="socket__master_8cc_source.html#l00759">recv1()</a>, <a class="el" href="socket__master_8cc_source.html#l00637">send()</a>, <a class="el" href="socket__master_8cc_source.html#l00679">send1()</a>, <a class="el" href="socket__master_8cc_source.html#l00162">socket()</a>, and <a class="el" href="socket__master_8cc_source.html#l00030">~SocketMaster()</a>.</p>

</div>
</div>
<a class="anchor" id="a43975cb9dfee4f948fd1b08f7127a59a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SOCK_SET s3f::s3fnet::SocketMaster::unbound_socks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A set of unbound socket ids. </p>

<p>Definition at line <a class="el" href="socket__master_8h_source.html#l00285">285</a> of file <a class="el" href="socket__master_8h_source.html">socket_master.h</a>.</p>

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00535">accept2a()</a>, <a class="el" href="socket__master_8cc_source.html#l00183">bind()</a>, and <a class="el" href="socket__master_8cc_source.html#l00162">socket()</a>.</p>

</div>
</div>
<a class="anchor" id="a7eedcbe4da39cba727d26f1339ac7c47"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* s3f::s3fnet::ProtocolSession::name</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Symbolic name of the protocol this session implements. </p>
<p>The name of the protocol is derived from the DML 'name' attribute. It must not be NULL once the protocol session is configured. </p>

<p>Definition at line <a class="el" href="protocol__session_8h_source.html#l00063">63</a> of file <a class="el" href="protocol__session_8h_source.html">protocol_session.h</a>.</p>

<p>Referenced by <a class="el" href="network__interface_8cc_source.html#l00055">s3f::s3fnet::NetworkInterface::config()</a>, <a class="el" href="host_8cc_source.html#l00049">s3f::s3fnet::Host::config()</a>, <a class="el" href="protocol__session_8cc_source.html#l00021">s3f::s3fnet::ProtocolSession::config()</a>, <a class="el" href="simple__mac_8cc_source.html#l00041">s3f::s3fnet::SimpleMac::init()</a>, <a class="el" href="udp__master_8cc_source.html#l00067">s3f::s3fnet::UDPMaster::init()</a>, <a class="el" href="simple__phy_8cc_source.html#l00130">s3f::s3fnet::SimplePhy::init()</a>, <a class="el" href="tcp__master_8cc_source.html#l00374">s3f::s3fnet::TCPMaster::init()</a>, <a class="el" href="socket__master_8cc_source.html#l00042">init()</a>, <a class="el" href="ip__session_8cc_source.html#l00076">s3f::s3fnet::IPSession::init()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00042">s3f::s3fnet::NBSocketMaster::init()</a>, <a class="el" href="protocol__session_8cc_source.html#l00041">s3f::s3fnet::ProtocolSession::init()</a>, <a class="el" href="protocol__graph_8cc_source.html#l00141">s3f::s3fnet::ProtocolGraph::insert_session()</a>, <a class="el" href="protocol__session_8cc_source.html#l00059">s3f::s3fnet::ProtocolSession::wrapup()</a>, and <a class="el" href="protocol__session_8cc_source.html#l00140">s3f::s3fnet::ProtocolSession::~ProtocolSession()</a>.</p>

</div>
</div>
<a class="anchor" id="a4bb8b1c69b73b59173827f60dc2cacd0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float s3f::s3fnet::ProtocolSession::version</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Version number of this protocol implemenntation, represented as a floating point number (e.g., 1.23). </p>

<p>Definition at line <a class="el" href="protocol__session_8h_source.html#l00069">69</a> of file <a class="el" href="protocol__session_8h_source.html">protocol_session.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6085e2d490de56b7feec0941b37cf8fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* s3f::s3fnet::ProtocolSession::use</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Name of the protocol class from which this protocol session is instantiated. </p>
<p>The protocol class must be registered with the <a class="el" href="classs3f_1_1s3fnet_1_1_protocols.html" title="Managing protocols. ">Protocols</a> class so that we will be able to instantiate an object from the class. (C++ does not support self-reflection). The class name must not be NULL once the protocol session is configured. </p>

<p>Definition at line <a class="el" href="protocol__session_8h_source.html#l00079">79</a> of file <a class="el" href="protocol__session_8h_source.html">protocol_session.h</a>.</p>

<p>Referenced by <a class="el" href="network__interface_8cc_source.html#l00055">s3f::s3fnet::NetworkInterface::config()</a>, <a class="el" href="host_8cc_source.html#l00049">s3f::s3fnet::Host::config()</a>, <a class="el" href="protocol__session_8cc_source.html#l00021">s3f::s3fnet::ProtocolSession::config()</a>, <a class="el" href="protocol__graph_8cc_source.html#l00141">s3f::s3fnet::ProtocolGraph::insert_session()</a>, and <a class="el" href="protocol__session_8cc_source.html#l00140">s3f::s3fnet::ProtocolSession::~ProtocolSession()</a>.</p>

</div>
</div>
<a class="anchor" id="a9e93967a56c673f625b486d2fe389067"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_graph.html">ProtocolGraph</a>* s3f::s3fnet::ProtocolSession::ingraph</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Points to the protocol graph. </p>

<p>Definition at line <a class="el" href="protocol__session_8h_source.html#l00335">335</a> of file <a class="el" href="protocol__session_8h_source.html">protocol_session.h</a>.</p>

<p>Referenced by <a class="el" href="nic__protocol__session_8cc_source.html#l00037">s3f::s3fnet::NicProtocolSession::getNetworkInterface()</a>, <a class="el" href="protocol__session_8h_source.html#l00178">s3f::s3fnet::ProtocolSession::inGraph()</a>, and <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>.</p>

</div>
</div>
<a class="anchor" id="a41caeb7af8ef9b2d1b3ead0bedfe63c9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_random_1_1_r_n_g.html">Random::RNG</a>* s3f::s3fnet::ProtocolSession::sess_rng</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to a random number generator. </p>

<p>Definition at line <a class="el" href="protocol__session_8h_source.html#l00338">338</a> of file <a class="el" href="protocol__session_8h_source.html">protocol_session.h</a>.</p>

<p>Referenced by <a class="el" href="protocol__session_8h_source.html#l00200">s3f::s3fnet::ProtocolSession::getRandom()</a>, and <a class="el" href="protocol__session_8cc_source.html#l00041">s3f::s3fnet::ProtocolSession::init()</a>.</p>

</div>
</div>
<a class="anchor" id="a446b7857e72ac901402821230f5bcd60"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::ProtocolSession::stage</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This variable indicates the current stage of this protocol session. </p>
<p>Each protocol session will go through four staged: PSESS_CREATED, PSESS_CONFIGURED, PSESS_INITIALIZED, and then PSESS_WRAPPED_UP. </p>

<p>Definition at line <a class="el" href="protocol__session_8h_source.html#l00346">346</a> of file <a class="el" href="protocol__session_8h_source.html">protocol_session.h</a>.</p>

<p>Referenced by <a class="el" href="host_8cc_source.html#l00049">s3f::s3fnet::Host::config()</a>, <a class="el" href="protocol__session_8cc_source.html#l00021">s3f::s3fnet::ProtocolSession::config()</a>, <a class="el" href="protocol__session_8h_source.html#l00221">s3f::s3fnet::ProtocolSession::configured()</a>, <a class="el" href="protocol__session_8cc_source.html#l00041">s3f::s3fnet::ProtocolSession::init()</a>, <a class="el" href="protocol__session_8h_source.html#l00233">s3f::s3fnet::ProtocolSession::initialized()</a>, <a class="el" href="protocol__session_8h_source.html#l00245">s3f::s3fnet::ProtocolSession::wrapped_up()</a>, and <a class="el" href="protocol__session_8cc_source.html#l00059">s3f::s3fnet::ProtocolSession::wrapup()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="socket__master_8h_source.html">socket_master.h</a></li>
<li><a class="el" href="socket__master_8cc_source.html">socket_master.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaces3f.html">s3f</a></li><li class="navelem"><a class="el" href="namespaces3f_1_1s3fnet.html">s3fnet</a></li><li class="navelem"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_master.html">SocketMaster</a></li>
    <li class="footer">Generated on Tue Apr 15 2014 00:36:03 for S3F by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
