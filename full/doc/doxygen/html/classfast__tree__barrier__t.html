<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>S3F: fast_tree_barrier_t Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">S3F
   &#160;<span id="projectnumber">2.1.0_full_version</span>
   </div>
   <div id="projectbrief">Simpler Scalable Simulation Framework + S3F-based Network Testbed (Simulation, OpenVZ-based Emulation, and OpenFlow-based SDN)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classfast__tree__barrier__t.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classfast__tree__barrier__t-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">fast_tree_barrier_t Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class representing a software combining tree.  
 <a href="classfast__tree__barrier__t.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a728e9aea6ec920247a994513f12d8017"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#a728e9aea6ec920247a994513f12d8017">fast_tree_barrier_t</a> ()</td></tr>
<tr class="memdesc:a728e9aea6ec920247a994513f12d8017"><td class="mdescLeft">&#160;</td><td class="mdescRight">Barrier constructor.  <a href="#a728e9aea6ec920247a994513f12d8017">More...</a><br/></td></tr>
<tr class="separator:a728e9aea6ec920247a994513f12d8017"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69054b6ea1984959f0442a1b8a7a4f06"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#a69054b6ea1984959f0442a1b8a7a4f06">~fast_tree_barrier_t</a> ()</td></tr>
<tr class="memdesc:a69054b6ea1984959f0442a1b8a7a4f06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Barrier destructor.  <a href="#a69054b6ea1984959f0442a1b8a7a4f06">More...</a><br/></td></tr>
<tr class="separator:a69054b6ea1984959f0442a1b8a7a4f06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac090af07cbafc25d2b600221642b10e0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#ac090af07cbafc25d2b600221642b10e0">init</a> (int)</td></tr>
<tr class="memdesc:ac090af07cbafc25d2b600221642b10e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the barrier to the given number of threads.  <a href="#ac090af07cbafc25d2b600221642b10e0">More...</a><br/></td></tr>
<tr class="separator:ac090af07cbafc25d2b600221642b10e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0baae4334eb6c25d73e6335820806022"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#a0baae4334eb6c25d73e6335820806022">destroy</a> ()</td></tr>
<tr class="memdesc:a0baae4334eb6c25d73e6335820806022"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys the barrier.  <a href="#a0baae4334eb6c25d73e6335820806022">More...</a><br/></td></tr>
<tr class="separator:a0baae4334eb6c25d73e6335820806022"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a720690d93913d0b96a4ad6f476bfa2d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#a720690d93913d0b96a4ad6f476bfa2d4">wait</a> (unsigned tid, <a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> t=-1)</td></tr>
<tr class="memdesc:a720690d93913d0b96a4ad6f476bfa2d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for all other threads to arrive at the barrier.  <a href="#a720690d93913d0b96a4ad6f476bfa2d4">More...</a><br/></td></tr>
<tr class="separator:a720690d93913d0b96a4ad6f476bfa2d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf533d1829ed56a0aee11e3082706e5d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#acf533d1829ed56a0aee11e3082706e5d">get_min_value</a> ()</td></tr>
<tr class="memdesc:acf533d1829ed56a0aee11e3082706e5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the minimum reduction value.  <a href="#acf533d1829ed56a0aee11e3082706e5d">More...</a><br/></td></tr>
<tr class="separator:acf533d1829ed56a0aee11e3082706e5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a658dbcdbaed02e39929889a1091e8471"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#a658dbcdbaed02e39929889a1091e8471">get_max_value</a> ()</td></tr>
<tr class="memdesc:a658dbcdbaed02e39929889a1091e8471"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the maximum reduction value.  <a href="#a658dbcdbaed02e39929889a1091e8471">More...</a><br/></td></tr>
<tr class="separator:a658dbcdbaed02e39929889a1091e8471"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac249940baaf806583c7ccbda10946716"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#ac249940baaf806583c7ccbda10946716">get_sum_value</a> ()</td></tr>
<tr class="memdesc:ac249940baaf806583c7ccbda10946716"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the sum of reduction values.  <a href="#ac249940baaf806583c7ccbda10946716">More...</a><br/></td></tr>
<tr class="separator:ac249940baaf806583c7ccbda10946716"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47fe20fbc3fc9a766f05cbd32ea4c2b9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#a47fe20fbc3fc9a766f05cbd32ea4c2b9">lock</a> ()</td></tr>
<tr class="memdesc:a47fe20fbc3fc9a766f05cbd32ea4c2b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locks the reduction value lock.  <a href="#a47fe20fbc3fc9a766f05cbd32ea4c2b9">More...</a><br/></td></tr>
<tr class="separator:a47fe20fbc3fc9a766f05cbd32ea4c2b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3e2891d8259ae772879e37c920b91da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#ab3e2891d8259ae772879e37c920b91da">unlock</a> ()</td></tr>
<tr class="memdesc:ab3e2891d8259ae772879e37c920b91da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlocks the reduction value lock.  <a href="#ab3e2891d8259ae772879e37c920b91da">More...</a><br/></td></tr>
<tr class="separator:ab3e2891d8259ae772879e37c920b91da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ab621b902689f13c73e03413fb023beb2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#ab621b902689f13c73e03413fb023beb2">update_reduction_values</a> (<a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>)</td></tr>
<tr class="memdesc:ab621b902689f13c73e03413fb023beb2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates internal reduction values.  <a href="#ab621b902689f13c73e03413fb023beb2">More...</a><br/></td></tr>
<tr class="separator:ab621b902689f13c73e03413fb023beb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:a565a36f426b9b3ffdc6d9ef600d9df12"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="fast__tree__barrier_8h.html#a43fdfc96273debec9128d3ab3ce0f574">child_data_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#a565a36f426b9b3ffdc6d9ef600d9df12">children_not_ready</a> (<a class="el" href="structtree__node__t.html">tree_node_t</a> node)</td></tr>
<tr class="memdesc:a565a36f426b9b3ffdc6d9ef600d9df12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Static wrapper function for checking if a node's childre are ready.  <a href="#a565a36f426b9b3ffdc6d9ef600d9df12">More...</a><br/></td></tr>
<tr class="separator:a565a36f426b9b3ffdc6d9ef600d9df12"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aa100fe17aa14e5d6100b2b038cf9006c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#aa100fe17aa14e5d6100b2b038cf9006c">count</a></td></tr>
<tr class="memdesc:aa100fe17aa14e5d6100b2b038cf9006c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expected number of threads.  <a href="#aa100fe17aa14e5d6100b2b038cf9006c">More...</a><br/></td></tr>
<tr class="separator:aa100fe17aa14e5d6100b2b038cf9006c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f22f4167c560e46380f77e18826c66d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtree__node__t.html">tree_node_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a></td></tr>
<tr class="memdesc:a3f22f4167c560e46380f77e18826c66d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of tree node pointers.  <a href="#a3f22f4167c560e46380f77e18826c66d">More...</a><br/></td></tr>
<tr class="separator:a3f22f4167c560e46380f77e18826c66d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a18cc140a108b5d7acf0f63665160d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structtree__thread__data__t.html">tree_thread_data_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a></td></tr>
<tr class="memdesc:a2a18cc140a108b5d7acf0f63665160d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array of thread local-sense pointers.  <a href="#a2a18cc140a108b5d7acf0f63665160d5">More...</a><br/></td></tr>
<tr class="separator:a2a18cc140a108b5d7acf0f63665160d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1a2cee686700f44126bfa9ca16b4718"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#ad1a2cee686700f44126bfa9ca16b4718">min_reduction_value</a></td></tr>
<tr class="memdesc:ad1a2cee686700f44126bfa9ca16b4718"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minimum timestamp observed.  <a href="#ad1a2cee686700f44126bfa9ca16b4718">More...</a><br/></td></tr>
<tr class="separator:ad1a2cee686700f44126bfa9ca16b4718"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5562781aa7a330eab47435043251c5a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#ac5562781aa7a330eab47435043251c5a">max_reduction_value</a></td></tr>
<tr class="memdesc:ac5562781aa7a330eab47435043251c5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum timestamp observed.  <a href="#ac5562781aa7a330eab47435043251c5a">More...</a><br/></td></tr>
<tr class="separator:ac5562781aa7a330eab47435043251c5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0d1824d1773630275f929e3be55ddc8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#aa0d1824d1773630275f929e3be55ddc8">sum_reduction_value</a> [2]</td></tr>
<tr class="memdesc:aa0d1824d1773630275f929e3be55ddc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sum of all reduction values for an iteration.  <a href="#aa0d1824d1773630275f929e3be55ddc8">More...</a><br/></td></tr>
<tr class="separator:aa0d1824d1773630275f929e3be55ddc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43a2e33c99baad65910973d6c4501e5f"><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfast__tree__barrier__t.html#a43a2e33c99baad65910973d6c4501e5f">reduction_lock</a></td></tr>
<tr class="memdesc:a43a2e33c99baad65910973d6c4501e5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock for synchronizing reduction values.  <a href="#a43a2e33c99baad65910973d6c4501e5f">More...</a><br/></td></tr>
<tr class="separator:a43a2e33c99baad65910973d6c4501e5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class representing a software combining tree. </p>
<p>Creates a software combining tree barrier useful for synchronizing very large numbers of threads, often in a distributed system. Excellent for extremely large amounts of work per thread and uneven arrival times. Staggers release of nodes to prevent cache invalidation floods. </p>

<p>Definition at line <a class="el" href="fast__tree__barrier_8h_source.html#l00157">157</a> of file <a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a728e9aea6ec920247a994513f12d8017"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">fast_tree_barrier_t::fast_tree_barrier_t </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Barrier constructor. </p>
<p>Creates a <a class="el" href="classfast__tree__barrier__t.html" title="Class representing a software combining tree. ">fast_tree_barrier_t</a>. The barrier still needs initialization with <a class="el" href="classfast__tree__barrier__t.html#ac090af07cbafc25d2b600221642b10e0" title="Initializes the barrier to the given number of threads. ">init()</a>. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classfast__tree__barrier__t.html#ac090af07cbafc25d2b600221642b10e0" title="Initializes the barrier to the given number of threads. ">init()</a> </dd></dl>

<p>Definition at line <a class="el" href="fast__tree__barrier_8h_source.html#l00165">165</a> of file <a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{};</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a69054b6ea1984959f0442a1b8a7a4f06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">fast_tree_barrier_t::~fast_tree_barrier_t </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Barrier destructor. </p>
<p>Destroys a <a class="el" href="classfast__tree__barrier__t.html" title="Class representing a software combining tree. ">fast_tree_barrier_t</a>. Calls <a class="el" href="classfast__tree__barrier__t.html#a0baae4334eb6c25d73e6335820806022" title="Destroys the barrier. ">destroy()</a>. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classfast__tree__barrier__t.html#a0baae4334eb6c25d73e6335820806022" title="Destroys the barrier. ">destroy()</a> </dd></dl>

<p>Definition at line <a class="el" href="fast__tree__barrier_8cc_source.html#l00031">31</a> of file <a class="el" href="fast__tree__barrier_8cc_source.html">fast_tree_barrier.cc</a>.</p>

<p>References <a class="el" href="fast__tree__barrier_8cc_source.html#l00101">destroy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;                                          {</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="classfast__tree__barrier__t.html#a0baae4334eb6c25d73e6335820806022">destroy</a>();</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;}</div>
<div class="ttc" id="classfast__tree__barrier__t_html_a0baae4334eb6c25d73e6335820806022"><div class="ttname"><a href="classfast__tree__barrier__t.html#a0baae4334eb6c25d73e6335820806022">fast_tree_barrier_t::destroy</a></div><div class="ttdeci">int destroy()</div><div class="ttdoc">Destroys the barrier. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8cc_source.html#l00101">fast_tree_barrier.cc:101</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ac090af07cbafc25d2b600221642b10e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fast_tree_barrier_t::init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>threads</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the barrier to the given number of threads. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">threads</td><td>number of threads that will be synchronized. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error status (based on pthread_mutex_init's status) </dd></dl>

<p>Definition at line <a class="el" href="fast__tree__barrier_8cc_source.html#l00038">38</a> of file <a class="el" href="fast__tree__barrier_8cc_source.html">fast_tree_barrier.cc</a>.</p>

<p>References <a class="el" href="fast__tree__barrier_8h_source.html#l00069">ARRIVAL_CHILDREN</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00128">tree_node_t::arrival_count</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00111">tree_node_t::arrival_parent</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00118">tree_node_t::arrivals_expected</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00258">count</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00284">max_reduction_value</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00279">min_reduction_value</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00299">reduction_lock</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00068">RELEASE_CHILDREN</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00103">tree_node_t::release_children</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00087">tree_node_t::sense</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00140">tree_thread_data_t::sense</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00265">shared_nodes</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00291">sum_reduction_value</a>, and <a class="el" href="fast__tree__barrier_8h_source.html#l00274">tdata</a>.</p>
<div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;{</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <a class="code" href="classfast__tree__barrier__t.html#aa100fe17aa14e5d6100b2b038cf9006c">count</a> = threads; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a> = <span class="keyword">new</span> <a class="code" href="structtree__node__t.html">tree_node_t</a>[threads];</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>) {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                <span class="keywordtype">int</span> i,j,index;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                <span class="keywordflow">for</span>(i = 0;i &lt; threads;i++) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                        <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[i].<a class="code" href="structtree__node__t.html#a9c54ec827eba9666028edddf016076c4">sense</a> = 0;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                        <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[i].<a class="code" href="structtree__node__t.html#a03db279bd6c83f165c8a7c4887eddc3e">arrival_count</a> = 0;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                        <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[i].<a class="code" href="structtree__node__t.html#a843bd8dfb9dc8ec627337dd935bab24b">arrivals_expected</a> = 0;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                        <span class="keywordflow">if</span>(i == 0) {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#ifdef USE_RELEASE_FUTEX</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor"></span>                                <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[0].release_parent = NULL;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* USE_RELEASE_FUTEX */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor"></span>                                <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[0].<a class="code" href="structtree__node__t.html#a9e32327b4ee436b7a7f4875ac33404c5">arrival_parent</a> = NULL;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#ifdef USE_RELEASE_FUTEX</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor"></span>                                <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[i].release_parent = &amp;<a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[(i-1)/<a class="code" href="fast__tree__barrier_8h.html#a813a87654279e46399c5d3cceb5a547a">RELEASE_CHILDREN</a>];</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* USE_RELEASE_FUTEX */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor"></span>                                <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[i].<a class="code" href="structtree__node__t.html#a9e32327b4ee436b7a7f4875ac33404c5">arrival_parent</a> = &amp;<a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[(i-1)/<a class="code" href="fast__tree__barrier_8h.html#aef79d44729003fcedbfd114537e74cae">ARRIVAL_CHILDREN</a>];</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                        }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#ifndef USE_RELEASE_FUTEX</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor"></span>                        <span class="keywordflow">for</span>(j = 0;j &lt; <a class="code" href="fast__tree__barrier_8h.html#a813a87654279e46399c5d3cceb5a547a">RELEASE_CHILDREN</a>;j++) {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                                index = RELEASE_CHILDREN*i+j+1;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                                <span class="keywordflow">if</span>(index &lt; threads) {</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                        <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[i].<a class="code" href="structtree__node__t.html#a914fb93ca949dc23885afe13ac721513">release_children</a>[j] = &amp;<a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[index];</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                                        <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[i].<a class="code" href="structtree__node__t.html#a914fb93ca949dc23885afe13ac721513">release_children</a>[j] = NULL;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                                }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                        }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* NOT USE_RELEASE_FUTEX */</span><span class="preprocessor"></span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                        <span class="keywordflow">for</span>(j = 0;j &lt; <a class="code" href="fast__tree__barrier_8h.html#aef79d44729003fcedbfd114537e74cae">ARRIVAL_CHILDREN</a>;j++) {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                <span class="comment">/* Original document appears to be incorrect, should be:</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">                 * ARRIVAL_CHILDREN*i+j+1 (consider p0 with 1 thread) */</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                                <span class="comment">//shared_nodes[i].have_child[j] = (ARRIVAL_CHILDREN*i+j &lt; threads) ? true : false;</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[i].<a class="code" href="structtree__node__t.html#a843bd8dfb9dc8ec627337dd935bab24b">arrivals_expected</a> += (ARRIVAL_CHILDREN*i+j+1 &lt; threads) ? 1 : 0;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                        }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                err |= 1;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        <a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a> = <span class="keyword">new</span> <a class="code" href="structtree__thread__data__t.html">tree_thread_data_t</a>[threads];</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a>) err |= 2;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i &lt; threads; i++) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a>[i].<a class="code" href="structtree__thread__data__t.html#a08d9346d6b0d229fa96c18578c2d62a8">sense</a> = 1;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="classfast__tree__barrier__t.html#ad1a2cee686700f44126bfa9ca16b4718">min_reduction_value</a> = -1;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <a class="code" href="classfast__tree__barrier__t.html#ac5562781aa7a330eab47435043251c5a">max_reduction_value</a> = 0;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="classfast__tree__barrier__t.html#aa0d1824d1773630275f929e3be55ddc8">sum_reduction_value</a>[0] = 0;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="classfast__tree__barrier__t.html#aa0d1824d1773630275f929e3be55ddc8">sum_reduction_value</a>[1] = 0;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    err |= pthread_mutex_init(&amp;<a class="code" href="classfast__tree__barrier__t.html#a43a2e33c99baad65910973d6c4501e5f">reduction_lock</a>,NULL);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div>
<div class="ttc" id="structtree__thread__data__t_html_a08d9346d6b0d229fa96c18578c2d62a8"><div class="ttname"><a href="structtree__thread__data__t.html#a08d9346d6b0d229fa96c18578c2d62a8">tree_thread_data_t::sense</a></div><div class="ttdeci">int sense</div><div class="ttdoc">Thread&#39;s local sense,. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00140">fast_tree_barrier.h:140</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_a2a18cc140a108b5d7acf0f63665160d5"><div class="ttname"><a href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">fast_tree_barrier_t::tdata</a></div><div class="ttdeci">tree_thread_data_t * tdata</div><div class="ttdoc">Array of thread local-sense pointers. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00274">fast_tree_barrier.h:274</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_a3f22f4167c560e46380f77e18826c66d"><div class="ttname"><a href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">fast_tree_barrier_t::shared_nodes</a></div><div class="ttdeci">tree_node_t * shared_nodes</div><div class="ttdoc">Array of tree node pointers. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00265">fast_tree_barrier.h:265</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_ac5562781aa7a330eab47435043251c5a"><div class="ttname"><a href="classfast__tree__barrier__t.html#ac5562781aa7a330eab47435043251c5a">fast_tree_barrier_t::max_reduction_value</a></div><div class="ttdeci">ltime_t max_reduction_value</div><div class="ttdoc">Maximum timestamp observed. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00284">fast_tree_barrier.h:284</a></div></div>
<div class="ttc" id="structtree__node__t_html_a843bd8dfb9dc8ec627337dd935bab24b"><div class="ttname"><a href="structtree__node__t.html#a843bd8dfb9dc8ec627337dd935bab24b">tree_node_t::arrivals_expected</a></div><div class="ttdeci">int arrivals_expected</div><div class="ttdoc">Number of expected arrivals. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00118">fast_tree_barrier.h:118</a></div></div>
<div class="ttc" id="structtree__node__t_html_a9c54ec827eba9666028edddf016076c4"><div class="ttname"><a href="structtree__node__t.html#a9c54ec827eba9666028edddf016076c4">tree_node_t::sense</a></div><div class="ttdeci">int sense</div><div class="ttdoc">The node&#39;s local sense. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00087">fast_tree_barrier.h:87</a></div></div>
<div class="ttc" id="structtree__node__t_html_a9e32327b4ee436b7a7f4875ac33404c5"><div class="ttname"><a href="structtree__node__t.html#a9e32327b4ee436b7a7f4875ac33404c5">tree_node_t::arrival_parent</a></div><div class="ttdeci">tree_node_t * arrival_parent</div><div class="ttdoc">Pointer to the arrival parent. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00111">fast_tree_barrier.h:111</a></div></div>
<div class="ttc" id="fast__tree__barrier_8h_html_aef79d44729003fcedbfd114537e74cae"><div class="ttname"><a href="fast__tree__barrier_8h.html#aef79d44729003fcedbfd114537e74cae">ARRIVAL_CHILDREN</a></div><div class="ttdeci">#define ARRIVAL_CHILDREN</div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00069">fast_tree_barrier.h:69</a></div></div>
<div class="ttc" id="fast__tree__barrier_8h_html_a813a87654279e46399c5d3cceb5a547a"><div class="ttname"><a href="fast__tree__barrier_8h.html#a813a87654279e46399c5d3cceb5a547a">RELEASE_CHILDREN</a></div><div class="ttdeci">#define RELEASE_CHILDREN</div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00068">fast_tree_barrier.h:68</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_a43a2e33c99baad65910973d6c4501e5f"><div class="ttname"><a href="classfast__tree__barrier__t.html#a43a2e33c99baad65910973d6c4501e5f">fast_tree_barrier_t::reduction_lock</a></div><div class="ttdeci">pthread_mutex_t reduction_lock</div><div class="ttdoc">Lock for synchronizing reduction values. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00299">fast_tree_barrier.h:299</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_aa100fe17aa14e5d6100b2b038cf9006c"><div class="ttname"><a href="classfast__tree__barrier__t.html#aa100fe17aa14e5d6100b2b038cf9006c">fast_tree_barrier_t::count</a></div><div class="ttdeci">int count</div><div class="ttdoc">Expected number of threads. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00258">fast_tree_barrier.h:258</a></div></div>
<div class="ttc" id="structtree__node__t_html"><div class="ttname"><a href="structtree__node__t.html">tree_node_t</a></div><div class="ttdoc">Struct representing a tree node. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00079">fast_tree_barrier.h:79</a></div></div>
<div class="ttc" id="structtree__node__t_html_a03db279bd6c83f165c8a7c4887eddc3e"><div class="ttname"><a href="structtree__node__t.html#a03db279bd6c83f165c8a7c4887eddc3e">tree_node_t::arrival_count</a></div><div class="ttdeci">int arrival_count</div><div class="ttdoc">Current number of arrivals. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00128">fast_tree_barrier.h:128</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_aa0d1824d1773630275f929e3be55ddc8"><div class="ttname"><a href="classfast__tree__barrier__t.html#aa0d1824d1773630275f929e3be55ddc8">fast_tree_barrier_t::sum_reduction_value</a></div><div class="ttdeci">ltime_t sum_reduction_value[2]</div><div class="ttdoc">Sum of all reduction values for an iteration. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00291">fast_tree_barrier.h:291</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_ad1a2cee686700f44126bfa9ca16b4718"><div class="ttname"><a href="classfast__tree__barrier__t.html#ad1a2cee686700f44126bfa9ca16b4718">fast_tree_barrier_t::min_reduction_value</a></div><div class="ttdeci">ltime_t min_reduction_value</div><div class="ttdoc">Minimum timestamp observed. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00279">fast_tree_barrier.h:279</a></div></div>
<div class="ttc" id="structtree__thread__data__t_html"><div class="ttname"><a href="structtree__thread__data__t.html">tree_thread_data_t</a></div><div class="ttdoc">Structure to store each thread&#39;s local sense. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00136">fast_tree_barrier.h:136</a></div></div>
<div class="ttc" id="structtree__node__t_html_a914fb93ca949dc23885afe13ac721513"><div class="ttname"><a href="structtree__node__t.html#a914fb93ca949dc23885afe13ac721513">tree_node_t::release_children</a></div><div class="ttdeci">tree_node_t * release_children[RELEASE_CHILDREN]</div><div class="ttdoc">Pointer to the children to be released. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00103">fast_tree_barrier.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0baae4334eb6c25d73e6335820806022"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fast_tree_barrier_t::destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys the barrier. </p>
<p>Member function that acts as the destructor and frees the barrier when we're done with it. It may be reinitialized afterwards, for instance to change the number of threads. </p>
<dl class="section return"><dt>Returns</dt><dd>error status (based on pthread_mutex_destroy's status) </dd></dl>

<p>Definition at line <a class="el" href="fast__tree__barrier_8cc_source.html#l00101">101</a> of file <a class="el" href="fast__tree__barrier_8cc_source.html">fast_tree_barrier.cc</a>.</p>

<p>References <a class="el" href="fast__tree__barrier_8h_source.html#l00299">reduction_lock</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00265">shared_nodes</a>, and <a class="el" href="fast__tree__barrier_8h_source.html#l00274">tdata</a>.</p>

<p>Referenced by <a class="el" href="fast__tree__barrier_8cc_source.html#l00031">~fast_tree_barrier_t()</a>.</p>
<div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordtype">int</span> err = 0;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    printf(<span class="stringliteral">&quot;asked to delete %lx \n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a>);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>) <span class="keyword">delete</span> [] <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a> = NULL;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a>) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <span class="keyword">delete</span> [] <a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        err = pthread_mutex_destroy(&amp;<a class="code" href="classfast__tree__barrier__t.html#a43a2e33c99baad65910973d6c4501e5f">reduction_lock</a>); <span class="comment">// bundled to prevent dup free</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a> = NULL;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">return</span> err;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="ttc" id="classfast__tree__barrier__t_html_a2a18cc140a108b5d7acf0f63665160d5"><div class="ttname"><a href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">fast_tree_barrier_t::tdata</a></div><div class="ttdeci">tree_thread_data_t * tdata</div><div class="ttdoc">Array of thread local-sense pointers. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00274">fast_tree_barrier.h:274</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_a3f22f4167c560e46380f77e18826c66d"><div class="ttname"><a href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">fast_tree_barrier_t::shared_nodes</a></div><div class="ttdeci">tree_node_t * shared_nodes</div><div class="ttdoc">Array of tree node pointers. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00265">fast_tree_barrier.h:265</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_a43a2e33c99baad65910973d6c4501e5f"><div class="ttname"><a href="classfast__tree__barrier__t.html#a43a2e33c99baad65910973d6c4501e5f">fast_tree_barrier_t::reduction_lock</a></div><div class="ttdeci">pthread_mutex_t reduction_lock</div><div class="ttdoc">Lock for synchronizing reduction values. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00299">fast_tree_barrier.h:299</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a720690d93913d0b96a4ad6f476bfa2d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fast_tree_barrier_t::wait </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td>
          <td class="paramname"><em>t</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for all other threads to arrive at the barrier. </p>
<p>Wait for all members of a barrier to reach the barrier. Each entry to the barrier offers an ltime_t value. If negative, it is ignored. If non-negative it updates the "min_value", "max_value", and "sum_value" entries of the barrier, replacing it if either the min_value is negative (uninitialized) or greater than the offered time with similiar behaviors for max_value and sum as expected. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>the thread id </td></tr>
    <tr><td class="paramname">t</td><td>a reduction value (timestamp) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 or -1, -1 indicates final thread </dd></dl>

<p>Definition at line <a class="el" href="fast__tree__barrier_8cc_source.html#l00124">124</a> of file <a class="el" href="fast__tree__barrier_8cc_source.html">fast_tree_barrier.cc</a>.</p>

<p>References <a class="el" href="fast__tree__barrier_8h_source.html#l00128">tree_node_t::arrival_count</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00258">count</a>, <a class="el" href="fast__barrier_8h_source.html#l00030">INCREMENT_AND_FETCH</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00068">RELEASE_CHILDREN</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00103">tree_node_t::release_children</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00087">tree_node_t::sense</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00140">tree_thread_data_t::sense</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00265">shared_nodes</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00291">sum_reduction_value</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00274">tdata</a>, and <a class="el" href="fast__tree__barrier_8cc_source.html#l00192">update_reduction_values()</a>.</p>
<div class="fragment"><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                                                      {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="classfast__tree__barrier__t.html#ab621b902689f13c73e03413fb023beb2">update_reduction_values</a>(t);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// safety mechanism to allow use with subsets of threads</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordtype">unsigned</span> who = tid % <a class="code" href="classfast__tree__barrier__t.html#aa100fe17aa14e5d6100b2b038cf9006c">count</a>;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="comment">//printf(&quot;WHO: %u arrived (count=%d)\n&quot;,who,count); // DEBUG</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="preprocessor">#ifdef USE_ARRIVAL_FUTEX</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="preprocessor"></span>    <span class="keywordtype">int</span> arrivals;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">while</span>(<a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].arrival_count &lt; <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].arrivals_expected) {</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">#ifdef USE_ARRIVAL_FUTEX</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="preprocessor"></span>        arrivals = <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].<a class="code" href="structtree__node__t.html#a03db279bd6c83f165c8a7c4887eddc3e">arrival_count</a>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            syscall(SYS_futex,&amp;<a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].arrival_count,FUTEX_WAIT,arrivals,NULL);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor"></span>                sched_yield();</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="preprocessor"></span>        }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].<a class="code" href="structtree__node__t.html#a03db279bd6c83f165c8a7c4887eddc3e">arrival_count</a> = 0;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;        <span class="keywordflow">if</span>(who != 0) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                <a class="code" href="fast__barrier_8h.html#a7c2cdfd87ac586162bba6ec9875a6bde">INCREMENT_AND_FETCH</a>(&amp;<a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].arrival_parent-&gt;<a class="code" href="structtree__node__t.html#a03db279bd6c83f165c8a7c4887eddc3e">arrival_count</a>);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor">#ifdef USE_ARRIVAL_FUTEX</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="preprocessor"></span>                syscall(SYS_futex,&amp;<a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].arrival_parent-&gt;<a class="code" href="structtree__node__t.html#a03db279bd6c83f165c8a7c4887eddc3e">arrival_count</a>,FUTEX_WAKE,1,NULL);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="preprocessor">#ifdef USE_RELEASE_FUTEX</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="preprocessor"></span>        <span class="keywordtype">int</span> sense_copy;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#ifdef USE_RELEASE_FUTEX</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor"></span>                <span class="keywordflow">while</span>(<a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].release_parent-&gt;<a class="code" href="structtree__node__t.html#a9c54ec827eba9666028edddf016076c4">sense</a> != <a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a>[who].<a class="code" href="structtree__thread__data__t.html#a08d9346d6b0d229fa96c18578c2d62a8">sense</a>) {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            sense_copy = <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].release_parent-&gt;<a class="code" href="structtree__node__t.html#a9c54ec827eba9666028edddf016076c4">sense</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            syscall(SYS_futex,&amp;<a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].release_parent-&gt;<a class="code" href="structtree__node__t.html#a9c54ec827eba9666028edddf016076c4">sense</a>,FUTEX_WAIT,sense_copy,NULL);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor"></span>                <span class="keywordflow">while</span>(<a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].sense != <a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a>[who].sense) {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                        sched_yield();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor"></span>                }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <a class="code" href="classfast__tree__barrier__t.html#aa0d1824d1773630275f929e3be55ddc8">sum_reduction_value</a>[(int)(!<a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a>[0].sense)] = 0; <span class="comment">// reset alternate sum for next iteration</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="comment">//printf(&quot;WHO: %u was released (count=%d)\n&quot;,who,count); // DEBUG</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">#ifdef USE_RELEASE_FUTEX</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor"></span>        <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].<a class="code" href="structtree__node__t.html#a9c54ec827eba9666028edddf016076c4">sense</a> = !<a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].<a class="code" href="structtree__node__t.html#a9c54ec827eba9666028edddf016076c4">sense</a>;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        syscall(SYS_futex,&amp;<a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].sense,FUTEX_WAKE,<a class="code" href="fast__tree__barrier_8h.html#a813a87654279e46399c5d3cceb5a547a">RELEASE_CHILDREN</a>,NULL);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor"></span>        <a class="code" href="structtree__node__t.html">tree_node_t</a>* rchild;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0;i&lt;<a class="code" href="fast__tree__barrier_8h.html#a813a87654279e46399c5d3cceb5a547a">RELEASE_CHILDREN</a>;i++) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                rchild = <a class="code" href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">shared_nodes</a>[who].<a class="code" href="structtree__node__t.html#a914fb93ca949dc23885afe13ac721513">release_children</a>[i];</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                <span class="keywordflow">if</span>(rchild) {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                        rchild-&gt;<a class="code" href="structtree__node__t.html#a9c54ec827eba9666028edddf016076c4">sense</a> = <a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a>[who].<a class="code" href="structtree__thread__data__t.html#a08d9346d6b0d229fa96c18578c2d62a8">sense</a>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a>[who].<a class="code" href="structtree__thread__data__t.html#a08d9346d6b0d229fa96c18578c2d62a8">sense</a> = !<a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a>[who].<a class="code" href="structtree__thread__data__t.html#a08d9346d6b0d229fa96c18578c2d62a8">sense</a>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        <span class="comment">//printf(&quot;WHO: %u left (count=%d)\n&quot;,who,count); // DEBUG</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div>
<div class="ttc" id="structtree__thread__data__t_html_a08d9346d6b0d229fa96c18578c2d62a8"><div class="ttname"><a href="structtree__thread__data__t.html#a08d9346d6b0d229fa96c18578c2d62a8">tree_thread_data_t::sense</a></div><div class="ttdeci">int sense</div><div class="ttdoc">Thread&#39;s local sense,. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00140">fast_tree_barrier.h:140</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_a2a18cc140a108b5d7acf0f63665160d5"><div class="ttname"><a href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">fast_tree_barrier_t::tdata</a></div><div class="ttdeci">tree_thread_data_t * tdata</div><div class="ttdoc">Array of thread local-sense pointers. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00274">fast_tree_barrier.h:274</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_a3f22f4167c560e46380f77e18826c66d"><div class="ttname"><a href="classfast__tree__barrier__t.html#a3f22f4167c560e46380f77e18826c66d">fast_tree_barrier_t::shared_nodes</a></div><div class="ttdeci">tree_node_t * shared_nodes</div><div class="ttdoc">Array of tree node pointers. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00265">fast_tree_barrier.h:265</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_ab621b902689f13c73e03413fb023beb2"><div class="ttname"><a href="classfast__tree__barrier__t.html#ab621b902689f13c73e03413fb023beb2">fast_tree_barrier_t::update_reduction_values</a></div><div class="ttdeci">void update_reduction_values(ltime_t)</div><div class="ttdoc">Updates internal reduction values. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8cc_source.html#l00192">fast_tree_barrier.cc:192</a></div></div>
<div class="ttc" id="structtree__node__t_html_a9c54ec827eba9666028edddf016076c4"><div class="ttname"><a href="structtree__node__t.html#a9c54ec827eba9666028edddf016076c4">tree_node_t::sense</a></div><div class="ttdeci">int sense</div><div class="ttdoc">The node&#39;s local sense. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00087">fast_tree_barrier.h:87</a></div></div>
<div class="ttc" id="fast__tree__barrier_8h_html_a813a87654279e46399c5d3cceb5a547a"><div class="ttname"><a href="fast__tree__barrier_8h.html#a813a87654279e46399c5d3cceb5a547a">RELEASE_CHILDREN</a></div><div class="ttdeci">#define RELEASE_CHILDREN</div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00068">fast_tree_barrier.h:68</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_aa100fe17aa14e5d6100b2b038cf9006c"><div class="ttname"><a href="classfast__tree__barrier__t.html#aa100fe17aa14e5d6100b2b038cf9006c">fast_tree_barrier_t::count</a></div><div class="ttdeci">int count</div><div class="ttdoc">Expected number of threads. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00258">fast_tree_barrier.h:258</a></div></div>
<div class="ttc" id="fast__barrier_8h_html_a7c2cdfd87ac586162bba6ec9875a6bde"><div class="ttname"><a href="fast__barrier_8h.html#a7c2cdfd87ac586162bba6ec9875a6bde">INCREMENT_AND_FETCH</a></div><div class="ttdeci">#define INCREMENT_AND_FETCH(X)</div><div class="ttdef"><b>Definition:</b> <a href="fast__barrier_8h_source.html#l00030">fast_barrier.h:30</a></div></div>
<div class="ttc" id="structtree__node__t_html"><div class="ttname"><a href="structtree__node__t.html">tree_node_t</a></div><div class="ttdoc">Struct representing a tree node. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00079">fast_tree_barrier.h:79</a></div></div>
<div class="ttc" id="structtree__node__t_html_a03db279bd6c83f165c8a7c4887eddc3e"><div class="ttname"><a href="structtree__node__t.html#a03db279bd6c83f165c8a7c4887eddc3e">tree_node_t::arrival_count</a></div><div class="ttdeci">int arrival_count</div><div class="ttdoc">Current number of arrivals. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00128">fast_tree_barrier.h:128</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_aa0d1824d1773630275f929e3be55ddc8"><div class="ttname"><a href="classfast__tree__barrier__t.html#aa0d1824d1773630275f929e3be55ddc8">fast_tree_barrier_t::sum_reduction_value</a></div><div class="ttdeci">ltime_t sum_reduction_value[2]</div><div class="ttdoc">Sum of all reduction values for an iteration. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00291">fast_tree_barrier.h:291</a></div></div>
<div class="ttc" id="structtree__node__t_html_a914fb93ca949dc23885afe13ac721513"><div class="ttname"><a href="structtree__node__t.html#a914fb93ca949dc23885afe13ac721513">tree_node_t::release_children</a></div><div class="ttdeci">tree_node_t * release_children[RELEASE_CHILDREN]</div><div class="ttdoc">Pointer to the children to be released. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00103">fast_tree_barrier.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acf533d1829ed56a0aee11e3082706e5d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> fast_tree_barrier_t::get_min_value </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the minimum reduction value. </p>
<p>Returns the minimum time observed for use in calculating the synchronzation window. Warning: The min reduction value may be modified by threads entering the barrier while the barrier is active. If atomic access is needed, use the BARRIER_AUTOLOCK macro. </p>
<dl class="section return"><dt>Returns</dt><dd>min reduction value </dd></dl>

<p>Definition at line <a class="el" href="fast__tree__barrier_8h_source.html#l00213">213</a> of file <a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>.</p>

<p>References <a class="el" href="fast__tree__barrier_8h_source.html#l00279">min_reduction_value</a>.</p>
<div class="fragment"><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfast__tree__barrier__t.html#ad1a2cee686700f44126bfa9ca16b4718">min_reduction_value</a>; }</div>
<div class="ttc" id="classfast__tree__barrier__t_html_ad1a2cee686700f44126bfa9ca16b4718"><div class="ttname"><a href="classfast__tree__barrier__t.html#ad1a2cee686700f44126bfa9ca16b4718">fast_tree_barrier_t::min_reduction_value</a></div><div class="ttdeci">ltime_t min_reduction_value</div><div class="ttdoc">Minimum timestamp observed. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00279">fast_tree_barrier.h:279</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a658dbcdbaed02e39929889a1091e8471"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> fast_tree_barrier_t::get_max_value </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the maximum reduction value. </p>
<p>Returns the maximum time observed for use in calculating the synchronzation window. Warning: The max reduction value may be modified by threads entering the barrier while the barrier is active. If atomic access is needed, use the BARRIER_AUTOLOCK macro. </p>
<dl class="section return"><dt>Returns</dt><dd>max reduction value </dd></dl>

<p>Definition at line <a class="el" href="fast__tree__barrier_8h_source.html#l00224">224</a> of file <a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>.</p>

<p>References <a class="el" href="fast__tree__barrier_8h_source.html#l00284">max_reduction_value</a>.</p>
<div class="fragment"><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfast__tree__barrier__t.html#ac5562781aa7a330eab47435043251c5a">max_reduction_value</a>; }</div>
<div class="ttc" id="classfast__tree__barrier__t_html_ac5562781aa7a330eab47435043251c5a"><div class="ttname"><a href="classfast__tree__barrier__t.html#ac5562781aa7a330eab47435043251c5a">fast_tree_barrier_t::max_reduction_value</a></div><div class="ttdeci">ltime_t max_reduction_value</div><div class="ttdoc">Maximum timestamp observed. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00284">fast_tree_barrier.h:284</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac249940baaf806583c7ccbda10946716"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> fast_tree_barrier_t::get_sum_value </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the sum of reduction values. </p>
<p>Returns the sum of all reduction values observed in the previous barrier iteration for use in calculating the synchronzation window. Does not have the same synchronization problems since it gets the sum from the opposite global sense (last iteration). </p>
<dl class="section return"><dt>Returns</dt><dd>previous reduction value sum </dd></dl>

<p>Definition at line <a class="el" href="fast__tree__barrier_8h_source.html#l00234">234</a> of file <a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>.</p>

<p>References <a class="el" href="fast__tree__barrier_8h_source.html#l00291">sum_reduction_value</a>, and <a class="el" href="fast__tree__barrier_8h_source.html#l00274">tdata</a>.</p>
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classfast__tree__barrier__t.html#aa0d1824d1773630275f929e3be55ddc8">sum_reduction_value</a>[(int)(!<a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a>[0].sense)]; }</div>
<div class="ttc" id="classfast__tree__barrier__t_html_a2a18cc140a108b5d7acf0f63665160d5"><div class="ttname"><a href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">fast_tree_barrier_t::tdata</a></div><div class="ttdeci">tree_thread_data_t * tdata</div><div class="ttdoc">Array of thread local-sense pointers. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00274">fast_tree_barrier.h:274</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_aa0d1824d1773630275f929e3be55ddc8"><div class="ttname"><a href="classfast__tree__barrier__t.html#aa0d1824d1773630275f929e3be55ddc8">fast_tree_barrier_t::sum_reduction_value</a></div><div class="ttdeci">ltime_t sum_reduction_value[2]</div><div class="ttdoc">Sum of all reduction values for an iteration. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00291">fast_tree_barrier.h:291</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a47fe20fbc3fc9a766f05cbd32ea4c2b9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fast_tree_barrier_t::lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locks the reduction value lock. </p>
<p>Acquires exclusive access to read/write reduction values. Warning: <a class="el" href="classfast__tree__barrier__t.html#a47fe20fbc3fc9a766f05cbd32ea4c2b9" title="Locks the reduction value lock. ">lock()</a> will freeze barrier progress while active. Use of the BARRIER_AUTOLOCK macro is highly recommended. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classfast__tree__barrier__t.html#ab3e2891d8259ae772879e37c920b91da" title="Unlocks the reduction value lock. ">unlock()</a> </dd></dl>

<p>Definition at line <a class="el" href="fast__tree__barrier_8h_source.html#l00243">243</a> of file <a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>.</p>

<p>References <a class="el" href="fast__tree__barrier_8h_source.html#l00299">reduction_lock</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{ pthread_mutex_lock(&amp;<a class="code" href="classfast__tree__barrier__t.html#a43a2e33c99baad65910973d6c4501e5f">reduction_lock</a>); }</div>
<div class="ttc" id="classfast__tree__barrier__t_html_a43a2e33c99baad65910973d6c4501e5f"><div class="ttname"><a href="classfast__tree__barrier__t.html#a43a2e33c99baad65910973d6c4501e5f">fast_tree_barrier_t::reduction_lock</a></div><div class="ttdeci">pthread_mutex_t reduction_lock</div><div class="ttdoc">Lock for synchronizing reduction values. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00299">fast_tree_barrier.h:299</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab3e2891d8259ae772879e37c920b91da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fast_tree_barrier_t::unlock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Unlocks the reduction value lock. </p>
<p>Releases exclusive access of read/write reduction values. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classfast__tree__barrier__t.html#a47fe20fbc3fc9a766f05cbd32ea4c2b9" title="Locks the reduction value lock. ">lock()</a> </dd></dl>

<p>Definition at line <a class="el" href="fast__tree__barrier_8h_source.html#l00250">250</a> of file <a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>.</p>

<p>References <a class="el" href="fast__tree__barrier_8h_source.html#l00299">reduction_lock</a>.</p>
<div class="fragment"><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;{ pthread_mutex_unlock(&amp;<a class="code" href="classfast__tree__barrier__t.html#a43a2e33c99baad65910973d6c4501e5f">reduction_lock</a>); }</div>
<div class="ttc" id="classfast__tree__barrier__t_html_a43a2e33c99baad65910973d6c4501e5f"><div class="ttname"><a href="classfast__tree__barrier__t.html#a43a2e33c99baad65910973d6c4501e5f">fast_tree_barrier_t::reduction_lock</a></div><div class="ttdeci">pthread_mutex_t reduction_lock</div><div class="ttdoc">Lock for synchronizing reduction values. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00299">fast_tree_barrier.h:299</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab621b902689f13c73e03413fb023beb2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void fast_tree_barrier_t::update_reduction_values </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates internal reduction values. </p>
<p>Called by <a class="el" href="classfast__tree__barrier__t.html#a720690d93913d0b96a4ad6f476bfa2d4" title="Waits for all other threads to arrive at the barrier. ">wait()</a> to update barrier's internal reduction values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>a thread's reduction value, passed by <a class="el" href="classfast__tree__barrier__t.html#a720690d93913d0b96a4ad6f476bfa2d4" title="Waits for all other threads to arrive at the barrier. ">wait()</a> </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="fast__tree__barrier_8cc_source.html#l00192">192</a> of file <a class="el" href="fast__tree__barrier_8cc_source.html">fast_tree_barrier.cc</a>.</p>

<p>References <a class="el" href="fast__tree__barrier_8h_source.html#l00284">max_reduction_value</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00279">min_reduction_value</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00299">reduction_lock</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00140">tree_thread_data_t::sense</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00291">sum_reduction_value</a>, and <a class="el" href="fast__tree__barrier_8h_source.html#l00274">tdata</a>.</p>

<p>Referenced by <a class="el" href="fast__tree__barrier_8cc_source.html#l00124">wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                                                  {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// if t is non-negative then use it to update min, max, sum</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">if</span>( t &gt;= 0 ) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        pthread_mutex_lock(&amp;<a class="code" href="classfast__tree__barrier__t.html#a43a2e33c99baad65910973d6c4501e5f">reduction_lock</a>);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordflow">if</span>( <a class="code" href="classfast__tree__barrier__t.html#ad1a2cee686700f44126bfa9ca16b4718">min_reduction_value</a> == -1 || t &lt; <a class="code" href="classfast__tree__barrier__t.html#ad1a2cee686700f44126bfa9ca16b4718">min_reduction_value</a> ) {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <a class="code" href="classfast__tree__barrier__t.html#ad1a2cee686700f44126bfa9ca16b4718">min_reduction_value</a> = t;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">if</span>( t &gt; <a class="code" href="classfast__tree__barrier__t.html#ac5562781aa7a330eab47435043251c5a">max_reduction_value</a> ){ </div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <a class="code" href="classfast__tree__barrier__t.html#ac5562781aa7a330eab47435043251c5a">max_reduction_value</a> = t;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        }</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <a class="code" href="classfast__tree__barrier__t.html#aa0d1824d1773630275f929e3be55ddc8">sum_reduction_value</a>[<a class="code" href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">tdata</a>[0].<a class="code" href="structtree__thread__data__t.html#a08d9346d6b0d229fa96c18578c2d62a8">sense</a>] += t;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        pthread_mutex_unlock(&amp;<a class="code" href="classfast__tree__barrier__t.html#a43a2e33c99baad65910973d6c4501e5f">reduction_lock</a>);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="ttc" id="structtree__thread__data__t_html_a08d9346d6b0d229fa96c18578c2d62a8"><div class="ttname"><a href="structtree__thread__data__t.html#a08d9346d6b0d229fa96c18578c2d62a8">tree_thread_data_t::sense</a></div><div class="ttdeci">int sense</div><div class="ttdoc">Thread&#39;s local sense,. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00140">fast_tree_barrier.h:140</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_a2a18cc140a108b5d7acf0f63665160d5"><div class="ttname"><a href="classfast__tree__barrier__t.html#a2a18cc140a108b5d7acf0f63665160d5">fast_tree_barrier_t::tdata</a></div><div class="ttdeci">tree_thread_data_t * tdata</div><div class="ttdoc">Array of thread local-sense pointers. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00274">fast_tree_barrier.h:274</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_ac5562781aa7a330eab47435043251c5a"><div class="ttname"><a href="classfast__tree__barrier__t.html#ac5562781aa7a330eab47435043251c5a">fast_tree_barrier_t::max_reduction_value</a></div><div class="ttdeci">ltime_t max_reduction_value</div><div class="ttdoc">Maximum timestamp observed. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00284">fast_tree_barrier.h:284</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_a43a2e33c99baad65910973d6c4501e5f"><div class="ttname"><a href="classfast__tree__barrier__t.html#a43a2e33c99baad65910973d6c4501e5f">fast_tree_barrier_t::reduction_lock</a></div><div class="ttdeci">pthread_mutex_t reduction_lock</div><div class="ttdoc">Lock for synchronizing reduction values. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00299">fast_tree_barrier.h:299</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_aa0d1824d1773630275f929e3be55ddc8"><div class="ttname"><a href="classfast__tree__barrier__t.html#aa0d1824d1773630275f929e3be55ddc8">fast_tree_barrier_t::sum_reduction_value</a></div><div class="ttdeci">ltime_t sum_reduction_value[2]</div><div class="ttdoc">Sum of all reduction values for an iteration. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00291">fast_tree_barrier.h:291</a></div></div>
<div class="ttc" id="classfast__tree__barrier__t_html_ad1a2cee686700f44126bfa9ca16b4718"><div class="ttname"><a href="classfast__tree__barrier__t.html#ad1a2cee686700f44126bfa9ca16b4718">fast_tree_barrier_t::min_reduction_value</a></div><div class="ttdeci">ltime_t min_reduction_value</div><div class="ttdoc">Minimum timestamp observed. </div><div class="ttdef"><b>Definition:</b> <a href="fast__tree__barrier_8h_source.html#l00279">fast_tree_barrier.h:279</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a565a36f426b9b3ffdc6d9ef600d9df12"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="fast__tree__barrier_8h.html#a43fdfc96273debec9128d3ab3ce0f574">child_data_t</a> fast_tree_barrier_t::children_not_ready </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtree__node__t.html">tree_node_t</a>&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Static wrapper function for checking if a node's childre are ready. </p>
<p>WARNING: May not be implemented; futex functionality largely obseletes </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aa100fe17aa14e5d6100b2b038cf9006c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int fast_tree_barrier_t::count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Expected number of threads. </p>
<p>Number of threads the barrier will wait for. Set by <a class="el" href="classfast__tree__barrier__t.html#ac090af07cbafc25d2b600221642b10e0" title="Initializes the barrier to the given number of threads. ">init()</a>. </p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classfast__tree__barrier__t.html#ac090af07cbafc25d2b600221642b10e0" title="Initializes the barrier to the given number of threads. ">init()</a> </dd></dl>

<p>Definition at line <a class="el" href="fast__tree__barrier_8h_source.html#l00258">258</a> of file <a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>.</p>

<p>Referenced by <a class="el" href="fast__tree__barrier_8cc_source.html#l00038">init()</a>, and <a class="el" href="fast__tree__barrier_8cc_source.html#l00124">wait()</a>.</p>

</div>
</div>
<a class="anchor" id="a3f22f4167c560e46380f77e18826c66d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtree__node__t.html">tree_node_t</a>* fast_tree_barrier_t::shared_nodes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Array of tree node pointers. </p>
<p>Dynamically allocated array of tree node references. Each node represents a thread. </p>

<p>Definition at line <a class="el" href="fast__tree__barrier_8h_source.html#l00265">265</a> of file <a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>.</p>

<p>Referenced by <a class="el" href="fast__tree__barrier_8cc_source.html#l00101">destroy()</a>, <a class="el" href="fast__tree__barrier_8cc_source.html#l00038">init()</a>, and <a class="el" href="fast__tree__barrier_8cc_source.html#l00124">wait()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a18cc140a108b5d7acf0f63665160d5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtree__thread__data__t.html">tree_thread_data_t</a>* fast_tree_barrier_t::tdata</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Array of thread local-sense pointers. </p>
<p>Dynamically allocated array of local-sense references for each thread. Separated from the actual nodes for better performance spinning. In a distributed system, these would also stay local to the machine, while shared_nodes would likely take on a slightly different form. </p>

<p>Definition at line <a class="el" href="fast__tree__barrier_8h_source.html#l00274">274</a> of file <a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>.</p>

<p>Referenced by <a class="el" href="fast__tree__barrier_8cc_source.html#l00101">destroy()</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00234">get_sum_value()</a>, <a class="el" href="fast__tree__barrier_8cc_source.html#l00038">init()</a>, <a class="el" href="fast__tree__barrier_8cc_source.html#l00192">update_reduction_values()</a>, and <a class="el" href="fast__tree__barrier_8cc_source.html#l00124">wait()</a>.</p>

</div>
</div>
<a class="anchor" id="ad1a2cee686700f44126bfa9ca16b4718"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> fast_tree_barrier_t::min_reduction_value</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Minimum timestamp observed. </p>

<p>Definition at line <a class="el" href="fast__tree__barrier_8h_source.html#l00279">279</a> of file <a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>.</p>

<p>Referenced by <a class="el" href="fast__tree__barrier_8h_source.html#l00213">get_min_value()</a>, <a class="el" href="fast__tree__barrier_8cc_source.html#l00038">init()</a>, and <a class="el" href="fast__tree__barrier_8cc_source.html#l00192">update_reduction_values()</a>.</p>

</div>
</div>
<a class="anchor" id="ac5562781aa7a330eab47435043251c5a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> fast_tree_barrier_t::max_reduction_value</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Maximum timestamp observed. </p>

<p>Definition at line <a class="el" href="fast__tree__barrier_8h_source.html#l00284">284</a> of file <a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>.</p>

<p>Referenced by <a class="el" href="fast__tree__barrier_8h_source.html#l00224">get_max_value()</a>, <a class="el" href="fast__tree__barrier_8cc_source.html#l00038">init()</a>, and <a class="el" href="fast__tree__barrier_8cc_source.html#l00192">update_reduction_values()</a>.</p>

</div>
</div>
<a class="anchor" id="aa0d1824d1773630275f929e3be55ddc8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> fast_tree_barrier_t::sum_reduction_value[2]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sum of all reduction values for an iteration. </p>
<p>Indexed by global sense. Always returns previous iteration's sum to avoid contention and unnecessary synchronization. </p>

<p>Definition at line <a class="el" href="fast__tree__barrier_8h_source.html#l00291">291</a> of file <a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>.</p>

<p>Referenced by <a class="el" href="fast__tree__barrier_8h_source.html#l00234">get_sum_value()</a>, <a class="el" href="fast__tree__barrier_8cc_source.html#l00038">init()</a>, <a class="el" href="fast__tree__barrier_8cc_source.html#l00192">update_reduction_values()</a>, and <a class="el" href="fast__tree__barrier_8cc_source.html#l00124">wait()</a>.</p>

</div>
</div>
<a class="anchor" id="a43a2e33c99baad65910973d6c4501e5f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t fast_tree_barrier_t::reduction_lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lock for synchronizing reduction values. </p>
<p>While a lock per variable might allow a slight parallel performance gain in some cases, a single lock is easier and avoids the overhead of acquiring and releasing three subsequent locks. </p>

<p>Definition at line <a class="el" href="fast__tree__barrier_8h_source.html#l00299">299</a> of file <a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a>.</p>

<p>Referenced by <a class="el" href="fast__tree__barrier_8cc_source.html#l00101">destroy()</a>, <a class="el" href="fast__tree__barrier_8cc_source.html#l00038">init()</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00243">lock()</a>, <a class="el" href="fast__tree__barrier_8h_source.html#l00250">unlock()</a>, and <a class="el" href="fast__tree__barrier_8cc_source.html#l00192">update_reduction_values()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="fast__tree__barrier_8h_source.html">fast_tree_barrier.h</a></li>
<li><a class="el" href="fast__tree__barrier_8cc_source.html">fast_tree_barrier.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classfast__tree__barrier__t.html">fast_tree_barrier_t</a></li>
    <li class="footer">Generated on Tue Apr 15 2014 00:36:01 for S3F by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
