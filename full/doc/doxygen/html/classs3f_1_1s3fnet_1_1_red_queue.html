<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>S3F: s3f::s3fnet::RedQueue Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">S3F
   &#160;<span id="projectnumber">2.1.0_full_version</span>
   </div>
   <div id="projectbrief">Simpler Scalable Simulation Framework + S3F-based Network Testbed (Simulation, OpenVZ-based Emulation, and OpenFlow-based SDN)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classs3f_1_1s3fnet_1_1_red_queue.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classs3f_1_1s3fnet_1_1_red_queue-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">s3f::s3fnet::RedQueue Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A simple RED queue used inside a network interface.  
 <a href="classs3f_1_1s3fnet_1_1_red_queue.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="red__queue_8h_source.html">red_queue.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for s3f::s3fnet::RedQueue:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="classs3f_1_1s3fnet_1_1_red_queue.png" usemap="#s3f::s3fnet::RedQueue_map" alt=""/>
  <map id="s3f::s3fnet::RedQueue_map" name="s3f::s3fnet::RedQueue_map">
<area href="classs3f_1_1s3fnet_1_1_nic_queue.html" title="A base class for implementation of queues in an NIC. " alt="s3f::s3fnet::NicQueue" shape="rect" coords="0,0,135,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aab6b782e293cce77676537197a845905"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#aab6b782e293cce77676537197a845905">RedQueue</a> (<a class="el" href="classs3f_1_1s3fnet_1_1_lowest_protocol_session.html">LowestProtocolSession</a> *lowsess)</td></tr>
<tr class="memdesc:aab6b782e293cce77676537197a845905"><td class="mdescLeft">&#160;</td><td class="mdescRight">The constructor.  <a href="#aab6b782e293cce77676537197a845905">More...</a><br/></td></tr>
<tr class="separator:aab6b782e293cce77676537197a845905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2f539c5fa2e8e08b161c0fd5a512d25"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#ad2f539c5fa2e8e08b161c0fd5a512d25">~RedQueue</a> ()</td></tr>
<tr class="memdesc:ad2f539c5fa2e8e08b161c0fd5a512d25"><td class="mdescLeft">&#160;</td><td class="mdescRight">The destructor.  <a href="#ad2f539c5fa2e8e08b161c0fd5a512d25">More...</a><br/></td></tr>
<tr class="separator:ad2f539c5fa2e8e08b161c0fd5a512d25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf13c52a3174b98bd2598fb7e820e13d"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#adf13c52a3174b98bd2598fb7e820e13d">config</a> (s3f::dml::Configuration *cfg)</td></tr>
<tr class="memdesc:adf13c52a3174b98bd2598fb7e820e13d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the nic queue.  <a href="#adf13c52a3174b98bd2598fb7e820e13d">More...</a><br/></td></tr>
<tr class="separator:adf13c52a3174b98bd2598fb7e820e13d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a732078be2541008b2343bedd322541"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a6a732078be2541008b2343bedd322541">init</a> ()</td></tr>
<tr class="memdesc:a6a732078be2541008b2343bedd322541"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the queue.  <a href="#a6a732078be2541008b2343bedd322541">More...</a><br/></td></tr>
<tr class="separator:a6a732078be2541008b2343bedd322541"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20f4b8a264fbcb3b32ee83ddd6e2aff8"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a20f4b8a264fbcb3b32ee83ddd6e2aff8">type</a> ()</td></tr>
<tr class="memdesc:a20f4b8a264fbcb3b32ee83ddd6e2aff8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the type of this queue.  <a href="#a20f4b8a264fbcb3b32ee83ddd6e2aff8">More...</a><br/></td></tr>
<tr class="separator:a20f4b8a264fbcb3b32ee83ddd6e2aff8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1de4c2f7a30e49a0eb53c256e974028f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a1de4c2f7a30e49a0eb53c256e974028f">enqueue</a> (<a class="el" href="message_8h.html#a093346897a71a253ceb5aaa3785721a0">Activation</a> msg)</td></tr>
<tr class="memdesc:a1de4c2f7a30e49a0eb53c256e974028f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enqueue the message at the tail of the buffer.  <a href="#a1de4c2f7a30e49a0eb53c256e974028f">More...</a><br/></td></tr>
<tr class="separator:a1de4c2f7a30e49a0eb53c256e974028f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52744f50eb35740f2635ca355c9fe751"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a52744f50eb35740f2635ca355c9fe751">control</a> (int ctrltyp, void *ctrlmsg, <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html">ProtocolSession</a> *sess)</td></tr>
<tr class="memdesc:a52744f50eb35740f2635ca355c9fe751"><td class="mdescLeft">&#160;</td><td class="mdescRight">Control information; nothing implemented as default.  <a href="#a52744f50eb35740f2635ca355c9fe751">More...</a><br/></td></tr>
<tr class="separator:a52744f50eb35740f2635ca355c9fe751"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42bd91a94fb485643564014ae638370b"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a42bd91a94fb485643564014ae638370b">wrapup</a> ()</td></tr>
<tr class="memdesc:a42bd91a94fb485643564014ae638370b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The wrapup method is called when the simulation finishes.  <a href="#a42bd91a94fb485643564014ae638370b">More...</a><br/></td></tr>
<tr class="separator:a42bd91a94fb485643564014ae638370b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a29f7f048bc8c0ee5c38682fedd35bb0b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a29f7f048bc8c0ee5c38682fedd35bb0b">calibrate</a> (float length)</td></tr>
<tr class="memdesc:a29f7f048bc8c0ee5c38682fedd35bb0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the enqueue method.  <a href="#a29f7f048bc8c0ee5c38682fedd35bb0b">More...</a><br/></td></tr>
<tr class="separator:a29f7f048bc8c0ee5c38682fedd35bb0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a1e93ebdcaa6412af67c14e9d0e9e85d5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classs3f_1_1s3fnet_1_1_lowest_protocol_session.html">LowestProtocolSession</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a></td></tr>
<tr class="memdesc:a1e93ebdcaa6412af67c14e9d0e9e85d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The lowest protocol session that this queue is associated with.  <a href="#a1e93ebdcaa6412af67c14e9d0e9e85d5">More...</a><br/></td></tr>
<tr class="separator:a1e93ebdcaa6412af67c14e9d0e9e85d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a880afbc6c4f16881d1e58a5f5a6140ee"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a880afbc6c4f16881d1e58a5f5a6140ee">bitrate</a></td></tr>
<tr class="memdesc:a880afbc6c4f16881d1e58a5f5a6140ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bitrate of the link the NIC is attached to.  <a href="#a880afbc6c4f16881d1e58a5f5a6140ee">More...</a><br/></td></tr>
<tr class="separator:a880afbc6c4f16881d1e58a5f5a6140ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9cfa8c89b470743e2cc2db8c44e8159"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_nic_queue.html#ad9cfa8c89b470743e2cc2db8c44e8159">bufsize</a></td></tr>
<tr class="memdesc:ad9cfa8c89b470743e2cc2db8c44e8159"><td class="mdescLeft">&#160;</td><td class="mdescRight">The buffer size of the queue.  <a href="#ad9cfa8c89b470743e2cc2db8c44e8159">More...</a><br/></td></tr>
<tr class="separator:ad9cfa8c89b470743e2cc2db8c44e8159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adae132e1e2ff72c977aff070bd35582d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_nic_queue.html#adae132e1e2ff72c977aff070bd35582d">latency</a></td></tr>
<tr class="memdesc:adae132e1e2ff72c977aff070bd35582d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The latency of the NIC.  <a href="#adae132e1e2ff72c977aff070bd35582d">More...</a><br/></td></tr>
<tr class="separator:adae132e1e2ff72c977aff070bd35582d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf4d23386324d40d238ed8dfe9f36ef9"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_nic_queue.html#abf4d23386324d40d238ed8dfe9f36ef9">jitter_range</a></td></tr>
<tr class="memdesc:abf4d23386324d40d238ed8dfe9f36ef9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The jitter range of this NIC.  <a href="#abf4d23386324d40d238ed8dfe9f36ef9">More...</a><br/></td></tr>
<tr class="separator:abf4d23386324d40d238ed8dfe9f36ef9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a64583986e94e6a22b3c432770bbbc527"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a64583986e94e6a22b3c432770bbbc527">weight</a></td></tr>
<tr class="memdesc:a64583986e94e6a22b3c432770bbbc527"><td class="mdescLeft">&#160;</td><td class="mdescRight">Weight used by the AQM policy to calculate average queue length ON EACH PACKET ARRIVAL.  <a href="#a64583986e94e6a22b3c432770bbbc527">More...</a><br/></td></tr>
<tr class="separator:a64583986e94e6a22b3c432770bbbc527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50df85ae18003eb0bec15be861689f24"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">qmin</a></td></tr>
<tr class="memdesc:a50df85ae18003eb0bec15be861689f24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parameter to calculate packet drop probability.  <a href="#a50df85ae18003eb0bec15be861689f24">More...</a><br/></td></tr>
<tr class="separator:a50df85ae18003eb0bec15be861689f24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53683dfc66eeec7aa680cfd50fa001df"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a></td></tr>
<tr class="memdesc:a53683dfc66eeec7aa680cfd50fa001df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parameter to calculate packet drop probability.  <a href="#a53683dfc66eeec7aa680cfd50fa001df">More...</a><br/></td></tr>
<tr class="separator:a53683dfc66eeec7aa680cfd50fa001df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af056fbe254bc33ea99a1f8a0907d7ee0"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">qcap</a></td></tr>
<tr class="memdesc:af056fbe254bc33ea99a1f8a0907d7ee0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parameter to calculate packet drop probability.  <a href="#af056fbe254bc33ea99a1f8a0907d7ee0">More...</a><br/></td></tr>
<tr class="separator:af056fbe254bc33ea99a1f8a0907d7ee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21076da8d773b07bc9eee7ba038ed557"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a21076da8d773b07bc9eee7ba038ed557">pmax</a></td></tr>
<tr class="memdesc:a21076da8d773b07bc9eee7ba038ed557"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parameter to calculate packet drop probability.  <a href="#a21076da8d773b07bc9eee7ba038ed557">More...</a><br/></td></tr>
<tr class="separator:a21076da8d773b07bc9eee7ba038ed557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2308129abbcc722cbaa55f1679b701aa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a2308129abbcc722cbaa55f1679b701aa">wait_opt</a></td></tr>
<tr class="memdesc:a2308129abbcc722cbaa55f1679b701aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">This RED option is used to avoid marking/dropping two packets in a row.  <a href="#a2308129abbcc722cbaa55f1679b701aa">More...</a><br/></td></tr>
<tr class="separator:a2308129abbcc722cbaa55f1679b701aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9de6d87c433a163df1b6fe545e4097e3"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a9de6d87c433a163df1b6fe545e4097e3">mean_pktsiz</a></td></tr>
<tr class="memdesc:a9de6d87c433a163df1b6fe545e4097e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mean packet size in bits.  <a href="#a9de6d87c433a163df1b6fe545e4097e3">More...</a><br/></td></tr>
<tr class="separator:a9de6d87c433a163df1b6fe545e4097e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e99e67bae3f391377b80f162f6f2a5b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a8e99e67bae3f391377b80f162f6f2a5b">queue</a></td></tr>
<tr class="memdesc:a8e99e67bae3f391377b80f162f6f2a5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The instantaneous queue size.  <a href="#a8e99e67bae3f391377b80f162f6f2a5b">More...</a><br/></td></tr>
<tr class="separator:a8e99e67bae3f391377b80f162f6f2a5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59f4d32fad3c274199718d8d1fc06e6d"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a59f4d32fad3c274199718d8d1fc06e6d">avgque</a></td></tr>
<tr class="memdesc:a59f4d32fad3c274199718d8d1fc06e6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The average queue size.  <a href="#a59f4d32fad3c274199718d8d1fc06e6d">More...</a><br/></td></tr>
<tr class="separator:a59f4d32fad3c274199718d8d1fc06e6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba701088de9d3767548b019eca622255"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a></td></tr>
<tr class="memdesc:aba701088de9d3767548b019eca622255"><td class="mdescLeft">&#160;</td><td class="mdescRight">The loss probability calcuated from avg queue length.  <a href="#aba701088de9d3767548b019eca622255">More...</a><br/></td></tr>
<tr class="separator:aba701088de9d3767548b019eca622255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9101bed64e78bb08bcd89a4e6da525c1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a9101bed64e78bb08bcd89a4e6da525c1">crossing</a></td></tr>
<tr class="memdesc:a9101bed64e78bb08bcd89a4e6da525c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">False if the average queue length is crossing the min threshold for the first time.  <a href="#a9101bed64e78bb08bcd89a4e6da525c1">More...</a><br/></td></tr>
<tr class="separator:a9101bed64e78bb08bcd89a4e6da525c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d733f70c3136cb2864226a772c3b4e3"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a2d733f70c3136cb2864226a772c3b4e3">interdrop</a></td></tr>
<tr class="memdesc:a2d733f70c3136cb2864226a772c3b4e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of bits arrived between two consecutive packet drops (when the qmin threshold is crossed).  <a href="#a2d733f70c3136cb2864226a772c3b4e3">More...</a><br/></td></tr>
<tr class="separator:a2d733f70c3136cb2864226a772c3b4e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a260fbaf84380bdfa7621f8fe77d3bb67"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#a260fbaf84380bdfa7621f8fe77d3bb67">last_update_time</a></td></tr>
<tr class="memdesc:a260fbaf84380bdfa7621f8fe77d3bb67"><td class="mdescLeft">&#160;</td><td class="mdescRight">The time of the last queue update.  <a href="#a260fbaf84380bdfa7621f8fe77d3bb67">More...</a><br/></td></tr>
<tr class="separator:a260fbaf84380bdfa7621f8fe77d3bb67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2dc6c1e630f6f6feed5d1bcb09dc18a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html#ae2dc6c1e630f6f6feed5d1bcb09dc18a">vacate_time</a></td></tr>
<tr class="memdesc:ae2dc6c1e630f6f6feed5d1bcb09dc18a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The time when the queue will be emptied.  <a href="#ae2dc6c1e630f6f6feed5d1bcb09dc18a">More...</a><br/></td></tr>
<tr class="separator:ae2dc6c1e630f6f6feed5d1bcb09dc18a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A simple RED queue used inside a network interface. </p>
<p>The RED queue maintains a buffer that holds up to a fixed number of bits. Bits go out one by one at the NIC's bit-rate. If attempting to enqueue a message whose size is larger than the currently available free buffer space, the packet is dropped. If there's available buffer space, RED policy is enforced in terms of treating newly arrived packets. A packet could be dropped according to a probability calculated from the following function:</p>
<ul>
<li>P(x)=0, if 0 &lt;= x &lt; qmin;</li>
<li>P(x)=(x-qmin)/(qmax_qmin)*pmax, if qmin &lt;= x &lt; qmax;</li>
<li>P(x)=(x-qmax)/(qcap-qmax)*(1-pmax)+pmax, if qmax &lt;= x &lt; qcap,</li>
<li>P(x)=1, otherwise where x is the average queue length. The average queue length is calculated at each packet arrival using an exponentially weighed moving average (EWMA) method. That is, avgque = (1-w)*avgque+w*queue, where w is a configurable parameter. </li>
</ul>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00038">38</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aab6b782e293cce77676537197a845905"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">s3f::s3fnet::RedQueue::RedQueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_lowest_protocol_session.html">LowestProtocolSession</a> *&#160;</td>
          <td class="paramname"><em>lowsess</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The constructor. </p>
<p>The lowest protocol session in the interface that contains the queue is passed as an argument. </p>

<p>Definition at line <a class="el" href="red__queue_8cc_source.html#l00029">29</a> of file <a class="el" href="red__queue_8cc_source.html">red_queue.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                                                 :</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#ac68c2ad7a6a5555f936210370e641867">NicQueue</a>(lowsess),</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a64583986e94e6a22b3c432770bbbc527">weight</a>(<a class="code" href="red__queue_8cc.html#a341778db7c37c3559aecf9dde77ba969">RED_QUEUE_DEFAULT_WEIGHT</a>),</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">qmin</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">qcap</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a21076da8d773b07bc9eee7ba038ed557">pmax</a>(<a class="code" href="red__queue_8cc.html#a0588335ee3157a7bee0976cd40f6bcc0">RED_QUEUE_DEFAULT_PMAX</a>), </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a2308129abbcc722cbaa55f1679b701aa">wait_opt</a>(<span class="keyword">true</span>), <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a9de6d87c433a163df1b6fe545e4097e3">mean_pktsiz</a>(<a class="code" href="red__queue_8cc.html#a815ba6da4f6a0944bfeae86530c32f4e">RED_QUEUE_DEFAULT_MEAN_PKTSIZ</a>),</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a8e99e67bae3f391377b80f162f6f2a5b">queue</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a59f4d32fad3c274199718d8d1fc06e6d">avgque</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a9101bed64e78bb08bcd89a4e6da525c1">crossing</a>(<span class="keyword">false</span>), <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a2d733f70c3136cb2864226a772c3b4e3">interdrop</a>(0),</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a260fbaf84380bdfa7621f8fe77d3bb67">last_update_time</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#ae2dc6c1e630f6f6feed5d1bcb09dc18a">vacate_time</a>(0) {}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a53683dfc66eeec7aa680cfd50fa001df"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">s3f::s3fnet::RedQueue::qmax</a></div><div class="ttdeci">float qmax</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00078">red_queue.h:78</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a260fbaf84380bdfa7621f8fe77d3bb67"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a260fbaf84380bdfa7621f8fe77d3bb67">s3f::s3fnet::RedQueue::last_update_time</a></div><div class="ttdeci">ltime_t last_update_time</div><div class="ttdoc">The time of the last queue update. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00107">red_queue.h:107</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_ae2dc6c1e630f6f6feed5d1bcb09dc18a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#ae2dc6c1e630f6f6feed5d1bcb09dc18a">s3f::s3fnet::RedQueue::vacate_time</a></div><div class="ttdeci">ltime_t vacate_time</div><div class="ttdoc">The time when the queue will be emptied. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00110">red_queue.h:110</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a2308129abbcc722cbaa55f1679b701aa"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a2308129abbcc722cbaa55f1679b701aa">s3f::s3fnet::RedQueue::wait_opt</a></div><div class="ttdeci">bool wait_opt</div><div class="ttdoc">This RED option is used to avoid marking/dropping two packets in a row. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00084">red_queue.h:84</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a2d733f70c3136cb2864226a772c3b4e3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a2d733f70c3136cb2864226a772c3b4e3">s3f::s3fnet::RedQueue::interdrop</a></div><div class="ttdeci">float interdrop</div><div class="ttdoc">The number of bits arrived between two consecutive packet drops (when the qmin threshold is crossed)...</div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00104">red_queue.h:104</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a9101bed64e78bb08bcd89a4e6da525c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a9101bed64e78bb08bcd89a4e6da525c1">s3f::s3fnet::RedQueue::crossing</a></div><div class="ttdeci">bool crossing</div><div class="ttdoc">False if the average queue length is crossing the min threshold for the first time. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00100">red_queue.h:100</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a50df85ae18003eb0bec15be861689f24"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">s3f::s3fnet::RedQueue::qmin</a></div><div class="ttdeci">float qmin</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00077">red_queue.h:77</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_ac68c2ad7a6a5555f936210370e641867"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#ac68c2ad7a6a5555f936210370e641867">s3f::s3fnet::NicQueue::NicQueue</a></div><div class="ttdeci">NicQueue(LowestProtocolSession *_nic)</div><div class="ttdoc">The constructor. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8cc_source.html#l00017">nic_queue.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_aba701088de9d3767548b019eca622255"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">s3f::s3fnet::RedQueue::loss</a></div><div class="ttdeci">float loss</div><div class="ttdoc">The loss probability calcuated from avg queue length. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00096">red_queue.h:96</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_af056fbe254bc33ea99a1f8a0907d7ee0"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">s3f::s3fnet::RedQueue::qcap</a></div><div class="ttdeci">float qcap</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00079">red_queue.h:79</a></div></div>
<div class="ttc" id="red__queue_8cc_html_a0588335ee3157a7bee0976cd40f6bcc0"><div class="ttname"><a href="red__queue_8cc.html#a0588335ee3157a7bee0976cd40f6bcc0">RED_QUEUE_DEFAULT_PMAX</a></div><div class="ttdeci">#define RED_QUEUE_DEFAULT_PMAX</div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8cc_source.html#l00021">red_queue.cc:21</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a9de6d87c433a163df1b6fe545e4097e3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a9de6d87c433a163df1b6fe545e4097e3">s3f::s3fnet::RedQueue::mean_pktsiz</a></div><div class="ttdeci">float mean_pktsiz</div><div class="ttdoc">Mean packet size in bits. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00087">red_queue.h:87</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a8e99e67bae3f391377b80f162f6f2a5b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a8e99e67bae3f391377b80f162f6f2a5b">s3f::s3fnet::RedQueue::queue</a></div><div class="ttdeci">float queue</div><div class="ttdoc">The instantaneous queue size. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00090">red_queue.h:90</a></div></div>
<div class="ttc" id="red__queue_8cc_html_a815ba6da4f6a0944bfeae86530c32f4e"><div class="ttname"><a href="red__queue_8cc.html#a815ba6da4f6a0944bfeae86530c32f4e">RED_QUEUE_DEFAULT_MEAN_PKTSIZ</a></div><div class="ttdeci">#define RED_QUEUE_DEFAULT_MEAN_PKTSIZ</div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8cc_source.html#l00022">red_queue.cc:22</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a64583986e94e6a22b3c432770bbbc527"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a64583986e94e6a22b3c432770bbbc527">s3f::s3fnet::RedQueue::weight</a></div><div class="ttdeci">float weight</div><div class="ttdoc">Weight used by the AQM policy to calculate average queue length ON EACH PACKET ARRIVAL. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00068">red_queue.h:68</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a59f4d32fad3c274199718d8d1fc06e6d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a59f4d32fad3c274199718d8d1fc06e6d">s3f::s3fnet::RedQueue::avgque</a></div><div class="ttdeci">float avgque</div><div class="ttdoc">The average queue size. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00093">red_queue.h:93</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a21076da8d773b07bc9eee7ba038ed557"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a21076da8d773b07bc9eee7ba038ed557">s3f::s3fnet::RedQueue::pmax</a></div><div class="ttdeci">float pmax</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00080">red_queue.h:80</a></div></div>
<div class="ttc" id="red__queue_8cc_html_a341778db7c37c3559aecf9dde77ba969"><div class="ttname"><a href="red__queue_8cc.html#a341778db7c37c3559aecf9dde77ba969">RED_QUEUE_DEFAULT_WEIGHT</a></div><div class="ttdeci">#define RED_QUEUE_DEFAULT_WEIGHT</div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8cc_source.html#l00020">red_queue.cc:20</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad2f539c5fa2e8e08b161c0fd5a512d25"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">s3f::s3fnet::RedQueue::~RedQueue </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The destructor. </p>

<p>Definition at line <a class="el" href="red__queue_8cc_source.html#l00037">37</a> of file <a class="el" href="red__queue_8cc_source.html">red_queue.cc</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="adf13c52a3174b98bd2598fb7e820e13d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::RedQueue::config </td>
          <td>(</td>
          <td class="paramtype">s3f::dml::Configuration *&#160;</td>
          <td class="paramname"><em>cfg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Configure the nic queue. </p>

<p>Reimplemented from <a class="el" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a748cbd701d63ed4b2e1721c27447fc07">s3f::s3fnet::NicQueue</a>.</p>

<p>Definition at line <a class="el" href="red__queue_8cc_source.html#l00039">39</a> of file <a class="el" href="red__queue_8cc_source.html">red_queue.cc</a>.</p>

<p>References <a class="el" href="nic__queue_8cc_source.html#l00024">s3f::s3fnet::NicQueue::config()</a>, <a class="el" href="errhandle_8cc_source.html#l00128">s3f::s3fnet::error_quit()</a>, <a class="el" href="red__queue_8h_source.html#l00087">mean_pktsiz</a>, <a class="el" href="red__queue_8h_source.html#l00080">pmax</a>, <a class="el" href="red__queue_8h_source.html#l00079">qcap</a>, <a class="el" href="red__queue_8h_source.html#l00078">qmax</a>, <a class="el" href="red__queue_8h_source.html#l00077">qmin</a>, <a class="el" href="red__queue_8h_source.html#l00084">wait_opt</a>, and <a class="el" href="red__queue_8h_source.html#l00068">weight</a>.</p>
<div class="fragment"><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;{</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a748cbd701d63ed4b2e1721c27447fc07">NicQueue::config</a>(cfg);</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordtype">char</span>* str = (<span class="keywordtype">char</span>*)cfg-&gt;findSingle(<span class="stringliteral">&quot;weight&quot;</span>);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <span class="keywordflow">if</span>(str) {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="keywordflow">if</span>(s3f::dml::dmlConfig::isConf(str))</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::config(), &quot;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                 <span class="stringliteral">&quot;invalid INTERFACE.WEIGHT attribute!\n&quot;</span>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a64583986e94e6a22b3c432770bbbc527">weight</a> = atof(str);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordflow">if</span>(weight &lt; 0 || weight &gt;= 1)</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::config(), &quot;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                 <span class="stringliteral">&quot;INTERFACE.WEIGHT (%s) must be between 0 and 1.\n&quot;</span>, str);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  str = (<span class="keywordtype">char</span>*)cfg-&gt;findSingle(<span class="stringliteral">&quot;qmin&quot;</span>);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <span class="keywordflow">if</span>(str) {</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span>(s3f::dml::dmlConfig::isConf(str))</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::config(), &quot;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;                 <span class="stringliteral">&quot;invalid INTERFACE.QMIN attribute!\n&quot;</span>);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">qmin</a> = 8*atol(str); <span class="comment">// bits rather than bytes</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">qmin</a> &lt;= 0)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::config(), &quot;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                 <span class="stringliteral">&quot;INTERFACE.QMIN (%s) is non-positive.\n&quot;</span>, str);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  str = (<span class="keywordtype">char</span>*)cfg-&gt;findSingle(<span class="stringliteral">&quot;qmax&quot;</span>);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keywordflow">if</span>(str) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span>(s3f::dml::dmlConfig::isConf(str))</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::config(), &quot;</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                 <span class="stringliteral">&quot;invalid INTERFACE.QMAX attribute!\n&quot;</span>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a> = 8*atol(str); <span class="comment">// bits rather than bytes</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a> &lt;= 0)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::config(), &quot;</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                 <span class="stringliteral">&quot;INTERFACE.QMAX (%s) is non-positive.\n&quot;</span>, str);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  str = (<span class="keywordtype">char</span>*)cfg-&gt;findSingle(<span class="stringliteral">&quot;qcap&quot;</span>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">if</span>(str) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordflow">if</span>(s3f::dml::dmlConfig::isConf(str))</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::config(), &quot;</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                 <span class="stringliteral">&quot;invalid INTERFACE.QCAP attribute!\n&quot;</span>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">qcap</a> = 8.0*atof(str); <span class="comment">// bits rather than bytes</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">qcap</a> &lt;= 0)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::config(), &quot;</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                 <span class="stringliteral">&quot;INTERFACE.QCAP (%s) is non-positive.\n&quot;</span>, str);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  str = (<span class="keywordtype">char</span>*)cfg-&gt;findSingle(<span class="stringliteral">&quot;pmax&quot;</span>);</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <span class="keywordflow">if</span>(str) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">if</span>(s3f::dml::dmlConfig::isConf(str))</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::config(), &quot;</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                 <span class="stringliteral">&quot;invalid INTERFACE.PMAX attribute!\n&quot;</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a21076da8d773b07bc9eee7ba038ed557">pmax</a> = atof(str);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">if</span>(pmax &lt;= 0 || pmax &gt; 1)</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::config(), &quot;</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                 <span class="stringliteral">&quot;INTERFACE.PMAX (%s) must be in the range (0, 1].\n&quot;</span>, str);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  str = (<span class="keywordtype">char</span>*)cfg-&gt;findSingle(<span class="stringliteral">&quot;wait&quot;</span>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">if</span>(str) {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">if</span>(s3f::dml::dmlConfig::isConf(str))</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::config(), &quot;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                 <span class="stringliteral">&quot;invalid INTERFACE.WAIT attribute!\n&quot;</span>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">if</span>(!strcasecmp(str, <span class="stringliteral">&quot;true&quot;</span>)) <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a2308129abbcc722cbaa55f1679b701aa">wait_opt</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!strcasecmp(str, <span class="stringliteral">&quot;false&quot;</span>)) <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a2308129abbcc722cbaa55f1679b701aa">wait_opt</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">else</span> <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::config(), &quot;</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    <span class="stringliteral">&quot;INTERFACE.WAIT (%s) must either be true or false.\n&quot;</span>, str);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  str = (<span class="keywordtype">char</span>*)cfg-&gt;findSingle(<span class="stringliteral">&quot;mean_pktsiz&quot;</span>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">if</span>(str) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordflow">if</span>(s3f::dml::dmlConfig::isConf(str))</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::config(), &quot;</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                 <span class="stringliteral">&quot;invalid INTERFACE.MEAN_PKTSIZ attribute!\n&quot;</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a9de6d87c433a163df1b6fe545e4097e3">mean_pktsiz</a> = 8.0*atof(str); <span class="comment">// bits rather than bytes</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a9de6d87c433a163df1b6fe545e4097e3">mean_pktsiz</a> &lt;= 0)</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::config(), &quot;</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                 <span class="stringliteral">&quot;INTERFACE.MEAN_PKTSIZ (%s) must be positive.\n&quot;</span>, str);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a53683dfc66eeec7aa680cfd50fa001df"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">s3f::s3fnet::RedQueue::qmax</a></div><div class="ttdeci">float qmax</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00078">red_queue.h:78</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a2308129abbcc722cbaa55f1679b701aa"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a2308129abbcc722cbaa55f1679b701aa">s3f::s3fnet::RedQueue::wait_opt</a></div><div class="ttdeci">bool wait_opt</div><div class="ttdoc">This RED option is used to avoid marking/dropping two packets in a row. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00084">red_queue.h:84</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a50df85ae18003eb0bec15be861689f24"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">s3f::s3fnet::RedQueue::qmin</a></div><div class="ttdeci">float qmin</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00077">red_queue.h:77</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_a748cbd701d63ed4b2e1721c27447fc07"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#a748cbd701d63ed4b2e1721c27447fc07">s3f::s3fnet::NicQueue::config</a></div><div class="ttdeci">virtual void config(s3f::dml::Configuration *cfg)</div><div class="ttdoc">Configure the nic queue. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8cc_source.html#l00024">nic_queue.cc:24</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_af056fbe254bc33ea99a1f8a0907d7ee0"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">s3f::s3fnet::RedQueue::qcap</a></div><div class="ttdeci">float qcap</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00079">red_queue.h:79</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a9de6d87c433a163df1b6fe545e4097e3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a9de6d87c433a163df1b6fe545e4097e3">s3f::s3fnet::RedQueue::mean_pktsiz</a></div><div class="ttdeci">float mean_pktsiz</div><div class="ttdoc">Mean packet size in bits. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00087">red_queue.h:87</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_aee6e3282670be024dcee8ac3cef67e85"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">s3f::s3fnet::error_quit</a></div><div class="ttdeci">void error_quit(const char *fmt,...)</div><div class="ttdoc">This function is called when there&#39;s a fatal error unrelated to a system call. </div><div class="ttdef"><b>Definition:</b> <a href="errhandle_8cc_source.html#l00128">errhandle.cc:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a64583986e94e6a22b3c432770bbbc527"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a64583986e94e6a22b3c432770bbbc527">s3f::s3fnet::RedQueue::weight</a></div><div class="ttdeci">float weight</div><div class="ttdoc">Weight used by the AQM policy to calculate average queue length ON EACH PACKET ARRIVAL. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00068">red_queue.h:68</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a21076da8d773b07bc9eee7ba038ed557"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a21076da8d773b07bc9eee7ba038ed557">s3f::s3fnet::RedQueue::pmax</a></div><div class="ttdeci">float pmax</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00080">red_queue.h:80</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6a732078be2541008b2343bedd322541"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::RedQueue::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the queue. </p>

<p>Reimplemented from <a class="el" href="classs3f_1_1s3fnet_1_1_nic_queue.html#ad635441e60780542bcee0226a61abfe8">s3f::s3fnet::NicQueue</a>.</p>

<p>Definition at line <a class="el" href="red__queue_8cc_source.html#l00121">121</a> of file <a class="el" href="red__queue_8cc_source.html">red_queue.cc</a>.</p>

<p>References <a class="el" href="nic__queue_8h_source.html#l00070">s3f::s3fnet::NicQueue::bitrate</a>, <a class="el" href="nic__queue_8h_source.html#l00073">s3f::s3fnet::NicQueue::bufsize</a>, <a class="el" href="errhandle_8cc_source.html#l00128">s3f::s3fnet::error_quit()</a>, <a class="el" href="protocol__session_8h_source.html#l00178">s3f::s3fnet::ProtocolSession::inGraph()</a>, <a class="el" href="nic__queue_8cc_source.html#l00026">s3f::s3fnet::NicQueue::init()</a>, <a class="el" href="ip__prefix_8cc_source.html#l00041">s3f::s3fnet::IPPrefix::ip2txt()</a>, <a class="el" href="nic__queue_8h_source.html#l00079">s3f::s3fnet::NicQueue::jitter_range</a>, <a class="el" href="nic__queue_8h_source.html#l00076">s3f::s3fnet::NicQueue::latency</a>, <a class="el" href="red__queue_8h_source.html#l00087">mean_pktsiz</a>, <a class="el" href="nic__queue_8h_source.html#l00067">s3f::s3fnet::NicQueue::phy_sess</a>, <a class="el" href="red__queue_8h_source.html#l00080">pmax</a>, <a class="el" href="red__queue_8h_source.html#l00079">qcap</a>, <a class="el" href="red__queue_8h_source.html#l00078">qmax</a>, <a class="el" href="red__queue_8h_source.html#l00077">qmin</a>, <a class="el" href="red__queue_8h_source.html#l00084">wait_opt</a>, and <a class="el" href="red__queue_8h_source.html#l00068">weight</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#ad635441e60780542bcee0226a61abfe8">NicQueue::init</a>();</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a64583986e94e6a22b3c432770bbbc527">weight</a> == 0) {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">// FROM ns-2: if weight=0, set it to a reasonable value of</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="comment">// 1-exp(-1/C), where C is the link bandwidth in mean packets</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a64583986e94e6a22b3c432770bbbc527">weight</a> = 1.0 - exp(-1.0/(<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a880afbc6c4f16881d1e58a5f5a6140ee">bitrate</a>/8.0/500)); <span class="comment">// assuming avg pktsiz=500</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  }</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">qmin</a> == 0) <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">qmin</a> = 0.05*8.0*<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#ad9cfa8c89b470743e2cc2db8c44e8159">bufsize</a>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a> == 0) <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a> = 0.5*8.0*<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#ad9cfa8c89b470743e2cc2db8c44e8159">bufsize</a>;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">qmin</a> &gt; <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a>) {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::init(), &quot;</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;               <span class="stringliteral">&quot;qmin %g (b) must be no larger than qmax %g (b).\n&quot;</span>, <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">qmin</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a>);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">qcap</a> == 0) {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">qcap</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#ad9cfa8c89b470743e2cc2db8c44e8159">bufsize</a>*8.0;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">qcap</a> &gt; <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a>*2.0) <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">qcap</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a>*2.0;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a> &gt; <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">qcap</a>) {</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: RedQueue::init(), &quot;</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;               <span class="stringliteral">&quot;qmax %g (b) must be no larger than qcap %g (b).\n&quot;</span>, <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">qcap</a>);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  printf(<span class="stringliteral">&quot;[nic=\&quot;%s\&quot;, ip=\&quot;%s\&quot;] RedQueue::init(),\n&quot;</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;         <span class="stringliteral">&quot;  bitrate=%g (bps), latency=%ld (sec), jitter_range=%g,\n&quot;</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;         <span class="stringliteral">&quot;  bufsize=%ld (B),  weight=%g, qmin=%g (b), qmax=%g (b),\n&quot;</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;         <span class="stringliteral">&quot;  qcap=%g (b), pmax=%g, wait=%d, mean_pktsiz=%g (b).\n&quot;</span>,</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;         ((NetworkInterface*)<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a383bfb5d8385ab3ddbabaeba2e4a38aa">inGraph</a>())-&gt;nhi.toString(),</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;         <a class="code" href="classs3f_1_1s3fnet_1_1_i_p_prefix.html#a4649010db0c18ea0c15e1d42e96467e8">IPPrefix::ip2txt</a>(((NetworkInterface*)<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a383bfb5d8385ab3ddbabaeba2e4a38aa">inGraph</a>())-&gt;getIP()),</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;         <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a880afbc6c4f16881d1e58a5f5a6140ee">bitrate</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#adae132e1e2ff72c977aff070bd35582d">latency</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#abf4d23386324d40d238ed8dfe9f36ef9">jitter_range</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#ad9cfa8c89b470743e2cc2db8c44e8159">bufsize</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a64583986e94e6a22b3c432770bbbc527">weight</a>, </div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;         <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">qmin</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">qcap</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a21076da8d773b07bc9eee7ba038ed557">pmax</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a2308129abbcc722cbaa55f1679b701aa">wait_opt</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a9de6d87c433a163df1b6fe545e4097e3">mean_pktsiz</a>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a53683dfc66eeec7aa680cfd50fa001df"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">s3f::s3fnet::RedQueue::qmax</a></div><div class="ttdeci">float qmax</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00078">red_queue.h:78</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_abf4d23386324d40d238ed8dfe9f36ef9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#abf4d23386324d40d238ed8dfe9f36ef9">s3f::s3fnet::NicQueue::jitter_range</a></div><div class="ttdeci">float jitter_range</div><div class="ttdoc">The jitter range of this NIC. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8h_source.html#l00079">nic_queue.h:79</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_a1e93ebdcaa6412af67c14e9d0e9e85d5"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">s3f::s3fnet::NicQueue::phy_sess</a></div><div class="ttdeci">LowestProtocolSession * phy_sess</div><div class="ttdoc">The lowest protocol session that this queue is associated with. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8h_source.html#l00067">nic_queue.h:67</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_ad635441e60780542bcee0226a61abfe8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#ad635441e60780542bcee0226a61abfe8">s3f::s3fnet::NicQueue::init</a></div><div class="ttdeci">virtual void init()</div><div class="ttdoc">Initialize the queue. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8cc_source.html#l00026">nic_queue.cc:26</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_adae132e1e2ff72c977aff070bd35582d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#adae132e1e2ff72c977aff070bd35582d">s3f::s3fnet::NicQueue::latency</a></div><div class="ttdeci">ltime_t latency</div><div class="ttdoc">The latency of the NIC. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8h_source.html#l00076">nic_queue.h:76</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_ad9cfa8c89b470743e2cc2db8c44e8159"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#ad9cfa8c89b470743e2cc2db8c44e8159">s3f::s3fnet::NicQueue::bufsize</a></div><div class="ttdeci">long bufsize</div><div class="ttdoc">The buffer size of the queue. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8h_source.html#l00073">nic_queue.h:73</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a2308129abbcc722cbaa55f1679b701aa"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a2308129abbcc722cbaa55f1679b701aa">s3f::s3fnet::RedQueue::wait_opt</a></div><div class="ttdeci">bool wait_opt</div><div class="ttdoc">This RED option is used to avoid marking/dropping two packets in a row. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00084">red_queue.h:84</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a50df85ae18003eb0bec15be861689f24"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">s3f::s3fnet::RedQueue::qmin</a></div><div class="ttdeci">float qmin</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00077">red_queue.h:77</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_a880afbc6c4f16881d1e58a5f5a6140ee"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#a880afbc6c4f16881d1e58a5f5a6140ee">s3f::s3fnet::NicQueue::bitrate</a></div><div class="ttdeci">double bitrate</div><div class="ttdoc">Bitrate of the link the NIC is attached to. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8h_source.html#l00070">nic_queue.h:70</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_af056fbe254bc33ea99a1f8a0907d7ee0"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">s3f::s3fnet::RedQueue::qcap</a></div><div class="ttdeci">float qcap</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00079">red_queue.h:79</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_i_p_prefix_html_a4649010db0c18ea0c15e1d42e96467e8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_i_p_prefix.html#a4649010db0c18ea0c15e1d42e96467e8">s3f::s3fnet::IPPrefix::ip2txt</a></div><div class="ttdeci">static char * ip2txt(IPADDR ip, char *str)</div><div class="ttdoc">Convert an IP prefix to a string. </div><div class="ttdef"><b>Definition:</b> <a href="ip__prefix_8cc_source.html#l00041">ip_prefix.cc:41</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a9de6d87c433a163df1b6fe545e4097e3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a9de6d87c433a163df1b6fe545e4097e3">s3f::s3fnet::RedQueue::mean_pktsiz</a></div><div class="ttdeci">float mean_pktsiz</div><div class="ttdoc">Mean packet size in bits. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00087">red_queue.h:87</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_aee6e3282670be024dcee8ac3cef67e85"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">s3f::s3fnet::error_quit</a></div><div class="ttdeci">void error_quit(const char *fmt,...)</div><div class="ttdoc">This function is called when there&#39;s a fatal error unrelated to a system call. </div><div class="ttdef"><b>Definition:</b> <a href="errhandle_8cc_source.html#l00128">errhandle.cc:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a64583986e94e6a22b3c432770bbbc527"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a64583986e94e6a22b3c432770bbbc527">s3f::s3fnet::RedQueue::weight</a></div><div class="ttdeci">float weight</div><div class="ttdoc">Weight used by the AQM policy to calculate average queue length ON EACH PACKET ARRIVAL. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00068">red_queue.h:68</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a21076da8d773b07bc9eee7ba038ed557"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a21076da8d773b07bc9eee7ba038ed557">s3f::s3fnet::RedQueue::pmax</a></div><div class="ttdeci">float pmax</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00080">red_queue.h:80</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a383bfb5d8385ab3ddbabaeba2e4a38aa"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a383bfb5d8385ab3ddbabaeba2e4a38aa">s3f::s3fnet::ProtocolSession::inGraph</a></div><div class="ttdeci">ProtocolGraph * inGraph()</div><div class="ttdoc">The method returns the protocol graph in which this protocol session resides. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00178">protocol_session.h:178</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a20f4b8a264fbcb3b32ee83ddd6e2aff8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int s3f::s3fnet::RedQueue::type </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the type of this queue. </p>

<p>Implements <a class="el" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a9deb8103ef8f7e7c724e616a0e39bcb6">s3f::s3fnet::NicQueue</a>.</p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00054">54</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>References <a class="el" href="red__queue_8h_source.html#l00016">RED_QUEUE_TYPE</a>.</p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="red__queue_8h.html#a97434e4e84385d69cb2cef82932afb96">RED_QUEUE_TYPE</a>; }</div>
<div class="ttc" id="red__queue_8h_html_a97434e4e84385d69cb2cef82932afb96"><div class="ttname"><a href="red__queue_8h.html#a97434e4e84385d69cb2cef82932afb96">RED_QUEUE_TYPE</a></div><div class="ttdeci">#define RED_QUEUE_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00016">red_queue.h:16</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1de4c2f7a30e49a0eb53c256e974028f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::RedQueue::enqueue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="message_8h.html#a093346897a71a253ceb5aaa3785721a0">Activation</a>&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enqueue the message at the tail of the buffer. </p>
<p>If the NIC hasn't yet used up all of its bandwidth, the msg is sent after the appropriate buffer delay. If the queue is full or the message is marked to be dropped according to RED policy, the message will be dropped. </p>

<p>Implements <a class="el" href="classs3f_1_1s3fnet_1_1_nic_queue.html#ac04a3f16710dc4a1c49cf349637577cb">s3f::s3fnet::NicQueue</a>.</p>

<p>Definition at line <a class="el" href="red__queue_8cc_source.html#l00156">156</a> of file <a class="el" href="red__queue_8cc_source.html">red_queue.cc</a>.</p>

<p>References <a class="el" href="nic__queue_8h_source.html#l00070">s3f::s3fnet::NicQueue::bitrate</a>, <a class="el" href="nic__queue_8h_source.html#l00073">s3f::s3fnet::NicQueue::bufsize</a>, <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, <a class="el" href="entity_8cc_source.html#l00269">Entity::d2t()</a>, <a class="el" href="errhandle_8cc_source.html#l00128">s3f::s3fnet::error_quit()</a>, <a class="el" href="protocol__session_8cc_source.html#l00123">s3f::s3fnet::ProtocolSession::getNow()</a>, <a class="el" href="protocol__session_8cc_source.html#l00128">s3f::s3fnet::ProtocolSession::getNowWithThousandSeparator()</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html#ad429740335f45371f2bce23c753dfa6f">s3f::s3fnet::ProtocolSession::getProtocolNumber()</a>, <a class="el" href="protocol__session_8h_source.html#l00200">s3f::s3fnet::ProtocolSession::getRandom()</a>, <a class="el" href="red__queue_8cc_source.html#l00017">IFACE_DUMP</a>, <a class="el" href="protocol__session_8h_source.html#l00178">s3f::s3fnet::ProtocolSession::inGraph()</a>, <a class="el" href="nic__protocol__session_8cc_source.html#l00042">s3f::s3fnet::NicProtocolSession::inHost()</a>, <a class="el" href="red__queue_8h_source.html#l00104">interdrop</a>, <a class="el" href="ip__prefix_8cc_source.html#l00041">s3f::s3fnet::IPPrefix::ip2txt()</a>, <a class="el" href="nic__queue_8h_source.html#l00076">s3f::s3fnet::NicQueue::latency</a>, <a class="el" href="red__queue_8h_source.html#l00096">loss</a>, <a class="el" href="nic__queue_8h_source.html#l00067">s3f::s3fnet::NicQueue::phy_sess</a>, <a class="el" href="red__queue_8h_source.html#l00090">queue</a>, <a class="el" href="s3fnet_8h_source.html#l00135">s3f::s3fnet::S3FNET_PROTOCOL_TYPE_SIMPLE_PHY</a>, <a class="el" href="classs3f_1_1s3fnet_1_1_lowest_protocol_session.html#afbabb77b2c0d8ab56cfea8438ac00c83">s3f::s3fnet::LowestProtocolSession::sendPacket()</a>, <a class="el" href="rng_8cc_source.html#l00059">Random::RNG::Uniform()</a>, and <a class="el" href="red__queue_8h_source.html#l00110">vacate_time</a>.</p>
<div class="fragment"><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;{</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">// the mac layer header is not counted</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="comment">//float len = 8*((ProtocolMessage*)pkt)-&gt;totalRealBytes();</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordtype">float</span> len = 0;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  <span class="comment">//other protocol such as Ethernet, wireless should be added here</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#ad429740335f45371f2bce23c753dfa6f">getProtocolNumber</a>() == <a class="code" href="namespaces3f_1_1s3fnet.html#a2d885d995be52ebf39a06e881ec67919a8c43182c3368dd134537df93db2604c6">S3FNET_PROTOCOL_TYPE_SIMPLE_PHY</a>)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        len = 8*((SimpleMacMessage*)pkt)-&gt;totalRealBytes();</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;DroptailQueue::enqueue(), pkt has an unknown type\n&quot;</span>);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="comment">// update queue size and compute jitter</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <a class="code" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> jitter = <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a29f7f048bc8c0ee5c38682fedd35bb0b">calibrate</a>(len);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a8e99e67bae3f391377b80f162f6f2a5b">queue</a>+len &gt; 8.0*<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#ad9cfa8c89b470743e2cc2db8c44e8159">bufsize</a> || <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> == 1.0 ||</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;     (<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> &gt; 0 &amp;&amp; <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a9ffe57c5dfd8cc847d566acf4581b968">getRandom</a>()-&gt;<a class="code" href="class_random_1_1_r_n_g.html#afabbc73f8078820be95fc605b93d3e65">Uniform</a>(0, 1) &lt; <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a>))</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">// if the queue is full, or if the packet is chosen to be dropped</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="comment">// according to RED policy, just drop the entire packet</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="red__queue_8cc.html#a5185c84a3c287fe5c0de9d01de237ffa">IFACE_DUMP</a>(printf(<span class="stringliteral">&quot;[nic=\&quot;%s\&quot;, ip=\&quot;%s\&quot;] %s: &quot;</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                      <span class="stringliteral">&quot;drop packet (queue overflow or RED policy).\n&quot;</span>,</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                      ((NetworkInterface*)<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a383bfb5d8385ab3ddbabaeba2e4a38aa">inGraph</a>())-&gt;nhi.toString(),</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                      <a class="code" href="classs3f_1_1s3fnet_1_1_i_p_prefix.html#a4649010db0c18ea0c15e1d42e96467e8">IPPrefix::ip2txt</a>(((NetworkInterface*)<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a383bfb5d8385ab3ddbabaeba2e4a38aa">inGraph</a>())-&gt;getIP()),</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                      <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a0250c97bad17f18ef7037fd76f7e5083">getNowWithThousandSeparator</a>()));</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// reset the count of packet arrivals since the last packet drop</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a2d733f70c3136cb2864226a772c3b4e3">interdrop</a> = 0;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">// all we need is to insert this packet into the queue</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a8e99e67bae3f391377b80f162f6f2a5b">queue</a> += len;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  <span class="comment">// call the interface to send the packet.</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <a class="code" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> t = (<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_nic_protocol_session.html#a176a88375c43e4cba63c97bf6c3acc79">inHost</a>()-&gt;<a class="code" href="class_entity.html#a6ac4fe093bf16c28a822bdfb0bd89dc6">d2t</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a8e99e67bae3f391377b80f162f6f2a5b">queue</a>/<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a880afbc6c4f16881d1e58a5f5a6140ee">bitrate</a>, 0)+1) + <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#adae132e1e2ff72c977aff070bd35582d">latency</a> + jitter;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#ae2dc6c1e630f6f6feed5d1bcb09dc18a">vacate_time</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7a8fc3b0c62b09c82b72268b56abb58c">getNow</a>()+t;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_lowest_protocol_session.html#afbabb77b2c0d8ab56cfea8438ac00c83">sendPacket</a>(pkt, t);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_lowest_protocol_session_html_afbabb77b2c0d8ab56cfea8438ac00c83"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_lowest_protocol_session.html#afbabb77b2c0d8ab56cfea8438ac00c83">s3f::s3fnet::LowestProtocolSession::sendPacket</a></div><div class="ttdeci">virtual void sendPacket(Activation pkt, ltime_t delay)=0</div><div class="ttdoc">Derived class should use this method to send packet frames out from the host to its peer(s)...</div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a2d885d995be52ebf39a06e881ec67919a8c43182c3368dd134537df93db2604c6"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a2d885d995be52ebf39a06e881ec67919a8c43182c3368dd134537df93db2604c6">s3f::s3fnet::S3FNET_PROTOCOL_TYPE_SIMPLE_PHY</a></div><div class="ttdoc">A simple physical layer protocol. </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00135">s3fnet.h:135</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_a1e93ebdcaa6412af67c14e9d0e9e85d5"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">s3f::s3fnet::NicQueue::phy_sess</a></div><div class="ttdeci">LowestProtocolSession * phy_sess</div><div class="ttdoc">The lowest protocol session that this queue is associated with. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8h_source.html#l00067">nic_queue.h:67</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_adae132e1e2ff72c977aff070bd35582d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#adae132e1e2ff72c977aff070bd35582d">s3f::s3fnet::NicQueue::latency</a></div><div class="ttdeci">ltime_t latency</div><div class="ttdoc">The latency of the NIC. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8h_source.html#l00076">nic_queue.h:76</a></div></div>
<div class="ttc" id="class_random_1_1_r_n_g_html_afabbc73f8078820be95fc605b93d3e65"><div class="ttname"><a href="class_random_1_1_r_n_g.html#afabbc73f8078820be95fc605b93d3e65">Random::RNG::Uniform</a></div><div class="ttdeci">double Uniform(double a, double b)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cc_source.html#l00059">rng.cc:59</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_ae2dc6c1e630f6f6feed5d1bcb09dc18a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#ae2dc6c1e630f6f6feed5d1bcb09dc18a">s3f::s3fnet::RedQueue::vacate_time</a></div><div class="ttdeci">ltime_t vacate_time</div><div class="ttdoc">The time when the queue will be emptied. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00110">red_queue.h:110</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_ad429740335f45371f2bce23c753dfa6f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#ad429740335f45371f2bce23c753dfa6f">s3f::s3fnet::ProtocolSession::getProtocolNumber</a></div><div class="ttdeci">virtual int getProtocolNumber()=0</div><div class="ttdoc">Each protocol session should have its unique protocol number. </div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_ad9cfa8c89b470743e2cc2db8c44e8159"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#ad9cfa8c89b470743e2cc2db8c44e8159">s3f::s3fnet::NicQueue::bufsize</a></div><div class="ttdeci">long bufsize</div><div class="ttdoc">The buffer size of the queue. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8h_source.html#l00073">nic_queue.h:73</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a2d733f70c3136cb2864226a772c3b4e3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a2d733f70c3136cb2864226a772c3b4e3">s3f::s3fnet::RedQueue::interdrop</a></div><div class="ttdeci">float interdrop</div><div class="ttdoc">The number of bits arrived between two consecutive packet drops (when the qmin threshold is crossed)...</div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00104">red_queue.h:104</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_protocol_session_html_a176a88375c43e4cba63c97bf6c3acc79"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_protocol_session.html#a176a88375c43e4cba63c97bf6c3acc79">s3f::s3fnet::NicProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="nic__protocol__session_8cc_source.html#l00042">nic_protocol_session.cc:42</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_a880afbc6c4f16881d1e58a5f5a6140ee"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#a880afbc6c4f16881d1e58a5f5a6140ee">s3f::s3fnet::NicQueue::bitrate</a></div><div class="ttdeci">double bitrate</div><div class="ttdoc">Bitrate of the link the NIC is attached to. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8h_source.html#l00070">nic_queue.h:70</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_aba701088de9d3767548b019eca622255"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">s3f::s3fnet::RedQueue::loss</a></div><div class="ttdeci">float loss</div><div class="ttdoc">The loss probability calcuated from avg queue length. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00096">red_queue.h:96</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_i_p_prefix_html_a4649010db0c18ea0c15e1d42e96467e8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_i_p_prefix.html#a4649010db0c18ea0c15e1d42e96467e8">s3f::s3fnet::IPPrefix::ip2txt</a></div><div class="ttdeci">static char * ip2txt(IPADDR ip, char *str)</div><div class="ttdoc">Convert an IP prefix to a string. </div><div class="ttdef"><b>Definition:</b> <a href="ip__prefix_8cc_source.html#l00041">ip_prefix.cc:41</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a7a8fc3b0c62b09c82b72268b56abb58c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7a8fc3b0c62b09c82b72268b56abb58c">s3f::s3fnet::ProtocolSession::getNow</a></div><div class="ttdeci">ltime_t getNow()</div><div class="ttdoc">The method returns the current simulation time. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00123">protocol_session.cc:123</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a29f7f048bc8c0ee5c38682fedd35bb0b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a29f7f048bc8c0ee5c38682fedd35bb0b">s3f::s3fnet::RedQueue::calibrate</a></div><div class="ttdeci">ltime_t calibrate(float length)</div><div class="ttdoc">Called by the enqueue method. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8cc_source.html#l00196">red_queue.cc:196</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a8e99e67bae3f391377b80f162f6f2a5b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a8e99e67bae3f391377b80f162f6f2a5b">s3f::s3fnet::RedQueue::queue</a></div><div class="ttdeci">float queue</div><div class="ttdoc">The instantaneous queue size. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00090">red_queue.h:90</a></div></div>
<div class="ttc" id="class_entity_html_a6ac4fe093bf16c28a822bdfb0bd89dc6"><div class="ttname"><a href="class_entity.html#a6ac4fe093bf16c28a822bdfb0bd89dc6">Entity::d2t</a></div><div class="ttdeci">ltime_t d2t(double d)</div><div class="ttdoc">Conversion routines to translate from double precision to clock ticks. </div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00269">entity.cc:269</a></div></div>
<div class="ttc" id="red__queue_8cc_html_a5185c84a3c287fe5c0de9d01de237ffa"><div class="ttname"><a href="red__queue_8cc.html#a5185c84a3c287fe5c0de9d01de237ffa">IFACE_DUMP</a></div><div class="ttdeci">#define IFACE_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8cc_source.html#l00017">red_queue.cc:17</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_aee6e3282670be024dcee8ac3cef67e85"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">s3f::s3fnet::error_quit</a></div><div class="ttdeci">void error_quit(const char *fmt,...)</div><div class="ttdoc">This function is called when there&#39;s a fatal error unrelated to a system call. </div><div class="ttdef"><b>Definition:</b> <a href="errhandle_8cc_source.html#l00128">errhandle.cc:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a9ffe57c5dfd8cc847d566acf4581b968"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a9ffe57c5dfd8cc847d566acf4581b968">s3f::s3fnet::ProtocolSession::getRandom</a></div><div class="ttdeci">Random::RNG * getRandom()</div><div class="ttdoc">The method returns a pointer to the random number generator. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00200">protocol_session.h:200</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a0250c97bad17f18ef7037fd76f7e5083"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a0250c97bad17f18ef7037fd76f7e5083">s3f::s3fnet::ProtocolSession::getNowWithThousandSeparator</a></div><div class="ttdeci">char * getNowWithThousandSeparator()</div><div class="ttdoc">For printing the current simulation time in a better readable format. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00128">protocol_session.cc:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a383bfb5d8385ab3ddbabaeba2e4a38aa"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a383bfb5d8385ab3ddbabaeba2e4a38aa">s3f::s3fnet::ProtocolSession::inGraph</a></div><div class="ttdeci">ProtocolGraph * inGraph()</div><div class="ttdoc">The method returns the protocol graph in which this protocol session resides. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00178">protocol_session.h:178</a></div></div>
<div class="ttc" id="s3f_8h_html_adfa38db6ddd965e5a50cec3ddc678778"><div class="ttname"><a href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a></div><div class="ttdeci">long ltime_t</div><div class="ttdef"><b>Definition:</b> <a href="s3f_8h_source.html#l00133">s3f.h:133</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a29f7f048bc8c0ee5c38682fedd35bb0b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> s3f::s3fnet::RedQueue::calibrate </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>length</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called by the enqueue method. </p>
<p>The queueing delay is calculated relative to the last recorded transmission. If we have moved forward in time, we need to recalibrate the accumulated delay so that it remains relative to the current time. We need to recalibrate before every transmission. If the jitter range is defined in the interface, this method also samples and returns a jitter for sending the message. </p>

<p>Definition at line <a class="el" href="red__queue_8cc_source.html#l00196">196</a> of file <a class="el" href="red__queue_8cc_source.html">red_queue.cc</a>.</p>

<p>References <a class="el" href="red__queue_8h_source.html#l00093">avgque</a>, <a class="el" href="nic__queue_8h_source.html#l00070">s3f::s3fnet::NicQueue::bitrate</a>, <a class="el" href="nic__queue_8h_source.html#l00073">s3f::s3fnet::NicQueue::bufsize</a>, <a class="el" href="red__queue_8h_source.html#l00100">crossing</a>, <a class="el" href="entity_8cc_source.html#l00269">Entity::d2t()</a>, <a class="el" href="protocol__session_8cc_source.html#l00123">s3f::s3fnet::ProtocolSession::getNow()</a>, <a class="el" href="protocol__session_8h_source.html#l00200">s3f::s3fnet::ProtocolSession::getRandom()</a>, <a class="el" href="nic__protocol__session_8cc_source.html#l00042">s3f::s3fnet::NicProtocolSession::inHost()</a>, <a class="el" href="red__queue_8h_source.html#l00104">interdrop</a>, <a class="el" href="nic__queue_8h_source.html#l00079">s3f::s3fnet::NicQueue::jitter_range</a>, <a class="el" href="red__queue_8h_source.html#l00107">last_update_time</a>, <a class="el" href="red__queue_8h_source.html#l00096">loss</a>, <a class="el" href="red__queue_8h_source.html#l00087">mean_pktsiz</a>, <a class="el" href="nic__queue_8h_source.html#l00067">s3f::s3fnet::NicQueue::phy_sess</a>, <a class="el" href="red__queue_8h_source.html#l00080">pmax</a>, <a class="el" href="red__queue_8h_source.html#l00079">qcap</a>, <a class="el" href="red__queue_8h_source.html#l00078">qmax</a>, <a class="el" href="red__queue_8h_source.html#l00077">qmin</a>, <a class="el" href="red__queue_8h_source.html#l00090">queue</a>, <a class="el" href="entity_8cc_source.html#l00257">Entity::t2d()</a>, <a class="el" href="rng_8cc_source.html#l00059">Random::RNG::Uniform()</a>, <a class="el" href="red__queue_8h_source.html#l00110">vacate_time</a>, <a class="el" href="red__queue_8h_source.html#l00084">wait_opt</a>, and <a class="el" href="red__queue_8h_source.html#l00068">weight</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00156">enqueue()</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <a class="code" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> jitter(0);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <a class="code" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> now = <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7a8fc3b0c62b09c82b72268b56abb58c">getNow</a>();</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a2d733f70c3136cb2864226a772c3b4e3">interdrop</a> += len;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#abf4d23386324d40d238ed8dfe9f36ef9">jitter_range</a> &gt; 0) <span class="comment">// if jitter is enabled</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  {</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordtype">double</span> jitter_double = (<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a9ffe57c5dfd8cc847d566acf4581b968">getRandom</a>()-&gt;<a class="code" href="class_random_1_1_r_n_g.html#afabbc73f8078820be95fc605b93d3e65">Uniform</a>(-1, 1)*<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#abf4d23386324d40d238ed8dfe9f36ef9">jitter_range</a>*len)/<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a880afbc6c4f16881d1e58a5f5a6140ee">bitrate</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    jitter = <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_nic_protocol_session.html#a176a88375c43e4cba63c97bf6c3acc79">inHost</a>()-&gt;<a class="code" href="class_entity.html#a6ac4fe093bf16c28a822bdfb0bd89dc6">d2t</a>(jitter_double, 0)+1;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    now += jitter;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a8e99e67bae3f391377b80f162f6f2a5b">queue</a> -= <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a880afbc6c4f16881d1e58a5f5a6140ee">bitrate</a> * <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_nic_protocol_session.html#a176a88375c43e4cba63c97bf6c3acc79">inHost</a>()-&gt;<a class="code" href="class_entity.html#ac1a26005027cddb0503a0d418130b45f">t2d</a>(now-<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a260fbaf84380bdfa7621f8fe77d3bb67">last_update_time</a>, 0);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a8e99e67bae3f391377b80f162f6f2a5b">queue</a> &lt; 0) <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a8e99e67bae3f391377b80f162f6f2a5b">queue</a> = 0;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a8e99e67bae3f391377b80f162f6f2a5b">queue</a> &gt; 8.0*<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#ad9cfa8c89b470743e2cc2db8c44e8159">bufsize</a>) <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a8e99e67bae3f391377b80f162f6f2a5b">queue</a> = 8.0*<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#ad9cfa8c89b470743e2cc2db8c44e8159">bufsize</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a260fbaf84380bdfa7621f8fe77d3bb67">last_update_time</a> = now;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  <span class="keywordtype">int</span> m = 0;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">if</span>(now &gt; <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#ae2dc6c1e630f6f6feed5d1bcb09dc18a">vacate_time</a>) <span class="comment">// queue is idle?</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    m = int(<a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">phy_sess</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_nic_protocol_session.html#a176a88375c43e4cba63c97bf6c3acc79">inHost</a>()-&gt;<a class="code" href="class_entity.html#ac1a26005027cddb0503a0d418130b45f">t2d</a>(now-<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#ae2dc6c1e630f6f6feed5d1bcb09dc18a">vacate_time</a>,0) * <a class="code" href="classs3f_1_1s3fnet_1_1_nic_queue.html#a880afbc6c4f16881d1e58a5f5a6140ee">bitrate</a> / <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a9de6d87c433a163df1b6fe545e4097e3">mean_pktsiz</a>);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a59f4d32fad3c274199718d8d1fc06e6d">avgque</a> *= pow(1-<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a64583986e94e6a22b3c432770bbbc527">weight</a>, m+1);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  avgque += <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a64583986e94e6a22b3c432770bbbc527">weight</a>*<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a8e99e67bae3f391377b80f162f6f2a5b">queue</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">if</span>(queue == 0 || avgque &lt; <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">qmin</a>)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a9101bed64e78bb08bcd89a4e6da525c1">crossing</a> = <span class="keyword">false</span>; <span class="comment">// next time is the first time to across the threshold </span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> = 0; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a9101bed64e78bb08bcd89a4e6da525c1">crossing</a>) <span class="comment">// first time crossing the threshold</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a9101bed64e78bb08bcd89a4e6da525c1">crossing</a> = <span class="keyword">true</span>; <span class="comment">// no more the first time</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> = 0; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a2d733f70c3136cb2864226a772c3b4e3">interdrop</a> = 0;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(avgque &lt; <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a>)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> = (avgque-<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">qmin</a>)/(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a>-<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">qmin</a>)*<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a21076da8d773b07bc9eee7ba038ed557">pmax</a>;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  }</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="preprocessor">#ifdef REDMIX_EXPERIMENTAL</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span>(avgque &lt; <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">qcap</a>) {</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> = avgque*(1-<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a21076da8d773b07bc9eee7ba038ed557">pmax</a>)/<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a>+(2*<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a21076da8d773b07bc9eee7ba038ed557">pmax</a>-1);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> &gt; 1) <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> = 1;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    } <span class="keywordflow">else</span> <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> = 1;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span>(avgque &lt; <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">qcap</a>)</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> = (avgque-<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a>)/(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">qcap</a>-<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">qmax</a>)*(1-<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a21076da8d773b07bc9eee7ba038ed557">pmax</a>)+<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a21076da8d773b07bc9eee7ba038ed557">pmax</a>;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">else</span> <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> = 1;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="preprocessor"></span>  }</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">//#ifdef REDMIX_EXPERIMENTAL</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="comment">// make uniform instead of geometric inter-drop periods (ns-2)</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  <span class="keywordtype">int</span> cnt = int(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a2d733f70c3136cb2864226a772c3b4e3">interdrop</a>/<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a9de6d87c433a163df1b6fe545e4097e3">mean_pktsiz</a>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a2308129abbcc722cbaa55f1679b701aa">wait_opt</a>)</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span>(cnt*<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> &lt; 1.0) <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> = 0;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(cnt*<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> &lt; 2.0) <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> /= (2.0-cnt*<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">else</span> <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> = 1.0;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  {</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span>(cnt*<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> &lt; 1.0) <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> /= (1.0-cnt*<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a>);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">else</span> <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> = 1.0;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> &lt; 1.0) <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> *= len/<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#a9de6d87c433a163df1b6fe545e4097e3">mean_pktsiz</a>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> &gt; 1.0) <a class="code" href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">loss</a> = 1.0;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">//#endif</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <span class="keywordflow">return</span> jitter;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a53683dfc66eeec7aa680cfd50fa001df"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a53683dfc66eeec7aa680cfd50fa001df">s3f::s3fnet::RedQueue::qmax</a></div><div class="ttdeci">float qmax</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00078">red_queue.h:78</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_abf4d23386324d40d238ed8dfe9f36ef9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#abf4d23386324d40d238ed8dfe9f36ef9">s3f::s3fnet::NicQueue::jitter_range</a></div><div class="ttdeci">float jitter_range</div><div class="ttdoc">The jitter range of this NIC. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8h_source.html#l00079">nic_queue.h:79</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_a1e93ebdcaa6412af67c14e9d0e9e85d5"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#a1e93ebdcaa6412af67c14e9d0e9e85d5">s3f::s3fnet::NicQueue::phy_sess</a></div><div class="ttdeci">LowestProtocolSession * phy_sess</div><div class="ttdoc">The lowest protocol session that this queue is associated with. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8h_source.html#l00067">nic_queue.h:67</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a260fbaf84380bdfa7621f8fe77d3bb67"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a260fbaf84380bdfa7621f8fe77d3bb67">s3f::s3fnet::RedQueue::last_update_time</a></div><div class="ttdeci">ltime_t last_update_time</div><div class="ttdoc">The time of the last queue update. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00107">red_queue.h:107</a></div></div>
<div class="ttc" id="class_entity_html_ac1a26005027cddb0503a0d418130b45f"><div class="ttname"><a href="class_entity.html#ac1a26005027cddb0503a0d418130b45f">Entity::t2d</a></div><div class="ttdeci">double t2d(ltime_t t)</div><div class="ttdoc">Conversion routines to translate from clock ticks to double precision. </div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00257">entity.cc:257</a></div></div>
<div class="ttc" id="class_random_1_1_r_n_g_html_afabbc73f8078820be95fc605b93d3e65"><div class="ttname"><a href="class_random_1_1_r_n_g.html#afabbc73f8078820be95fc605b93d3e65">Random::RNG::Uniform</a></div><div class="ttdeci">double Uniform(double a, double b)</div><div class="ttdef"><b>Definition:</b> <a href="rng_8cc_source.html#l00059">rng.cc:59</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_ae2dc6c1e630f6f6feed5d1bcb09dc18a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#ae2dc6c1e630f6f6feed5d1bcb09dc18a">s3f::s3fnet::RedQueue::vacate_time</a></div><div class="ttdeci">ltime_t vacate_time</div><div class="ttdoc">The time when the queue will be emptied. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00110">red_queue.h:110</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_ad9cfa8c89b470743e2cc2db8c44e8159"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#ad9cfa8c89b470743e2cc2db8c44e8159">s3f::s3fnet::NicQueue::bufsize</a></div><div class="ttdeci">long bufsize</div><div class="ttdoc">The buffer size of the queue. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8h_source.html#l00073">nic_queue.h:73</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a2308129abbcc722cbaa55f1679b701aa"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a2308129abbcc722cbaa55f1679b701aa">s3f::s3fnet::RedQueue::wait_opt</a></div><div class="ttdeci">bool wait_opt</div><div class="ttdoc">This RED option is used to avoid marking/dropping two packets in a row. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00084">red_queue.h:84</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a2d733f70c3136cb2864226a772c3b4e3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a2d733f70c3136cb2864226a772c3b4e3">s3f::s3fnet::RedQueue::interdrop</a></div><div class="ttdeci">float interdrop</div><div class="ttdoc">The number of bits arrived between two consecutive packet drops (when the qmin threshold is crossed)...</div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00104">red_queue.h:104</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a9101bed64e78bb08bcd89a4e6da525c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a9101bed64e78bb08bcd89a4e6da525c1">s3f::s3fnet::RedQueue::crossing</a></div><div class="ttdeci">bool crossing</div><div class="ttdoc">False if the average queue length is crossing the min threshold for the first time. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00100">red_queue.h:100</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a50df85ae18003eb0bec15be861689f24"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a50df85ae18003eb0bec15be861689f24">s3f::s3fnet::RedQueue::qmin</a></div><div class="ttdeci">float qmin</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00077">red_queue.h:77</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_protocol_session_html_a176a88375c43e4cba63c97bf6c3acc79"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_protocol_session.html#a176a88375c43e4cba63c97bf6c3acc79">s3f::s3fnet::NicProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="nic__protocol__session_8cc_source.html#l00042">nic_protocol_session.cc:42</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nic_queue_html_a880afbc6c4f16881d1e58a5f5a6140ee"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nic_queue.html#a880afbc6c4f16881d1e58a5f5a6140ee">s3f::s3fnet::NicQueue::bitrate</a></div><div class="ttdeci">double bitrate</div><div class="ttdoc">Bitrate of the link the NIC is attached to. </div><div class="ttdef"><b>Definition:</b> <a href="nic__queue_8h_source.html#l00070">nic_queue.h:70</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_aba701088de9d3767548b019eca622255"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#aba701088de9d3767548b019eca622255">s3f::s3fnet::RedQueue::loss</a></div><div class="ttdeci">float loss</div><div class="ttdoc">The loss probability calcuated from avg queue length. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00096">red_queue.h:96</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_af056fbe254bc33ea99a1f8a0907d7ee0"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#af056fbe254bc33ea99a1f8a0907d7ee0">s3f::s3fnet::RedQueue::qcap</a></div><div class="ttdeci">float qcap</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00079">red_queue.h:79</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a7a8fc3b0c62b09c82b72268b56abb58c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7a8fc3b0c62b09c82b72268b56abb58c">s3f::s3fnet::ProtocolSession::getNow</a></div><div class="ttdeci">ltime_t getNow()</div><div class="ttdoc">The method returns the current simulation time. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00123">protocol_session.cc:123</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a9de6d87c433a163df1b6fe545e4097e3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a9de6d87c433a163df1b6fe545e4097e3">s3f::s3fnet::RedQueue::mean_pktsiz</a></div><div class="ttdeci">float mean_pktsiz</div><div class="ttdoc">Mean packet size in bits. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00087">red_queue.h:87</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a8e99e67bae3f391377b80f162f6f2a5b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a8e99e67bae3f391377b80f162f6f2a5b">s3f::s3fnet::RedQueue::queue</a></div><div class="ttdeci">float queue</div><div class="ttdoc">The instantaneous queue size. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00090">red_queue.h:90</a></div></div>
<div class="ttc" id="class_entity_html_a6ac4fe093bf16c28a822bdfb0bd89dc6"><div class="ttname"><a href="class_entity.html#a6ac4fe093bf16c28a822bdfb0bd89dc6">Entity::d2t</a></div><div class="ttdeci">ltime_t d2t(double d)</div><div class="ttdoc">Conversion routines to translate from double precision to clock ticks. </div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00269">entity.cc:269</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a9ffe57c5dfd8cc847d566acf4581b968"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a9ffe57c5dfd8cc847d566acf4581b968">s3f::s3fnet::ProtocolSession::getRandom</a></div><div class="ttdeci">Random::RNG * getRandom()</div><div class="ttdoc">The method returns a pointer to the random number generator. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8h_source.html#l00200">protocol_session.h:200</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a64583986e94e6a22b3c432770bbbc527"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a64583986e94e6a22b3c432770bbbc527">s3f::s3fnet::RedQueue::weight</a></div><div class="ttdeci">float weight</div><div class="ttdoc">Weight used by the AQM policy to calculate average queue length ON EACH PACKET ARRIVAL. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00068">red_queue.h:68</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a59f4d32fad3c274199718d8d1fc06e6d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a59f4d32fad3c274199718d8d1fc06e6d">s3f::s3fnet::RedQueue::avgque</a></div><div class="ttdeci">float avgque</div><div class="ttdoc">The average queue size. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00093">red_queue.h:93</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_red_queue_html_a21076da8d773b07bc9eee7ba038ed557"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_red_queue.html#a21076da8d773b07bc9eee7ba038ed557">s3f::s3fnet::RedQueue::pmax</a></div><div class="ttdeci">float pmax</div><div class="ttdoc">Parameter to calculate packet drop probability. </div><div class="ttdef"><b>Definition:</b> <a href="red__queue_8h_source.html#l00080">red_queue.h:80</a></div></div>
<div class="ttc" id="s3f_8h_html_adfa38db6ddd965e5a50cec3ddc678778"><div class="ttname"><a href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a></div><div class="ttdeci">long ltime_t</div><div class="ttdef"><b>Definition:</b> <a href="s3f_8h_source.html#l00133">s3f.h:133</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a52744f50eb35740f2635ca355c9fe751"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual int s3f::s3fnet::NicQueue::control </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ctrltyp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctrlmsg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_protocol_session.html">ProtocolSession</a> *&#160;</td>
          <td class="paramname"><em>sess</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Control information; nothing implemented as default. </p>

<p>Definition at line <a class="el" href="nic__queue_8h_source.html#l00055">55</a> of file <a class="el" href="nic__queue_8h_source.html">nic_queue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    { <span class="keywordflow">return</span> 0; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a42bd91a94fb485643564014ae638370b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void s3f::s3fnet::NicQueue::wrapup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The wrapup method is called when the simulation finishes. </p>

<p>Definition at line <a class="el" href="nic__queue_8h_source.html#l00059">59</a> of file <a class="el" href="nic__queue_8h_source.html">nic_queue.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;{}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a64583986e94e6a22b3c432770bbbc527"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float s3f::s3fnet::RedQueue::weight</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Weight used by the AQM policy to calculate average queue length ON EACH PACKET ARRIVAL. </p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00068">68</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, <a class="el" href="red__queue_8cc_source.html#l00039">config()</a>, and <a class="el" href="red__queue_8cc_source.html#l00121">init()</a>.</p>

</div>
</div>
<a class="anchor" id="a50df85ae18003eb0bec15be861689f24"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float s3f::s3fnet::RedQueue::qmin</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parameter to calculate packet drop probability. </p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00077">77</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, <a class="el" href="red__queue_8cc_source.html#l00039">config()</a>, and <a class="el" href="red__queue_8cc_source.html#l00121">init()</a>.</p>

</div>
</div>
<a class="anchor" id="a53683dfc66eeec7aa680cfd50fa001df"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float s3f::s3fnet::RedQueue::qmax</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parameter to calculate packet drop probability. </p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00078">78</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, <a class="el" href="red__queue_8cc_source.html#l00039">config()</a>, and <a class="el" href="red__queue_8cc_source.html#l00121">init()</a>.</p>

</div>
</div>
<a class="anchor" id="af056fbe254bc33ea99a1f8a0907d7ee0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float s3f::s3fnet::RedQueue::qcap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parameter to calculate packet drop probability. </p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00079">79</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, <a class="el" href="red__queue_8cc_source.html#l00039">config()</a>, and <a class="el" href="red__queue_8cc_source.html#l00121">init()</a>.</p>

</div>
</div>
<a class="anchor" id="a21076da8d773b07bc9eee7ba038ed557"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float s3f::s3fnet::RedQueue::pmax</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parameter to calculate packet drop probability. </p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00080">80</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, <a class="el" href="red__queue_8cc_source.html#l00039">config()</a>, and <a class="el" href="red__queue_8cc_source.html#l00121">init()</a>.</p>

</div>
</div>
<a class="anchor" id="a2308129abbcc722cbaa55f1679b701aa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::RedQueue::wait_opt</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This RED option is used to avoid marking/dropping two packets in a row. </p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00084">84</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, <a class="el" href="red__queue_8cc_source.html#l00039">config()</a>, and <a class="el" href="red__queue_8cc_source.html#l00121">init()</a>.</p>

</div>
</div>
<a class="anchor" id="a9de6d87c433a163df1b6fe545e4097e3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float s3f::s3fnet::RedQueue::mean_pktsiz</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mean packet size in bits. </p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00087">87</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, <a class="el" href="red__queue_8cc_source.html#l00039">config()</a>, and <a class="el" href="red__queue_8cc_source.html#l00121">init()</a>.</p>

</div>
</div>
<a class="anchor" id="a8e99e67bae3f391377b80f162f6f2a5b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float s3f::s3fnet::RedQueue::queue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The instantaneous queue size. </p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00090">90</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, and <a class="el" href="red__queue_8cc_source.html#l00156">enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a59f4d32fad3c274199718d8d1fc06e6d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float s3f::s3fnet::RedQueue::avgque</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The average queue size. </p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00093">93</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>.</p>

</div>
</div>
<a class="anchor" id="aba701088de9d3767548b019eca622255"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float s3f::s3fnet::RedQueue::loss</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The loss probability calcuated from avg queue length. </p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00096">96</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, and <a class="el" href="red__queue_8cc_source.html#l00156">enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a9101bed64e78bb08bcd89a4e6da525c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::RedQueue::crossing</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>False if the average queue length is crossing the min threshold for the first time. </p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00100">100</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>.</p>

</div>
</div>
<a class="anchor" id="a2d733f70c3136cb2864226a772c3b4e3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float s3f::s3fnet::RedQueue::interdrop</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of bits arrived between two consecutive packet drops (when the qmin threshold is crossed). </p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00104">104</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, and <a class="el" href="red__queue_8cc_source.html#l00156">enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a260fbaf84380bdfa7621f8fe77d3bb67"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> s3f::s3fnet::RedQueue::last_update_time</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The time of the last queue update. </p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00107">107</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>.</p>

</div>
</div>
<a class="anchor" id="ae2dc6c1e630f6f6feed5d1bcb09dc18a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> s3f::s3fnet::RedQueue::vacate_time</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The time when the queue will be emptied. </p>

<p>Definition at line <a class="el" href="red__queue_8h_source.html#l00110">110</a> of file <a class="el" href="red__queue_8h_source.html">red_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, and <a class="el" href="red__queue_8cc_source.html#l00156">enqueue()</a>.</p>

</div>
</div>
<a class="anchor" id="a1e93ebdcaa6412af67c14e9d0e9e85d5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classs3f_1_1s3fnet_1_1_lowest_protocol_session.html">LowestProtocolSession</a>* s3f::s3fnet::NicQueue::phy_sess</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The lowest protocol session that this queue is associated with. </p>

<p>Definition at line <a class="el" href="nic__queue_8h_source.html#l00067">67</a> of file <a class="el" href="nic__queue_8h_source.html">nic_queue.h</a>.</p>

<p>Referenced by <a class="el" href="droptail__queue_8cc_source.html#l00074">s3f::s3fnet::DroptailQueue::calibrate()</a>, <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, <a class="el" href="droptail__queue_8cc_source.html#l00036">s3f::s3fnet::DroptailQueue::enqueue()</a>, <a class="el" href="red__queue_8cc_source.html#l00156">enqueue()</a>, <a class="el" href="droptail__queue_8cc_source.html#l00028">s3f::s3fnet::DroptailQueue::init()</a>, <a class="el" href="nic__queue_8cc_source.html#l00026">s3f::s3fnet::NicQueue::init()</a>, and <a class="el" href="red__queue_8cc_source.html#l00121">init()</a>.</p>

</div>
</div>
<a class="anchor" id="a880afbc6c4f16881d1e58a5f5a6140ee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double s3f::s3fnet::NicQueue::bitrate</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Bitrate of the link the NIC is attached to. </p>

<p>Definition at line <a class="el" href="nic__queue_8h_source.html#l00070">70</a> of file <a class="el" href="nic__queue_8h_source.html">nic_queue.h</a>.</p>

<p>Referenced by <a class="el" href="droptail__queue_8cc_source.html#l00074">s3f::s3fnet::DroptailQueue::calibrate()</a>, <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, <a class="el" href="droptail__queue_8cc_source.html#l00036">s3f::s3fnet::DroptailQueue::enqueue()</a>, <a class="el" href="red__queue_8cc_source.html#l00156">enqueue()</a>, <a class="el" href="droptail__queue_8cc_source.html#l00028">s3f::s3fnet::DroptailQueue::init()</a>, <a class="el" href="nic__queue_8cc_source.html#l00026">s3f::s3fnet::NicQueue::init()</a>, and <a class="el" href="red__queue_8cc_source.html#l00121">init()</a>.</p>

</div>
</div>
<a class="anchor" id="ad9cfa8c89b470743e2cc2db8c44e8159"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">long s3f::s3fnet::NicQueue::bufsize</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The buffer size of the queue. </p>

<p>Definition at line <a class="el" href="nic__queue_8h_source.html#l00073">73</a> of file <a class="el" href="nic__queue_8h_source.html">nic_queue.h</a>.</p>

<p>Referenced by <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, <a class="el" href="red__queue_8cc_source.html#l00156">enqueue()</a>, <a class="el" href="droptail__queue_8cc_source.html#l00028">s3f::s3fnet::DroptailQueue::init()</a>, <a class="el" href="nic__queue_8cc_source.html#l00026">s3f::s3fnet::NicQueue::init()</a>, and <a class="el" href="red__queue_8cc_source.html#l00121">init()</a>.</p>

</div>
</div>
<a class="anchor" id="adae132e1e2ff72c977aff070bd35582d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> s3f::s3fnet::NicQueue::latency</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The latency of the NIC. </p>

<p>Definition at line <a class="el" href="nic__queue_8h_source.html#l00076">76</a> of file <a class="el" href="nic__queue_8h_source.html">nic_queue.h</a>.</p>

<p>Referenced by <a class="el" href="droptail__queue_8cc_source.html#l00036">s3f::s3fnet::DroptailQueue::enqueue()</a>, <a class="el" href="red__queue_8cc_source.html#l00156">enqueue()</a>, <a class="el" href="nic__queue_8cc_source.html#l00026">s3f::s3fnet::NicQueue::init()</a>, and <a class="el" href="red__queue_8cc_source.html#l00121">init()</a>.</p>

</div>
</div>
<a class="anchor" id="abf4d23386324d40d238ed8dfe9f36ef9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float s3f::s3fnet::NicQueue::jitter_range</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The jitter range of this NIC. </p>

<p>Definition at line <a class="el" href="nic__queue_8h_source.html#l00079">79</a> of file <a class="el" href="nic__queue_8h_source.html">nic_queue.h</a>.</p>

<p>Referenced by <a class="el" href="droptail__queue_8cc_source.html#l00074">s3f::s3fnet::DroptailQueue::calibrate()</a>, <a class="el" href="red__queue_8cc_source.html#l00196">calibrate()</a>, <a class="el" href="nic__queue_8cc_source.html#l00026">s3f::s3fnet::NicQueue::init()</a>, and <a class="el" href="red__queue_8cc_source.html#l00121">init()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="red__queue_8h_source.html">red_queue.h</a></li>
<li><a class="el" href="red__queue_8cc_source.html">red_queue.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaces3f.html">s3f</a></li><li class="navelem"><a class="el" href="namespaces3f_1_1s3fnet.html">s3fnet</a></li><li class="navelem"><a class="el" href="classs3f_1_1s3fnet_1_1_red_queue.html">RedQueue</a></li>
    <li class="footer">Generated on Tue Apr 15 2014 00:36:02 for S3F by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
