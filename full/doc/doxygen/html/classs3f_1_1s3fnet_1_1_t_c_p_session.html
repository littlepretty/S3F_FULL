<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>S3F: s3f::s3fnet::TCPSession Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">S3F
   &#160;<span id="projectnumber">2.1.0_full_version</span>
   </div>
   <div id="projectbrief">Simpler Scalable Simulation Framework + S3F-based Network Testbed (Simulation, OpenVZ-based Emulation, and OpenFlow-based SDN)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classs3f_1_1s3fnet_1_1_t_c_p_session.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classs3f_1_1s3fnet_1_1_t_c_p_session-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">s3f::s3fnet::TCPSession Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The TCP session.  
 <a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for s3f::s3fnet::TCPSession:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="classs3f_1_1s3fnet_1_1_t_c_p_session.png" usemap="#s3f::s3fnet::TCPSession_map" alt=""/>
  <map id="s3f::s3fnet::TCPSession_map" name="s3f::s3fnet::TCPSession_map">
<area href="classs3f_1_1s3fnet_1_1_socket_session.html" title="The socket session. " alt="s3f::s3fnet::SocketSession" shape="rect" coords="0,56,157,80"/>
<area href="classs3f_1_1s3fnet_1_1_session_i_d.html" title="An application session. " alt="s3f::s3fnet::SessionID" shape="rect" coords="0,0,157,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ad1a2f59d4c85556763203b9ecce13937"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br/>
&#160;&#160;<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">TCP_STATE_CLOSED</a> = 0, 
<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">TCP_STATE_LISTEN</a> = 1, 
<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">TCP_STATE_SYN_SENT</a> = 2, 
<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18">TCP_STATE_SYN_RECEIVED</a> = 3, 
<br/>
&#160;&#160;<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a> = 4, 
<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">TCP_STATE_CLOSE_WAIT</a> = 5, 
<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296">TCP_STATE_CLOSING</a> = 6, 
<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">TCP_STATE_FIN_WAIT_1</a> = 7, 
<br/>
&#160;&#160;<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">TCP_STATE_FIN_WAIT_2</a> = 8, 
<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914">TCP_STATE_LAST_ACK</a> = 9, 
<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">TCP_STATE_TIME_WAIT</a> = 10
<br/>
 }</td></tr>
<tr class="separator:ad1a2f59d4c85556763203b9ecce13937"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a48f6965a760087a324b845f386efcfa7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a48f6965a760087a324b845f386efcfa7">TCPSession</a> (<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html">TCPMaster</a> *master, int sock)</td></tr>
<tr class="memdesc:a48f6965a760087a324b845f386efcfa7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The constructor.  <a href="#a48f6965a760087a324b845f386efcfa7">More...</a><br/></td></tr>
<tr class="separator:a48f6965a760087a324b845f386efcfa7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe5ff324a055df0f040a36f1ef4dceda"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afe5ff324a055df0f040a36f1ef4dceda">~TCPSession</a> ()</td></tr>
<tr class="memdesc:afe5ff324a055df0f040a36f1ef4dceda"><td class="mdescLeft">&#160;</td><td class="mdescRight">The destructor.  <a href="#afe5ff324a055df0f040a36f1ef4dceda">More...</a><br/></td></tr>
<tr class="separator:afe5ff324a055df0f040a36f1ef4dceda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c61e120abde9416ffbc522c67ff9f90"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4c61e120abde9416ffbc522c67ff9f90">connect</a> (<a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a> destip, <a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a> destport)</td></tr>
<tr class="memdesc:a4c61e120abde9416ffbc522c67ff9f90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect to a destination ip address and port number.  <a href="#a4c61e120abde9416ffbc522c67ff9f90">More...</a><br/></td></tr>
<tr class="separator:a4c61e120abde9416ffbc522c67ff9f90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abade7fd648210833a80a546d30c2ea78"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#abade7fd648210833a80a546d30c2ea78">disconnect</a> ()</td></tr>
<tr class="memdesc:abade7fd648210833a80a546d30c2ea78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnect this session.  <a href="#abade7fd648210833a80a546d30c2ea78">More...</a><br/></td></tr>
<tr class="separator:abade7fd648210833a80a546d30c2ea78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeadeb478c0f7dd52ff4e8d0e5ccdf8d0"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aeadeb478c0f7dd52ff4e8d0e5ccdf8d0">send</a> (int length, <a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *msg=0)</td></tr>
<tr class="memdesc:aeadeb478c0f7dd52ff4e8d0e5ccdf8d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send the given number of bytes.  <a href="#aeadeb478c0f7dd52ff4e8d0e5ccdf8d0">More...</a><br/></td></tr>
<tr class="separator:aeadeb478c0f7dd52ff4e8d0e5ccdf8d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc39a9f019dc37f72f8ce21dfc9a509d"><td class="memItemLeft" align="right" valign="top">virtual int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afc39a9f019dc37f72f8ce21dfc9a509d">recv</a> (int length, <a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *msg=0)</td></tr>
<tr class="memdesc:afc39a9f019dc37f72f8ce21dfc9a509d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive a message of the given size.  <a href="#afc39a9f019dc37f72f8ce21dfc9a509d">More...</a><br/></td></tr>
<tr class="separator:afc39a9f019dc37f72f8ce21dfc9a509d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89eaa5a43b3c6eac7d96cdd3e0897704"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a89eaa5a43b3c6eac7d96cdd3e0897704">listen</a> ()</td></tr>
<tr class="memdesc:a89eaa5a43b3c6eac7d96cdd3e0897704"><td class="mdescLeft">&#160;</td><td class="mdescRight">Passive open.  <a href="#a89eaa5a43b3c6eac7d96cdd3e0897704">More...</a><br/></td></tr>
<tr class="separator:a89eaa5a43b3c6eac7d96cdd3e0897704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ea80f25ead5c839c2cd332dd0544dc8"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8ea80f25ead5c839c2cd332dd0544dc8">connected</a> ()</td></tr>
<tr class="memdesc:a8ea80f25ead5c839c2cd332dd0544dc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether a connection is made.  <a href="#a8ea80f25ead5c839c2cd332dd0544dc8">More...</a><br/></td></tr>
<tr class="separator:a8ea80f25ead5c839c2cd332dd0544dc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a683a93af191de2d905bacf35b9319e4b"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a683a93af191de2d905bacf35b9319e4b">setSource</a> (<a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a> ip, <a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a> port)</td></tr>
<tr class="memdesc:a683a93af191de2d905bacf35b9319e4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the ip and the port number of the connection.  <a href="#a683a93af191de2d905bacf35b9319e4b">More...</a><br/></td></tr>
<tr class="separator:a683a93af191de2d905bacf35b9319e4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a669e919cf067b2c024b3b7a9420de8ca"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a669e919cf067b2c024b3b7a9420de8ca">abort</a> ()</td></tr>
<tr class="memdesc:a669e919cf067b2c024b3b7a9420de8ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Abort the session.  <a href="#a669e919cf067b2c024b3b7a9420de8ca">More...</a><br/></td></tr>
<tr class="separator:a669e919cf067b2c024b3b7a9420de8ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ff97f10a4cef1e6c541e524effe383"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab3ff97f10a4cef1e6c541e524effe383">setSocketID</a> (int sock)</td></tr>
<tr class="memdesc:ab3ff97f10a4cef1e6c541e524effe383"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set socket.  <a href="#ab3ff97f10a4cef1e6c541e524effe383">More...</a><br/></td></tr>
<tr class="separator:ab3ff97f10a4cef1e6c541e524effe383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaacde1d637d1fc1367cf8d9469cc416b"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="classs3f_1_1s3fnet_1_1_session_master.html">SessionMaster</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aaacde1d637d1fc1367cf8d9469cc416b">getSessionMaster</a> ()</td></tr>
<tr class="memdesc:aaacde1d637d1fc1367cf8d9469cc416b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the master protocol session.  <a href="#aaacde1d637d1fc1367cf8d9469cc416b">More...</a><br/></td></tr>
<tr class="separator:aaacde1d637d1fc1367cf8d9469cc416b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a105570d1fec22a14ca7a51bbed7496ca"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a105570d1fec22a14ca7a51bbed7496ca">release</a> ()</td></tr>
<tr class="memdesc:a105570d1fec22a14ca7a51bbed7496ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release this session if unnecessary.  <a href="#a105570d1fec22a14ca7a51bbed7496ca">More...</a><br/></td></tr>
<tr class="separator:a105570d1fec22a14ca7a51bbed7496ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f8b326df8499a10b596e48d267dac59"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a0f8b326df8499a10b596e48d267dac59">receive</a> (<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html">TCPMessage</a> *tcphdr)</td></tr>
<tr class="memdesc:a0f8b326df8499a10b596e48d267dac59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive the message popped up from the ip session.  <a href="#a0f8b326df8499a10b596e48d267dac59">More...</a><br/></td></tr>
<tr class="separator:a0f8b326df8499a10b596e48d267dac59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ae7c44da7160bf5ed9f8f57bdeb5d37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6ae7c44da7160bf5ed9f8f57bdeb5d37">slowTimeoutHandling</a> ()</td></tr>
<tr class="memdesc:a6ae7c44da7160bf5ed9f8f57bdeb5d37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slow timeout handler (in tcp_tmr.cc).  <a href="#a6ae7c44da7160bf5ed9f8f57bdeb5d37">More...</a><br/></td></tr>
<tr class="separator:a6ae7c44da7160bf5ed9f8f57bdeb5d37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cca462256a38e5561578d4458816e82"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1cca462256a38e5561578d4458816e82">fastTimeoutHandling</a> ()</td></tr>
<tr class="memdesc:a1cca462256a38e5561578d4458816e82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fast timeout handler (in tcp_tmr.cc).  <a href="#a1cca462256a38e5561578d4458816e82">More...</a><br/></td></tr>
<tr class="separator:a1cca462256a38e5561578d4458816e82"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7c78b279408e057c92401895fb13a9d"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#af7c78b279408e057c92401895fb13a9d">reinit</a> ()</td></tr>
<tr class="memdesc:af7c78b279408e057c92401895fb13a9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by socket to reinitialize the destination ip and port.  <a href="#af7c78b279408e057c92401895fb13a9d">More...</a><br/></td></tr>
<tr class="separator:af7c78b279408e057c92401895fb13a9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85e7c910d1b68c5b79f888474ad80e79"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_session_i_d.html#a85e7c910d1b68c5b79f888474ad80e79">toString</a> (char *buf)</td></tr>
<tr class="memdesc:a85e7c910d1b68c5b79f888474ad80e79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translate the ID into a textual string.  <a href="#a85e7c910d1b68c5b79f888474ad80e79">More...</a><br/></td></tr>
<tr class="separator:a85e7c910d1b68c5b79f888474ad80e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a34995ecb78b03982de7b34709b6f7271"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_session_i_d.html#a34995ecb78b03982de7b34709b6f7271">prot_id</a></td></tr>
<tr class="memdesc:a34995ecb78b03982de7b34709b6f7271"><td class="mdescLeft">&#160;</td><td class="mdescRight">The protocol number.  <a href="#a34995ecb78b03982de7b34709b6f7271">More...</a><br/></td></tr>
<tr class="separator:a34995ecb78b03982de7b34709b6f7271"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc2e0c48325b4faff47ca2f155a4956c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_session_i_d.html#afc2e0c48325b4faff47ca2f155a4956c">src_ip</a></td></tr>
<tr class="memdesc:afc2e0c48325b4faff47ca2f155a4956c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Source ip address.  <a href="#afc2e0c48325b4faff47ca2f155a4956c">More...</a><br/></td></tr>
<tr class="separator:afc2e0c48325b4faff47ca2f155a4956c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40000686ed11d99e747b2b2bb51a316e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_session_i_d.html#a40000686ed11d99e747b2b2bb51a316e">dst_ip</a></td></tr>
<tr class="memdesc:a40000686ed11d99e747b2b2bb51a316e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destination ip address.  <a href="#a40000686ed11d99e747b2b2bb51a316e">More...</a><br/></td></tr>
<tr class="separator:a40000686ed11d99e747b2b2bb51a316e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b7a04b54cb31c4d060657593ed88d2f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_session_i_d.html#a8b7a04b54cb31c4d060657593ed88d2f">src_port</a></td></tr>
<tr class="memdesc:a8b7a04b54cb31c4d060657593ed88d2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Source port number.  <a href="#a8b7a04b54cb31c4d060657593ed88d2f">More...</a><br/></td></tr>
<tr class="separator:a8b7a04b54cb31c4d060657593ed88d2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac777d144a536fe6992da8c0f2c5bb450"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_session_i_d.html#ac777d144a536fe6992da8c0f2c5bb450">dst_port</a></td></tr>
<tr class="memdesc:ac777d144a536fe6992da8c0f2c5bb450"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destination port number.  <a href="#ac777d144a536fe6992da8c0f2c5bb450">More...</a><br/></td></tr>
<tr class="separator:ac777d144a536fe6992da8c0f2c5bb450"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a7330dac4791dcf387baa1c6cb9f31a8e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7330dac4791dcf387baa1c6cb9f31a8e">is_ok</a> (int action)</td></tr>
<tr class="memdesc:a7330dac4791dcf387baa1c6cb9f31a8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if the given action is ok at the time.  <a href="#a7330dac4791dcf387baa1c6cb9f31a8e">More...</a><br/></td></tr>
<tr class="separator:a7330dac4791dcf387baa1c6cb9f31a8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a708460a1c9ddcf199236e844d942f6ee"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a708460a1c9ddcf199236e844d942f6ee">active_open</a> (<a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a> <a class="el" href="classs3f_1_1s3fnet_1_1_session_i_d.html#a40000686ed11d99e747b2b2bb51a316e">dst_ip</a>, <a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a> <a class="el" href="classs3f_1_1s3fnet_1_1_session_i_d.html#ac777d144a536fe6992da8c0f2c5bb450">dst_port</a>)</td></tr>
<tr class="memdesc:a708460a1c9ddcf199236e844d942f6ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Active open.  <a href="#a708460a1c9ddcf199236e844d942f6ee">More...</a><br/></td></tr>
<tr class="separator:a708460a1c9ddcf199236e844d942f6ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa34e96f497bd431280c0af0a07446616"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa34e96f497bd431280c0af0a07446616">passive_open</a> ()</td></tr>
<tr class="memdesc:aa34e96f497bd431280c0af0a07446616"><td class="mdescLeft">&#160;</td><td class="mdescRight">Passive open.  <a href="#aa34e96f497bd431280c0af0a07446616">More...</a><br/></td></tr>
<tr class="separator:aa34e96f497bd431280c0af0a07446616"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a921479f6898db6df552b76ee32e91194"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a921479f6898db6df552b76ee32e91194">appl_close</a> ()</td></tr>
<tr class="memdesc:a921479f6898db6df552b76ee32e91194"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the connection.  <a href="#a921479f6898db6df552b76ee32e91194">More...</a><br/></td></tr>
<tr class="separator:a921479f6898db6df552b76ee32e91194"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af968ce1fbf83f0ab73e8c98829bf753e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af968ce1fbf83f0ab73e8c98829bf753e">allocate_buffers</a> ()</td></tr>
<tr class="memdesc:af968ce1fbf83f0ab73e8c98829bf753e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate both send and receive windows.  <a href="#af968ce1fbf83f0ab73e8c98829bf753e">More...</a><br/></td></tr>
<tr class="separator:af968ce1fbf83f0ab73e8c98829bf753e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cef9f6af7bf27c3067978b4bdfa2a22"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6cef9f6af7bf27c3067978b4bdfa2a22">deallocate_buffers</a> ()</td></tr>
<tr class="memdesc:a6cef9f6af7bf27c3067978b4bdfa2a22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate both send and receive windows.  <a href="#a6cef9f6af7bf27c3067978b4bdfa2a22">More...</a><br/></td></tr>
<tr class="separator:a6cef9f6af7bf27c3067978b4bdfa2a22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aafb0e4307fa93fe65f309573deb8f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6aafb0e4307fa93fe65f309573deb8f5">reset</a> ()</td></tr>
<tr class="memdesc:a6aafb0e4307fa93fe65f309573deb8f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the session to CLOSED state and wake up application.  <a href="#a6aafb0e4307fa93fe65f309573deb8f5">More...</a><br/></td></tr>
<tr class="separator:a6aafb0e4307fa93fe65f309573deb8f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5c1f75625bdc14d1f8789daed56e213"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad5c1f75625bdc14d1f8789daed56e213">wake_app</a> (int signal)</td></tr>
<tr class="memdesc:ad5c1f75625bdc14d1f8789daed56e213"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wake application upon a signal.  <a href="#ad5c1f75625bdc14d1f8789daed56e213">More...</a><br/></td></tr>
<tr class="separator:ad5c1f75625bdc14d1f8789daed56e213"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00bfd0fea187f818bf0fd4c2a19cb214"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">clear_app_state</a> (int signal)</td></tr>
<tr class="memdesc:a00bfd0fea187f818bf0fd4c2a19cb214"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear application signal bit(s).  <a href="#a00bfd0fea187f818bf0fd4c2a19cb214">More...</a><br/></td></tr>
<tr class="separator:a00bfd0fea187f818bf0fd4c2a19cb214"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b4f89c223928fe58699e239e1cd11e6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b4f89c223928fe58699e239e1cd11e6">init_state_closed</a> ()</td></tr>
<tr class="memdesc:a8b4f89c223928fe58699e239e1cd11e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change to CLOSED state.  <a href="#a8b4f89c223928fe58699e239e1cd11e6">More...</a><br/></td></tr>
<tr class="separator:a8b4f89c223928fe58699e239e1cd11e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab73521c495e604ad364ae0d81f54352d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab73521c495e604ad364ae0d81f54352d">init_state_syn_sent</a> ()</td></tr>
<tr class="memdesc:ab73521c495e604ad364ae0d81f54352d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change to SYN_SENT state.  <a href="#ab73521c495e604ad364ae0d81f54352d">More...</a><br/></td></tr>
<tr class="separator:ab73521c495e604ad364ae0d81f54352d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab158dc3ec6426cd625a4dde0b0d1f8d1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab158dc3ec6426cd625a4dde0b0d1f8d1">init_state_syn_received</a> ()</td></tr>
<tr class="memdesc:ab158dc3ec6426cd625a4dde0b0d1f8d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change to SYN_RECEIVED state.  <a href="#ab158dc3ec6426cd625a4dde0b0d1f8d1">More...</a><br/></td></tr>
<tr class="separator:ab158dc3ec6426cd625a4dde0b0d1f8d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72373c9fe80ed8e044c3315b8d5c1a19"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a72373c9fe80ed8e044c3315b8d5c1a19">init_state_listen</a> ()</td></tr>
<tr class="memdesc:a72373c9fe80ed8e044c3315b8d5c1a19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change to LISTEN state.  <a href="#a72373c9fe80ed8e044c3315b8d5c1a19">More...</a><br/></td></tr>
<tr class="separator:a72373c9fe80ed8e044c3315b8d5c1a19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7454ca316e4759015c6b2015c2d06c67"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7454ca316e4759015c6b2015c2d06c67">init_state_established</a> ()</td></tr>
<tr class="memdesc:a7454ca316e4759015c6b2015c2d06c67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change to ESTABLISHED state.  <a href="#a7454ca316e4759015c6b2015c2d06c67">More...</a><br/></td></tr>
<tr class="separator:a7454ca316e4759015c6b2015c2d06c67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b64e3f5e5f72b3e653db2de525dec29"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3b64e3f5e5f72b3e653db2de525dec29">init_state_close_wait</a> ()</td></tr>
<tr class="memdesc:a3b64e3f5e5f72b3e653db2de525dec29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change to CLOSE_WAIT state.  <a href="#a3b64e3f5e5f72b3e653db2de525dec29">More...</a><br/></td></tr>
<tr class="separator:a3b64e3f5e5f72b3e653db2de525dec29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ee86b56a417115c7c3586083706e736"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7ee86b56a417115c7c3586083706e736">init_state_last_ack</a> ()</td></tr>
<tr class="memdesc:a7ee86b56a417115c7c3586083706e736"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change to LAST_ACK state.  <a href="#a7ee86b56a417115c7c3586083706e736">More...</a><br/></td></tr>
<tr class="separator:a7ee86b56a417115c7c3586083706e736"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5639b7e3754415546e5c6f994eea7a2b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a5639b7e3754415546e5c6f994eea7a2b">init_state_fin_wait_1</a> ()</td></tr>
<tr class="memdesc:a5639b7e3754415546e5c6f994eea7a2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change to FIN_WAIT_1 state.  <a href="#a5639b7e3754415546e5c6f994eea7a2b">More...</a><br/></td></tr>
<tr class="separator:a5639b7e3754415546e5c6f994eea7a2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c827e6a31f92c419b34e0e085c37d9b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3c827e6a31f92c419b34e0e085c37d9b">init_state_fin_wait_2</a> ()</td></tr>
<tr class="memdesc:a3c827e6a31f92c419b34e0e085c37d9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change to FIN_WAIT_2 state.  <a href="#a3c827e6a31f92c419b34e0e085c37d9b">More...</a><br/></td></tr>
<tr class="separator:a3c827e6a31f92c419b34e0e085c37d9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b43b090f13c89eef9f369d9806b1575"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1b43b090f13c89eef9f369d9806b1575">init_state_closing</a> ()</td></tr>
<tr class="memdesc:a1b43b090f13c89eef9f369d9806b1575"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change to CLOSING state.  <a href="#a1b43b090f13c89eef9f369d9806b1575">More...</a><br/></td></tr>
<tr class="separator:a1b43b090f13c89eef9f369d9806b1575"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af653b11b74a8d66fc176cc647e4444a5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af653b11b74a8d66fc176cc647e4444a5">init_state_time_wait</a> ()</td></tr>
<tr class="memdesc:af653b11b74a8d66fc176cc647e4444a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change to TIME_WAIT state.  <a href="#af653b11b74a8d66fc176cc647e4444a5">More...</a><br/></td></tr>
<tr class="separator:af653b11b74a8d66fc176cc647e4444a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeef1fea77584dc5a23d5134973c5238a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aeef1fea77584dc5a23d5134973c5238a">appl_send</a> (<a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> length, <a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *msg)</td></tr>
<tr class="memdesc:aeef1fea77584dc5a23d5134973c5238a"><td class="mdescLeft">&#160;</td><td class="mdescRight">When the upper layer attempts to send out data, this function will be called.  <a href="#aeef1fea77584dc5a23d5134973c5238a">More...</a><br/></td></tr>
<tr class="separator:aeef1fea77584dc5a23d5134973c5238a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afefcda998f745d17d668577610ab8c23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a> (<a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> seqno, <a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> datalen=0, <a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> mask=0, <a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> ackno=0, bool need_calc_rtt=false, bool need_set_rextimeout=false)</td></tr>
<tr class="memdesc:afefcda998f745d17d668577610ab8c23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Physically send the data to the IP layer.  <a href="#afefcda998f745d17d668577610ab8c23">More...</a><br/></td></tr>
<tr class="separator:afefcda998f745d17d668577610ab8c23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fbadc4c967c43982e16d9c8c249fbc6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4fbadc4c967c43982e16d9c8c249fbc6">segment_and_send</a> (<a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> seqno, <a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> length)</td></tr>
<tr class="memdesc:a4fbadc4c967c43982e16d9c8c249fbc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Segment and send data.  <a href="#a4fbadc4c967c43982e16d9c8c249fbc6">More...</a><br/></td></tr>
<tr class="separator:a4fbadc4c967c43982e16d9c8c249fbc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae65322a37b337f806238cc67289eaf5c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">resend_segments</a> (<a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> seqno, <a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> nsegments)</td></tr>
<tr class="memdesc:ae65322a37b337f806238cc67289eaf5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resend the segments.  <a href="#ae65322a37b337f806238cc67289eaf5c">More...</a><br/></td></tr>
<tr class="separator:ae65322a37b337f806238cc67289eaf5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad018222843ceeab54f405d80a938c9a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad018222843ceeab54f405d80a938c9a2">acknowledge</a> (bool nodelay)</td></tr>
<tr class="memdesc:ad018222843ceeab54f405d80a938c9a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate acknowledgements; no delay is imposed if the nodelay parameter is true.  <a href="#ad018222843ceeab54f405d80a938c9a2">More...</a><br/></td></tr>
<tr class="separator:ad018222843ceeab54f405d80a938c9a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eb688f0fbd5e0c2cab43473c5f2da10"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1eb688f0fbd5e0c2cab43473c5f2da10">timeout_resend</a> ()</td></tr>
<tr class="memdesc:a1eb688f0fbd5e0c2cab43473c5f2da10"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is called when retransmission timer expires.  <a href="#a1eb688f0fbd5e0c2cab43473c5f2da10">More...</a><br/></td></tr>
<tr class="separator:a1eb688f0fbd5e0c2cab43473c5f2da10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adea6916920265fc56e81d59869827a21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#adea6916920265fc56e81d59869827a21">calc_advertised_wnd</a> ()</td></tr>
<tr class="memdesc:adea6916920265fc56e81d59869827a21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the advertised window size.  <a href="#adea6916920265fc56e81d59869827a21">More...</a><br/></td></tr>
<tr class="separator:adea6916920265fc56e81d59869827a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24322c47640acd2781cab62c705b3af2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a24322c47640acd2781cab62c705b3af2">send_delay_ack</a> ()</td></tr>
<tr class="memdesc:a24322c47640acd2781cab62c705b3af2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the session to send delayed ACK when next time the fast timer fires.  <a href="#a24322c47640acd2781cab62c705b3af2">More...</a><br/></td></tr>
<tr class="separator:a24322c47640acd2781cab62c705b3af2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a7702b0e5bbc4c2a10a6c2532224095"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7a7702b0e5bbc4c2a10a6c2532224095">cancel_delay_ack</a> ()</td></tr>
<tr class="memdesc:a7a7702b0e5bbc4c2a10a6c2532224095"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the session to cancel sending delayed ACK when next timer the fast timer fires.  <a href="#a7a7702b0e5bbc4c2a10a6c2532224095">More...</a><br/></td></tr>
<tr class="separator:a7a7702b0e5bbc4c2a10a6c2532224095"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2431ba6da58fbd49faf086ca1670887d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2431ba6da58fbd49faf086ca1670887d">appl_recv</a> (<a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> length, <a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *msg)</td></tr>
<tr class="memdesc:a2431ba6da58fbd49faf086ca1670887d"><td class="mdescLeft">&#160;</td><td class="mdescRight">When the upper layer wants to receive data (length bytes) from TCP, this function will be called.  <a href="#a2431ba6da58fbd49faf086ca1670887d">More...</a><br/></td></tr>
<tr class="separator:a2431ba6da58fbd49faf086ca1670887d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a709cbd1c506cf6d33b510f3b570c58f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a709cbd1c506cf6d33b510f3b570c58f8">process_SYN</a> (<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html">TCPMessage</a> *tcphdr, int &amp;signal)</td></tr>
<tr class="memdesc:a709cbd1c506cf6d33b510f3b570c58f8"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_process.html" title="The code that executes should be thought of as embedded in an instant of time. ">Process</a> SYN packets.  <a href="#a709cbd1c506cf6d33b510f3b570c58f8">More...</a><br/></td></tr>
<tr class="separator:a709cbd1c506cf6d33b510f3b570c58f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cf7d70612655484b01b2ab67de60758"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6cf7d70612655484b01b2ab67de60758">process_FIN</a> (int &amp;signal)</td></tr>
<tr class="memdesc:a6cf7d70612655484b01b2ab67de60758"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_process.html" title="The code that executes should be thought of as embedded in an instant of time. ">Process</a> FIN packets.  <a href="#a6cf7d70612655484b01b2ab67de60758">More...</a><br/></td></tr>
<tr class="separator:a6cf7d70612655484b01b2ab67de60758"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79fcd28a086c6e6d4590d168a98c1326"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a79fcd28a086c6e6d4590d168a98c1326">process_ACK</a> (<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html">TCPMessage</a> *tcphdr, int &amp;signal)</td></tr>
<tr class="memdesc:a79fcd28a086c6e6d4590d168a98c1326"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_process.html" title="The code that executes should be thought of as embedded in an instant of time. ">Process</a> ACK packets.  <a href="#a79fcd28a086c6e6d4590d168a98c1326">More...</a><br/></td></tr>
<tr class="separator:a79fcd28a086c6e6d4590d168a98c1326"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3a5f7604a879c134c73ac0284029fd5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab3a5f7604a879c134c73ac0284029fd5">process_acks</a> (<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html">TCPMessage</a> *tcphdr)</td></tr>
<tr class="memdesc:ab3a5f7604a879c134c73ac0284029fd5"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_process.html" title="The code that executes should be thought of as embedded in an instant of time. ">Process</a> the ACKs that correspond to received TCP message, and update session states like RTT and retransmission timer.  <a href="#ab3a5f7604a879c134c73ac0284029fd5">More...</a><br/></td></tr>
<tr class="separator:ab3a5f7604a879c134c73ac0284029fd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd4de03ec3bfe3bb54fda7f7fe772c4f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acd4de03ec3bfe3bb54fda7f7fe772c4f">process_new_data</a> (<a class="el" href="classs3f_1_1s3fnet_1_1_data_message.html">DataMessage</a> *payload, <a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> seqno)</td></tr>
<tr class="memdesc:acd4de03ec3bfe3bb54fda7f7fe772c4f"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_process.html" title="The code that executes should be thought of as embedded in an instant of time. ">Process</a> data arrival.  <a href="#acd4de03ec3bfe3bb54fda7f7fe772c4f">More...</a><br/></td></tr>
<tr class="separator:acd4de03ec3bfe3bb54fda7f7fe772c4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78bdb9e9ed6101cff65a1a2eaf4dd979"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a78bdb9e9ed6101cff65a1a2eaf4dd979">process_dup_acks</a> ()</td></tr>
<tr class="memdesc:a78bdb9e9ed6101cff65a1a2eaf4dd979"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_process.html" title="The code that executes should be thought of as embedded in an instant of time. ">Process</a> duplicate ACKs received.  <a href="#a78bdb9e9ed6101cff65a1a2eaf4dd979">More...</a><br/></td></tr>
<tr class="separator:a78bdb9e9ed6101cff65a1a2eaf4dd979"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac055ef42ccbd6c109cc080d21cbb452a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac055ef42ccbd6c109cc080d21cbb452a">process_new_acks</a> (<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html">TCPMessage</a> *tcphdr, <a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> acked)</td></tr>
<tr class="memdesc:ac055ef42ccbd6c109cc080d21cbb452a"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_process.html" title="The code that executes should be thought of as embedded in an instant of time. ">Process</a> ACKs that respond to new data.  <a href="#ac055ef42ccbd6c109cc080d21cbb452a">More...</a><br/></td></tr>
<tr class="separator:ac055ef42ccbd6c109cc080d21cbb452a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39fd0661d9f9c1481afffce94455534b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a39fd0661d9f9c1481afffce94455534b">check_cwnd</a> ()</td></tr>
<tr class="memdesc:a39fd0661d9f9c1481afffce94455534b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check congestion window size.  <a href="#a39fd0661d9f9c1481afffce94455534b">More...</a><br/></td></tr>
<tr class="separator:a39fd0661d9f9c1481afffce94455534b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac1a8c6887f8bf4cb418e813a08a3397"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aac1a8c6887f8bf4cb418e813a08a3397">calc_threshold</a> ()</td></tr>
<tr class="memdesc:aac1a8c6887f8bf4cb418e813a08a3397"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the threshold.  <a href="#aac1a8c6887f8bf4cb418e813a08a3397">More...</a><br/></td></tr>
<tr class="separator:aac1a8c6887f8bf4cb418e813a08a3397"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b0dd75a7ab0122d616fd850de3decc0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7b0dd75a7ab0122d616fd850de3decc0">update_remote_window_size</a> (<a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> window_size)</td></tr>
<tr class="memdesc:a7b0dd75a7ab0122d616fd850de3decc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">update the remote receive window size.  <a href="#a7b0dd75a7ab0122d616fd850de3decc0">More...</a><br/></td></tr>
<tr class="separator:a7b0dd75a7ab0122d616fd850de3decc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09791230ab5d227d3e1f3106132276f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a09791230ab5d227d3e1f3106132276f7">slow_timeout_handling_helper</a> (const <a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> timerid)</td></tr>
<tr class="memdesc:a09791230ab5d227d3e1f3106132276f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Slow timeout handler with a given timer id.  <a href="#a09791230ab5d227d3e1f3106132276f7">More...</a><br/></td></tr>
<tr class="separator:a09791230ab5d227d3e1f3106132276f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab00dc49da5ea3e23621cb51bfca36164"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab00dc49da5ea3e23621cb51bfca36164">update_timeout</a> ()</td></tr>
<tr class="memdesc:ab00dc49da5ea3e23621cb51bfca36164"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the current smoothed RTT timeout with the new rtt measurment.  <a href="#ab00dc49da5ea3e23621cb51bfca36164">More...</a><br/></td></tr>
<tr class="separator:ab00dc49da5ea3e23621cb51bfca36164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7973e68b212ac3cac8d62bfbb1b6da4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7973e68b212ac3cac8d62bfbb1b6da4c">backoff_timeout</a> ()</td></tr>
<tr class="memdesc:a7973e68b212ac3cac8d62bfbb1b6da4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Backoff the current timeout.  <a href="#a7973e68b212ac3cac8d62bfbb1b6da4c">More...</a><br/></td></tr>
<tr class="separator:a7973e68b212ac3cac8d62bfbb1b6da4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69d9114cde84414fb2fa305b21268868"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a69d9114cde84414fb2fa305b21268868">now</a> ()</td></tr>
<tr class="memdesc:a69d9114cde84414fb2fa305b21268868"><td class="mdescLeft">&#160;</td><td class="mdescRight">An alias to get the current simulation time.  <a href="#a69d9114cde84414fb2fa305b21268868">More...</a><br/></td></tr>
<tr class="separator:a69d9114cde84414fb2fa305b21268868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8a8130abf0e7a46c2ff0f2991c1a593"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae8a8130abf0e7a46c2ff0f2991c1a593">timeout_value</a> ()</td></tr>
<tr class="memdesc:ae8a8130abf0e7a46c2ff0f2991c1a593"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current smoothed RTT timeout value.  <a href="#ae8a8130abf0e7a46c2ff0f2991c1a593">More...</a><br/></td></tr>
<tr class="separator:ae8a8130abf0e7a46c2ff0f2991c1a593"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42a23756bf8288199fe4a26d072ea129"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42a23756bf8288199fe4a26d072ea129">timeout_double_value</a> ()</td></tr>
<tr class="separator:a42a23756bf8288199fe4a26d072ea129"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8ff1695f8741d222d9ff6af5ac2eed4"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa8ff1695f8741d222d9ff6af5ac2eed4">initial_timeout</a> ()</td></tr>
<tr class="memdesc:aa8ff1695f8741d222d9ff6af5ac2eed4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return initial timeout value for the first timeout.  <a href="#aa8ff1695f8741d222d9ff6af5ac2eed4">More...</a><br/></td></tr>
<tr class="separator:aa8ff1695f8741d222d9ff6af5ac2eed4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6c35466f27df34126e7c111c836dd7f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae6c35466f27df34126e7c111c836dd7f">checkIdle</a> ()</td></tr>
<tr class="memdesc:ae6c35466f27df34126e7c111c836dd7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the idle time is long enough to slow start.  <a href="#ae6c35466f27df34126e7c111c836dd7f">More...</a><br/></td></tr>
<tr class="separator:ae6c35466f27df34126e7c111c836dd7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf5d0ff4aff82f4a404a620d95e59c5d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aaf5d0ff4aff82f4a404a620d95e59c5d">sender_send_sack</a> (int sack_flag, <a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> mask, <a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *&amp;options)</td></tr>
<tr class="memdesc:aaf5d0ff4aff82f4a404a620d95e59c5d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method handles the situation when a sender tries to send a packet.  <a href="#aaf5d0ff4aff82f4a404a620d95e59c5d">More...</a><br/></td></tr>
<tr class="separator:aaf5d0ff4aff82f4a404a620d95e59c5d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a286c689db6d08bb289ef241172008bbb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a286c689db6d08bb289ef241172008bbb">receiver_send_sack</a> (int sack_flag, <a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> mask, <a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> ackno, <a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *&amp;options)</td></tr>
<tr class="memdesc:a286c689db6d08bb289ef241172008bbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method handles the situation when a receiver tries to send a packet.  <a href="#a286c689db6d08bb289ef241172008bbb">More...</a><br/></td></tr>
<tr class="separator:a286c689db6d08bb289ef241172008bbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0330f4923b4dabdf51a91f725126692"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af0330f4923b4dabdf51a91f725126692">sender_recv_sack</a> (<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html">TCPMessage</a> *tcphdr)</td></tr>
<tr class="memdesc:af0330f4923b4dabdf51a91f725126692"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method handles the situation when a sender receives sack options.  <a href="#af0330f4923b4dabdf51a91f725126692">More...</a><br/></td></tr>
<tr class="separator:af0330f4923b4dabdf51a91f725126692"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28b8d4408231d67649dcb56d26d7f420"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a28b8d4408231d67649dcb56d26d7f420">receiver_recv_sack</a> (<a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html">TCPMessage</a> *tcphdr)</td></tr>
<tr class="memdesc:a28b8d4408231d67649dcb56d26d7f420"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method handles the situation when a receiver receives a packet.  <a href="#a28b8d4408231d67649dcb56d26d7f420">More...</a><br/></td></tr>
<tr class="separator:a28b8d4408231d67649dcb56d26d7f420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35cfaa9743e32ecd2c505211187bd902"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a35cfaa9743e32ecd2c505211187bd902">sack_send_in_fast_recovery</a> ()</td></tr>
<tr class="memdesc:a35cfaa9743e32ecd2c505211187bd902"><td class="mdescLeft">&#160;</td><td class="mdescRight">The method handles sending sack when fast recovery is enabled.  <a href="#a35cfaa9743e32ecd2c505211187bd902">More...</a><br/></td></tr>
<tr class="separator:a35cfaa9743e32ecd2c505211187bd902"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a193f27433620c8c44564859a9da7f37b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a193f27433620c8c44564859a9da7f37b">sack_resend_segments</a> (bool first_flag)</td></tr>
<tr class="memdesc:a193f27433620c8c44564859a9da7f37b"><td class="mdescLeft">&#160;</td><td class="mdescRight">When the sack option is set, this method is used for retransmissions.  <a href="#a193f27433620c8c44564859a9da7f37b">More...</a><br/></td></tr>
<tr class="separator:a193f27433620c8c44564859a9da7f37b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:aed4d30a3e6ffdcd0b22aa7dbc651e589"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aed4d30a3e6ffdcd0b22aa7dbc651e589">get_state_name</a> (int <a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a>)</td></tr>
<tr class="memdesc:aed4d30a3e6ffdcd0b22aa7dbc651e589"><td class="mdescLeft">&#160;</td><td class="mdescRight">Translate the tcp state into a string.  <a href="#aed4d30a3e6ffdcd0b22aa7dbc651e589">More...</a><br/></td></tr>
<tr class="separator:aed4d30a3e6ffdcd0b22aa7dbc651e589"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a42d470213dbe54d26fbb1ffe6c8cbf56"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html">TCPMaster</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a></td></tr>
<tr class="memdesc:a42d470213dbe54d26fbb1ffe6c8cbf56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Point to the tcp master.  <a href="#a42d470213dbe54d26fbb1ffe6c8cbf56">More...</a><br/></td></tr>
<tr class="separator:a42d470213dbe54d26fbb1ffe6c8cbf56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8679036b779679c1807c4f425c182c3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a></td></tr>
<tr class="memdesc:ad8679036b779679c1807c4f425c182c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current state of the tcp session.  <a href="#ad8679036b779679c1807c4f425c182c3">More...</a><br/></td></tr>
<tr class="separator:ad8679036b779679c1807c4f425c182c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21969070f7b142c7f761f11f0266f812"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a21969070f7b142c7f761f11f0266f812">socket</a></td></tr>
<tr class="memdesc:a21969070f7b142c7f761f11f0266f812"><td class="mdescLeft">&#160;</td><td class="mdescRight">The socket id.  <a href="#a21969070f7b142c7f761f11f0266f812">More...</a><br/></td></tr>
<tr class="separator:a21969070f7b142c7f761f11f0266f812"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a173bf8f7e8ee35dc3929d8ab21b04c7c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html">TCPRecvWindow</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a></td></tr>
<tr class="memdesc:a173bf8f7e8ee35dc3929d8ab21b04c7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The receive window of the tcp session.  <a href="#a173bf8f7e8ee35dc3929d8ab21b04c7c">More...</a><br/></td></tr>
<tr class="separator:a173bf8f7e8ee35dc3929d8ab21b04c7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf4d0b1a9c8acff51c33f3256583a0f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html">TCPSendWindow</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a></td></tr>
<tr class="memdesc:acf4d0b1a9c8acff51c33f3256583a0f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">The send window of the tcp session.  <a href="#acf4d0b1a9c8acff51c33f3256583a0f6">More...</a><br/></td></tr>
<tr class="separator:acf4d0b1a9c8acff51c33f3256583a0f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a7d2ba14ba1e9b7d5402275d92a1ee6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">rcvwnd_size</a></td></tr>
<tr class="memdesc:a2a7d2ba14ba1e9b7d5402275d92a1ee6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remote receive window size.  <a href="#a2a7d2ba14ba1e9b7d5402275d92a1ee6">More...</a><br/></td></tr>
<tr class="separator:a2a7d2ba14ba1e9b7d5402275d92a1ee6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cd5840cbc1191efd078c08076f279d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a></td></tr>
<tr class="memdesc:a2cd5840cbc1191efd078c08076f279d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Congestion window.  <a href="#a2cd5840cbc1191efd078c08076f279d3">More...</a><br/></td></tr>
<tr class="separator:a2cd5840cbc1191efd078c08076f279d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4ddc45afd099ae4889834159cadd631"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">ssthresh</a></td></tr>
<tr class="memdesc:ac4ddc45afd099ae4889834159cadd631"><td class="mdescLeft">&#160;</td><td class="mdescRight">Threshold size for updating the congestion window.  <a href="#ac4ddc45afd099ae4889834159cadd631">More...</a><br/></td></tr>
<tr class="separator:ac4ddc45afd099ae4889834159cadd631"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1082383b1ab63ecfe7da04f4ae8fa07"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a></td></tr>
<tr class="memdesc:ad1082383b1ab63ecfe7da04f4ae8fa07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum segment size.  <a href="#ad1082383b1ab63ecfe7da04f4ae8fa07">More...</a><br/></td></tr>
<tr class="separator:ad1082383b1ab63ecfe7da04f4ae8fa07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bda2d05daddfd070c267bc73140a84d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">ndupacks</a></td></tr>
<tr class="memdesc:a3bda2d05daddfd070c267bc73140a84d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of consecutive duplicate ACKs received.  <a href="#a3bda2d05daddfd070c267bc73140a84d">More...</a><br/></td></tr>
<tr class="separator:a3bda2d05daddfd070c267bc73140a84d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab127443917c48253831516e6d0b72f09"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">nrxmits</a></td></tr>
<tr class="memdesc:ab127443917c48253831516e6d0b72f09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of consecutive packet retransmissions.  <a href="#ab127443917c48253831516e6d0b72f09">More...</a><br/></td></tr>
<tr class="separator:ab127443917c48253831516e6d0b72f09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a521a6df2160ce6154d048e5f1ba2acea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a521a6df2160ce6154d048e5f1ba2acea">persist_shift</a></td></tr>
<tr class="memdesc:a521a6df2160ce6154d048e5f1ba2acea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Left shift to get persist (exponential) timeout.  <a href="#a521a6df2160ce6154d048e5f1ba2acea">More...</a><br/></td></tr>
<tr class="separator:a521a6df2160ce6154d048e5f1ba2acea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30d3084b61186cbb889007b1ef1d79c2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">rtt_smoothed</a></td></tr>
<tr class="memdesc:a30d3084b61186cbb889007b1ef1d79c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Smoothed round trip time.  <a href="#a30d3084b61186cbb889007b1ef1d79c2">More...</a><br/></td></tr>
<tr class="separator:a30d3084b61186cbb889007b1ef1d79c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44aecd8df9f166b738771ab9bf4d36d9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a44aecd8df9f166b738771ab9bf4d36d9">rtt_measured</a></td></tr>
<tr class="memdesc:a44aecd8df9f166b738771ab9bf4d36d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Measured round trip time.  <a href="#a44aecd8df9f166b738771ab9bf4d36d9">More...</a><br/></td></tr>
<tr class="separator:a44aecd8df9f166b738771ab9bf4d36d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a07975f88fa9d44f71eaa96061bcfe4b2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">rtt_count</a></td></tr>
<tr class="memdesc:a07975f88fa9d44f71eaa96061bcfe4b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current RTT count.  <a href="#a07975f88fa9d44f71eaa96061bcfe4b2">More...</a><br/></td></tr>
<tr class="separator:a07975f88fa9d44f71eaa96061bcfe4b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7814c955b9d8b4fa0177387e1970a81"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">rtt_var</a></td></tr>
<tr class="memdesc:af7814c955b9d8b4fa0177387e1970a81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current estimated RTT variance.  <a href="#af7814c955b9d8b4fa0177387e1970a81">More...</a><br/></td></tr>
<tr class="separator:af7814c955b9d8b4fa0177387e1970a81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56a6e70f6b65a6b8b33959997f4f1af1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">rxmit_seq</a></td></tr>
<tr class="memdesc:a56a6e70f6b65a6b8b33959997f4f1af1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The last sequence number of retransmitted segment plus one.  <a href="#a56a6e70f6b65a6b8b33959997f4f1af1">More...</a><br/></td></tr>
<tr class="separator:a56a6e70f6b65a6b8b33959997f4f1af1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b15db876b9718d7c0c8c68747235a5c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a5b15db876b9718d7c0c8c68747235a5c">measured_seq</a></td></tr>
<tr class="memdesc:a5b15db876b9718d7c0c8c68747235a5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The sequence number of the segment currently being measured.  <a href="#a5b15db876b9718d7c0c8c68747235a5c">More...</a><br/></td></tr>
<tr class="separator:a5b15db876b9718d7c0c8c68747235a5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18e65bc289c8426ebd69f0714fa50a8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">recover_seq</a></td></tr>
<tr class="memdesc:a18e65bc289c8426ebd69f0714fa50a8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">The largest seqno sent out when loss happens.  <a href="#a18e65bc289c8426ebd69f0714fa50a8d">More...</a><br/></td></tr>
<tr class="separator:a18e65bc289c8426ebd69f0714fa50a8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02b1d16e35ea1d70428b1a940802ebc8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a02b1d16e35ea1d70428b1a940802ebc8">sack_pipe</a></td></tr>
<tr class="memdesc:a02b1d16e35ea1d70428b1a940802ebc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate how much can be sent during fast recovery in SACK.  <a href="#a02b1d16e35ea1d70428b1a940802ebc8">More...</a><br/></td></tr>
<tr class="separator:a02b1d16e35ea1d70428b1a940802ebc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55f340d4380db8a98d154d66ba68b5c1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">delayed_ack</a></td></tr>
<tr class="memdesc:a55f340d4380db8a98d154d66ba68b5c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if the delayed ack is turned on.  <a href="#a55f340d4380db8a98d154d66ba68b5c1">More...</a><br/></td></tr>
<tr class="separator:a55f340d4380db8a98d154d66ba68b5c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbeb5f9dae19d6315d7ac3cdefeddd04"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acbeb5f9dae19d6315d7ac3cdefeddd04">fast_recovery</a></td></tr>
<tr class="memdesc:acbeb5f9dae19d6315d7ac3cdefeddd04"><td class="mdescLeft">&#160;</td><td class="mdescRight">True if the session is still in the fast recovery mode.  <a href="#acbeb5f9dae19d6315d7ac3cdefeddd04">More...</a><br/></td></tr>
<tr class="separator:acbeb5f9dae19d6315d7ac3cdefeddd04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9758ecfbe05f6c846d428e3beec784e2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a9758ecfbe05f6c846d428e3beec784e2">timeout_loss</a></td></tr>
<tr class="memdesc:a9758ecfbe05f6c846d428e3beec784e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether it is a timeout loss.  <a href="#a9758ecfbe05f6c846d428e3beec784e2">More...</a><br/></td></tr>
<tr class="separator:a9758ecfbe05f6c846d428e3beec784e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e826c077abf934e4fa45bfbec2bda14"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1e826c077abf934e4fa45bfbec2bda14">sack_permitted</a></td></tr>
<tr class="memdesc:a1e826c077abf934e4fa45bfbec2bda14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether SACK is permitted as indicated by the peer.  <a href="#a1e826c077abf934e4fa45bfbec2bda14">More...</a><br/></td></tr>
<tr class="separator:a1e826c077abf934e4fa45bfbec2bda14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27bedc801b67220a9287e8628f782f2a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a27bedc801b67220a9287e8628f782f2a">close_issued</a></td></tr>
<tr class="memdesc:a27bedc801b67220a9287e8628f782f2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether the upper layer has issued close.  <a href="#a27bedc801b67220a9287e8628f782f2a">More...</a><br/></td></tr>
<tr class="separator:a27bedc801b67220a9287e8628f782f2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f221b49ca3d30486828f3eac199da33"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1f221b49ca3d30486828f3eac199da33">simultaneous_closing</a></td></tr>
<tr class="memdesc:a1f221b49ca3d30486828f3eac199da33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether it is a simultaneous closing.  <a href="#a1f221b49ca3d30486828f3eac199da33">More...</a><br/></td></tr>
<tr class="separator:a1f221b49ca3d30486828f3eac199da33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4636596abc9ea8b60f44ebb76e7ade7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html">TCPBlockList</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa4636596abc9ea8b60f44ebb76e7ade7">snd_scoreboard</a></td></tr>
<tr class="memdesc:aa4636596abc9ea8b60f44ebb76e7ade7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The score board for blocks sacked maintained by the sender side.  <a href="#aa4636596abc9ea8b60f44ebb76e7ade7">More...</a><br/></td></tr>
<tr class="separator:aa4636596abc9ea8b60f44ebb76e7ade7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ab9b3653da38b2ea02aab65e1042d25"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html">TCPBlockList</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4ab9b3653da38b2ea02aab65e1042d25">rcv_scoreboard</a></td></tr>
<tr class="memdesc:a4ab9b3653da38b2ea02aab65e1042d25"><td class="mdescLeft">&#160;</td><td class="mdescRight">The score board for the receiver side.  <a href="#a4ab9b3653da38b2ea02aab65e1042d25">More...</a><br/></td></tr>
<tr class="separator:a4ab9b3653da38b2ea02aab65e1042d25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ab01b89e85d83119e4cd776e34ef479"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a0ab01b89e85d83119e4cd776e34ef479">rxmit_timeout</a></td></tr>
<tr class="memdesc:a0ab01b89e85d83119e4cd776e34ef479"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current retransmission timeout.  <a href="#a0ab01b89e85d83119e4cd776e34ef479">More...</a><br/></td></tr>
<tr class="separator:a0ab01b89e85d83119e4cd776e34ef479"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74f0ff8ef6fad49191be26d984b14414"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a74f0ff8ef6fad49191be26d984b14414">rxmit_timeout_double</a></td></tr>
<tr class="separator:a74f0ff8ef6fad49191be26d984b14414"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8807efeb4c27e42a192e79917cc0e9da"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8807efeb4c27e42a192e79917cc0e9da">idle_time</a></td></tr>
<tr class="memdesc:a8807efeb4c27e42a192e79917cc0e9da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Idle time for the other party.  <a href="#a8807efeb4c27e42a192e79917cc0e9da">More...</a><br/></td></tr>
<tr class="separator:a8807efeb4c27e42a192e79917cc0e9da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee2f6564a6f2b36bc2307b03fd2a3d0b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aee2f6564a6f2b36bc2307b03fd2a3d0b">idle_time_double</a></td></tr>
<tr class="separator:aee2f6564a6f2b36bc2307b03fd2a3d0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b77936e0c278e8c4b88ecd7ac215551"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a></td></tr>
<tr class="memdesc:a8b77936e0c278e8c4b88ecd7ac215551"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retransmission timer count.  <a href="#a8b77936e0c278e8c4b88ecd7ac215551">More...</a><br/></td></tr>
<tr class="separator:a8b77936e0c278e8c4b88ecd7ac215551"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0068039bc0052784bc906becd9606a2b"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a0068039bc0052784bc906becd9606a2b">rxmit_timer_count_double</a></td></tr>
<tr class="separator:a0068039bc0052784bc906becd9606a2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c5180b90e5affbf5a38b5a3b578b849"><td class="memItemLeft" align="right" valign="top"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">msl_timer_count</a></td></tr>
<tr class="memdesc:a7c5180b90e5affbf5a38b5a3b578b849"><td class="mdescLeft">&#160;</td><td class="mdescRight">The timer count that lasts 2*msl.  <a href="#a7c5180b90e5affbf5a38b5a3b578b849">More...</a><br/></td></tr>
<tr class="separator:a7c5180b90e5affbf5a38b5a3b578b849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a119101f4488f0c1612ca97d7cf42068d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a119101f4488f0c1612ca97d7cf42068d">msl_timer_count_double</a></td></tr>
<tr class="separator:a119101f4488f0c1612ca97d7cf42068d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The TCP session. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00024">24</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>
</div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a class="anchor" id="ad1a2f59d4c85556763203b9ecce13937"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb"></a>TCP_STATE_CLOSED</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2"></a>TCP_STATE_LISTEN</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea"></a>TCP_STATE_SYN_SENT</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18"></a>TCP_STATE_SYN_RECEIVED</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb"></a>TCP_STATE_ESTABLISHED</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6"></a>TCP_STATE_CLOSE_WAIT</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296"></a>TCP_STATE_CLOSING</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57"></a>TCP_STATE_FIN_WAIT_1</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303"></a>TCP_STATE_FIN_WAIT_2</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914"></a>TCP_STATE_LAST_ACK</em>&#160;</td><td class="fielddoc">
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612"></a>TCP_STATE_TIME_WAIT</em>&#160;</td><td class="fielddoc">
</td></tr>
</table>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00029">29</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;       {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">TCP_STATE_CLOSED</a>       = 0,</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">TCP_STATE_LISTEN</a>       = 1,</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">TCP_STATE_SYN_SENT</a>     = 2,</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18">TCP_STATE_SYN_RECEIVED</a> = 3,</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a>  = 4,</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">TCP_STATE_CLOSE_WAIT</a>   = 5,</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296">TCP_STATE_CLOSING</a>      = 6,</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">TCP_STATE_FIN_WAIT_1</a>   = 7,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">TCP_STATE_FIN_WAIT_2</a>   = 8,</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914">TCP_STATE_LAST_ACK</a>     = 9,</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">TCP_STATE_TIME_WAIT</a>    = 10</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  };</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18">s3f::s3fnet::TCPSession::TCP_STATE_SYN_RECEIVED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00033">tcp_session.h:33</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_1</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00037">tcp_session.h:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">s3f::s3fnet::TCPSession::TCP_STATE_ESTABLISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00034">tcp_session.h:34</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">s3f::s3fnet::TCPSession::TCP_STATE_CLOSED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00030">tcp_session.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296">s3f::s3fnet::TCPSession::TCP_STATE_CLOSING</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00036">tcp_session.h:36</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">s3f::s3fnet::TCPSession::TCP_STATE_SYN_SENT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00032">tcp_session.h:32</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">s3f::s3fnet::TCPSession::TCP_STATE_LISTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00031">tcp_session.h:31</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914">s3f::s3fnet::TCPSession::TCP_STATE_LAST_ACK</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00039">tcp_session.h:39</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">s3f::s3fnet::TCPSession::TCP_STATE_CLOSE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00035">tcp_session.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">s3f::s3fnet::TCPSession::TCP_STATE_TIME_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00040">tcp_session.h:40</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_2</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00038">tcp_session.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a48f6965a760087a324b845f386efcfa7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">s3f::s3fnet::TCPSession::TCPSession </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html">TCPMaster</a> *&#160;</td>
          <td class="paramname"><em>master</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The constructor. </p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00029">29</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="protocol__session_8cc_source.html#l00128">s3f::s3fnet::ProtocolSession::getNowWithThousandSeparator()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="dmlobj_8h_source.html#l00047">s3f::s3fnet::DmlObject::nhi</a>, <a class="el" href="tcp__session_8cc_source.html#l00015">TCP_DUMP</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, and <a class="el" href="nhi_8cc_source.html#l00076">s3f::s3fnet::Nhi::toString()</a>.</p>
<div class="fragment"><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;                                                  :</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_socket_session.html#a56df9ae59a5569ff2f0714f6d048fda2">SocketSession</a>(<a class="code" href="namespaces3f_1_1s3fnet.html#a2d885d995be52ebf39a06e881ec67919a79c34ff2bf1768c6fc90d613edcd0908">S3FNET_PROTOCOL_TYPE_TCP</a>),</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>(master), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a21969070f7b142c7f761f11f0266f812">socket</a>(sock),</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>(0), </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">rcvwnd_size</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">ssthresh</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>(0), </div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">ndupacks</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">nrxmits</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a521a6df2160ce6154d048e5f1ba2acea">persist_shift</a>(0),</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">rtt_smoothed</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a44aecd8df9f166b738771ab9bf4d36d9">rtt_measured</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">rtt_count</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">rtt_var</a>(0),</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">rxmit_seq</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a5b15db876b9718d7c0c8c68747235a5c">measured_seq</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">recover_seq</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a02b1d16e35ea1d70428b1a940802ebc8">sack_pipe</a>(0),</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">delayed_ack</a>(<span class="keyword">false</span>), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acbeb5f9dae19d6315d7ac3cdefeddd04">fast_recovery</a>(<span class="keyword">false</span>), </div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a9758ecfbe05f6c846d428e3beec784e2">timeout_loss</a>(<span class="keyword">false</span>), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1e826c077abf934e4fa45bfbec2bda14">sack_permitted</a>(<span class="keyword">false</span>), </div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a27bedc801b67220a9287e8628f782f2a">close_issued</a>(<span class="keyword">false</span>), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1f221b49ca3d30486828f3eac199da33">simultaneous_closing</a>(<span class="keyword">false</span>),</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa4636596abc9ea8b60f44ebb76e7ade7">snd_scoreboard</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4ab9b3653da38b2ea02aab65e1042d25">rcv_scoreboard</a>(0),</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a0ab01b89e85d83119e4cd776e34ef479">rxmit_timeout</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8807efeb4c27e42a192e79917cc0e9da">idle_time</a>(0),    </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a>(0), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">msl_timer_count</a>(0)</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="tcp__session_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %s: new tcp session.\n&quot;</span>,</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_dml_object.html#a602e2119414b0758d299582bca25f30b">nhi</a>.<a class="code" href="classs3f_1_1s3fnet_1_1_nhi.html#a12348ee85a1bd6d7ddaf4876b8d32501">toString</a>(), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a0250c97bad17f18ef7037fd76f7e5083">getNowWithThousandSeparator</a>()));</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b4f89c223928fe58699e239e1cd11e6">init_state_closed</a>();</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a56a6e70f6b65a6b8b33959997f4f1af1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">s3f::s3fnet::TCPSession::rxmit_seq</a></div><div class="ttdeci">uint32 rxmit_seq</div><div class="ttdoc">The last sequence number of retransmitted segment plus one. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00157">tcp_session.h:157</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a07975f88fa9d44f71eaa96061bcfe4b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">s3f::s3fnet::TCPSession::rtt_count</a></div><div class="ttdeci">int rtt_count</div><div class="ttdoc">The current RTT count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00151">tcp_session.h:151</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a2d885d995be52ebf39a06e881ec67919a79c34ff2bf1768c6fc90d613edcd0908"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a2d885d995be52ebf39a06e881ec67919a79c34ff2bf1768c6fc90d613edcd0908">s3f::s3fnet::S3FNET_PROTOCOL_TYPE_TCP</a></div><div class="ttdoc">The Transport Control Protocol (TCP). </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00123">s3fnet.h:123</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a18e65bc289c8426ebd69f0714fa50a8d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">s3f::s3fnet::TCPSession::recover_seq</a></div><div class="ttdeci">uint32 recover_seq</div><div class="ttdoc">The largest seqno sent out when loss happens. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00163">tcp_session.h:163</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8b77936e0c278e8c4b88ecd7ac215551"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">s3f::s3fnet::TCPSession::rxmit_timer_count</a></div><div class="ttdeci">ltime_t rxmit_timer_count</div><div class="ttdoc">Retransmission timer count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00201">tcp_session.h:201</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a55f340d4380db8a98d154d66ba68b5c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">s3f::s3fnet::TCPSession::delayed_ack</a></div><div class="ttdeci">bool delayed_ack</div><div class="ttdoc">True if the delayed ack is turned on. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00169">tcp_session.h:169</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a30d3084b61186cbb889007b1ef1d79c2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">s3f::s3fnet::TCPSession::rtt_smoothed</a></div><div class="ttdeci">int rtt_smoothed</div><div class="ttdoc">Smoothed round trip time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00145">tcp_session.h:145</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acbeb5f9dae19d6315d7ac3cdefeddd04"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acbeb5f9dae19d6315d7ac3cdefeddd04">s3f::s3fnet::TCPSession::fast_recovery</a></div><div class="ttdeci">bool fast_recovery</div><div class="ttdoc">True if the session is still in the fast recovery mode. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00172">tcp_session.h:172</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a521a6df2160ce6154d048e5f1ba2acea"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a521a6df2160ce6154d048e5f1ba2acea">s3f::s3fnet::TCPSession::persist_shift</a></div><div class="ttdeci">uint32 persist_shift</div><div class="ttdoc">Left shift to get persist (exponential) timeout. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00142">tcp_session.h:142</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7c5180b90e5affbf5a38b5a3b578b849"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">s3f::s3fnet::TCPSession::msl_timer_count</a></div><div class="ttdeci">ltime_t msl_timer_count</div><div class="ttdoc">The timer count that lasts 2*msl. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00206">tcp_session.h:206</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a1e826c077abf934e4fa45bfbec2bda14"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1e826c077abf934e4fa45bfbec2bda14">s3f::s3fnet::TCPSession::sack_permitted</a></div><div class="ttdeci">bool sack_permitted</div><div class="ttdoc">Whether SACK is permitted as indicated by the peer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00178">tcp_session.h:178</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a21969070f7b142c7f761f11f0266f812"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a21969070f7b142c7f761f11f0266f812">s3f::s3fnet::TCPSession::socket</a></div><div class="ttdeci">int socket</div><div class="ttdoc">The socket id. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00115">tcp_session.h:115</a></div></div>
<div class="ttc" id="tcp__session_8cc_html_ae626a9851fdb5af743c1eb8643d81adc"><div class="ttname"><a href="tcp__session_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a></div><div class="ttdeci">#define TCP_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00015">tcp_session.cc:15</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a02b1d16e35ea1d70428b1a940802ebc8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a02b1d16e35ea1d70428b1a940802ebc8">s3f::s3fnet::TCPSession::sack_pipe</a></div><div class="ttdeci">uint32 sack_pipe</div><div class="ttdoc">Indicate how much can be sent during fast recovery in SACK. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00166">tcp_session.h:166</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a1f221b49ca3d30486828f3eac199da33"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1f221b49ca3d30486828f3eac199da33">s3f::s3fnet::TCPSession::simultaneous_closing</a></div><div class="ttdeci">bool simultaneous_closing</div><div class="ttdoc">Whether it is a simultaneous closing. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00184">tcp_session.h:184</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a9758ecfbe05f6c846d428e3beec784e2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a9758ecfbe05f6c846d428e3beec784e2">s3f::s3fnet::TCPSession::timeout_loss</a></div><div class="ttdeci">bool timeout_loss</div><div class="ttdoc">Whether it is a timeout loss. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00175">tcp_session.h:175</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_af7814c955b9d8b4fa0177387e1970a81"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">s3f::s3fnet::TCPSession::rtt_var</a></div><div class="ttdeci">int rtt_var</div><div class="ttdoc">Current estimated RTT variance. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00154">tcp_session.h:154</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_dml_object_html_a602e2119414b0758d299582bca25f30b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_dml_object.html#a602e2119414b0758d299582bca25f30b">s3f::s3fnet::DmlObject::nhi</a></div><div class="ttdeci">Nhi nhi</div><div class="ttdoc">The nhi address to identify the object. </div><div class="ttdef"><b>Definition:</b> <a href="dmlobj_8h_source.html#l00047">dmlobj.h:47</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ac4ddc45afd099ae4889834159cadd631"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">s3f::s3fnet::TCPSession::ssthresh</a></div><div class="ttdeci">uint32 ssthresh</div><div class="ttdoc">Threshold size for updating the congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00130">tcp_session.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a5b15db876b9718d7c0c8c68747235a5c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a5b15db876b9718d7c0c8c68747235a5c">s3f::s3fnet::TCPSession::measured_seq</a></div><div class="ttdeci">uint32 measured_seq</div><div class="ttdoc">The sequence number of the segment currently being measured. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00160">tcp_session.h:160</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a27bedc801b67220a9287e8628f782f2a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a27bedc801b67220a9287e8628f782f2a">s3f::s3fnet::TCPSession::close_issued</a></div><div class="ttdeci">bool close_issued</div><div class="ttdoc">Whether the upper layer has issued close. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00181">tcp_session.h:181</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1082383b1ab63ecfe7da04f4ae8fa07"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">s3f::s3fnet::TCPSession::mss</a></div><div class="ttdeci">uint32 mss</div><div class="ttdoc">Maximum segment size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00133">tcp_session.h:133</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab127443917c48253831516e6d0b72f09"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">s3f::s3fnet::TCPSession::nrxmits</a></div><div class="ttdeci">uint32 nrxmits</div><div class="ttdoc">Number of consecutive packet retransmissions. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00139">tcp_session.h:139</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nhi_html_a12348ee85a1bd6d7ddaf4876b8d32501"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nhi.html#a12348ee85a1bd6d7ddaf4876b8d32501">s3f::s3fnet::Nhi::toString</a></div><div class="ttdeci">char * toString(char *buf)</div><div class="ttdoc">Returns a char array representation of this NHI. </div><div class="ttdef"><b>Definition:</b> <a href="nhi_8cc_source.html#l00076">nhi.cc:76</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_aa4636596abc9ea8b60f44ebb76e7ade7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa4636596abc9ea8b60f44ebb76e7ade7">s3f::s3fnet::TCPSession::snd_scoreboard</a></div><div class="ttdeci">TCPBlockList * snd_scoreboard</div><div class="ttdoc">The score board for blocks sacked maintained by the sender side. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00187">tcp_session.h:187</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8807efeb4c27e42a192e79917cc0e9da"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8807efeb4c27e42a192e79917cc0e9da">s3f::s3fnet::TCPSession::idle_time</a></div><div class="ttdeci">ltime_t idle_time</div><div class="ttdoc">Idle time for the other party. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00197">tcp_session.h:197</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a0250c97bad17f18ef7037fd76f7e5083"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a0250c97bad17f18ef7037fd76f7e5083">s3f::s3fnet::ProtocolSession::getNowWithThousandSeparator</a></div><div class="ttdeci">char * getNowWithThousandSeparator()</div><div class="ttdoc">For printing the current simulation time in a better readable format. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00128">protocol_session.cc:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_session_html_a56df9ae59a5569ff2f0714f6d048fda2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_session.html#a56df9ae59a5569ff2f0714f6d048fda2">s3f::s3fnet::SocketSession::SocketSession</a></div><div class="ttdeci">SocketSession(uint32 proto=0, IPADDR srcip=0, uint16 srcport=0, IPADDR destip=0, uint16 destport=0)</div><div class="ttdoc">The constructor. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00177">socket_session.h:177</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2a7d2ba14ba1e9b7d5402275d92a1ee6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">s3f::s3fnet::TCPSession::rcvwnd_size</a></div><div class="ttdeci">uint32 rcvwnd_size</div><div class="ttdoc">Remote receive window size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00124">tcp_session.h:124</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a4ab9b3653da38b2ea02aab65e1042d25"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4ab9b3653da38b2ea02aab65e1042d25">s3f::s3fnet::TCPSession::rcv_scoreboard</a></div><div class="ttdeci">TCPBlockList * rcv_scoreboard</div><div class="ttdoc">The score board for the receiver side. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00190">tcp_session.h:190</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a0ab01b89e85d83119e4cd776e34ef479"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a0ab01b89e85d83119e4cd776e34ef479">s3f::s3fnet::TCPSession::rxmit_timeout</a></div><div class="ttdeci">ltime_t rxmit_timeout</div><div class="ttdoc">The current retransmission timeout. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00193">tcp_session.h:193</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a3bda2d05daddfd070c267bc73140a84d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">s3f::s3fnet::TCPSession::ndupacks</a></div><div class="ttdeci">uint32 ndupacks</div><div class="ttdoc">Number of consecutive duplicate ACKs received. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00136">tcp_session.h:136</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a44aecd8df9f166b738771ab9bf4d36d9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a44aecd8df9f166b738771ab9bf4d36d9">s3f::s3fnet::TCPSession::rtt_measured</a></div><div class="ttdeci">int rtt_measured</div><div class="ttdoc">Measured round trip time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00148">tcp_session.h:148</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2cd5840cbc1191efd078c08076f279d3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">s3f::s3fnet::TCPSession::cwnd</a></div><div class="ttdeci">uint32 cwnd</div><div class="ttdoc">Congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00127">tcp_session.h:127</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8b4f89c223928fe58699e239e1cd11e6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b4f89c223928fe58699e239e1cd11e6">s3f::s3fnet::TCPSession::init_state_closed</a></div><div class="ttdeci">int init_state_closed()</div><div class="ttdoc">Change to CLOSED state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00020">tcp_state.cc:20</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afe5ff324a055df0f040a36f1ef4dceda"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">s3f::s3fnet::TCPSession::~TCPSession </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The destructor. </p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00050">50</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, and <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>) <span class="keyword">delete</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>) <span class="keyword">delete</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a4c61e120abde9416ffbc522c67ff9f90"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a>&#160;</td>
          <td class="paramname"><em>destip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a>&#160;</td>
          <td class="paramname"><em>destport</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Connect to a destination ip address and port number. </p>
<p>Returns true if the connection has been established successfuly. </p>

<p>Implements <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a226203f1339d9c21b88e6d66a50372cb">s3f::s3fnet::SocketSession</a>.</p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00056">56</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8cc_source.html#l00178">active_open()</a>, <a class="el" href="tcp__session_8cc_source.html#l00026">APP_ACTION_CONNECT</a>, and <a class="el" href="tcp__session_8cc_source.html#l00151">is_ok()</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7330dac4791dcf387baa1c6cb9f31a8e">is_ok</a>(<a class="code" href="tcp__session_8cc.html#a21dc47744c49eef49078267fa1868147">APP_ACTION_CONNECT</a>))</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  {</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// Not allowing connection from LISTEN state. Can be added easily here,</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">// by just switching the state back to CLOSED and connecting</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a708460a1c9ddcf199236e844d942f6ee">active_open</a>(destip, destport);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;}</div>
<div class="ttc" id="tcp__session_8cc_html_a21dc47744c49eef49078267fa1868147"><div class="ttname"><a href="tcp__session_8cc.html#a21dc47744c49eef49078267fa1868147">APP_ACTION_CONNECT</a></div><div class="ttdeci">#define APP_ACTION_CONNECT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00026">tcp_session.cc:26</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a708460a1c9ddcf199236e844d942f6ee"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a708460a1c9ddcf199236e844d942f6ee">s3f::s3fnet::TCPSession::active_open</a></div><div class="ttdeci">bool active_open(IPADDR dst_ip, uint16 dst_port)</div><div class="ttdoc">Active open. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00178">tcp_session.cc:178</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7330dac4791dcf387baa1c6cb9f31a8e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7330dac4791dcf387baa1c6cb9f31a8e">s3f::s3fnet::TCPSession::is_ok</a></div><div class="ttdeci">bool is_ok(int action)</div><div class="ttdoc">Return true if the given action is ok at the time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00151">tcp_session.cc:151</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abade7fd648210833a80a546d30c2ea78"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::disconnect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Disconnect this session. </p>

<p>Implements <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a9c116ae47df625c46acfd06e30ccfc30">s3f::s3fnet::SocketSession</a>.</p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00067">67</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8cc_source.html#l00025">APP_ACTION_DISCONNECT</a>, <a class="el" href="tcp__session_8cc_source.html#l00208">appl_close()</a>, and <a class="el" href="tcp__session_8cc_source.html#l00151">is_ok()</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;{</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7330dac4791dcf387baa1c6cb9f31a8e">is_ok</a>(<a class="code" href="tcp__session_8cc.html#afcf9a17eb3112997ab1bd2df8873666f">APP_ACTION_DISCONNECT</a>))</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a921479f6898db6df552b76ee32e91194">appl_close</a>();</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a921479f6898db6df552b76ee32e91194"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a921479f6898db6df552b76ee32e91194">s3f::s3fnet::TCPSession::appl_close</a></div><div class="ttdeci">void appl_close()</div><div class="ttdoc">Close the connection. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00208">tcp_session.cc:208</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7330dac4791dcf387baa1c6cb9f31a8e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7330dac4791dcf387baa1c6cb9f31a8e">s3f::s3fnet::TCPSession::is_ok</a></div><div class="ttdeci">bool is_ok(int action)</div><div class="ttdoc">Return true if the given action is ok at the time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00151">tcp_session.cc:151</a></div></div>
<div class="ttc" id="tcp__session_8cc_html_afcf9a17eb3112997ab1bd2df8873666f"><div class="ttname"><a href="tcp__session_8cc.html#afcf9a17eb3112997ab1bd2df8873666f">APP_ACTION_DISCONNECT</a></div><div class="ttdeci">#define APP_ACTION_DISCONNECT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00025">tcp_session.cc:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aeadeb478c0f7dd52ff4e8d0e5ccdf8d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::send </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *&#160;</td>
          <td class="paramname"><em>msg</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send the given number of bytes. </p>
<p>The msg parameter, if not NULL, points to the message storage. The method returns the number of bytes that have truly been sent out. -1 means error. </p>

<p>Implements <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a5d687ac3d1edc89a116a970ffed86640">s3f::s3fnet::SocketSession</a>.</p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00075">75</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8cc_source.html#l00023">APP_ACTION_SEND</a>, <a class="el" href="tcp__sender_8cc_source.html#l00023">appl_send()</a>, and <a class="el" href="tcp__session_8cc_source.html#l00151">is_ok()</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7330dac4791dcf387baa1c6cb9f31a8e">is_ok</a>(<a class="code" href="tcp__session_8cc.html#a39a8de821aa83b57c31a70d1d6c7acb5">APP_ACTION_SEND</a>))</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aeef1fea77584dc5a23d5134973c5238a">appl_send</a>(length, msg);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  }</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div>
<div class="ttc" id="tcp__session_8cc_html_a39a8de821aa83b57c31a70d1d6c7acb5"><div class="ttname"><a href="tcp__session_8cc.html#a39a8de821aa83b57c31a70d1d6c7acb5">APP_ACTION_SEND</a></div><div class="ttdeci">#define APP_ACTION_SEND</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00023">tcp_session.cc:23</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7330dac4791dcf387baa1c6cb9f31a8e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7330dac4791dcf387baa1c6cb9f31a8e">s3f::s3fnet::TCPSession::is_ok</a></div><div class="ttdeci">bool is_ok(int action)</div><div class="ttdoc">Return true if the given action is ok at the time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00151">tcp_session.cc:151</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_aeef1fea77584dc5a23d5134973c5238a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aeef1fea77584dc5a23d5134973c5238a">s3f::s3fnet::TCPSession::appl_send</a></div><div class="ttdeci">uint32 appl_send(uint32 length, byte *msg)</div><div class="ttdoc">When the upper layer attempts to send out data, this function will be called. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00023">tcp_sender.cc:23</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afc39a9f019dc37f72f8ce21dfc9a509d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::recv </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *&#160;</td>
          <td class="paramname"><em>msg</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receive a message of the given size. </p>
<p>The msg parameter, if not NULL, points to the buffer to store the message. The method returns the number of bytes that have been truly received. -1 means error. </p>

<p>Implements <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#ac450fc1f9ac9a98e049674e736ec7b70">s3f::s3fnet::SocketSession</a>.</p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00084">84</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8cc_source.html#l00024">APP_ACTION_RECEIVE</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00022">appl_recv()</a>, and <a class="el" href="tcp__session_8cc_source.html#l00151">is_ok()</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7330dac4791dcf387baa1c6cb9f31a8e">is_ok</a>(<a class="code" href="tcp__session_8cc.html#a9b24cc10c8ba8ce8aa81d8a555c31c07">APP_ACTION_RECEIVE</a>))</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2431ba6da58fbd49faf086ca1670887d">appl_recv</a>(length, msg);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7330dac4791dcf387baa1c6cb9f31a8e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7330dac4791dcf387baa1c6cb9f31a8e">s3f::s3fnet::TCPSession::is_ok</a></div><div class="ttdeci">bool is_ok(int action)</div><div class="ttdoc">Return true if the given action is ok at the time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00151">tcp_session.cc:151</a></div></div>
<div class="ttc" id="tcp__session_8cc_html_a9b24cc10c8ba8ce8aa81d8a555c31c07"><div class="ttname"><a href="tcp__session_8cc.html#a9b24cc10c8ba8ce8aa81d8a555c31c07">APP_ACTION_RECEIVE</a></div><div class="ttdeci">#define APP_ACTION_RECEIVE</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00024">tcp_session.cc:24</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2431ba6da58fbd49faf086ca1670887d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2431ba6da58fbd49faf086ca1670887d">s3f::s3fnet::TCPSession::appl_recv</a></div><div class="ttdeci">uint32 appl_recv(uint32 length, byte *msg)</div><div class="ttdoc">When the upper layer wants to receive data (length bytes) from TCP, this function will be called...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__receiver_8cc_source.html#l00022">tcp_receiver.cc:22</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a89eaa5a43b3c6eac7d96cdd3e0897704"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::listen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Passive open. </p>
<p>Returns true if there is an incoming connection that has been established successfully. </p>

<p>Implements <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a95d5063f90b0a34c5d0fa3780c24e532">s3f::s3fnet::SocketSession</a>.</p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00093">93</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8cc_source.html#l00027">APP_ACTION_LISTEN</a>, <a class="el" href="tcp__session_8cc_source.html#l00151">is_ok()</a>, and <a class="el" href="tcp__session_8cc_source.html#l00197">passive_open()</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;{</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7330dac4791dcf387baa1c6cb9f31a8e">is_ok</a>(<a class="code" href="tcp__session_8cc.html#a1b751a213e9142ce250dd87e3659e411">APP_ACTION_LISTEN</a>))</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa34e96f497bd431280c0af0a07446616">passive_open</a>();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_aa34e96f497bd431280c0af0a07446616"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa34e96f497bd431280c0af0a07446616">s3f::s3fnet::TCPSession::passive_open</a></div><div class="ttdeci">bool passive_open()</div><div class="ttdoc">Passive open. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00197">tcp_session.cc:197</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7330dac4791dcf387baa1c6cb9f31a8e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7330dac4791dcf387baa1c6cb9f31a8e">s3f::s3fnet::TCPSession::is_ok</a></div><div class="ttdeci">bool is_ok(int action)</div><div class="ttdoc">Return true if the given action is ok at the time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00151">tcp_session.cc:151</a></div></div>
<div class="ttc" id="tcp__session_8cc_html_a1b751a213e9142ce250dd87e3659e411"><div class="ttname"><a href="tcp__session_8cc.html#a1b751a213e9142ce250dd87e3659e411">APP_ACTION_LISTEN</a></div><div class="ttdeci">#define APP_ACTION_LISTEN</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00027">tcp_session.cc:27</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8ea80f25ead5c839c2cd332dd0544dc8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::connected </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether a connection is made. </p>
<p>Returns true if connected. </p>

<p>Implements <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#aec021280ede42e402b92d1acbdf94e88">s3f::s3fnet::SocketSession</a>.</p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00103">103</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, and <a class="el" href="tcp__session_8h_source.html#l00034">TCP_STATE_ESTABLISHED</a>.</p>
<div class="fragment"><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;{</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> &gt;= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">s3f::s3fnet::TCPSession::TCP_STATE_ESTABLISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00034">tcp_session.h:34</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a683a93af191de2d905bacf35b9319e4b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::setSource </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a>&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a>&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the ip and the port number of the connection. </p>
<p>Returns true if set up correctly. </p>

<p>Implements <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a8c4f49c6dd370171179404f0bd3d487d">s3f::s3fnet::SocketSession</a>.</p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00108">108</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="socket__session_8h_source.html#l00135">s3f::s3fnet::SessionID::src_ip</a>, and <a class="el" href="socket__session_8h_source.html#l00141">s3f::s3fnet::SessionID::src_port</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#afc2e0c48325b4faff47ca2f155a4956c">src_ip</a>   = ip; </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#a8b7a04b54cb31c4d060657593ed88d2f">src_port</a> = port;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_a8b7a04b54cb31c4d060657593ed88d2f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#a8b7a04b54cb31c4d060657593ed88d2f">s3f::s3fnet::SessionID::src_port</a></div><div class="ttdeci">uint16 src_port</div><div class="ttdoc">Source port number. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00141">socket_session.h:141</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_afc2e0c48325b4faff47ca2f155a4956c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#afc2e0c48325b4faff47ca2f155a4956c">s3f::s3fnet::SessionID::src_ip</a></div><div class="ttdeci">IPADDR src_ip</div><div class="ttdoc">Source ip address. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00135">socket_session.h:135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a669e919cf067b2c024b3b7a9420de8ca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::abort </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Abort the session. </p>

<p>Implements <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#af3eeb69a381eee6efa002ef12dc2ea87">s3f::s3fnet::SocketSession</a>.</p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00116">116</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__seqwnd_8h_source.html#l00130">s3f::s3fnet::TCPSeqWindow::expect()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00126">s3f::s3fnet::TCPSeqWindow::next()</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__session_8cc_source.html#l00258">reset()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, and <a class="el" href="tcp__message_8h_source.html#l00028">s3f::s3fnet::TCPMessage::TCP_FLAG_RST</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>)</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  {</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    assert(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">next</a>(), 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f">TCPMessage::TCP_FLAG_RST</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6aafb0e4307fa93fe65f309573deb8f5">reset</a>();</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_ac2e2ec8a145a83d1489748fd6f7fd8b3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">s3f::s3fnet::TCPSeqWindow::next</a></div><div class="ttdeci">uint32 next()</div><div class="ttdoc">Like firstUnused method, but also uses SYN &amp; FIN segments; the method is used for sending window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00126">tcp_seqwnd.h:126</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a81734c4c094d55f4551a80f9722c5221"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">s3f::s3fnet::TCPSeqWindow::expect</a></div><div class="ttdeci">uint32 expect()</div><div class="ttdoc">Like start method, but also uses SYN &amp; FIN segments; the method is used for receiving window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00130">tcp_seqwnd.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_afefcda998f745d17d668577610ab8c23"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">s3f::s3fnet::TCPSession::send_data</a></div><div class="ttdeci">void send_data(uint32 seqno, uint32 datalen=0, byte mask=0, uint32 ackno=0, bool need_calc_rtt=false, bool need_set_rextimeout=false)</div><div class="ttdoc">Physically send the data to the IP layer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00055">tcp_sender.cc:55</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f">s3f::s3fnet::TCPMessage::TCP_FLAG_RST</a></div><div class="ttdoc">connection to be reset </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00028">tcp_message.h:28</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a6aafb0e4307fa93fe65f309573deb8f5"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6aafb0e4307fa93fe65f309573deb8f5">s3f::s3fnet::TCPSession::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Reset the session to CLOSED state and wake up application. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00258">tcp_session.cc:258</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab3ff97f10a4cef1e6c541e524effe383"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void s3f::s3fnet::TCPSession::setSocketID </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set socket. </p>

<p>Implements <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a1009aeaa435bcc763e3ea779a3b158eb">s3f::s3fnet::SocketSession</a>.</p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00088">88</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00115">socket</a>.</p>
<div class="fragment"><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{ <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a21969070f7b142c7f761f11f0266f812">socket</a> = sock; }</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a21969070f7b142c7f761f11f0266f812"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a21969070f7b142c7f761f11f0266f812">s3f::s3fnet::TCPSession::socket</a></div><div class="ttdeci">int socket</div><div class="ttdoc">The socket id. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00115">tcp_session.h:115</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaacde1d637d1fc1367cf8d9469cc416b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="classs3f_1_1s3fnet_1_1_session_master.html">SessionMaster</a>* s3f::s3fnet::TCPSession::getSessionMaster </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the master protocol session. </p>

<p>Implements <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a5f85d65696a79c0c6e1948659c77131e">s3f::s3fnet::SocketSession</a>.</p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00091">91</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>; }</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a105570d1fec22a14ca7a51bbed7496ca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::release </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Release this session if unnecessary. </p>

<p>Implements <a class="el" href="classs3f_1_1s3fnet_1_1_socket_session.html#a08bceb3d5859458407b05387f01d3ebb">s3f::s3fnet::SocketSession</a>.</p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00126">126</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__master_8cc_source.html#l00483">s3f::s3fnet::TCPMaster::deleteSession()</a>, and <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>.</p>
<div class="fragment"><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;{</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  assert(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a68e0ed6f74957aaeb9f9c1d3c22b6471">deleteSession</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a68e0ed6f74957aaeb9f9c1d3c22b6471"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a68e0ed6f74957aaeb9f9c1d3c22b6471">s3f::s3fnet::TCPMaster::deleteSession</a></div><div class="ttdeci">void deleteSession(TCPSession *session)</div><div class="ttdoc">Reclaim a TCP session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8cc_source.html#l00483">tcp_master.cc:483</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0f8b326df8499a10b596e48d267dac59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::receive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html">TCPMessage</a> *&#160;</td>
          <td class="paramname"><em>tcphdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receive the message popped up from the ip session. </p>

<p>Definition at line <a class="el" href="tcp__receiver_8cc_source.html#l00040">40</a> of file <a class="el" href="tcp__receiver_8cc_source.html">tcp_receiver.cc</a>.</p>

<p>References <a class="el" href="tcp__message_8h_source.html#l00044">s3f::s3fnet::TCPMessage::ackno</a>, <a class="el" href="tcp__sender_8cc_source.html#l00173">acknowledge()</a>, <a class="el" href="tcp__rcvwnd_8cc_source.html#l00037">s3f::s3fnet::TCPRecvWindow::available()</a>, <a class="el" href="tcp__sndwnd_8h_source.html#l00036">s3f::s3fnet::TCPSendWindow::canSend()</a>, <a class="el" href="tcp__session_8h_source.html#l00181">close_issued</a>, <a class="el" href="socket__session_8h_source.html#l00295">s3f::s3fnet::SocketSignal::DATA_AVAILABLE</a>, <a class="el" href="tcp__sndwnd_8h_source.html#l00052">s3f::s3fnet::TCPSendWindow::dataInBuffer()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00150">s3f::s3fnet::TCPSeqWindow::empty()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00043">s3f::s3fnet::TCPSeqWindow::firstUnused()</a>, <a class="el" href="tcp__message_8h_source.html#l00050">s3f::s3fnet::TCPMessage::flags</a>, <a class="el" href="tcp__session_8cc_source.html#l00132">get_state_name()</a>, <a class="el" href="protocol__session_8cc_source.html#l00128">s3f::s3fnet::ProtocolSession::getNowWithThousandSeparator()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="tcp__state_8cc_source.html#l00166">init_state_fin_wait_1()</a>, <a class="el" href="tcp__sndwnd_8h_source.html#l00042">s3f::s3fnet::TCPSendWindow::needToRequest()</a>, <a class="el" href="dmlobj_8h_source.html#l00047">s3f::s3fnet::DmlObject::nhi</a>, <a class="el" href="socket__session_8h_source.html#l00293">s3f::s3fnet::SocketSignal::NO_SIGNAL</a>, <a class="el" href="socket__session_8h_source.html#l00296">s3f::s3fnet::SocketSignal::OK_TO_SEND</a>, <a class="el" href="protocol__message_8h_source.html#l00103">s3f::s3fnet::ProtocolMessage::payload()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00183">process_FIN()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00316">process_new_data()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00146">process_SYN()</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="data__message_8cc_source.html#l00078">s3f::s3fnet::DataMessage::realByteCount()</a>, <a class="el" href="tcp__session_8cc_source.html#l00258">reset()</a>, <a class="el" href="tcp__rcvwnd_8h_source.html#l00098">s3f::s3fnet::TCPRecvWindow::resetRecvParameters()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00110">segment_and_send()</a>, <a class="el" href="tcp__message_8h_source.html#l00041">s3f::s3fnet::TCPMessage::seqno</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00016">TCP_DUMP</a>, <a class="el" href="tcp__message_8h_source.html#l00030">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a>, <a class="el" href="tcp__message_8h_source.html#l00026">s3f::s3fnet::TCPMessage::TCP_FLAG_FIN</a>, <a class="el" href="tcp__message_8h_source.html#l00029">s3f::s3fnet::TCPMessage::TCP_FLAG_PSH</a>, <a class="el" href="tcp__message_8h_source.html#l00028">s3f::s3fnet::TCPMessage::TCP_FLAG_RST</a>, <a class="el" href="tcp__message_8h_source.html#l00027">s3f::s3fnet::TCPMessage::TCP_FLAG_SYN</a>, <a class="el" href="tcp__message_8h_source.html#l00031">s3f::s3fnet::TCPMessage::TCP_FLAG_URG</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, <a class="el" href="tcp__session_8h_source.html#l00035">TCP_STATE_CLOSE_WAIT</a>, <a class="el" href="tcp__session_8h_source.html#l00030">TCP_STATE_CLOSED</a>, <a class="el" href="tcp__session_8h_source.html#l00034">TCP_STATE_ESTABLISHED</a>, <a class="el" href="tcp__session_8h_source.html#l00037">TCP_STATE_FIN_WAIT_1</a>, <a class="el" href="tcp__session_8h_source.html#l00038">TCP_STATE_FIN_WAIT_2</a>, <a class="el" href="tcp__session_8h_source.html#l00031">TCP_STATE_LISTEN</a>, <a class="el" href="tcp__session_8h_source.html#l00032">TCP_STATE_SYN_SENT</a>, <a class="el" href="nhi_8cc_source.html#l00076">s3f::s3fnet::Nhi::toString()</a>, <a class="el" href="tcp__session_8cc_source.html#l00269">wake_app()</a>, and <a class="el" href="tcp__message_8h_source.html#l00053">s3f::s3fnet::TCPMessage::wsize</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;{</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <a class="code" href="tcp__receiver_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %s: receive(), flags=[%c%c%c%c%c%c] &quot;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                  <span class="stringliteral">&quot;seqno=%u, ackno=%u, wsize=%u, len=%u [state=%s]\n&quot;</span>,</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_dml_object.html#a602e2119414b0758d299582bca25f30b">nhi</a>.<a class="code" href="classs3f_1_1s3fnet_1_1_nhi.html#a12348ee85a1bd6d7ddaf4876b8d32501">toString</a>(),</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a0250c97bad17f18ef7037fd76f7e5083">getNowWithThousandSeparator</a>(),</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                  (tcphdr-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">TCPMessage::TCP_FLAG_SYN</a>) ? <span class="charliteral">&#39;S&#39;</span> : <span class="charliteral">&#39;.&#39;</span>,</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                  (tcphdr-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7">TCPMessage::TCP_FLAG_FIN</a>) ? <span class="charliteral">&#39;F&#39;</span> : <span class="charliteral">&#39;.&#39;</span>,</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                  (tcphdr-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f">TCPMessage::TCP_FLAG_RST</a>) ? <span class="charliteral">&#39;R&#39;</span> : <span class="charliteral">&#39;.&#39;</span>,</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                  (tcphdr-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">TCPMessage::TCP_FLAG_ACK</a>) ? <span class="charliteral">&#39;A&#39;</span> : <span class="charliteral">&#39;.&#39;</span>,</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;                  (tcphdr-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9a8fb73b0c2758d10b5bb7263f5bb7414c">TCPMessage::TCP_FLAG_URG</a>) ? <span class="charliteral">&#39;U&#39;</span> : <span class="charliteral">&#39;.&#39;</span>,</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;                  (tcphdr-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9a38acf573e21248182a78dc49bcb329b7">TCPMessage::TCP_FLAG_PSH</a>) ? <span class="charliteral">&#39;P&#39;</span> : <span class="charliteral">&#39;.&#39;</span>,               </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;                  tcphdr-&gt;seqno, tcphdr-&gt;ackno, tcphdr-&gt;wsize,</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;                  tcphdr-&gt;payload() ? ((DataMessage*)tcphdr-&gt;payload())-&gt;realByteCount() : 0,</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aed4d30a3e6ffdcd0b22aa7dbc651e589">get_state_name</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a>)));</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;  <span class="comment">// if true ack will be sent immediately</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="keywordtype">bool</span> must_ack = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="keywordtype">int</span> signal = 0;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="comment">// if it&#39;s RST segment, reset the connection</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">if</span>(tcphdr-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f">TCPMessage::TCP_FLAG_RST</a>)</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;  {</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> != <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">TCP_STATE_LISTEN</a>) <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6aafb0e4307fa93fe65f309573deb8f5">reset</a>();</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  }</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="comment">// if it&#39;s a SYN segment, handle it</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;  <span class="keywordflow">if</span>(tcphdr-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">TCPMessage::TCP_FLAG_SYN</a>)</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a709cbd1c506cf6d33b510f3b570c58f8">process_SYN</a>(tcphdr, signal);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">TCP_STATE_SYN_SENT</a>) must_ack = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="comment">// if it&#39;s a FIN segment, handle it</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="keywordflow">if</span>(tcphdr-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7">TCPMessage::TCP_FLAG_FIN</a>)</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  {</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6cf7d70612655484b01b2ab67de60758">process_FIN</a>(signal);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    must_ack = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  <span class="comment">// handle new data</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  DataMessage* payload = (DataMessage*)tcphdr-&gt;payload();</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  <span class="keywordflow">if</span>((payload &amp;&amp; payload-&gt;realByteCount() &gt; 0) &amp;&amp;  <span class="comment">// there is new data coming</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;     (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a> || <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">TCP_STATE_FIN_WAIT_1</a> || </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">TCP_STATE_FIN_WAIT_2</a>))</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acd4de03ec3bfe3bb54fda7f7fe772c4f">process_new_data</a>(payload, tcphdr-&gt;seqno))</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      must_ack = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    </div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">// collect the bytes report to the socket layer once we received</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// the expected bytes</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#add83bf45db32b2a44b0f68ff58caa32a">available</a>())</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">SocketSignal::DATA_AVAILABLE</a>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#a782fefd720008f2d49e9e2d9a8f502a6">resetRecvParameters</a>();</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="comment">// if it&#39;s an ACK segment, handle it</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <span class="keywordflow">if</span>(tcphdr-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">TCPMessage::TCP_FLAG_ACK</a>)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a79fcd28a086c6e6d4590d168a98c1326">process_ACK</a>(tcphdr, signal))  must_ack = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  }</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">TCP_STATE_CLOSED</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// if we got a non-zero sized packet or must ack immediately then</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="comment">// send an ACK</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <span class="keywordflow">if</span>(must_ack || (payload &amp;&amp; payload-&gt;realByteCount() &gt; 0))</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad018222843ceeab54f405d80a938c9a2">acknowledge</a>(must_ack); </div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  </div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// check whether to send data</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a> || <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">TCP_STATE_CLOSE_WAIT</a>)</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// figure how much data we could send out</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> len_to_send = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#a192325760e562fc35214a77e9831011d">canSend</a>();</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// check whether we can send out packets.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="keywordflow">if</span>(len_to_send &gt; 0)</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> seqno = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>();</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4fbadc4c967c43982e16d9c8c249fbc6">segment_and_send</a>(seqno, len_to_send);      </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#a5747624547c6513355bdbafcd681b82d">needToRequest</a>())</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda">SocketSignal::OK_TO_SEND</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;  </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a27bedc801b67220a9287e8628f782f2a">close_issued</a> &amp;&amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a>)</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// if the upper layer has issued close, check whether</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#aecf8e034a9cfb5e2fdd292ae0008c6e7">empty</a>() &amp;&amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#acf3cacfd0832a6f14ab0db8bdd2e1771">dataInBuffer</a>() == 0)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a5639b7e3754415546e5c6f994eea7a2b">init_state_fin_wait_1</a>();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    }</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="comment">//printf(&quot;state=%d, signal=%d, close_issued=%d\n&quot;, state, signal, close_issued);</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="comment">// if there is a signal to send to application then send it ghyan</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  <span class="comment">// for further consideration!</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  <span class="keywordflow">if</span>(signal != <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a41b2423b9fda0fcc0462417173975c63">SocketSignal::NO_SIGNAL</a>) <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad5c1f75625bdc14d1f8789daed56e213">wake_app</a>(signal);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_1</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00037">tcp_session.h:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a5639b7e3754415546e5c6f994eea7a2b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a5639b7e3754415546e5c6f994eea7a2b">s3f::s3fnet::TCPSession::init_state_fin_wait_1</a></div><div class="ttdeci">int init_state_fin_wait_1()</div><div class="ttdoc">Change to FIN_WAIT_1 state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00166">tcp_state.cc:166</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9a38acf573e21248182a78dc49bcb329b7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9a38acf573e21248182a78dc49bcb329b7">s3f::s3fnet::TCPMessage::TCP_FLAG_PSH</a></div><div class="ttdoc">push operation invoked </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00029">tcp_message.h:29</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a41b2423b9fda0fcc0462417173975c63"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a41b2423b9fda0fcc0462417173975c63">s3f::s3fnet::SocketSignal::NO_SIGNAL</a></div><div class="ttdoc">No signal. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00293">socket_session.h:293</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9a8fb73b0c2758d10b5bb7263f5bb7414c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9a8fb73b0c2758d10b5bb7263f5bb7414c">s3f::s3fnet::TCPMessage::TCP_FLAG_URG</a></div><div class="ttdoc">urgent pointer field valid </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00031">tcp_message.h:31</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7">s3f::s3fnet::TCPMessage::TCP_FLAG_FIN</a></div><div class="ttdoc">final segmenet from sender </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00026">tcp_message.h:26</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f">s3f::s3fnet::TCPMessage::TCP_FLAG_RST</a></div><div class="ttdoc">connection to be reset </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00028">tcp_message.h:28</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a79fcd28a086c6e6d4590d168a98c1326"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a79fcd28a086c6e6d4590d168a98c1326">s3f::s3fnet::TCPSession::process_ACK</a></div><div class="ttdeci">bool process_ACK(TCPMessage *tcphdr, int &amp;signal)</div><div class="ttdoc">Process ACK packets. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__receiver_8cc_source.html#l00222">tcp_receiver.cc:222</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_aed4d30a3e6ffdcd0b22aa7dbc651e589"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aed4d30a3e6ffdcd0b22aa7dbc651e589">s3f::s3fnet::TCPSession::get_state_name</a></div><div class="ttdeci">static char * get_state_name(int state)</div><div class="ttdoc">Translate the tcp state into a string. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00132">tcp_session.cc:132</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a6aafb0e4307fa93fe65f309573deb8f5"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6aafb0e4307fa93fe65f309573deb8f5">s3f::s3fnet::TCPSession::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Reset the session to CLOSED state and wake up application. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00258">tcp_session.cc:258</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_recv_window_html_a782fefd720008f2d49e9e2d9a8f502a6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#a782fefd720008f2d49e9e2d9a8f502a6">s3f::s3fnet::TCPRecvWindow::resetRecvParameters</a></div><div class="ttdeci">void resetRecvParameters()</div><div class="ttdoc">The application buffer no longer used. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__rcvwnd_8h_source.html#l00098">tcp_rcvwnd.h:98</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_recv_window_html_add83bf45db32b2a44b0f68ff58caa32a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#add83bf45db32b2a44b0f68ff58caa32a">s3f::s3fnet::TCPRecvWindow::available</a></div><div class="ttdeci">bool available()</div><div class="ttdoc">Whether there is new data available. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__rcvwnd_8cc_source.html#l00037">tcp_rcvwnd.cc:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">s3f::s3fnet::TCPSession::TCP_STATE_ESTABLISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00034">tcp_session.h:34</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">s3f::s3fnet::TCPMessage::TCP_FLAG_SYN</a></div><div class="ttdoc">start of a new connection </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00027">tcp_message.h:27</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">s3f::s3fnet::TCPSession::TCP_STATE_CLOSED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00030">tcp_session.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_acf3cacfd0832a6f14ab0db8bdd2e1771"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#acf3cacfd0832a6f14ab0db8bdd2e1771">s3f::s3fnet::TCPSendWindow::dataInBuffer</a></div><div class="ttdeci">uint32 dataInBuffer()</div><div class="ttdoc">Returns how much of the buffer is used. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8h_source.html#l00052">tcp_sndwnd.h:52</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad5c1f75625bdc14d1f8789daed56e213"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad5c1f75625bdc14d1f8789daed56e213">s3f::s3fnet::TCPSession::wake_app</a></div><div class="ttdeci">void wake_app(int signal)</div><div class="ttdoc">Wake application upon a signal. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00269">tcp_session.cc:269</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a709cbd1c506cf6d33b510f3b570c58f8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a709cbd1c506cf6d33b510f3b570c58f8">s3f::s3fnet::TCPSession::process_SYN</a></div><div class="ttdeci">void process_SYN(TCPMessage *tcphdr, int &amp;signal)</div><div class="ttdoc">Process SYN packets. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__receiver_8cc_source.html#l00146">tcp_receiver.cc:146</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_a5747624547c6513355bdbafcd681b82d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#a5747624547c6513355bdbafcd681b82d">s3f::s3fnet::TCPSendWindow::needToRequest</a></div><div class="ttdeci">bool needToRequest()</div><div class="ttdoc">If all the requested data has been sent out, we need to request more data from the upper layer...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8h_source.html#l00042">tcp_sndwnd.h:42</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_dml_object_html_a602e2119414b0758d299582bca25f30b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_dml_object.html#a602e2119414b0758d299582bca25f30b">s3f::s3fnet::DmlObject::nhi</a></div><div class="ttdeci">Nhi nhi</div><div class="ttdoc">The nhi address to identify the object. </div><div class="ttdef"><b>Definition:</b> <a href="dmlobj_8h_source.html#l00047">dmlobj.h:47</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad018222843ceeab54f405d80a938c9a2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad018222843ceeab54f405d80a938c9a2">s3f::s3fnet::TCPSession::acknowledge</a></div><div class="ttdeci">void acknowledge(bool nodelay)</div><div class="ttdoc">Generate acknowledgements; no delay is imposed if the nodelay parameter is true. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00173">tcp_sender.cc:173</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a4fbadc4c967c43982e16d9c8c249fbc6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4fbadc4c967c43982e16d9c8c249fbc6">s3f::s3fnet::TCPSession::segment_and_send</a></div><div class="ttdeci">uint32 segment_and_send(uint32 seqno, uint32 length)</div><div class="ttdoc">Segment and send data. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00110">tcp_sender.cc:110</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">s3f::s3fnet::SocketSignal::DATA_AVAILABLE</a></div><div class="ttdoc">data is available </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00295">socket_session.h:295</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a8345d443cb07b92fa8e4e9780d32ca57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">s3f::s3fnet::TCPSeqWindow::firstUnused</a></div><div class="ttdeci">uint32 firstUnused()</div><div class="ttdoc">Return the first unused sequence in the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00043">tcp_seqwnd.h:43</a></div></div>
<div class="ttc" id="tcp__receiver_8cc_html_ae626a9851fdb5af743c1eb8643d81adc"><div class="ttname"><a href="tcp__receiver_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a></div><div class="ttdeci">#define TCP_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="tcp__receiver_8cc_source.html#l00016">tcp_receiver.cc:16</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a27bedc801b67220a9287e8628f782f2a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a27bedc801b67220a9287e8628f782f2a">s3f::s3fnet::TCPSession::close_issued</a></div><div class="ttdeci">bool close_issued</div><div class="ttdoc">Whether the upper layer has issued close. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00181">tcp_session.h:181</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_a192325760e562fc35214a77e9831011d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#a192325760e562fc35214a77e9831011d">s3f::s3fnet::TCPSendWindow::canSend</a></div><div class="ttdeci">uint32 canSend()</div><div class="ttdoc">Return how many bytes can be sent right now from the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8h_source.html#l00036">tcp_sndwnd.h:36</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">s3f::s3fnet::TCPSession::TCP_STATE_SYN_SENT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00032">tcp_session.h:32</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nhi_html_a12348ee85a1bd6d7ddaf4876b8d32501"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nhi.html#a12348ee85a1bd6d7ddaf4876b8d32501">s3f::s3fnet::Nhi::toString</a></div><div class="ttdeci">char * toString(char *buf)</div><div class="ttdoc">Returns a char array representation of this NHI. </div><div class="ttdef"><b>Definition:</b> <a href="nhi_8cc_source.html#l00076">nhi.cc:76</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda">s3f::s3fnet::SocketSignal::OK_TO_SEND</a></div><div class="ttdoc">clear to send data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00296">socket_session.h:296</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">s3f::s3fnet::TCPSession::TCP_STATE_LISTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00031">tcp_session.h:31</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a0250c97bad17f18ef7037fd76f7e5083"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a0250c97bad17f18ef7037fd76f7e5083">s3f::s3fnet::ProtocolSession::getNowWithThousandSeparator</a></div><div class="ttdeci">char * getNowWithThousandSeparator()</div><div class="ttdoc">For printing the current simulation time in a better readable format. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00128">protocol_session.cc:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">s3f::s3fnet::TCPSession::TCP_STATE_CLOSE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00035">tcp_session.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_aecf8e034a9cfb5e2fdd292ae0008c6e7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#aecf8e034a9cfb5e2fdd292ae0008c6e7">s3f::s3fnet::TCPSeqWindow::empty</a></div><div class="ttdeci">bool empty()</div><div class="ttdoc">Returns true iff the window is empty (nothing used). </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00150">tcp_seqwnd.h:150</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a6cf7d70612655484b01b2ab67de60758"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6cf7d70612655484b01b2ab67de60758">s3f::s3fnet::TCPSession::process_FIN</a></div><div class="ttdeci">void process_FIN(int &amp;signal)</div><div class="ttdoc">Process FIN packets. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__receiver_8cc_source.html#l00183">tcp_receiver.cc:183</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a></div><div class="ttdoc">acknowledgment field valid </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00030">tcp_message.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acd4de03ec3bfe3bb54fda7f7fe772c4f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acd4de03ec3bfe3bb54fda7f7fe772c4f">s3f::s3fnet::TCPSession::process_new_data</a></div><div class="ttdeci">bool process_new_data(DataMessage *payload, uint32 seqno)</div><div class="ttdoc">Process data arrival. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__receiver_8cc_source.html#l00316">tcp_receiver.cc:316</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_2</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00038">tcp_session.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6ae7c44da7160bf5ed9f8f57bdeb5d37"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::slowTimeoutHandling </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Slow timeout handler (in tcp_tmr.cc). </p>

<p>Definition at line <a class="el" href="tcp__timer_8cc_source.html#l00029">29</a> of file <a class="el" href="tcp__timer_8cc_source.html">tcp_timer.cc</a>.</p>

<p>References <a class="el" href="protocol__session_8cc_source.html#l00128">s3f::s3fnet::ProtocolSession::getNowWithThousandSeparator()</a>, <a class="el" href="tcp__master_8h_source.html#l00133">s3f::s3fnet::TCPMaster::getSlowTimeout()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="tcp__session_8h_source.html#l00206">msl_timer_count</a>, <a class="el" href="dmlobj_8h_source.html#l00047">s3f::s3fnet::DmlObject::nhi</a>, <a class="el" href="tcp__timer_8cc_source.html#l00021">RETX_TIMER</a>, <a class="el" href="tcp__session_8h_source.html#l00151">rtt_count</a>, <a class="el" href="tcp__session_8h_source.html#l00201">rxmit_timer_count</a>, <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__timer_8cc_source.html#l00017">TCP_DUMP</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, <a class="el" href="tcp__session_8h_source.html#l00040">TCP_STATE_TIME_WAIT</a>, <a class="el" href="nhi_8cc_source.html#l00076">s3f::s3fnet::Nhi::toString()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00024">TWO_MSL_TIMER</a>, and <a class="el" href="tcp__session_8cc_source.html#l00269">wake_app()</a>.</p>
<div class="fragment"><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;{</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> signal = 0;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <span class="comment">// update measured RTT</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">rtt_count</a>) <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">rtt_count</a>++;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <a class="code" href="tcp__timer_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %s: slowTimeoutHandling(), rtt=%d, rxmit=%ld, msl=%ld.\n&quot;</span>,</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_dml_object.html#a602e2119414b0758d299582bca25f30b">nhi</a>.<a class="code" href="classs3f_1_1s3fnet_1_1_nhi.html#a12348ee85a1bd6d7ddaf4876b8d32501">toString</a>(),</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a0250c97bad17f18ef7037fd76f7e5083">getNowWithThousandSeparator</a>(), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">rtt_count</a>,</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">msl_timer_count</a>));</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <span class="comment">// update retransmission timer. if the count is set as 0, then it&#39;s</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;  <span class="comment">// not a valid timer, meaning that the timer is not set.</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a> &gt; 0)</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  {</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a> -= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a9df289ed14ca66e68b1f6af5b7ca1ad7">getSlowTimeout</a>();</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="comment">// if it&#39;s time out, handle it.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a> &lt;= 0)</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;      signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a09791230ab5d227d3e1f3106132276f7">slow_timeout_handling_helper</a>(<a class="code" href="tcp__timer_8cc.html#a6b3c05da4dfaa394202f411134443c28">RETX_TIMER</a>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <span class="comment">// update 2msl timer. </span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">msl_timer_count</a> &gt; 0)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">msl_timer_count</a> -= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a9df289ed14ca66e68b1f6af5b7ca1ad7">getSlowTimeout</a>();</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="comment">// if it&#39;s time out, handle it.</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">msl_timer_count</a> &lt;= 0)</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a09791230ab5d227d3e1f3106132276f7">slow_timeout_handling_helper</a>(<a class="code" href="tcp__timer_8cc.html#ac9df89d5f56ddd045e8ac836176dff53">TWO_MSL_TIMER</a>);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">TCP_STATE_TIME_WAIT</a>)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a09791230ab5d227d3e1f3106132276f7">slow_timeout_handling_helper</a>(<a class="code" href="tcp__timer_8cc.html#ac9df89d5f56ddd045e8ac836176dff53">TWO_MSL_TIMER</a>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  }</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordflow">if</span>(signal) <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad5c1f75625bdc14d1f8789daed56e213">wake_app</a>(signal);</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a07975f88fa9d44f71eaa96061bcfe4b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">s3f::s3fnet::TCPSession::rtt_count</a></div><div class="ttdeci">int rtt_count</div><div class="ttdoc">The current RTT count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00151">tcp_session.h:151</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8b77936e0c278e8c4b88ecd7ac215551"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">s3f::s3fnet::TCPSession::rxmit_timer_count</a></div><div class="ttdeci">ltime_t rxmit_timer_count</div><div class="ttdoc">Retransmission timer count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00201">tcp_session.h:201</a></div></div>
<div class="ttc" id="tcp__timer_8cc_html_ac9df89d5f56ddd045e8ac836176dff53"><div class="ttname"><a href="tcp__timer_8cc.html#ac9df89d5f56ddd045e8ac836176dff53">TWO_MSL_TIMER</a></div><div class="ttdeci">#define TWO_MSL_TIMER</div><div class="ttdef"><b>Definition:</b> <a href="tcp__timer_8cc_source.html#l00024">tcp_timer.cc:24</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7c5180b90e5affbf5a38b5a3b578b849"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">s3f::s3fnet::TCPSession::msl_timer_count</a></div><div class="ttdeci">ltime_t msl_timer_count</div><div class="ttdoc">The timer count that lasts 2*msl. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00206">tcp_session.h:206</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="tcp__timer_8cc_html_a6b3c05da4dfaa394202f411134443c28"><div class="ttname"><a href="tcp__timer_8cc.html#a6b3c05da4dfaa394202f411134443c28">RETX_TIMER</a></div><div class="ttdeci">#define RETX_TIMER</div><div class="ttdef"><b>Definition:</b> <a href="tcp__timer_8cc_source.html#l00021">tcp_timer.cc:21</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad5c1f75625bdc14d1f8789daed56e213"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad5c1f75625bdc14d1f8789daed56e213">s3f::s3fnet::TCPSession::wake_app</a></div><div class="ttdeci">void wake_app(int signal)</div><div class="ttdoc">Wake application upon a signal. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00269">tcp_session.cc:269</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a9df289ed14ca66e68b1f6af5b7ca1ad7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a9df289ed14ca66e68b1f6af5b7ca1ad7">s3f::s3fnet::TCPMaster::getSlowTimeout</a></div><div class="ttdeci">ltime_t getSlowTimeout()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00133">tcp_master.h:133</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_dml_object_html_a602e2119414b0758d299582bca25f30b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_dml_object.html#a602e2119414b0758d299582bca25f30b">s3f::s3fnet::DmlObject::nhi</a></div><div class="ttdeci">Nhi nhi</div><div class="ttdoc">The nhi address to identify the object. </div><div class="ttdef"><b>Definition:</b> <a href="dmlobj_8h_source.html#l00047">dmlobj.h:47</a></div></div>
<div class="ttc" id="tcp__timer_8cc_html_ae626a9851fdb5af743c1eb8643d81adc"><div class="ttname"><a href="tcp__timer_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a></div><div class="ttdeci">#define TCP_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="tcp__timer_8cc_source.html#l00017">tcp_timer.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a09791230ab5d227d3e1f3106132276f7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a09791230ab5d227d3e1f3106132276f7">s3f::s3fnet::TCPSession::slow_timeout_handling_helper</a></div><div class="ttdeci">uint32 slow_timeout_handling_helper(const uint32 timerid)</div><div class="ttdoc">Slow timeout handler with a given timer id. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__timer_8cc_source.html#l00068">tcp_timer.cc:68</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nhi_html_a12348ee85a1bd6d7ddaf4876b8d32501"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nhi.html#a12348ee85a1bd6d7ddaf4876b8d32501">s3f::s3fnet::Nhi::toString</a></div><div class="ttdeci">char * toString(char *buf)</div><div class="ttdoc">Returns a char array representation of this NHI. </div><div class="ttdef"><b>Definition:</b> <a href="nhi_8cc_source.html#l00076">nhi.cc:76</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a0250c97bad17f18ef7037fd76f7e5083"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a0250c97bad17f18ef7037fd76f7e5083">s3f::s3fnet::ProtocolSession::getNowWithThousandSeparator</a></div><div class="ttdeci">char * getNowWithThousandSeparator()</div><div class="ttdoc">For printing the current simulation time in a better readable format. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00128">protocol_session.cc:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">s3f::s3fnet::TCPSession::TCP_STATE_TIME_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00040">tcp_session.h:40</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1cca462256a38e5561578d4458816e82"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::fastTimeoutHandling </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fast timeout handler (in tcp_tmr.cc). </p>

<p>Definition at line <a class="el" href="tcp__timer_8cc_source.html#l00125">125</a> of file <a class="el" href="tcp__timer_8cc_source.html">tcp_timer.cc</a>.</p>

<p>References <a class="el" href="tcp__sender_8cc_source.html#l00266">cancel_delay_ack()</a>, <a class="el" href="tcp__session_8h_source.html#l00169">delayed_ack</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00130">s3f::s3fnet::TCPSeqWindow::expect()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00043">s3f::s3fnet::TCPSeqWindow::firstUnused()</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, and <a class="el" href="tcp__message_8h_source.html#l00030">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;{</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">delayed_ack</a>)</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>(), 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">TCPMessage::TCP_FLAG_ACK</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7a7702b0e5bbc4c2a10a6c2532224095">cancel_delay_ack</a>();</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a81734c4c094d55f4551a80f9722c5221"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">s3f::s3fnet::TCPSeqWindow::expect</a></div><div class="ttdeci">uint32 expect()</div><div class="ttdoc">Like start method, but also uses SYN &amp; FIN segments; the method is used for receiving window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00130">tcp_seqwnd.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a55f340d4380db8a98d154d66ba68b5c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">s3f::s3fnet::TCPSession::delayed_ack</a></div><div class="ttdeci">bool delayed_ack</div><div class="ttdoc">True if the delayed ack is turned on. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00169">tcp_session.h:169</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_afefcda998f745d17d668577610ab8c23"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">s3f::s3fnet::TCPSession::send_data</a></div><div class="ttdeci">void send_data(uint32 seqno, uint32 datalen=0, byte mask=0, uint32 ackno=0, bool need_calc_rtt=false, bool need_set_rextimeout=false)</div><div class="ttdoc">Physically send the data to the IP layer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00055">tcp_sender.cc:55</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7a7702b0e5bbc4c2a10a6c2532224095"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7a7702b0e5bbc4c2a10a6c2532224095">s3f::s3fnet::TCPSession::cancel_delay_ack</a></div><div class="ttdeci">void cancel_delay_ack()</div><div class="ttdoc">Set the session to cancel sending delayed ACK when next timer the fast timer fires. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00266">tcp_sender.cc:266</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a8345d443cb07b92fa8e4e9780d32ca57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">s3f::s3fnet::TCPSeqWindow::firstUnused</a></div><div class="ttdeci">uint32 firstUnused()</div><div class="ttdoc">Return the first unused sequence in the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00043">tcp_seqwnd.h:43</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a></div><div class="ttdoc">acknowledgment field valid </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00030">tcp_message.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aed4d30a3e6ffdcd0b22aa7dbc651e589"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char * s3f::s3fnet::TCPSession::get_state_name </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Translate the tcp state into a string. </p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00132">132</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00035">TCP_STATE_CLOSE_WAIT</a>, <a class="el" href="tcp__session_8h_source.html#l00030">TCP_STATE_CLOSED</a>, <a class="el" href="tcp__session_8h_source.html#l00036">TCP_STATE_CLOSING</a>, <a class="el" href="tcp__session_8h_source.html#l00034">TCP_STATE_ESTABLISHED</a>, <a class="el" href="tcp__session_8h_source.html#l00037">TCP_STATE_FIN_WAIT_1</a>, <a class="el" href="tcp__session_8h_source.html#l00038">TCP_STATE_FIN_WAIT_2</a>, <a class="el" href="tcp__session_8h_source.html#l00039">TCP_STATE_LAST_ACK</a>, <a class="el" href="tcp__session_8h_source.html#l00031">TCP_STATE_LISTEN</a>, <a class="el" href="tcp__session_8h_source.html#l00033">TCP_STATE_SYN_RECEIVED</a>, <a class="el" href="tcp__session_8h_source.html#l00032">TCP_STATE_SYN_SENT</a>, and <a class="el" href="tcp__session_8h_source.html#l00040">TCP_STATE_TIME_WAIT</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>, and <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;{</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <span class="keywordflow">switch</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a>)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">TCP_STATE_CLOSED</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;CLOSED&quot;</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">TCP_STATE_LISTEN</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;LISTEN&quot;</span>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">TCP_STATE_SYN_SENT</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;SYN_SENT&quot;</span>;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18">TCP_STATE_SYN_RECEIVED</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;SYN_RECEIVED&quot;</span>;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;ESTABLISHED&quot;</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">TCP_STATE_CLOSE_WAIT</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;CLOSE_WAIT&quot;</span>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296">TCP_STATE_CLOSING</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;CLOSING&quot;</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">TCP_STATE_FIN_WAIT_1</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;FIN_WAIT_1&quot;</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">TCP_STATE_FIN_WAIT_2</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;FIN_WAIT_2&quot;</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914">TCP_STATE_LAST_ACK</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;LAST_ACK&quot;</span>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">TCP_STATE_TIME_WAIT</a>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;TIME_WAIT&quot;</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;          <span class="keywordflow">default</span>: <span class="keywordflow">return</span> <span class="stringliteral">&quot;UNKNOWN&quot;</span>;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18">s3f::s3fnet::TCPSession::TCP_STATE_SYN_RECEIVED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00033">tcp_session.h:33</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_1</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00037">tcp_session.h:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">s3f::s3fnet::TCPSession::TCP_STATE_ESTABLISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00034">tcp_session.h:34</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">s3f::s3fnet::TCPSession::TCP_STATE_CLOSED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00030">tcp_session.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296">s3f::s3fnet::TCPSession::TCP_STATE_CLOSING</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00036">tcp_session.h:36</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">s3f::s3fnet::TCPSession::TCP_STATE_SYN_SENT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00032">tcp_session.h:32</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">s3f::s3fnet::TCPSession::TCP_STATE_LISTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00031">tcp_session.h:31</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914">s3f::s3fnet::TCPSession::TCP_STATE_LAST_ACK</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00039">tcp_session.h:39</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">s3f::s3fnet::TCPSession::TCP_STATE_CLOSE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00035">tcp_session.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">s3f::s3fnet::TCPSession::TCP_STATE_TIME_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00040">tcp_session.h:40</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_2</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00038">tcp_session.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7330dac4791dcf387baa1c6cb9f31a8e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::is_ok </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>action</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true if the given action is ok at the time. </p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00151">151</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8cc_source.html#l00026">APP_ACTION_CONNECT</a>, <a class="el" href="tcp__session_8cc_source.html#l00025">APP_ACTION_DISCONNECT</a>, <a class="el" href="tcp__session_8cc_source.html#l00027">APP_ACTION_LISTEN</a>, <a class="el" href="tcp__session_8cc_source.html#l00024">APP_ACTION_RECEIVE</a>, <a class="el" href="tcp__session_8cc_source.html#l00022">APP_ACTION_RESET_PORT</a>, <a class="el" href="tcp__session_8cc_source.html#l00023">APP_ACTION_SEND</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, <a class="el" href="tcp__session_8h_source.html#l00035">TCP_STATE_CLOSE_WAIT</a>, <a class="el" href="tcp__session_8h_source.html#l00030">TCP_STATE_CLOSED</a>, <a class="el" href="tcp__session_8h_source.html#l00034">TCP_STATE_ESTABLISHED</a>, <a class="el" href="tcp__session_8h_source.html#l00037">TCP_STATE_FIN_WAIT_1</a>, <a class="el" href="tcp__session_8h_source.html#l00038">TCP_STATE_FIN_WAIT_2</a>, and <a class="el" href="tcp__session_8h_source.html#l00040">TCP_STATE_TIME_WAIT</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00056">connect()</a>, <a class="el" href="tcp__session_8cc_source.html#l00067">disconnect()</a>, <a class="el" href="tcp__session_8cc_source.html#l00093">listen()</a>, <a class="el" href="tcp__session_8cc_source.html#l00084">recv()</a>, and <a class="el" href="tcp__session_8cc_source.html#l00075">send()</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  assert(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">switch</span>(action) {        </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="tcp__session_8cc.html#a4325bf7e5275cb12bbc9b923040d8028">APP_ACTION_RESET_PORT</a>:</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">TCP_STATE_CLOSED</a>);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="tcp__session_8cc.html#a39a8de821aa83b57c31a70d1d6c7acb5">APP_ACTION_SEND</a>:</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a> || </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">TCP_STATE_CLOSE_WAIT</a>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="tcp__session_8cc.html#a9b24cc10c8ba8ce8aa81d8a555c31c07">APP_ACTION_RECEIVE</a>:</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a> ||</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">TCP_STATE_CLOSE_WAIT</a> ||</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">TCP_STATE_FIN_WAIT_1</a> ||</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">TCP_STATE_FIN_WAIT_2</a>);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="tcp__session_8cc.html#afcf9a17eb3112997ab1bd2df8873666f">APP_ACTION_DISCONNECT</a>:</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a> || </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">TCP_STATE_CLOSE_WAIT</a> ||</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">TCP_STATE_TIME_WAIT</a>);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="tcp__session_8cc.html#a21dc47744c49eef49078267fa1868147">APP_ACTION_CONNECT</a>:</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">TCP_STATE_CLOSED</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="tcp__session_8cc.html#a1b751a213e9142ce250dd87e3659e411">APP_ACTION_LISTEN</a>:</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">TCP_STATE_CLOSED</a>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_1</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00037">tcp_session.h:37</a></div></div>
<div class="ttc" id="tcp__session_8cc_html_a21dc47744c49eef49078267fa1868147"><div class="ttname"><a href="tcp__session_8cc.html#a21dc47744c49eef49078267fa1868147">APP_ACTION_CONNECT</a></div><div class="ttdeci">#define APP_ACTION_CONNECT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00026">tcp_session.cc:26</a></div></div>
<div class="ttc" id="tcp__session_8cc_html_a39a8de821aa83b57c31a70d1d6c7acb5"><div class="ttname"><a href="tcp__session_8cc.html#a39a8de821aa83b57c31a70d1d6c7acb5">APP_ACTION_SEND</a></div><div class="ttdeci">#define APP_ACTION_SEND</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00023">tcp_session.cc:23</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">s3f::s3fnet::TCPSession::TCP_STATE_ESTABLISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00034">tcp_session.h:34</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">s3f::s3fnet::TCPSession::TCP_STATE_CLOSED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00030">tcp_session.h:30</a></div></div>
<div class="ttc" id="tcp__session_8cc_html_a9b24cc10c8ba8ce8aa81d8a555c31c07"><div class="ttname"><a href="tcp__session_8cc.html#a9b24cc10c8ba8ce8aa81d8a555c31c07">APP_ACTION_RECEIVE</a></div><div class="ttdeci">#define APP_ACTION_RECEIVE</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00024">tcp_session.cc:24</a></div></div>
<div class="ttc" id="tcp__session_8cc_html_afcf9a17eb3112997ab1bd2df8873666f"><div class="ttname"><a href="tcp__session_8cc.html#afcf9a17eb3112997ab1bd2df8873666f">APP_ACTION_DISCONNECT</a></div><div class="ttdeci">#define APP_ACTION_DISCONNECT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00025">tcp_session.cc:25</a></div></div>
<div class="ttc" id="tcp__session_8cc_html_a1b751a213e9142ce250dd87e3659e411"><div class="ttname"><a href="tcp__session_8cc.html#a1b751a213e9142ce250dd87e3659e411">APP_ACTION_LISTEN</a></div><div class="ttdeci">#define APP_ACTION_LISTEN</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00027">tcp_session.cc:27</a></div></div>
<div class="ttc" id="tcp__session_8cc_html_a4325bf7e5275cb12bbc9b923040d8028"><div class="ttname"><a href="tcp__session_8cc.html#a4325bf7e5275cb12bbc9b923040d8028">APP_ACTION_RESET_PORT</a></div><div class="ttdeci">#define APP_ACTION_RESET_PORT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00022">tcp_session.cc:22</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">s3f::s3fnet::TCPSession::TCP_STATE_CLOSE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00035">tcp_session.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">s3f::s3fnet::TCPSession::TCP_STATE_TIME_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00040">tcp_session.h:40</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_2</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00038">tcp_session.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a708460a1c9ddcf199236e844d942f6ee"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::active_open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a>&#160;</td>
          <td class="paramname"><em>dst_ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a>&#160;</td>
          <td class="paramname"><em>dst_port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Active open. </p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00178">178</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8cc_source.html#l00241">allocate_buffers()</a>, <a class="el" href="socket__session_8h_source.html#l00138">s3f::s3fnet::SessionID::dst_ip</a>, <a class="el" href="socket__session_8h_source.html#l00144">s3f::s3fnet::SessionID::dst_port</a>, <a class="el" href="tcp__master_8h_source.html#l00127">s3f::s3fnet::TCPMaster::getISS()</a>, <a class="el" href="tcp__state_8cc_source.html#l00050">init_state_syn_sent()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00063">s3f::s3fnet::TCPSeqWindow::setStart()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, and <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00056">connect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;{</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="comment">// set the destination</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#a40000686ed11d99e747b2b2bb51a316e">dst_ip</a>   = destip; </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#ac777d144a536fe6992da8c0f2c5bb450">dst_port</a> = destport;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">// allocate buffers</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af968ce1fbf83f0ab73e8c98829bf753e">allocate_buffers</a>();</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">// get/set iss</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  assert(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a> &amp;&amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#af0158d272d7a0108465394ada2ffe1e2">setStart</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a3e7375067fee9eb26490c61e9679db59">getISS</a>());</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  </div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  <span class="comment">// go to TCP_STATE_SYN_SENT state</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab73521c495e604ad364ae0d81f54352d">init_state_syn_sent</a>();</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a3e7375067fee9eb26490c61e9679db59"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a3e7375067fee9eb26490c61e9679db59">s3f::s3fnet::TCPMaster::getISS</a></div><div class="ttdeci">uint32 getISS()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00127">tcp_master.h:127</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_af0158d272d7a0108465394ada2ffe1e2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#af0158d272d7a0108465394ada2ffe1e2">s3f::s3fnet::TCPSeqWindow::setStart</a></div><div class="ttdeci">void setStart(const uint32 seqno)</div><div class="ttdoc">Set the start sequence number of the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00063">tcp_seqwnd.h:63</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_af968ce1fbf83f0ab73e8c98829bf753e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af968ce1fbf83f0ab73e8c98829bf753e">s3f::s3fnet::TCPSession::allocate_buffers</a></div><div class="ttdeci">void allocate_buffers()</div><div class="ttdoc">Allocate both send and receive windows. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00241">tcp_session.cc:241</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_a40000686ed11d99e747b2b2bb51a316e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#a40000686ed11d99e747b2b2bb51a316e">s3f::s3fnet::SessionID::dst_ip</a></div><div class="ttdeci">IPADDR dst_ip</div><div class="ttdoc">Destination ip address. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00138">socket_session.h:138</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab73521c495e604ad364ae0d81f54352d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab73521c495e604ad364ae0d81f54352d">s3f::s3fnet::TCPSession::init_state_syn_sent</a></div><div class="ttdeci">int init_state_syn_sent()</div><div class="ttdoc">Change to SYN_SENT state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00050">tcp_state.cc:50</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_ac777d144a536fe6992da8c0f2c5bb450"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#ac777d144a536fe6992da8c0f2c5bb450">s3f::s3fnet::SessionID::dst_port</a></div><div class="ttdeci">uint16 dst_port</div><div class="ttdoc">Destination port number. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00144">socket_session.h:144</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa34e96f497bd431280c0af0a07446616"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::passive_open </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Passive open. </p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00197">197</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8cc_source.html#l00241">allocate_buffers()</a>, and <a class="el" href="tcp__state_8cc_source.html#l00088">init_state_listen()</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00093">listen()</a>.</p>
<div class="fragment"><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">// allocate buffers</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af968ce1fbf83f0ab73e8c98829bf753e">allocate_buffers</a>();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="comment">// go to TCP_STATE_LISTEN state</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a72373c9fe80ed8e044c3315b8d5c1a19">init_state_listen</a>();</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_af968ce1fbf83f0ab73e8c98829bf753e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af968ce1fbf83f0ab73e8c98829bf753e">s3f::s3fnet::TCPSession::allocate_buffers</a></div><div class="ttdeci">void allocate_buffers()</div><div class="ttdoc">Allocate both send and receive windows. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00241">tcp_session.cc:241</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a72373c9fe80ed8e044c3315b8d5c1a19"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a72373c9fe80ed8e044c3315b8d5c1a19">s3f::s3fnet::TCPSession::init_state_listen</a></div><div class="ttdeci">int init_state_listen()</div><div class="ttdoc">Change to LISTEN state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00088">tcp_state.cc:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a921479f6898db6df552b76ee32e91194"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::appl_close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Close the connection. </p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00208">208</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8cc_source.html#l00281">clear_app_state()</a>, <a class="el" href="tcp__session_8h_source.html#l00181">close_issued</a>, <a class="el" href="socket__session_8h_source.html#l00297">s3f::s3fnet::SocketSignal::CONN_CLOSED</a>, <a class="el" href="tcp__sndwnd_8h_source.html#l00052">s3f::s3fnet::TCPSendWindow::dataInBuffer()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00150">s3f::s3fnet::TCPSeqWindow::empty()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00130">s3f::s3fnet::TCPSeqWindow::expect()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00043">s3f::s3fnet::TCPSeqWindow::firstUnused()</a>, <a class="el" href="tcp__state_8cc_source.html#l00166">init_state_fin_wait_1()</a>, <a class="el" href="tcp__state_8cc_source.html#l00152">init_state_last_ack()</a>, <a class="el" href="socket__session_8h_source.html#l00299">s3f::s3fnet::SocketSignal::OK_TO_CLOSE</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00112">s3f::s3fnet::TCPSeqWindow::setFIN()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__message_8h_source.html#l00026">s3f::s3fnet::TCPMessage::TCP_FLAG_FIN</a>, <a class="el" href="tcp__session_8h_source.html#l00035">TCP_STATE_CLOSE_WAIT</a>, <a class="el" href="tcp__session_8h_source.html#l00034">TCP_STATE_ESTABLISHED</a>, <a class="el" href="tcp__session_8h_source.html#l00040">TCP_STATE_TIME_WAIT</a>, and <a class="el" href="tcp__session_8cc_source.html#l00269">wake_app()</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00067">disconnect()</a>.</p>
<div class="fragment"><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;{</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  assert(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#aecf8e034a9cfb5e2fdd292ae0008c6e7">empty</a>() &amp;&amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#acf3cacfd0832a6f14ab0db8bdd2e1771">dataInBuffer</a>() == 0)</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="comment">// if there is nothing to send</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a>) {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a>:</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="comment">// go to state TCP_STATE_FIN_WAIT_1</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a5639b7e3754415546e5c6f994eea7a2b">init_state_fin_wait_1</a>();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">TCP_STATE_CLOSE_WAIT</a>:</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="comment">// send out FIN</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>(), 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7">TCPMessage::TCP_FLAG_FIN</a>, </div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a254af26da7bf132000ee3cd7020ac4bd">setFIN</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="comment">// go to state TCP_STATE_LAST_ACK</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7ee86b56a417115c7c3586083706e736">init_state_last_ack</a>();</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">TCP_STATE_TIME_WAIT</a>:</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad5c1f75625bdc14d1f8789daed56e213">wake_app</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7adcdf24edc9ef559c4ef179f93082fc73">SocketSignal::CONN_CLOSED</a>); </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;  {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">clear_app_state</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a0314f4d19f51cc6f38fc788121187bd1">SocketSignal::OK_TO_CLOSE</a>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a27bedc801b67220a9287e8628f782f2a">close_issued</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;  }</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a81734c4c094d55f4551a80f9722c5221"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">s3f::s3fnet::TCPSeqWindow::expect</a></div><div class="ttdeci">uint32 expect()</div><div class="ttdoc">Like start method, but also uses SYN &amp; FIN segments; the method is used for receiving window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00130">tcp_seqwnd.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a5639b7e3754415546e5c6f994eea7a2b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a5639b7e3754415546e5c6f994eea7a2b">s3f::s3fnet::TCPSession::init_state_fin_wait_1</a></div><div class="ttdeci">int init_state_fin_wait_1()</div><div class="ttdoc">Change to FIN_WAIT_1 state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00166">tcp_state.cc:166</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_afefcda998f745d17d668577610ab8c23"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">s3f::s3fnet::TCPSession::send_data</a></div><div class="ttdeci">void send_data(uint32 seqno, uint32 datalen=0, byte mask=0, uint32 ackno=0, bool need_calc_rtt=false, bool need_set_rextimeout=false)</div><div class="ttdoc">Physically send the data to the IP layer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00055">tcp_sender.cc:55</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7">s3f::s3fnet::TCPMessage::TCP_FLAG_FIN</a></div><div class="ttdoc">final segmenet from sender </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00026">tcp_message.h:26</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a254af26da7bf132000ee3cd7020ac4bd"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a254af26da7bf132000ee3cd7020ac4bd">s3f::s3fnet::TCPSeqWindow::setFIN</a></div><div class="ttdeci">void setFIN(bool fin)</div><div class="ttdoc">set FIN bit. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00112">tcp_seqwnd.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">s3f::s3fnet::TCPSession::TCP_STATE_ESTABLISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00034">tcp_session.h:34</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_acf3cacfd0832a6f14ab0db8bdd2e1771"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#acf3cacfd0832a6f14ab0db8bdd2e1771">s3f::s3fnet::TCPSendWindow::dataInBuffer</a></div><div class="ttdeci">uint32 dataInBuffer()</div><div class="ttdoc">Returns how much of the buffer is used. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8h_source.html#l00052">tcp_sndwnd.h:52</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad5c1f75625bdc14d1f8789daed56e213"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad5c1f75625bdc14d1f8789daed56e213">s3f::s3fnet::TCPSession::wake_app</a></div><div class="ttdeci">void wake_app(int signal)</div><div class="ttdoc">Wake application upon a signal. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00269">tcp_session.cc:269</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7adcdf24edc9ef559c4ef179f93082fc73"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7adcdf24edc9ef559c4ef179f93082fc73">s3f::s3fnet::SocketSignal::CONN_CLOSED</a></div><div class="ttdoc">connection is closed </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00297">socket_session.h:297</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a8345d443cb07b92fa8e4e9780d32ca57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">s3f::s3fnet::TCPSeqWindow::firstUnused</a></div><div class="ttdeci">uint32 firstUnused()</div><div class="ttdoc">Return the first unused sequence in the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00043">tcp_seqwnd.h:43</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a0314f4d19f51cc6f38fc788121187bd1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a0314f4d19f51cc6f38fc788121187bd1">s3f::s3fnet::SocketSignal::OK_TO_CLOSE</a></div><div class="ttdoc">connection may be closed </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00299">socket_session.h:299</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a27bedc801b67220a9287e8628f782f2a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a27bedc801b67220a9287e8628f782f2a">s3f::s3fnet::TCPSession::close_issued</a></div><div class="ttdeci">bool close_issued</div><div class="ttdoc">Whether the upper layer has issued close. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00181">tcp_session.h:181</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7ee86b56a417115c7c3586083706e736"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7ee86b56a417115c7c3586083706e736">s3f::s3fnet::TCPSession::init_state_last_ack</a></div><div class="ttdeci">int init_state_last_ack()</div><div class="ttdoc">Change to LAST_ACK state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00152">tcp_state.cc:152</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">s3f::s3fnet::TCPSession::TCP_STATE_CLOSE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00035">tcp_session.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">s3f::s3fnet::TCPSession::TCP_STATE_TIME_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00040">tcp_session.h:40</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_aecf8e034a9cfb5e2fdd292ae0008c6e7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#aecf8e034a9cfb5e2fdd292ae0008c6e7">s3f::s3fnet::TCPSeqWindow::empty</a></div><div class="ttdeci">bool empty()</div><div class="ttdoc">Returns true iff the window is empty (nothing used). </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00150">tcp_seqwnd.h:150</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a00bfd0fea187f818bf0fd4c2a19cb214"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">s3f::s3fnet::TCPSession::clear_app_state</a></div><div class="ttdeci">void clear_app_state(int signal)</div><div class="ttdoc">Clear application signal bit(s). </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00281">tcp_session.cc:281</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af968ce1fbf83f0ab73e8c98829bf753e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::allocate_buffers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate both send and receive windows. </p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00241">241</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__master_8h_source.html#l00129">s3f::s3fnet::TCPMaster::getRcvWndSize()</a>, <a class="el" href="tcp__master_8h_source.html#l00130">s3f::s3fnet::TCPMaster::getSndBufSize()</a>, <a class="el" href="tcp__master_8h_source.html#l00131">s3f::s3fnet::TCPMaster::getSndWndSize()</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, and <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00178">active_open()</a>, and <a class="el" href="tcp__session_8cc_source.html#l00197">passive_open()</a>.</p>
<div class="fragment"><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;{</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">// allocate send buffer</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a> = <span class="keyword">new</span> TCPSendWindow(0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a19cdbe2d488242d1fe58cd54cbd8fbdb">getSndBufSize</a>(), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ae1d6047d0723adce5c198fcb3359508a">getSndWndSize</a>());</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  assert(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// allocate receive buffer</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a> = <span class="keyword">new</span> TCPRecvWindow(0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab08eada3d5418613a310a874708982c6">getRcvWndSize</a>());</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  assert(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_ab08eada3d5418613a310a874708982c6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab08eada3d5418613a310a874708982c6">s3f::s3fnet::TCPMaster::getRcvWndSize</a></div><div class="ttdeci">uint32 getRcvWndSize()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00129">tcp_master.h:129</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_ae1d6047d0723adce5c198fcb3359508a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ae1d6047d0723adce5c198fcb3359508a">s3f::s3fnet::TCPMaster::getSndWndSize</a></div><div class="ttdeci">uint32 getSndWndSize()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00131">tcp_master.h:131</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a19cdbe2d488242d1fe58cd54cbd8fbdb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a19cdbe2d488242d1fe58cd54cbd8fbdb">s3f::s3fnet::TCPMaster::getSndBufSize</a></div><div class="ttdeci">uint32 getSndBufSize()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00130">tcp_master.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6cef9f6af7bf27c3067978b4bdfa2a22"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::deallocate_buffers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deallocate both send and receive windows. </p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00252">252</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, and <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>.</p>

<p>Referenced by <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>.</p>
<div class="fragment"><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;{</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>) { <span class="keyword">delete</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a> = 0; }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>) { <span class="keyword">delete</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a> = 0; }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6aafb0e4307fa93fe65f309573deb8f5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::reset </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reset the session to CLOSED state and wake up application. </p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00258">258</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="socket__session_8h_source.html#l00294">s3f::s3fnet::SocketSignal::CONN_RESET</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, and <a class="el" href="tcp__session_8cc_source.html#l00269">wake_app()</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00116">abort()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>.</p>
<div class="fragment"><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;{</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;  <span class="comment">// go to closed state</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b4f89c223928fe58699e239e1cd11e6">init_state_closed</a>();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="comment">// signaling CONN_RESET might prompt the upper layer to delete this</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="comment">// session. therefore, after this, we should not do other things any</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;  <span class="comment">// more, because all dats structures might be invalid.</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad5c1f75625bdc14d1f8789daed56e213">wake_app</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a223747e22d1dda9fd4048a5603acfb2f">SocketSignal::CONN_RESET</a>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a223747e22d1dda9fd4048a5603acfb2f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a223747e22d1dda9fd4048a5603acfb2f">s3f::s3fnet::SocketSignal::CONN_RESET</a></div><div class="ttdoc">connection reset </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00294">socket_session.h:294</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad5c1f75625bdc14d1f8789daed56e213"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad5c1f75625bdc14d1f8789daed56e213">s3f::s3fnet::TCPSession::wake_app</a></div><div class="ttdeci">void wake_app(int signal)</div><div class="ttdoc">Wake application upon a signal. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00269">tcp_session.cc:269</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8b4f89c223928fe58699e239e1cd11e6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b4f89c223928fe58699e239e1cd11e6">s3f::s3fnet::TCPSession::init_state_closed</a></div><div class="ttdeci">int init_state_closed()</div><div class="ttdoc">Change to CLOSED state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00020">tcp_state.cc:20</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad5c1f75625bdc14d1f8789daed56e213"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::wake_app </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wake application upon a signal. </p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00269">269</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="protocol__session_8cc_source.html#l00092">s3f::s3fnet::ProtocolSession::control()</a>, <a class="el" href="socket__session_8h_source.html#l00295">s3f::s3fnet::SocketSignal::DATA_AVAILABLE</a>, <a class="el" href="tcp__sndwnd_8h_source.html#l00065">s3f::s3fnet::TCPSendWindow::dataBuffered()</a>, <a class="el" href="tcp__rcvwnd_8h_source.html#l00104">s3f::s3fnet::TCPRecvWindow::dataReceived()</a>, <a class="el" href="socket__session_8h_source.html#l00472">s3f::s3fnet::SessionMaster::getSocketMaster()</a>, <a class="el" href="socket__session_8h_source.html#l00311">s3f::s3fnet::SocketSignal::nbytes</a>, <a class="el" href="socket__session_8h_source.html#l00296">s3f::s3fnet::SocketSignal::OK_TO_SEND</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="s3fnet_8h_source.html#l00355">s3f::s3fnet::SOCK_CTRL_SET_SIGNAL</a>, <a class="el" href="tcp__session_8h_source.html#l00115">socket</a>, and <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00208">appl_close()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>, <a class="el" href="tcp__session_8cc_source.html#l00258">reset()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00029">slowTimeoutHandling()</a>.</p>
<div class="fragment"><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;{</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  SocketSignal socksig(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a21969070f7b142c7f761f11f0266f812">socket</a>, signal);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">if</span>(signal &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda">SocketSignal::OK_TO_SEND</a>) </div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    socksig.nbytes = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#ade08c05f7b12c364073609752ee76bd8">dataBuffered</a>();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordflow">if</span>(signal &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">SocketSignal::DATA_AVAILABLE</a>)</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  {</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    socksig.nbytes = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#a4cfec627e75d7a3d5637a16c491afde8">dataReceived</a>();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;  }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_session_master.html#abe96c7b37ca822d40f4cb5a0efc9db24">getSocketMaster</a>()-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a806b5f5786984f8bc40421e92d19fe3e">control</a>(<a class="code" href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223ac511a737624c20243f9fd4f3a01df343">SOCK_CTRL_SET_SIGNAL</a>, &amp;socksig, NULL);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a806b5f5786984f8bc40421e92d19fe3e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a806b5f5786984f8bc40421e92d19fe3e">s3f::s3fnet::ProtocolSession::control</a></div><div class="ttdeci">virtual int control(int ctrltyp, void *ctrlmsg, ProtocolSession *sess)</div><div class="ttdoc">The control method is used by the protocol session to receive control messages (or information querie...</div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00092">protocol_session.cc:92</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a21969070f7b142c7f761f11f0266f812"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a21969070f7b142c7f761f11f0266f812">s3f::s3fnet::TCPSession::socket</a></div><div class="ttdeci">int socket</div><div class="ttdoc">The socket id. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00115">tcp_session.h:115</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_recv_window_html_a4cfec627e75d7a3d5637a16c491afde8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#a4cfec627e75d7a3d5637a16c491afde8">s3f::s3fnet::TCPRecvWindow::dataReceived</a></div><div class="ttdeci">uint32 dataReceived()</div><div class="ttdoc">Return the number of bytes received last time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__rcvwnd_8h_source.html#l00104">tcp_rcvwnd.h:104</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">s3f::s3fnet::SocketSignal::DATA_AVAILABLE</a></div><div class="ttdoc">data is available </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00295">socket_session.h:295</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_ade08c05f7b12c364073609752ee76bd8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#ade08c05f7b12c364073609752ee76bd8">s3f::s3fnet::TCPSendWindow::dataBuffered</a></div><div class="ttdeci">uint32 dataBuffered()</div><div class="ttdoc">Returns how much data has been put into the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8h_source.html#l00065">tcp_sndwnd.h:65</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_master_html_abe96c7b37ca822d40f4cb5a0efc9db24"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_master.html#abe96c7b37ca822d40f4cb5a0efc9db24">s3f::s3fnet::SessionMaster::getSocketMaster</a></div><div class="ttdeci">ProtocolSession * getSocketMaster()</div><div class="ttdoc">Return the socket master, the protocol session directly above the protocol session master...</div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00472">socket_session.h:472</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda">s3f::s3fnet::SocketSignal::OK_TO_SEND</a></div><div class="ttdoc">clear to send data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00296">socket_session.h:296</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a378ed67967dbfd4a8ddba9fb8c13f223ac511a737624c20243f9fd4f3a01df343"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223ac511a737624c20243f9fd4f3a01df343">s3f::s3fnet::SOCK_CTRL_SET_SIGNAL</a></div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00355">s3fnet.h:355</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a00bfd0fea187f818bf0fd4c2a19cb214"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::clear_app_state </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear application signal bit(s). </p>

<p>Definition at line <a class="el" href="tcp__session_8cc_source.html#l00281">281</a> of file <a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a>.</p>

<p>References <a class="el" href="protocol__session_8cc_source.html#l00092">s3f::s3fnet::ProtocolSession::control()</a>, <a class="el" href="socket__session_8h_source.html#l00472">s3f::s3fnet::SessionMaster::getSocketMaster()</a>, <a class="el" href="s3fnet_8h_source.html#l00354">s3f::s3fnet::SOCK_CTRL_CLEAR_SIGNAL</a>, <a class="el" href="tcp__session_8h_source.html#l00115">socket</a>, and <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00208">appl_close()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00022">appl_recv()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00023">appl_send()</a>, <a class="el" href="tcp__state_8cc_source.html#l00130">init_state_close_wait()</a>, <a class="el" href="tcp__state_8cc_source.html#l00210">init_state_closing()</a>, <a class="el" href="tcp__state_8cc_source.html#l00152">init_state_last_ack()</a>, and <a class="el" href="tcp__receiver_8cc_source.html#l00183">process_FIN()</a>.</p>
<div class="fragment"><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  SocketSignal socksig(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a21969070f7b142c7f761f11f0266f812">socket</a>, signal);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_session_master.html#abe96c7b37ca822d40f4cb5a0efc9db24">getSocketMaster</a>()-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a806b5f5786984f8bc40421e92d19fe3e">control</a>(<a class="code" href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223a9e2c646b01b9b4c17a98f72c8df1db2f">SOCK_CTRL_CLEAR_SIGNAL</a>, &amp;socksig, NULL);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a806b5f5786984f8bc40421e92d19fe3e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a806b5f5786984f8bc40421e92d19fe3e">s3f::s3fnet::ProtocolSession::control</a></div><div class="ttdeci">virtual int control(int ctrltyp, void *ctrlmsg, ProtocolSession *sess)</div><div class="ttdoc">The control method is used by the protocol session to receive control messages (or information querie...</div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00092">protocol_session.cc:92</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a21969070f7b142c7f761f11f0266f812"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a21969070f7b142c7f761f11f0266f812">s3f::s3fnet::TCPSession::socket</a></div><div class="ttdeci">int socket</div><div class="ttdoc">The socket id. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00115">tcp_session.h:115</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_master_html_abe96c7b37ca822d40f4cb5a0efc9db24"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_master.html#abe96c7b37ca822d40f4cb5a0efc9db24">s3f::s3fnet::SessionMaster::getSocketMaster</a></div><div class="ttdeci">ProtocolSession * getSocketMaster()</div><div class="ttdoc">Return the socket master, the protocol session directly above the protocol session master...</div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00472">socket_session.h:472</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a378ed67967dbfd4a8ddba9fb8c13f223a9e2c646b01b9b4c17a98f72c8df1db2f"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a378ed67967dbfd4a8ddba9fb8c13f223a9e2c646b01b9b4c17a98f72c8df1db2f">s3f::s3fnet::SOCK_CTRL_CLEAR_SIGNAL</a></div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00354">s3fnet.h:354</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8b4f89c223928fe58699e239e1cd11e6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::init_state_closed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change to CLOSED state. </p>

<p>Definition at line <a class="el" href="tcp__state_8cc_source.html#l00020">20</a> of file <a class="el" href="tcp__state_8cc_source.html">tcp_state.cc</a>.</p>

<p>References <a class="el" href="tcp__sender_8cc_source.html#l00266">cancel_delay_ack()</a>, <a class="el" href="tcp__session_8h_source.html#l00127">cwnd</a>, <a class="el" href="entity_8cc_source.html#l00269">Entity::d2t()</a>, <a class="el" href="tcp__session_8cc_source.html#l00252">deallocate_buffers()</a>, <a class="el" href="tcp__master_8h_source.html#l00141">s3f::s3fnet::TCPMaster::getInitThresh()</a>, <a class="el" href="tcp__master_8h_source.html#l00128">s3f::s3fnet::TCPMaster::getMSS()</a>, <a class="el" href="tcp__master_8h_source.html#l00129">s3f::s3fnet::TCPMaster::getRcvWndSize()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="tcp__session_8h_source.html#l00392">initial_timeout()</a>, <a class="el" href="tcp__session_8h_source.html#l00206">msl_timer_count</a>, <a class="el" href="tcp__session_8h_source.html#l00133">mss</a>, <a class="el" href="tcp__session_8h_source.html#l00136">ndupacks</a>, <a class="el" href="tcp__session_8h_source.html#l00139">nrxmits</a>, <a class="el" href="tcp__session_8h_source.html#l00124">rcvwnd_size</a>, <a class="el" href="tcp__session_8h_source.html#l00151">rtt_count</a>, <a class="el" href="tcp__session_8h_source.html#l00145">rtt_smoothed</a>, <a class="el" href="tcp__session_8h_source.html#l00154">rtt_var</a>, <a class="el" href="tcp__session_8h_source.html#l00193">rxmit_timeout</a>, <a class="el" href="tcp__session_8h_source.html#l00194">rxmit_timeout_double</a>, <a class="el" href="tcp__session_8h_source.html#l00201">rxmit_timer_count</a>, <a class="el" href="tcp__master_8cc_source.html#l00538">s3f::s3fnet::TCPMaster::setIdle()</a>, <a class="el" href="tcp__session_8h_source.html#l00130">ssthresh</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__init_8h_source.html#l00062">TCP_DEFAULT_RTTVAR_SHIFT</a>, <a class="el" href="tcp__init_8h_source.html#l00045">TCP_DEFAULT_SLOW_TIMEOUT</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, and <a class="el" href="tcp__session_8h_source.html#l00030">TCP_STATE_CLOSED</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>, <a class="el" href="tcp__session_8cc_source.html#l00258">reset()</a>, and <a class="el" href="tcp__session_8cc_source.html#l00029">TCPSession()</a>.</p>
<div class="fragment"><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;{</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">TCP_STATE_CLOSED</a>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  <span class="comment">// reset all the variables</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a>  = 0;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">msl_timer_count</a>  = 0;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">rcvwnd_size</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab08eada3d5418613a310a874708982c6">getRcvWndSize</a>();</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#aa2b059432ee5d371b0445906d345757c">getMSS</a>();</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">ssthresh</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a394ae5de9fda5cf3f2f90a7c08a8b80d">getInitThresh</a>();</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#aa2b059432ee5d371b0445906d345757c">getMSS</a>();</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">rtt_smoothed</a> = 0;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">rtt_count</a> = 0;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">rtt_var</a> = (int)(rint(3 / <a class="code" href="tcp__init_8h.html#a3ee4e530c8d68f15c7d36a1e677cc3bc">TCP_DEFAULT_SLOW_TIMEOUT</a>))&lt;&lt;<a class="code" href="tcp__init_8h.html#aa1ac56653bc057e96211eaa09273940f">TCP_DEFAULT_RTTVAR_SHIFT</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a74f0ff8ef6fad49191be26d984b14414">rxmit_timeout_double</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa8ff1695f8741d222d9ff6af5ac2eed4">initial_timeout</a>();</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a0ab01b89e85d83119e4cd776e34ef479">rxmit_timeout</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a6ac4fe093bf16c28a822bdfb0bd89dc6">d2t</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a74f0ff8ef6fad49191be26d984b14414">rxmit_timeout_double</a>, 0);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">nrxmits</a> = 0;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">ndupacks</a> = 0;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="comment">// cancel delay ack</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7a7702b0e5bbc4c2a10a6c2532224095">cancel_delay_ack</a>();</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="comment">// release any buffers that might be allocated</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6cef9f6af7bf27c3067978b4bdfa2a22">deallocate_buffers</a>();</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a7f48a759fef836eacf1805438d16622f">setIdle</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a07975f88fa9d44f71eaa96061bcfe4b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">s3f::s3fnet::TCPSession::rtt_count</a></div><div class="ttdeci">int rtt_count</div><div class="ttdoc">The current RTT count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00151">tcp_session.h:151</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8b77936e0c278e8c4b88ecd7ac215551"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">s3f::s3fnet::TCPSession::rxmit_timer_count</a></div><div class="ttdeci">ltime_t rxmit_timer_count</div><div class="ttdoc">Retransmission timer count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00201">tcp_session.h:201</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_ab08eada3d5418613a310a874708982c6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab08eada3d5418613a310a874708982c6">s3f::s3fnet::TCPMaster::getRcvWndSize</a></div><div class="ttdeci">uint32 getRcvWndSize()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00129">tcp_master.h:129</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a6cef9f6af7bf27c3067978b4bdfa2a22"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6cef9f6af7bf27c3067978b4bdfa2a22">s3f::s3fnet::TCPSession::deallocate_buffers</a></div><div class="ttdeci">void deallocate_buffers()</div><div class="ttdoc">Deallocate both send and receive windows. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00252">tcp_session.cc:252</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a30d3084b61186cbb889007b1ef1d79c2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">s3f::s3fnet::TCPSession::rtt_smoothed</a></div><div class="ttdeci">int rtt_smoothed</div><div class="ttdoc">Smoothed round trip time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00145">tcp_session.h:145</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a7f48a759fef836eacf1805438d16622f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a7f48a759fef836eacf1805438d16622f">s3f::s3fnet::TCPMaster::setIdle</a></div><div class="ttdeci">void setIdle(TCPSession *session)</div><div class="ttdoc">Change the state of the session to idle. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8cc_source.html#l00538">tcp_master.cc:538</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7c5180b90e5affbf5a38b5a3b578b849"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">s3f::s3fnet::TCPSession::msl_timer_count</a></div><div class="ttdeci">ltime_t msl_timer_count</div><div class="ttdoc">The timer count that lasts 2*msl. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00206">tcp_session.h:206</a></div></div>
<div class="ttc" id="tcp__init_8h_html_aa1ac56653bc057e96211eaa09273940f"><div class="ttname"><a href="tcp__init_8h.html#aa1ac56653bc057e96211eaa09273940f">TCP_DEFAULT_RTTVAR_SHIFT</a></div><div class="ttdeci">#define TCP_DEFAULT_RTTVAR_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00062">tcp_init.h:62</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_aa8ff1695f8741d222d9ff6af5ac2eed4"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa8ff1695f8741d222d9ff6af5ac2eed4">s3f::s3fnet::TCPSession::initial_timeout</a></div><div class="ttdeci">double initial_timeout()</div><div class="ttdoc">Return initial timeout value for the first timeout. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00392">tcp_session.h:392</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">s3f::s3fnet::TCPSession::TCP_STATE_CLOSED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00030">tcp_session.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7a7702b0e5bbc4c2a10a6c2532224095"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7a7702b0e5bbc4c2a10a6c2532224095">s3f::s3fnet::TCPSession::cancel_delay_ack</a></div><div class="ttdeci">void cancel_delay_ack()</div><div class="ttdoc">Set the session to cancel sending delayed ACK when next timer the fast timer fires. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00266">tcp_sender.cc:266</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_af7814c955b9d8b4fa0177387e1970a81"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">s3f::s3fnet::TCPSession::rtt_var</a></div><div class="ttdeci">int rtt_var</div><div class="ttdoc">Current estimated RTT variance. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00154">tcp_session.h:154</a></div></div>
<div class="ttc" id="class_entity_html_a6ac4fe093bf16c28a822bdfb0bd89dc6"><div class="ttname"><a href="class_entity.html#a6ac4fe093bf16c28a822bdfb0bd89dc6">Entity::d2t</a></div><div class="ttdeci">ltime_t d2t(double d)</div><div class="ttdoc">Conversion routines to translate from double precision to clock ticks. </div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00269">entity.cc:269</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_aa2b059432ee5d371b0445906d345757c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#aa2b059432ee5d371b0445906d345757c">s3f::s3fnet::TCPMaster::getMSS</a></div><div class="ttdeci">uint32 getMSS()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00128">tcp_master.h:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a394ae5de9fda5cf3f2f90a7c08a8b80d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a394ae5de9fda5cf3f2f90a7c08a8b80d">s3f::s3fnet::TCPMaster::getInitThresh</a></div><div class="ttdeci">uint32 getInitThresh()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00141">tcp_master.h:141</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ac4ddc45afd099ae4889834159cadd631"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">s3f::s3fnet::TCPSession::ssthresh</a></div><div class="ttdeci">uint32 ssthresh</div><div class="ttdoc">Threshold size for updating the congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00130">tcp_session.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1082383b1ab63ecfe7da04f4ae8fa07"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">s3f::s3fnet::TCPSession::mss</a></div><div class="ttdeci">uint32 mss</div><div class="ttdoc">Maximum segment size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00133">tcp_session.h:133</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab127443917c48253831516e6d0b72f09"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">s3f::s3fnet::TCPSession::nrxmits</a></div><div class="ttdeci">uint32 nrxmits</div><div class="ttdoc">Number of consecutive packet retransmissions. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00139">tcp_session.h:139</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2a7d2ba14ba1e9b7d5402275d92a1ee6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">s3f::s3fnet::TCPSession::rcvwnd_size</a></div><div class="ttdeci">uint32 rcvwnd_size</div><div class="ttdoc">Remote receive window size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00124">tcp_session.h:124</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a0ab01b89e85d83119e4cd776e34ef479"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a0ab01b89e85d83119e4cd776e34ef479">s3f::s3fnet::TCPSession::rxmit_timeout</a></div><div class="ttdeci">ltime_t rxmit_timeout</div><div class="ttdoc">The current retransmission timeout. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00193">tcp_session.h:193</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a74f0ff8ef6fad49191be26d984b14414"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a74f0ff8ef6fad49191be26d984b14414">s3f::s3fnet::TCPSession::rxmit_timeout_double</a></div><div class="ttdeci">double rxmit_timeout_double</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00194">tcp_session.h:194</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a3bda2d05daddfd070c267bc73140a84d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">s3f::s3fnet::TCPSession::ndupacks</a></div><div class="ttdeci">uint32 ndupacks</div><div class="ttdoc">Number of consecutive duplicate ACKs received. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00136">tcp_session.h:136</a></div></div>
<div class="ttc" id="tcp__init_8h_html_a3ee4e530c8d68f15c7d36a1e677cc3bc"><div class="ttname"><a href="tcp__init_8h.html#a3ee4e530c8d68f15c7d36a1e677cc3bc">TCP_DEFAULT_SLOW_TIMEOUT</a></div><div class="ttdeci">#define TCP_DEFAULT_SLOW_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00045">tcp_init.h:45</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2cd5840cbc1191efd078c08076f279d3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">s3f::s3fnet::TCPSession::cwnd</a></div><div class="ttdeci">uint32 cwnd</div><div class="ttdoc">Congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00127">tcp_session.h:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab73521c495e604ad364ae0d81f54352d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::init_state_syn_sent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change to SYN_SENT state. </p>

<p>Definition at line <a class="el" href="tcp__state_8cc_source.html#l00050">50</a> of file <a class="el" href="tcp__state_8cc_source.html">tcp_state.cc</a>.</p>

<p>References <a class="el" href="tcp__seqwnd_8h_source.html#l00130">s3f::s3fnet::TCPSeqWindow::expect()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00043">s3f::s3fnet::TCPSeqWindow::firstUnused()</a>, <a class="el" href="tcp__session_8h_source.html#l00139">nrxmits</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__master_8cc_source.html#l00520">s3f::s3fnet::TCPMaster::setConnected()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00104">s3f::s3fnet::TCPSeqWindow::setSYN()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__message_8h_source.html#l00027">s3f::s3fnet::TCPMessage::TCP_FLAG_SYN</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, and <a class="el" href="tcp__session_8h_source.html#l00032">TCP_STATE_SYN_SENT</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00178">active_open()</a>.</p>
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">TCP_STATE_SYN_SENT</a>;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">nrxmits</a> = 0;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a2fe306b30103a70bbda6e0f506df4ac9">setConnected</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  <span class="comment">// send out SYN packet</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>(), 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">TCPMessage::TCP_FLAG_SYN</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a3be9d536d8eda01e87fb5b4ecf93a067">setSYN</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a81734c4c094d55f4551a80f9722c5221"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">s3f::s3fnet::TCPSeqWindow::expect</a></div><div class="ttdeci">uint32 expect()</div><div class="ttdoc">Like start method, but also uses SYN &amp; FIN segments; the method is used for receiving window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00130">tcp_seqwnd.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_afefcda998f745d17d668577610ab8c23"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">s3f::s3fnet::TCPSession::send_data</a></div><div class="ttdeci">void send_data(uint32 seqno, uint32 datalen=0, byte mask=0, uint32 ackno=0, bool need_calc_rtt=false, bool need_set_rextimeout=false)</div><div class="ttdoc">Physically send the data to the IP layer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00055">tcp_sender.cc:55</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a3be9d536d8eda01e87fb5b4ecf93a067"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a3be9d536d8eda01e87fb5b4ecf93a067">s3f::s3fnet::TCPSeqWindow::setSYN</a></div><div class="ttdeci">void setSYN(bool syn)</div><div class="ttdoc">set SYN bit. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00104">tcp_seqwnd.h:104</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">s3f::s3fnet::TCPMessage::TCP_FLAG_SYN</a></div><div class="ttdoc">start of a new connection </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00027">tcp_message.h:27</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a8345d443cb07b92fa8e4e9780d32ca57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">s3f::s3fnet::TCPSeqWindow::firstUnused</a></div><div class="ttdeci">uint32 firstUnused()</div><div class="ttdoc">Return the first unused sequence in the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00043">tcp_seqwnd.h:43</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab127443917c48253831516e6d0b72f09"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">s3f::s3fnet::TCPSession::nrxmits</a></div><div class="ttdeci">uint32 nrxmits</div><div class="ttdoc">Number of consecutive packet retransmissions. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00139">tcp_session.h:139</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a2fe306b30103a70bbda6e0f506df4ac9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a2fe306b30103a70bbda6e0f506df4ac9">s3f::s3fnet::TCPMaster::setConnected</a></div><div class="ttdeci">void setConnected(TCPSession *session)</div><div class="ttdoc">Change the state of the session to connected. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8cc_source.html#l00520">tcp_master.cc:520</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">s3f::s3fnet::TCPSession::TCP_STATE_SYN_SENT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00032">tcp_session.h:32</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab158dc3ec6426cd625a4dde0b0d1f8d1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::init_state_syn_received </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change to SYN_RECEIVED state. </p>

<p>Definition at line <a class="el" href="tcp__state_8cc_source.html#l00064">64</a> of file <a class="el" href="tcp__state_8cc_source.html">tcp_state.cc</a>.</p>

<p>References <a class="el" href="tcp__seqwnd_8h_source.html#l00130">s3f::s3fnet::TCPSeqWindow::expect()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00043">s3f::s3fnet::TCPSeqWindow::firstUnused()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00126">s3f::s3fnet::TCPSeqWindow::next()</a>, <a class="el" href="tcp__session_8h_source.html#l00139">nrxmits</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__master_8cc_source.html#l00520">s3f::s3fnet::TCPMaster::setConnected()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00104">s3f::s3fnet::TCPSeqWindow::setSYN()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__message_8h_source.html#l00030">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a>, <a class="el" href="tcp__message_8h_source.html#l00027">s3f::s3fnet::TCPMessage::TCP_FLAG_SYN</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, <a class="el" href="tcp__session_8h_source.html#l00030">TCP_STATE_CLOSED</a>, <a class="el" href="tcp__session_8h_source.html#l00031">TCP_STATE_LISTEN</a>, and <a class="el" href="tcp__session_8h_source.html#l00033">TCP_STATE_SYN_RECEIVED</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>, and <a class="el" href="tcp__receiver_8cc_source.html#l00146">process_SYN()</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;{</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  assert(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> != <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">TCP_STATE_CLOSED</a>);</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordtype">bool</span> myListen = (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">TCP_STATE_LISTEN</a>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18">TCP_STATE_SYN_RECEIVED</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">nrxmits</a> = 0;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a2fe306b30103a70bbda6e0f506df4ac9">setConnected</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <span class="keywordflow">if</span>(myListen)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a3be9d536d8eda01e87fb5b4ecf93a067">setSYN</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>(), 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">TCPMessage::TCP_FLAG_SYN</a> | <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">TCPMessage::TCP_FLAG_ACK</a>,</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;              <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  }</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">next</a>(), 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">TCPMessage::TCP_FLAG_ACK</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18">s3f::s3fnet::TCPSession::TCP_STATE_SYN_RECEIVED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00033">tcp_session.h:33</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_ac2e2ec8a145a83d1489748fd6f7fd8b3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">s3f::s3fnet::TCPSeqWindow::next</a></div><div class="ttdeci">uint32 next()</div><div class="ttdoc">Like firstUnused method, but also uses SYN &amp; FIN segments; the method is used for sending window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00126">tcp_seqwnd.h:126</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a81734c4c094d55f4551a80f9722c5221"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">s3f::s3fnet::TCPSeqWindow::expect</a></div><div class="ttdeci">uint32 expect()</div><div class="ttdoc">Like start method, but also uses SYN &amp; FIN segments; the method is used for receiving window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00130">tcp_seqwnd.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_afefcda998f745d17d668577610ab8c23"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">s3f::s3fnet::TCPSession::send_data</a></div><div class="ttdeci">void send_data(uint32 seqno, uint32 datalen=0, byte mask=0, uint32 ackno=0, bool need_calc_rtt=false, bool need_set_rextimeout=false)</div><div class="ttdoc">Physically send the data to the IP layer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00055">tcp_sender.cc:55</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a3be9d536d8eda01e87fb5b4ecf93a067"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a3be9d536d8eda01e87fb5b4ecf93a067">s3f::s3fnet::TCPSeqWindow::setSYN</a></div><div class="ttdeci">void setSYN(bool syn)</div><div class="ttdoc">set SYN bit. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00104">tcp_seqwnd.h:104</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">s3f::s3fnet::TCPMessage::TCP_FLAG_SYN</a></div><div class="ttdoc">start of a new connection </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00027">tcp_message.h:27</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">s3f::s3fnet::TCPSession::TCP_STATE_CLOSED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00030">tcp_session.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a8345d443cb07b92fa8e4e9780d32ca57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">s3f::s3fnet::TCPSeqWindow::firstUnused</a></div><div class="ttdeci">uint32 firstUnused()</div><div class="ttdoc">Return the first unused sequence in the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00043">tcp_seqwnd.h:43</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab127443917c48253831516e6d0b72f09"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">s3f::s3fnet::TCPSession::nrxmits</a></div><div class="ttdeci">uint32 nrxmits</div><div class="ttdoc">Number of consecutive packet retransmissions. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00139">tcp_session.h:139</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a2fe306b30103a70bbda6e0f506df4ac9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a2fe306b30103a70bbda6e0f506df4ac9">s3f::s3fnet::TCPMaster::setConnected</a></div><div class="ttdeci">void setConnected(TCPSession *session)</div><div class="ttdoc">Change the state of the session to connected. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8cc_source.html#l00520">tcp_master.cc:520</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">s3f::s3fnet::TCPSession::TCP_STATE_LISTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00031">tcp_session.h:31</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a></div><div class="ttdoc">acknowledgment field valid </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00030">tcp_message.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a72373c9fe80ed8e044c3315b8d5c1a19"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::init_state_listen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change to LISTEN state. </p>

<p>Definition at line <a class="el" href="tcp__state_8cc_source.html#l00088">88</a> of file <a class="el" href="tcp__state_8cc_source.html">tcp_state.cc</a>.</p>

<p>References <a class="el" href="tcp__sender_8cc_source.html#l00266">cancel_delay_ack()</a>, <a class="el" href="tcp__session_8h_source.html#l00127">cwnd</a>, <a class="el" href="tcp__master_8h_source.html#l00141">s3f::s3fnet::TCPMaster::getInitThresh()</a>, <a class="el" href="tcp__master_8h_source.html#l00128">s3f::s3fnet::TCPMaster::getMSS()</a>, <a class="el" href="tcp__master_8h_source.html#l00129">s3f::s3fnet::TCPMaster::getRcvWndSize()</a>, <a class="el" href="tcp__session_8h_source.html#l00206">msl_timer_count</a>, <a class="el" href="tcp__session_8h_source.html#l00133">mss</a>, <a class="el" href="tcp__session_8h_source.html#l00136">ndupacks</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00124">rcvwnd_size</a>, <a class="el" href="tcp__sndwnd_8cc_source.html#l00211">s3f::s3fnet::TCPSendWindow::reset()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00153">s3f::s3fnet::TCPSeqWindow::reset()</a>, <a class="el" href="tcp__session_8h_source.html#l00201">rxmit_timer_count</a>, <a class="el" href="tcp__master_8cc_source.html#l00529">s3f::s3fnet::TCPMaster::setListening()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00130">ssthresh</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, <a class="el" href="tcp__session_8h_source.html#l00030">TCP_STATE_CLOSED</a>, and <a class="el" href="tcp__session_8h_source.html#l00031">TCP_STATE_LISTEN</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00197">passive_open()</a>.</p>
<div class="fragment"><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;  <span class="comment">// set the session as listening.</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#abb32aa575ce707ecbad96765d5a64ecf">setListening</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <span class="comment">// if the previous state is not CLOSED,</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="comment">// we need to initialize the session state.</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> != <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">TCP_STATE_CLOSED</a>)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#ade13c4650e4a975e9385a53998119be2">reset</a>();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a> -&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ace44a4200163f4260aa863bf6ba98cac">reset</a>();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">rcvwnd_size</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab08eada3d5418613a310a874708982c6">getRcvWndSize</a>();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#aa2b059432ee5d371b0445906d345757c">getMSS</a>();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">ssthresh</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a394ae5de9fda5cf3f2f90a7c08a8b80d">getInitThresh</a>();  </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7a7702b0e5bbc4c2a10a6c2532224095">cancel_delay_ack</a>();</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">ndupacks</a> = 0;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <span class="comment">// set the state id.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">TCP_STATE_LISTEN</a>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// cancel any timers</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a> = 0;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">msl_timer_count</a> = 0;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_abb32aa575ce707ecbad96765d5a64ecf"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#abb32aa575ce707ecbad96765d5a64ecf">s3f::s3fnet::TCPMaster::setListening</a></div><div class="ttdeci">void setListening(TCPSession *session)</div><div class="ttdoc">Change the state of the session to listening. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8cc_source.html#l00529">tcp_master.cc:529</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8b77936e0c278e8c4b88ecd7ac215551"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">s3f::s3fnet::TCPSession::rxmit_timer_count</a></div><div class="ttdeci">ltime_t rxmit_timer_count</div><div class="ttdoc">Retransmission timer count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00201">tcp_session.h:201</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_ace44a4200163f4260aa863bf6ba98cac"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ace44a4200163f4260aa863bf6ba98cac">s3f::s3fnet::TCPSeqWindow::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Resets the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00153">tcp_seqwnd.h:153</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_ab08eada3d5418613a310a874708982c6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab08eada3d5418613a310a874708982c6">s3f::s3fnet::TCPMaster::getRcvWndSize</a></div><div class="ttdeci">uint32 getRcvWndSize()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00129">tcp_master.h:129</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7c5180b90e5affbf5a38b5a3b578b849"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">s3f::s3fnet::TCPSession::msl_timer_count</a></div><div class="ttdeci">ltime_t msl_timer_count</div><div class="ttdoc">The timer count that lasts 2*msl. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00206">tcp_session.h:206</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">s3f::s3fnet::TCPSession::TCP_STATE_CLOSED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00030">tcp_session.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7a7702b0e5bbc4c2a10a6c2532224095"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7a7702b0e5bbc4c2a10a6c2532224095">s3f::s3fnet::TCPSession::cancel_delay_ack</a></div><div class="ttdeci">void cancel_delay_ack()</div><div class="ttdoc">Set the session to cancel sending delayed ACK when next timer the fast timer fires. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00266">tcp_sender.cc:266</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_aa2b059432ee5d371b0445906d345757c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#aa2b059432ee5d371b0445906d345757c">s3f::s3fnet::TCPMaster::getMSS</a></div><div class="ttdeci">uint32 getMSS()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00128">tcp_master.h:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_ade13c4650e4a975e9385a53998119be2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#ade13c4650e4a975e9385a53998119be2">s3f::s3fnet::TCPSendWindow::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Reset the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8cc_source.html#l00211">tcp_sndwnd.cc:211</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a394ae5de9fda5cf3f2f90a7c08a8b80d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a394ae5de9fda5cf3f2f90a7c08a8b80d">s3f::s3fnet::TCPMaster::getInitThresh</a></div><div class="ttdeci">uint32 getInitThresh()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00141">tcp_master.h:141</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ac4ddc45afd099ae4889834159cadd631"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">s3f::s3fnet::TCPSession::ssthresh</a></div><div class="ttdeci">uint32 ssthresh</div><div class="ttdoc">Threshold size for updating the congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00130">tcp_session.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1082383b1ab63ecfe7da04f4ae8fa07"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">s3f::s3fnet::TCPSession::mss</a></div><div class="ttdeci">uint32 mss</div><div class="ttdoc">Maximum segment size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00133">tcp_session.h:133</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">s3f::s3fnet::TCPSession::TCP_STATE_LISTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00031">tcp_session.h:31</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2a7d2ba14ba1e9b7d5402275d92a1ee6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">s3f::s3fnet::TCPSession::rcvwnd_size</a></div><div class="ttdeci">uint32 rcvwnd_size</div><div class="ttdoc">Remote receive window size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00124">tcp_session.h:124</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a3bda2d05daddfd070c267bc73140a84d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">s3f::s3fnet::TCPSession::ndupacks</a></div><div class="ttdeci">uint32 ndupacks</div><div class="ttdoc">Number of consecutive duplicate ACKs received. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00136">tcp_session.h:136</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2cd5840cbc1191efd078c08076f279d3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">s3f::s3fnet::TCPSession::cwnd</a></div><div class="ttdeci">uint32 cwnd</div><div class="ttdoc">Congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00127">tcp_session.h:127</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7454ca316e4759015c6b2015c2d06c67"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::init_state_established </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change to ESTABLISHED state. </p>

<p>Definition at line <a class="el" href="tcp__state_8cc_source.html#l00117">117</a> of file <a class="el" href="tcp__state_8cc_source.html">tcp_state.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00181">close_issued</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00122">s3f::s3fnet::TCPSeqWindow::finAtFront()</a>, <a class="el" href="tcp__master_8h_source.html#l00141">s3f::s3fnet::TCPMaster::getInitThresh()</a>, <a class="el" href="socket__session_8h_source.html#l00296">s3f::s3fnet::SocketSignal::OK_TO_SEND</a>, <a class="el" href="tcp__session_8h_source.html#l00163">recover_seq</a>, <a class="el" href="tcp__session_8h_source.html#l00184">simultaneous_closing</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00130">ssthresh</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00037">s3f::s3fnet::TCPSeqWindow::start()</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00119">s3f::s3fnet::TCPSeqWindow::synAtFront()</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, and <a class="el" href="tcp__session_8h_source.html#l00034">TCP_STATE_ESTABLISHED</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>.</p>
<div class="fragment"><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;{</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a27bedc801b67220a9287e8628f782f2a">close_issued</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1f221b49ca3d30486828f3eac199da33">simultaneous_closing</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">ssthresh</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a394ae5de9fda5cf3f2f90a7c08a8b80d">getInitThresh</a>();  </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">recover_seq</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a0b6858cce05ab50a8e9cad0402e94659">start</a>();</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;  assert(!<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ab73b6cd1848c0de4a79b174ae3c821bf">synAtFront</a>());</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  assert(!<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a336af4b385a4d928d2076decf6e0ad57">finAtFront</a>());</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda">SocketSignal::OK_TO_SEND</a>;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a18e65bc289c8426ebd69f0714fa50a8d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">s3f::s3fnet::TCPSession::recover_seq</a></div><div class="ttdeci">uint32 recover_seq</div><div class="ttdoc">The largest seqno sent out when loss happens. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00163">tcp_session.h:163</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a1f221b49ca3d30486828f3eac199da33"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1f221b49ca3d30486828f3eac199da33">s3f::s3fnet::TCPSession::simultaneous_closing</a></div><div class="ttdeci">bool simultaneous_closing</div><div class="ttdoc">Whether it is a simultaneous closing. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00184">tcp_session.h:184</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a336af4b385a4d928d2076decf6e0ad57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a336af4b385a4d928d2076decf6e0ad57">s3f::s3fnet::TCPSeqWindow::finAtFront</a></div><div class="ttdeci">bool finAtFront()</div><div class="ttdoc">Return true if FIN segment is in the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00122">tcp_seqwnd.h:122</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">s3f::s3fnet::TCPSession::TCP_STATE_ESTABLISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00034">tcp_session.h:34</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a394ae5de9fda5cf3f2f90a7c08a8b80d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a394ae5de9fda5cf3f2f90a7c08a8b80d">s3f::s3fnet::TCPMaster::getInitThresh</a></div><div class="ttdeci">uint32 getInitThresh()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00141">tcp_master.h:141</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ac4ddc45afd099ae4889834159cadd631"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">s3f::s3fnet::TCPSession::ssthresh</a></div><div class="ttdeci">uint32 ssthresh</div><div class="ttdoc">Threshold size for updating the congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00130">tcp_session.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a0b6858cce05ab50a8e9cad0402e94659"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a0b6858cce05ab50a8e9cad0402e94659">s3f::s3fnet::TCPSeqWindow::start</a></div><div class="ttdeci">uint32 start()</div><div class="ttdoc">Return the first sequence of the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00037">tcp_seqwnd.h:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a27bedc801b67220a9287e8628f782f2a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a27bedc801b67220a9287e8628f782f2a">s3f::s3fnet::TCPSession::close_issued</a></div><div class="ttdeci">bool close_issued</div><div class="ttdoc">Whether the upper layer has issued close. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00181">tcp_session.h:181</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda">s3f::s3fnet::SocketSignal::OK_TO_SEND</a></div><div class="ttdoc">clear to send data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00296">socket_session.h:296</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_ab73b6cd1848c0de4a79b174ae3c821bf"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ab73b6cd1848c0de4a79b174ae3c821bf">s3f::s3fnet::TCPSeqWindow::synAtFront</a></div><div class="ttdeci">bool synAtFront()</div><div class="ttdoc">Return true if SYN segment is in the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00119">tcp_seqwnd.h:119</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3b64e3f5e5f72b3e653db2de525dec29"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::init_state_close_wait </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change to CLOSE_WAIT state. </p>

<p>Definition at line <a class="el" href="tcp__state_8cc_source.html#l00130">130</a> of file <a class="el" href="tcp__state_8cc_source.html">tcp_state.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8cc_source.html#l00281">clear_app_state()</a>, <a class="el" href="socket__session_8h_source.html#l00295">s3f::s3fnet::SocketSignal::DATA_AVAILABLE</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00150">s3f::s3fnet::TCPSeqWindow::empty()</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00201">rxmit_timer_count</a>, <a class="el" href="socket__session_8h_source.html#l00298">s3f::s3fnet::SocketSignal::SOCK_EOF</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, and <a class="el" href="tcp__session_8h_source.html#l00035">TCP_STATE_CLOSE_WAIT</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00183">process_FIN()</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordtype">int</span> signal = 0;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">TCP_STATE_CLOSE_WAIT</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a> = 0;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <span class="comment">// at this point we have received a FIN, so if nothing in receive</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="comment">// window, there won&#39;t be, so signal EOF to application</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#aecf8e034a9cfb5e2fdd292ae0008c6e7">empty</a>())</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">clear_app_state</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">SocketSignal::DATA_AVAILABLE</a>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a0d5ab302d6d81243673b3911e1631373">SocketSignal::SOCK_EOF</a>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    signal |= (<a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">SocketSignal::DATA_AVAILABLE</a> | <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a0d5ab302d6d81243673b3911e1631373">SocketSignal::SOCK_EOF</a>);</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  }</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">return</span> signal;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8b77936e0c278e8c4b88ecd7ac215551"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">s3f::s3fnet::TCPSession::rxmit_timer_count</a></div><div class="ttdeci">ltime_t rxmit_timer_count</div><div class="ttdoc">Retransmission timer count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00201">tcp_session.h:201</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a0d5ab302d6d81243673b3911e1631373"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a0d5ab302d6d81243673b3911e1631373">s3f::s3fnet::SocketSignal::SOCK_EOF</a></div><div class="ttdoc">no more data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00298">socket_session.h:298</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">s3f::s3fnet::SocketSignal::DATA_AVAILABLE</a></div><div class="ttdoc">data is available </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00295">socket_session.h:295</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">s3f::s3fnet::TCPSession::TCP_STATE_CLOSE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00035">tcp_session.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_aecf8e034a9cfb5e2fdd292ae0008c6e7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#aecf8e034a9cfb5e2fdd292ae0008c6e7">s3f::s3fnet::TCPSeqWindow::empty</a></div><div class="ttdeci">bool empty()</div><div class="ttdoc">Returns true iff the window is empty (nothing used). </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00150">tcp_seqwnd.h:150</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a00bfd0fea187f818bf0fd4c2a19cb214"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">s3f::s3fnet::TCPSession::clear_app_state</a></div><div class="ttdeci">void clear_app_state(int signal)</div><div class="ttdoc">Clear application signal bit(s). </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00281">tcp_session.cc:281</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7ee86b56a417115c7c3586083706e736"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::init_state_last_ack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change to LAST_ACK state. </p>

<p>Definition at line <a class="el" href="tcp__state_8cc_source.html#l00152">152</a> of file <a class="el" href="tcp__state_8cc_source.html">tcp_state.cc</a>.</p>

<p>References <a class="el" href="tcp__sender_8cc_source.html#l00266">cancel_delay_ack()</a>, <a class="el" href="tcp__session_8cc_source.html#l00281">clear_app_state()</a>, <a class="el" href="tcp__session_8h_source.html#l00169">delayed_ack</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00130">s3f::s3fnet::TCPSeqWindow::expect()</a>, <a class="el" href="tcp__master_8h_source.html#l00139">s3f::s3fnet::TCPMaster::isDelayedAck()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00126">s3f::s3fnet::TCPSeqWindow::next()</a>, <a class="el" href="socket__session_8h_source.html#l00299">s3f::s3fnet::SocketSignal::OK_TO_CLOSE</a>, <a class="el" href="socket__session_8h_source.html#l00296">s3f::s3fnet::SocketSignal::OK_TO_SEND</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__message_8h_source.html#l00030">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, and <a class="el" href="tcp__session_8h_source.html#l00039">TCP_STATE_LAST_ACK</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00208">appl_close()</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;{</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914">TCP_STATE_LAST_ACK</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a22579edae0a5cf5f55712a7f1acbe9f6">isDelayedAck</a>() &amp;&amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">delayed_ack</a>)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">next</a>(), 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">TCPMessage::TCP_FLAG_ACK</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7a7702b0e5bbc4c2a10a6c2532224095">cancel_delay_ack</a>();</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">clear_app_state</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda">SocketSignal::OK_TO_SEND</a> | <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a0314f4d19f51cc6f38fc788121187bd1">SocketSignal::OK_TO_CLOSE</a>);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_ac2e2ec8a145a83d1489748fd6f7fd8b3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">s3f::s3fnet::TCPSeqWindow::next</a></div><div class="ttdeci">uint32 next()</div><div class="ttdoc">Like firstUnused method, but also uses SYN &amp; FIN segments; the method is used for sending window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00126">tcp_seqwnd.h:126</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a81734c4c094d55f4551a80f9722c5221"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">s3f::s3fnet::TCPSeqWindow::expect</a></div><div class="ttdeci">uint32 expect()</div><div class="ttdoc">Like start method, but also uses SYN &amp; FIN segments; the method is used for receiving window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00130">tcp_seqwnd.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a55f340d4380db8a98d154d66ba68b5c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">s3f::s3fnet::TCPSession::delayed_ack</a></div><div class="ttdeci">bool delayed_ack</div><div class="ttdoc">True if the delayed ack is turned on. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00169">tcp_session.h:169</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_afefcda998f745d17d668577610ab8c23"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">s3f::s3fnet::TCPSession::send_data</a></div><div class="ttdeci">void send_data(uint32 seqno, uint32 datalen=0, byte mask=0, uint32 ackno=0, bool need_calc_rtt=false, bool need_set_rextimeout=false)</div><div class="ttdoc">Physically send the data to the IP layer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00055">tcp_sender.cc:55</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7a7702b0e5bbc4c2a10a6c2532224095"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7a7702b0e5bbc4c2a10a6c2532224095">s3f::s3fnet::TCPSession::cancel_delay_ack</a></div><div class="ttdeci">void cancel_delay_ack()</div><div class="ttdoc">Set the session to cancel sending delayed ACK when next timer the fast timer fires. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00266">tcp_sender.cc:266</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a0314f4d19f51cc6f38fc788121187bd1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a0314f4d19f51cc6f38fc788121187bd1">s3f::s3fnet::SocketSignal::OK_TO_CLOSE</a></div><div class="ttdoc">connection may be closed </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00299">socket_session.h:299</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a22579edae0a5cf5f55712a7f1acbe9f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a22579edae0a5cf5f55712a7f1acbe9f6">s3f::s3fnet::TCPMaster::isDelayedAck</a></div><div class="ttdeci">bool isDelayedAck()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00139">tcp_master.h:139</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda">s3f::s3fnet::SocketSignal::OK_TO_SEND</a></div><div class="ttdoc">clear to send data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00296">socket_session.h:296</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914">s3f::s3fnet::TCPSession::TCP_STATE_LAST_ACK</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00039">tcp_session.h:39</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a></div><div class="ttdoc">acknowledgment field valid </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00030">tcp_message.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a00bfd0fea187f818bf0fd4c2a19cb214"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">s3f::s3fnet::TCPSession::clear_app_state</a></div><div class="ttdeci">void clear_app_state(int signal)</div><div class="ttdoc">Clear application signal bit(s). </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00281">tcp_session.cc:281</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5639b7e3754415546e5c6f994eea7a2b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::init_state_fin_wait_1 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change to FIN_WAIT_1 state. </p>

<p>Definition at line <a class="el" href="tcp__state_8cc_source.html#l00166">166</a> of file <a class="el" href="tcp__state_8cc_source.html">tcp_state.cc</a>.</p>

<p>References <a class="el" href="tcp__sender_8cc_source.html#l00266">cancel_delay_ack()</a>, <a class="el" href="tcp__sndwnd_8h_source.html#l00052">s3f::s3fnet::TCPSendWindow::dataInBuffer()</a>, <a class="el" href="tcp__session_8h_source.html#l00169">delayed_ack</a>, <a class="el" href="tcp__master_8cc_source.html#l00567">s3f::s3fnet::TCPMaster::disableFastTimeout()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00150">s3f::s3fnet::TCPSeqWindow::empty()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00130">s3f::s3fnet::TCPSeqWindow::expect()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00043">s3f::s3fnet::TCPSeqWindow::firstUnused()</a>, <a class="el" href="tcp__state_8cc_source.html#l00210">init_state_closing()</a>, <a class="el" href="tcp__master_8h_source.html#l00139">s3f::s3fnet::TCPMaster::isDelayedAck()</a>, <a class="el" href="tcp__session_8h_source.html#l00139">nrxmits</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00112">s3f::s3fnet::TCPSeqWindow::setFIN()</a>, <a class="el" href="tcp__session_8h_source.html#l00184">simultaneous_closing</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__message_8h_source.html#l00030">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a>, <a class="el" href="tcp__message_8h_source.html#l00026">s3f::s3fnet::TCPMessage::TCP_FLAG_FIN</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, and <a class="el" href="tcp__session_8h_source.html#l00037">TCP_STATE_FIN_WAIT_1</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00208">appl_close()</a>, and <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">TCP_STATE_FIN_WAIT_1</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="comment">// make sure nothing to send out </span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  assert(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#aecf8e034a9cfb5e2fdd292ae0008c6e7">empty</a>() &amp;&amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#acf3cacfd0832a6f14ab0db8bdd2e1771">dataInBuffer</a>() == 0);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">// Reset this since there is no data in window.</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// In fact if its not 0 there&#39;s probably a bug.</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">nrxmits</a> = 0;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160; </div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">// Send a fin and possibly ack any left over delayed acks</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a22579edae0a5cf5f55712a7f1acbe9f6">isDelayedAck</a>() &amp;&amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">delayed_ack</a>)</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  {</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>(), 0, </div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;              <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7">TCPMessage::TCP_FLAG_FIN</a> | <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">TCPMessage::TCP_FLAG_ACK</a>,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;              <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7a7702b0e5bbc4c2a10a6c2532224095">cancel_delay_ack</a>();</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ac6847642e838e397c63a6e0fc85f8dfd">disableFastTimeout</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  }</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>(), 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7">TCPMessage::TCP_FLAG_FIN</a>, </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;              <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;  </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a254af26da7bf132000ee3cd7020ac4bd">setFIN</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160; </div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="comment">// Now if established state received a fin while was waiting to dump</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">// its buffer, then next state will be TCP_STATE_CLOSING.</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1f221b49ca3d30486828f3eac199da33">simultaneous_closing</a>)  <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1b43b090f13c89eef9f369d9806b1575">init_state_closing</a>();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_ac6847642e838e397c63a6e0fc85f8dfd"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ac6847642e838e397c63a6e0fc85f8dfd">s3f::s3fnet::TCPMaster::disableFastTimeout</a></div><div class="ttdeci">void disableFastTimeout(TCPSession *session)</div><div class="ttdoc">Disable a TCP session from fast timeout handling. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8cc_source.html#l00567">tcp_master.cc:567</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a1b43b090f13c89eef9f369d9806b1575"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1b43b090f13c89eef9f369d9806b1575">s3f::s3fnet::TCPSession::init_state_closing</a></div><div class="ttdeci">int init_state_closing()</div><div class="ttdoc">Change to CLOSING state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00210">tcp_state.cc:210</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_1</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00037">tcp_session.h:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a81734c4c094d55f4551a80f9722c5221"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">s3f::s3fnet::TCPSeqWindow::expect</a></div><div class="ttdeci">uint32 expect()</div><div class="ttdoc">Like start method, but also uses SYN &amp; FIN segments; the method is used for receiving window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00130">tcp_seqwnd.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a55f340d4380db8a98d154d66ba68b5c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">s3f::s3fnet::TCPSession::delayed_ack</a></div><div class="ttdeci">bool delayed_ack</div><div class="ttdoc">True if the delayed ack is turned on. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00169">tcp_session.h:169</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_afefcda998f745d17d668577610ab8c23"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">s3f::s3fnet::TCPSession::send_data</a></div><div class="ttdeci">void send_data(uint32 seqno, uint32 datalen=0, byte mask=0, uint32 ackno=0, bool need_calc_rtt=false, bool need_set_rextimeout=false)</div><div class="ttdoc">Physically send the data to the IP layer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00055">tcp_sender.cc:55</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7">s3f::s3fnet::TCPMessage::TCP_FLAG_FIN</a></div><div class="ttdoc">final segmenet from sender </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00026">tcp_message.h:26</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a1f221b49ca3d30486828f3eac199da33"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1f221b49ca3d30486828f3eac199da33">s3f::s3fnet::TCPSession::simultaneous_closing</a></div><div class="ttdeci">bool simultaneous_closing</div><div class="ttdoc">Whether it is a simultaneous closing. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00184">tcp_session.h:184</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a254af26da7bf132000ee3cd7020ac4bd"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a254af26da7bf132000ee3cd7020ac4bd">s3f::s3fnet::TCPSeqWindow::setFIN</a></div><div class="ttdeci">void setFIN(bool fin)</div><div class="ttdoc">set FIN bit. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00112">tcp_seqwnd.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7a7702b0e5bbc4c2a10a6c2532224095"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7a7702b0e5bbc4c2a10a6c2532224095">s3f::s3fnet::TCPSession::cancel_delay_ack</a></div><div class="ttdeci">void cancel_delay_ack()</div><div class="ttdoc">Set the session to cancel sending delayed ACK when next timer the fast timer fires. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00266">tcp_sender.cc:266</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_acf3cacfd0832a6f14ab0db8bdd2e1771"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#acf3cacfd0832a6f14ab0db8bdd2e1771">s3f::s3fnet::TCPSendWindow::dataInBuffer</a></div><div class="ttdeci">uint32 dataInBuffer()</div><div class="ttdoc">Returns how much of the buffer is used. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8h_source.html#l00052">tcp_sndwnd.h:52</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a8345d443cb07b92fa8e4e9780d32ca57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">s3f::s3fnet::TCPSeqWindow::firstUnused</a></div><div class="ttdeci">uint32 firstUnused()</div><div class="ttdoc">Return the first unused sequence in the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00043">tcp_seqwnd.h:43</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab127443917c48253831516e6d0b72f09"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">s3f::s3fnet::TCPSession::nrxmits</a></div><div class="ttdeci">uint32 nrxmits</div><div class="ttdoc">Number of consecutive packet retransmissions. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00139">tcp_session.h:139</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a22579edae0a5cf5f55712a7f1acbe9f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a22579edae0a5cf5f55712a7f1acbe9f6">s3f::s3fnet::TCPMaster::isDelayedAck</a></div><div class="ttdeci">bool isDelayedAck()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00139">tcp_master.h:139</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_aecf8e034a9cfb5e2fdd292ae0008c6e7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#aecf8e034a9cfb5e2fdd292ae0008c6e7">s3f::s3fnet::TCPSeqWindow::empty</a></div><div class="ttdeci">bool empty()</div><div class="ttdoc">Returns true iff the window is empty (nothing used). </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00150">tcp_seqwnd.h:150</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a></div><div class="ttdoc">acknowledgment field valid </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00030">tcp_message.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3c827e6a31f92c419b34e0e085c37d9b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::init_state_fin_wait_2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change to FIN_WAIT_2 state. </p>

<p>Definition at line <a class="el" href="tcp__state_8cc_source.html#l00200">200</a> of file <a class="el" href="tcp__state_8cc_source.html">tcp_state.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00201">rxmit_timer_count</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, and <a class="el" href="tcp__session_8h_source.html#l00038">TCP_STATE_FIN_WAIT_2</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>.</p>
<div class="fragment"><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;{  </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">TCP_STATE_FIN_WAIT_2</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="comment">// schedules timeout so we don&#39;t wait forever</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a> = 0;    </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8b77936e0c278e8c4b88ecd7ac215551"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">s3f::s3fnet::TCPSession::rxmit_timer_count</a></div><div class="ttdeci">ltime_t rxmit_timer_count</div><div class="ttdoc">Retransmission timer count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00201">tcp_session.h:201</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_2</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00038">tcp_session.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1b43b090f13c89eef9f369d9806b1575"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::init_state_closing </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change to CLOSING state. </p>

<p>Definition at line <a class="el" href="tcp__state_8cc_source.html#l00210">210</a> of file <a class="el" href="tcp__state_8cc_source.html">tcp_state.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8cc_source.html#l00281">clear_app_state()</a>, <a class="el" href="socket__session_8h_source.html#l00295">s3f::s3fnet::SocketSignal::DATA_AVAILABLE</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00150">s3f::s3fnet::TCPSeqWindow::empty()</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="socket__session_8h_source.html#l00298">s3f::s3fnet::SocketSignal::SOCK_EOF</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, and <a class="el" href="tcp__session_8h_source.html#l00036">TCP_STATE_CLOSING</a>.</p>

<p>Referenced by <a class="el" href="tcp__state_8cc_source.html#l00166">init_state_fin_wait_1()</a>, and <a class="el" href="tcp__receiver_8cc_source.html#l00183">process_FIN()</a>.</p>
<div class="fragment"><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;{</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="keywordtype">int</span> signal = 0;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296">TCP_STATE_CLOSING</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#aecf8e034a9cfb5e2fdd292ae0008c6e7">empty</a>())</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;  {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">clear_app_state</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">SocketSignal::DATA_AVAILABLE</a>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a0d5ab302d6d81243673b3911e1631373">SocketSignal::SOCK_EOF</a>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;  }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  <span class="keywordflow">return</span> signal;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a0d5ab302d6d81243673b3911e1631373"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a0d5ab302d6d81243673b3911e1631373">s3f::s3fnet::SocketSignal::SOCK_EOF</a></div><div class="ttdoc">no more data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00298">socket_session.h:298</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296">s3f::s3fnet::TCPSession::TCP_STATE_CLOSING</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00036">tcp_session.h:36</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">s3f::s3fnet::SocketSignal::DATA_AVAILABLE</a></div><div class="ttdoc">data is available </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00295">socket_session.h:295</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_aecf8e034a9cfb5e2fdd292ae0008c6e7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#aecf8e034a9cfb5e2fdd292ae0008c6e7">s3f::s3fnet::TCPSeqWindow::empty</a></div><div class="ttdeci">bool empty()</div><div class="ttdoc">Returns true iff the window is empty (nothing used). </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00150">tcp_seqwnd.h:150</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a00bfd0fea187f818bf0fd4c2a19cb214"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">s3f::s3fnet::TCPSession::clear_app_state</a></div><div class="ttdeci">void clear_app_state(int signal)</div><div class="ttdoc">Clear application signal bit(s). </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00281">tcp_session.cc:281</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af653b11b74a8d66fc176cc647e4444a5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::init_state_time_wait </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change to TIME_WAIT state. </p>

<p>Definition at line <a class="el" href="tcp__state_8cc_source.html#l00225">225</a> of file <a class="el" href="tcp__state_8cc_source.html">tcp_state.cc</a>.</p>

<p>References <a class="el" href="tcp__master_8h_source.html#l00138">s3f::s3fnet::TCPMaster::getMSL()</a>, <a class="el" href="tcp__session_8h_source.html#l00206">msl_timer_count</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__init_8h_source.html#l00073">TCP_DEFAULT_MSL_TIMEOUT_FACTOR</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, and <a class="el" href="tcp__session_8h_source.html#l00040">TCP_STATE_TIME_WAIT</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>, and <a class="el" href="tcp__receiver_8cc_source.html#l00183">process_FIN()</a>.</p>
<div class="fragment"><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;{</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">TCP_STATE_TIME_WAIT</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="comment">// set up the 2*msl timeout</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">msl_timer_count</a> = <a class="code" href="tcp__init_8h.html#a178addd2090e7dc2f87922d7402524f1">TCP_DEFAULT_MSL_TIMEOUT_FACTOR</a> * <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a5bc44e422b1c40602569e8a8f3b0c6dd">getMSL</a>();</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7c5180b90e5affbf5a38b5a3b578b849"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">s3f::s3fnet::TCPSession::msl_timer_count</a></div><div class="ttdeci">ltime_t msl_timer_count</div><div class="ttdoc">The timer count that lasts 2*msl. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00206">tcp_session.h:206</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">s3f::s3fnet::TCPSession::TCP_STATE_TIME_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00040">tcp_session.h:40</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a5bc44e422b1c40602569e8a8f3b0c6dd"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a5bc44e422b1c40602569e8a8f3b0c6dd">s3f::s3fnet::TCPMaster::getMSL</a></div><div class="ttdeci">ltime_t getMSL()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00138">tcp_master.h:138</a></div></div>
<div class="ttc" id="tcp__init_8h_html_a178addd2090e7dc2f87922d7402524f1"><div class="ttname"><a href="tcp__init_8h.html#a178addd2090e7dc2f87922d7402524f1">TCP_DEFAULT_MSL_TIMEOUT_FACTOR</a></div><div class="ttdeci">#define TCP_DEFAULT_MSL_TIMEOUT_FACTOR</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00073">tcp_init.h:73</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aeef1fea77584dc5a23d5134973c5238a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::appl_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When the upper layer attempts to send out data, this function will be called. </p>
<p>The message will be kept in the send window until it will be sent out and got acknowledged by the receiver. In addition, the message should be allocated at the upper layer. In other words, the upper layer cannot allocate the message from the stack. </p>

<p>Definition at line <a class="el" href="tcp__sender_8cc_source.html#l00023">23</a> of file <a class="el" href="tcp__sender_8cc_source.html">tcp_sender.cc</a>.</p>

<p>References <a class="el" href="tcp__sndwnd_8h_source.html#l00036">s3f::s3fnet::TCPSendWindow::canSend()</a>, <a class="el" href="tcp__session_8cc_source.html#l00281">clear_app_state()</a>, <a class="el" href="tcp__sndwnd_8h_source.html#l00068">s3f::s3fnet::TCPSendWindow::clearDataBuffered()</a>, <a class="el" href="tcp__sndwnd_8h_source.html#l00065">s3f::s3fnet::TCPSendWindow::dataBuffered()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00043">s3f::s3fnet::TCPSeqWindow::firstUnused()</a>, <a class="el" href="socket__session_8h_source.html#l00296">s3f::s3fnet::SocketSignal::OK_TO_SEND</a>, <a class="el" href="tcp__sndwnd_8cc_source.html#l00188">s3f::s3fnet::TCPSendWindow::requestToSend()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00110">segment_and_send()</a>, and <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00075">send()</a>.</p>
<div class="fragment"><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;{</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <span class="comment">// clear how much data has been buffered.</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#a7ad652573c7db265bea6aeb7d525b5e3">clearDataBuffered</a>();</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;  <span class="comment">// request to send out data</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;  <span class="keywordflow">if</span>(msg)</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;  {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a>* msgcpy = <span class="keyword">new</span> <a class="code" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a>[length]; assert(msgcpy);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    memcpy(msgcpy, msg, length);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#ac0cd75e944a59ed9fe7605c90462b6b0">requestToSend</a>(msgcpy, length);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;  }</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;  <span class="keywordflow">else</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#ac0cd75e944a59ed9fe7605c90462b6b0">requestToSend</a>(0, length);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="comment">// check whether we can send out packets.</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> len_to_send = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#a192325760e562fc35214a77e9831011d">canSend</a>();</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordflow">if</span>(len_to_send &gt; 0)</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;  {</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// send out new data if possible</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4fbadc4c967c43982e16d9c8c249fbc6">segment_and_send</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>(), len_to_send);</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  }</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <span class="comment">// this function will be triggered from the socket layer. If we do</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <span class="comment">// it once, we don&#39;t need to do it again.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">clear_app_state</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda">SocketSignal::OK_TO_SEND</a>);</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;  <span class="comment">// return number of bytes have been put into the buffer.</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> ret = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#ade08c05f7b12c364073609752ee76bd8">dataBuffered</a>();</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#a7ad652573c7db265bea6aeb7d525b5e3">clearDataBuffered</a>();</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_ac0cd75e944a59ed9fe7605c90462b6b0"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#ac0cd75e944a59ed9fe7605c90462b6b0">s3f::s3fnet::TCPSendWindow::requestToSend</a></div><div class="ttdeci">void requestToSend(byte *msg, uint32 length)</div><div class="ttdoc">Request to send new data. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8cc_source.html#l00188">tcp_sndwnd.cc:188</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_a7ad652573c7db265bea6aeb7d525b5e3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#a7ad652573c7db265bea6aeb7d525b5e3">s3f::s3fnet::TCPSendWindow::clearDataBuffered</a></div><div class="ttdeci">void clearDataBuffered()</div><div class="ttdoc">Clear how much data has been buffered. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8h_source.html#l00068">tcp_sndwnd.h:68</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a4fbadc4c967c43982e16d9c8c249fbc6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4fbadc4c967c43982e16d9c8c249fbc6">s3f::s3fnet::TCPSession::segment_and_send</a></div><div class="ttdeci">uint32 segment_and_send(uint32 seqno, uint32 length)</div><div class="ttdoc">Segment and send data. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00110">tcp_sender.cc:110</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_ade08c05f7b12c364073609752ee76bd8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#ade08c05f7b12c364073609752ee76bd8">s3f::s3fnet::TCPSendWindow::dataBuffered</a></div><div class="ttdeci">uint32 dataBuffered()</div><div class="ttdoc">Returns how much data has been put into the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8h_source.html#l00065">tcp_sndwnd.h:65</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a8345d443cb07b92fa8e4e9780d32ca57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">s3f::s3fnet::TCPSeqWindow::firstUnused</a></div><div class="ttdeci">uint32 firstUnused()</div><div class="ttdoc">Return the first unused sequence in the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00043">tcp_seqwnd.h:43</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_a192325760e562fc35214a77e9831011d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#a192325760e562fc35214a77e9831011d">s3f::s3fnet::TCPSendWindow::canSend</a></div><div class="ttdeci">uint32 canSend()</div><div class="ttdoc">Return how many bytes can be sent right now from the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8h_source.html#l00036">tcp_sndwnd.h:36</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a12c88f8240cbb8d926039db02a15cdda">s3f::s3fnet::SocketSignal::OK_TO_SEND</a></div><div class="ttdoc">clear to send data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00296">socket_session.h:296</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a57db3413e727c04a04ffc3a6bc27efa5"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">s3f::s3fnet::byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdoc">8-bit unsigned character type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00031">s3fnet.h:31</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a00bfd0fea187f818bf0fd4c2a19cb214"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">s3f::s3fnet::TCPSession::clear_app_state</a></div><div class="ttdeci">void clear_app_state(int signal)</div><div class="ttdoc">Clear application signal bit(s). </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00281">tcp_session.cc:281</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afefcda998f745d17d668577610ab8c23"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::send_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>seqno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>datalen</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a>&#160;</td>
          <td class="paramname"><em>mask</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>ackno</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_calc_rtt</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>need_set_rextimeout</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Physically send the data to the IP layer. </p>
<p>The method will call the push function of the TCP master. </p>

<p>Definition at line <a class="el" href="tcp__sender_8cc_source.html#l00055">55</a> of file <a class="el" href="tcp__sender_8cc_source.html">tcp_sender.cc</a>.</p>

<p>References <a class="el" href="tcp__sender_8cc_source.html#l00240">calc_advertised_wnd()</a>, <a class="el" href="protocol__message_8cc_source.html#l00027">s3f::s3fnet::ProtocolMessage::carryPayload()</a>, <a class="el" href="ip__interface_8h_source.html#l00020">DEFAULT_IP_TIMETOLIVE</a>, <a class="el" href="socket__session_8h_source.html#l00138">s3f::s3fnet::SessionID::dst_ip</a>, <a class="el" href="socket__session_8h_source.html#l00144">s3f::s3fnet::SessionID::dst_port</a>, <a class="el" href="tcp__message_8h_source.html#l00050">s3f::s3fnet::TCPMessage::flags</a>, <a class="el" href="tcp__sndwnd_8cc_source.html#l00038">s3f::s3fnet::TCPSendWindow::generate()</a>, <a class="el" href="tcp__session_8cc_source.html#l00132">get_state_name()</a>, <a class="el" href="protocol__session_8cc_source.html#l00128">s3f::s3fnet::ProtocolSession::getNowWithThousandSeparator()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="tcp__session_8h_source.html#l00160">measured_seq</a>, <a class="el" href="dmlobj_8h_source.html#l00047">s3f::s3fnet::DmlObject::nhi</a>, <a class="el" href="protocol__session_8cc_source.html#l00072">s3f::s3fnet::ProtocolSession::pushdown()</a>, <a class="el" href="data__message_8cc_source.html#l00078">s3f::s3fnet::DataMessage::realByteCount()</a>, <a class="el" href="tcp__session_8h_source.html#l00151">rtt_count</a>, <a class="el" href="tcp__session_8h_source.html#l00201">rxmit_timer_count</a>, <a class="el" href="s3fnet_8h_source.html#l00123">s3f::s3fnet::S3FNET_PROTOCOL_TYPE_TCP</a>, <a class="el" href="tcp__message_8h_source.html#l00017">S3FNET_TCPHDR_LENGTH</a>, <a class="el" href="tcp__message_8h_source.html#l00041">s3f::s3fnet::TCPMessage::seqno</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="socket__session_8h_source.html#l00135">s3f::s3fnet::SessionID::src_ip</a>, <a class="el" href="socket__session_8h_source.html#l00141">s3f::s3fnet::SessionID::src_port</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__sender_8cc_source.html#l00017">TCP_DUMP</a>, <a class="el" href="tcp__message_8h_source.html#l00030">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a>, <a class="el" href="tcp__message_8h_source.html#l00026">s3f::s3fnet::TCPMessage::TCP_FLAG_FIN</a>, <a class="el" href="tcp__message_8h_source.html#l00029">s3f::s3fnet::TCPMessage::TCP_FLAG_PSH</a>, <a class="el" href="tcp__message_8h_source.html#l00028">s3f::s3fnet::TCPMessage::TCP_FLAG_RST</a>, <a class="el" href="tcp__message_8h_source.html#l00027">s3f::s3fnet::TCPMessage::TCP_FLAG_SYN</a>, <a class="el" href="tcp__message_8h_source.html#l00031">s3f::s3fnet::TCPMessage::TCP_FLAG_URG</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, <a class="el" href="tcp__session_8h_source.html#l00388">timeout_value()</a>, <a class="el" href="nhi_8cc_source.html#l00076">s3f::s3fnet::Nhi::toString()</a>, and <a class="el" href="tcp__message_8h_source.html#l00053">s3f::s3fnet::TCPMessage::wsize</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00116">abort()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00173">acknowledge()</a>, <a class="el" href="tcp__session_8cc_source.html#l00208">appl_close()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00125">fastTimeoutHandling()</a>, <a class="el" href="tcp__state_8cc_source.html#l00166">init_state_fin_wait_1()</a>, <a class="el" href="tcp__state_8cc_source.html#l00152">init_state_last_ack()</a>, <a class="el" href="tcp__state_8cc_source.html#l00064">init_state_syn_received()</a>, <a class="el" href="tcp__state_8cc_source.html#l00050">init_state_syn_sent()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00144">resend_segments()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00110">segment_and_send()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>, and <a class="el" href="tcp__sender_8cc_source.html#l00191">timeout_resend()</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;{</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  <span class="comment">// they will be used when SACK enabled.</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  <span class="keywordtype">int</span> added_len = 0;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a>* options = NULL;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;  DataMessage* data = NULL;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="comment">// generate the payload for this TCP packet.</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="keywordflow">if</span>(length &gt; 0) data = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#a6e460638fbe7ff2b2dcf7d7890bd115e">generate</a>(seqno, length);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="comment">// except the SYN and FIN packets, we set ACK anyway.</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <span class="keywordflow">if</span>(!(mask &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">TCPMessage::TCP_FLAG_SYN</a>)<span class="comment">/* &amp;&amp; !(mask &amp; TCPMessage::TCP_FLAG_FIN)*/</span>)</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    mask |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">TCPMessage::TCP_FLAG_ACK</a>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <span class="comment">// create the TCP header.</span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  TCPMessage* tcp_msg = <span class="keyword">new</span> TCPMessage</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    (<a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#a8b7a04b54cb31c4d060657593ed88d2f">src_port</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#ac777d144a536fe6992da8c0f2c5bb450">dst_port</a>, seqno, ackno, mask, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#adea6916920265fc56e81d59869827a21">calc_advertised_wnd</a>(), </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;     (<a class="code" href="tcp__message_8h.html#a3525eaf76aafbe867b8d07d8479f1a9b">S3FNET_TCPHDR_LENGTH</a>+added_len)/<span class="keyword">sizeof</span>(<a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>), options);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <span class="comment">// attach the payload to the tcp message header.</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  tcp_msg-&gt;carryPayload(data);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <a class="code" href="tcp__sender_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %s: send_data(), flags=[%c%c%c%c%c%c] &quot;</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                  <span class="stringliteral">&quot;seqno=%u, ackno=%u, wsize=%u, len=%u [state=%s]\n&quot;</span>,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_dml_object.html#a602e2119414b0758d299582bca25f30b">nhi</a>.<a class="code" href="classs3f_1_1s3fnet_1_1_nhi.html#a12348ee85a1bd6d7ddaf4876b8d32501">toString</a>(),</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a0250c97bad17f18ef7037fd76f7e5083">getNowWithThousandSeparator</a>(),</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                  (tcp_msg-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">TCPMessage::TCP_FLAG_SYN</a>) ? <span class="charliteral">&#39;S&#39;</span> : <span class="charliteral">&#39;.&#39;</span>,</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                  (tcp_msg-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7">TCPMessage::TCP_FLAG_FIN</a>) ? <span class="charliteral">&#39;F&#39;</span> : <span class="charliteral">&#39;.&#39;</span>,</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                  (tcp_msg-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f">TCPMessage::TCP_FLAG_RST</a>) ? <span class="charliteral">&#39;R&#39;</span> : <span class="charliteral">&#39;.&#39;</span>,</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                  (tcp_msg-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">TCPMessage::TCP_FLAG_ACK</a>) ? <span class="charliteral">&#39;A&#39;</span> : <span class="charliteral">&#39;.&#39;</span>,</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                  (tcp_msg-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9a8fb73b0c2758d10b5bb7263f5bb7414c">TCPMessage::TCP_FLAG_URG</a>) ? <span class="charliteral">&#39;U&#39;</span> : <span class="charliteral">&#39;.&#39;</span>,</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                  (tcp_msg-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9a38acf573e21248182a78dc49bcb329b7">TCPMessage::TCP_FLAG_PSH</a>) ? <span class="charliteral">&#39;P&#39;</span> : <span class="charliteral">&#39;.&#39;</span>,              </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                  tcp_msg-&gt;seqno, ackno, tcp_msg-&gt;wsize,</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                  data?data-&gt;realByteCount():0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aed4d30a3e6ffdcd0b22aa7dbc651e589">get_state_name</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a>)));</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">if</span>(need_calc_rtt &amp;&amp; !<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">rtt_count</a>)</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a5b15db876b9718d7c0c8c68747235a5c">measured_seq</a> = seqno;        </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">rtt_count</a> = 1;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  </div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="comment">// Physically Send the Data</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  IPPushOption ops(<a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#afc2e0c48325b4faff47ca2f155a4956c">src_ip</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#a40000686ed11d99e747b2b2bb51a316e">dst_ip</a>, <a class="code" href="namespaces3f_1_1s3fnet.html#a2d885d995be52ebf39a06e881ec67919a79c34ff2bf1768c6fc90d613edcd0908">S3FNET_PROTOCOL_TYPE_TCP</a>, <a class="code" href="ip__interface_8h.html#ac6469e7d24a82b82ca1a0ca5179fdd7f">DEFAULT_IP_TIMETOLIVE</a>);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a1a9fa5693373188218eba85c782583e7">pushdown</a>(tcp_msg, NULL, (<span class="keywordtype">void</span>*)&amp;ops, <span class="keyword">sizeof</span>(IPPushOption));</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// if timer is not scheduled, schedule it and start RTT measurment;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="comment">// whenever a segment is sent out, we should check whether we need</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">// to start the retransmission timer</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">if</span>(need_set_rextimeout &amp;&amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a> == 0)</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae8a8130abf0e7a46c2ff0f2991c1a593">timeout_value</a>();</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ae8a8130abf0e7a46c2ff0f2991c1a593"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae8a8130abf0e7a46c2ff0f2991c1a593">s3f::s3fnet::TCPSession::timeout_value</a></div><div class="ttdeci">ltime_t timeout_value()</div><div class="ttdoc">Current smoothed RTT timeout value. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00388">tcp_session.h:388</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a07975f88fa9d44f71eaa96061bcfe4b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">s3f::s3fnet::TCPSession::rtt_count</a></div><div class="ttdeci">int rtt_count</div><div class="ttdoc">The current RTT count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00151">tcp_session.h:151</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a2d885d995be52ebf39a06e881ec67919a79c34ff2bf1768c6fc90d613edcd0908"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a2d885d995be52ebf39a06e881ec67919a79c34ff2bf1768c6fc90d613edcd0908">s3f::s3fnet::S3FNET_PROTOCOL_TYPE_TCP</a></div><div class="ttdoc">The Transport Control Protocol (TCP). </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00123">s3fnet.h:123</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8b77936e0c278e8c4b88ecd7ac215551"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">s3f::s3fnet::TCPSession::rxmit_timer_count</a></div><div class="ttdeci">ltime_t rxmit_timer_count</div><div class="ttdoc">Retransmission timer count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00201">tcp_session.h:201</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a1a9fa5693373188218eba85c782583e7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a1a9fa5693373188218eba85c782583e7">s3f::s3fnet::ProtocolSession::pushdown</a></div><div class="ttdeci">int pushdown(Activation msg, ProtocolSession *hi_sess, void *extinfo=0, size_t extinfo_size=0)</div><div class="ttdoc">The original push method is divided into pushdown() and push(). </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00072">protocol_session.cc:72</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9a38acf573e21248182a78dc49bcb329b7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9a38acf573e21248182a78dc49bcb329b7">s3f::s3fnet::TCPMessage::TCP_FLAG_PSH</a></div><div class="ttdoc">push operation invoked </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00029">tcp_message.h:29</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_a8b7a04b54cb31c4d060657593ed88d2f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#a8b7a04b54cb31c4d060657593ed88d2f">s3f::s3fnet::SessionID::src_port</a></div><div class="ttdeci">uint16 src_port</div><div class="ttdoc">Source port number. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00141">socket_session.h:141</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9a8fb73b0c2758d10b5bb7263f5bb7414c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9a8fb73b0c2758d10b5bb7263f5bb7414c">s3f::s3fnet::TCPMessage::TCP_FLAG_URG</a></div><div class="ttdoc">urgent pointer field valid </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00031">tcp_message.h:31</a></div></div>
<div class="ttc" id="ip__interface_8h_html_ac6469e7d24a82b82ca1a0ca5179fdd7f"><div class="ttname"><a href="ip__interface_8h.html#ac6469e7d24a82b82ca1a0ca5179fdd7f">DEFAULT_IP_TIMETOLIVE</a></div><div class="ttdeci">#define DEFAULT_IP_TIMETOLIVE</div><div class="ttdef"><b>Definition:</b> <a href="ip__interface_8h_source.html#l00020">ip_interface.h:20</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7">s3f::s3fnet::TCPMessage::TCP_FLAG_FIN</a></div><div class="ttdoc">final segmenet from sender </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00026">tcp_message.h:26</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f">s3f::s3fnet::TCPMessage::TCP_FLAG_RST</a></div><div class="ttdoc">connection to be reset </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00028">tcp_message.h:28</a></div></div>
<div class="ttc" id="tcp__sender_8cc_html_ae626a9851fdb5af743c1eb8643d81adc"><div class="ttname"><a href="tcp__sender_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a></div><div class="ttdeci">#define TCP_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00017">tcp_sender.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_aed4d30a3e6ffdcd0b22aa7dbc651e589"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aed4d30a3e6ffdcd0b22aa7dbc651e589">s3f::s3fnet::TCPSession::get_state_name</a></div><div class="ttdeci">static char * get_state_name(int state)</div><div class="ttdoc">Translate the tcp state into a string. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00132">tcp_session.cc:132</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">s3f::s3fnet::TCPMessage::TCP_FLAG_SYN</a></div><div class="ttdoc">start of a new connection </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00027">tcp_message.h:27</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="tcp__message_8h_html_a3525eaf76aafbe867b8d07d8479f1a9b"><div class="ttname"><a href="tcp__message_8h.html#a3525eaf76aafbe867b8d07d8479f1a9b">S3FNET_TCPHDR_LENGTH</a></div><div class="ttdeci">#define S3FNET_TCPHDR_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00017">tcp_message.h:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_dml_object_html_a602e2119414b0758d299582bca25f30b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_dml_object.html#a602e2119414b0758d299582bca25f30b">s3f::s3fnet::DmlObject::nhi</a></div><div class="ttdeci">Nhi nhi</div><div class="ttdoc">The nhi address to identify the object. </div><div class="ttdef"><b>Definition:</b> <a href="dmlobj_8h_source.html#l00047">dmlobj.h:47</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_adea6916920265fc56e81d59869827a21"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#adea6916920265fc56e81d59869827a21">s3f::s3fnet::TCPSession::calc_advertised_wnd</a></div><div class="ttdeci">uint32 calc_advertised_wnd()</div><div class="ttdoc">Calculate the advertised window size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00240">tcp_sender.cc:240</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_a40000686ed11d99e747b2b2bb51a316e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#a40000686ed11d99e747b2b2bb51a316e">s3f::s3fnet::SessionID::dst_ip</a></div><div class="ttdeci">IPADDR dst_ip</div><div class="ttdoc">Destination ip address. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00138">socket_session.h:138</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_a6e460638fbe7ff2b2dcf7d7890bd115e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#a6e460638fbe7ff2b2dcf7d7890bd115e">s3f::s3fnet::TCPSendWindow::generate</a></div><div class="ttdeci">DataMessage * generate(uint32 seqno, uint32 length)</div><div class="ttdoc">Generate a message with designated length and sequence number. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8cc_source.html#l00038">tcp_sndwnd.cc:38</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_ac777d144a536fe6992da8c0f2c5bb450"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#ac777d144a536fe6992da8c0f2c5bb450">s3f::s3fnet::SessionID::dst_port</a></div><div class="ttdeci">uint16 dst_port</div><div class="ttdoc">Destination port number. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00144">socket_session.h:144</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a5b15db876b9718d7c0c8c68747235a5c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a5b15db876b9718d7c0c8c68747235a5c">s3f::s3fnet::TCPSession::measured_seq</a></div><div class="ttdeci">uint32 measured_seq</div><div class="ttdoc">The sequence number of the segment currently being measured. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00160">tcp_session.h:160</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nhi_html_a12348ee85a1bd6d7ddaf4876b8d32501"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nhi.html#a12348ee85a1bd6d7ddaf4876b8d32501">s3f::s3fnet::Nhi::toString</a></div><div class="ttdeci">char * toString(char *buf)</div><div class="ttdoc">Returns a char array representation of this NHI. </div><div class="ttdef"><b>Definition:</b> <a href="nhi_8cc_source.html#l00076">nhi.cc:76</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a0250c97bad17f18ef7037fd76f7e5083"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a0250c97bad17f18ef7037fd76f7e5083">s3f::s3fnet::ProtocolSession::getNowWithThousandSeparator</a></div><div class="ttdeci">char * getNowWithThousandSeparator()</div><div class="ttdoc">For printing the current simulation time in a better readable format. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00128">protocol_session.cc:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a></div><div class="ttdoc">acknowledgment field valid </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00030">tcp_message.h:30</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a57db3413e727c04a04ffc3a6bc27efa5"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">s3f::s3fnet::byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdoc">8-bit unsigned character type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00031">s3fnet.h:31</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_afc2e0c48325b4faff47ca2f155a4956c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#afc2e0c48325b4faff47ca2f155a4956c">s3f::s3fnet::SessionID::src_ip</a></div><div class="ttdeci">IPADDR src_ip</div><div class="ttdoc">Source ip address. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00135">socket_session.h:135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4fbadc4c967c43982e16d9c8c249fbc6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::segment_and_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>seqno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Segment and send data. </p>

<p>Definition at line <a class="el" href="tcp__sender_8cc_source.html#l00110">110</a> of file <a class="el" href="tcp__sender_8cc_source.html">tcp_sender.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00127">cwnd</a>, <a class="el" href="tcp__sndwnd_8h_source.html#l00052">s3f::s3fnet::TCPSendWindow::dataInBuffer()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00130">s3f::s3fnet::TCPSeqWindow::expect()</a>, <a class="el" href="tcp__session_8h_source.html#l00133">mss</a>, <a class="el" href="s3fnet_8h_source.html#l00044">mymin</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00124">rcvwnd_size</a>, <a class="el" href="ip__message_8h_source.html#l00019">S3FNET_IP_MAX_DATA_SIZE</a>, <a class="el" href="tcp__message_8h_source.html#l00017">S3FNET_TCPHDR_LENGTH</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00052">s3f::s3fnet::TCPSeqWindow::unused()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00092">s3f::s3fnet::TCPSeqWindow::use()</a>, and <a class="el" href="tcp__seqwnd_8h_source.html#l00049">s3f::s3fnet::TCPSeqWindow::used()</a>.</p>

<p>Referenced by <a class="el" href="tcp__sender_8cc_source.html#l00023">appl_send()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>, and <a class="el" href="tcp__sack_8cc_source.html#l00162">sack_send_in_fast_recovery()</a>.</p>
<div class="fragment"><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="keywordflow">if</span>(length &lt;= 0) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> bytes_sent = 0;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">used</a>() &lt; <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">rcvwnd_size</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a>))</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> nbytes = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">rcvwnd_size</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a>)-<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">used</a>();</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    nbytes = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(nbytes, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a534e7bea2c3001a1577e627a92d27877">unused</a>());</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    nbytes = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(nbytes, length);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    nbytes = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(nbytes, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    nbytes = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(nbytes, <a class="code" href="ip__message_8h.html#ad849eb583681e7580c9a2db808389eb8">S3FNET_IP_MAX_DATA_SIZE</a> - <a class="code" href="tcp__message_8h.html#a3525eaf76aafbe867b8d07d8479f1a9b">S3FNET_TCPHDR_LENGTH</a>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="keywordflow">while</span>(nbytes == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a> ||</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;          0 &lt; nbytes &amp;&amp; nbytes &lt; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a> &amp;&amp; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;          nbytes == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#acf3cacfd0832a6f14ab0db8bdd2e1771">dataInBuffer</a>() - <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">used</a>())</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;      <span class="keywordflow">if</span>(!<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a28343959af1723097606a6ee7f50dcfb">use</a>(nbytes)) <span class="keywordflow">return</span> bytes_sent;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(seqno, nbytes, 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      seqno += nbytes;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      length -= nbytes;      </div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      bytes_sent += nbytes;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      nbytes = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">rcvwnd_size</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a>)-<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">used</a>();</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      nbytes = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(nbytes, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a534e7bea2c3001a1577e627a92d27877">unused</a>());</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;      nbytes = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(nbytes, length);</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      nbytes = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(nbytes, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      nbytes = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(nbytes, <a class="code" href="ip__message_8h.html#ad849eb583681e7580c9a2db808389eb8">S3FNET_IP_MAX_DATA_SIZE</a> - <a class="code" href="tcp__message_8h.html#a3525eaf76aafbe867b8d07d8479f1a9b">S3FNET_TCPHDR_LENGTH</a>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    }</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">return</span> bytes_sent;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a81734c4c094d55f4551a80f9722c5221"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">s3f::s3fnet::TCPSeqWindow::expect</a></div><div class="ttdeci">uint32 expect()</div><div class="ttdoc">Like start method, but also uses SYN &amp; FIN segments; the method is used for receiving window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00130">tcp_seqwnd.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a534e7bea2c3001a1577e627a92d27877"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a534e7bea2c3001a1577e627a92d27877">s3f::s3fnet::TCPSeqWindow::unused</a></div><div class="ttdeci">uint32 unused()</div><div class="ttdoc">Return how much of the window is unused in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00052">tcp_seqwnd.h:52</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_afefcda998f745d17d668577610ab8c23"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">s3f::s3fnet::TCPSession::send_data</a></div><div class="ttdeci">void send_data(uint32 seqno, uint32 datalen=0, byte mask=0, uint32 ackno=0, bool need_calc_rtt=false, bool need_set_rextimeout=false)</div><div class="ttdoc">Physically send the data to the IP layer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00055">tcp_sender.cc:55</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="ip__message_8h_html_ad849eb583681e7580c9a2db808389eb8"><div class="ttname"><a href="ip__message_8h.html#ad849eb583681e7580c9a2db808389eb8">S3FNET_IP_MAX_DATA_SIZE</a></div><div class="ttdeci">#define S3FNET_IP_MAX_DATA_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="ip__message_8h_source.html#l00019">ip_message.h:19</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a28343959af1723097606a6ee7f50dcfb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a28343959af1723097606a6ee7f50dcfb">s3f::s3fnet::TCPSeqWindow::use</a></div><div class="ttdeci">bool use(uint32 nbytes)</div><div class="ttdoc">Use up nbytes of the window with data. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00092">tcp_seqwnd.h:92</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_acf3cacfd0832a6f14ab0db8bdd2e1771"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#acf3cacfd0832a6f14ab0db8bdd2e1771">s3f::s3fnet::TCPSendWindow::dataInBuffer</a></div><div class="ttdeci">uint32 dataInBuffer()</div><div class="ttdoc">Returns how much of the buffer is used. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8h_source.html#l00052">tcp_sndwnd.h:52</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="tcp__message_8h_html_a3525eaf76aafbe867b8d07d8479f1a9b"><div class="ttname"><a href="tcp__message_8h.html#a3525eaf76aafbe867b8d07d8479f1a9b">S3FNET_TCPHDR_LENGTH</a></div><div class="ttdeci">#define S3FNET_TCPHDR_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00017">tcp_message.h:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1082383b1ab63ecfe7da04f4ae8fa07"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">s3f::s3fnet::TCPSession::mss</a></div><div class="ttdeci">uint32 mss</div><div class="ttdoc">Maximum segment size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00133">tcp_session.h:133</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a93827f7ec39fba34aa3bc5f1eba82f24"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">s3f::s3fnet::TCPSeqWindow::used</a></div><div class="ttdeci">uint32 used()</div><div class="ttdoc">Return how much of the window is used up in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00049">tcp_seqwnd.h:49</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2a7d2ba14ba1e9b7d5402275d92a1ee6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">s3f::s3fnet::TCPSession::rcvwnd_size</a></div><div class="ttdeci">uint32 rcvwnd_size</div><div class="ttdoc">Remote receive window size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00124">tcp_session.h:124</a></div></div>
<div class="ttc" id="s3fnet_8h_html_ae647aceb957903b3149e0783b10dc673"><div class="ttname"><a href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a></div><div class="ttdeci">#define mymin(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00044">s3fnet.h:44</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2cd5840cbc1191efd078c08076f279d3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">s3f::s3fnet::TCPSession::cwnd</a></div><div class="ttdeci">uint32 cwnd</div><div class="ttdoc">Congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00127">tcp_session.h:127</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae65322a37b337f806238cc67289eaf5c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::resend_segments </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>seqno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>nsegments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Resend the segments. </p>

<p>Definition at line <a class="el" href="tcp__sender_8cc_source.html#l00144">144</a> of file <a class="el" href="tcp__sender_8cc_source.html">tcp_sender.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00127">cwnd</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00130">s3f::s3fnet::TCPSeqWindow::expect()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00056">s3f::s3fnet::TCPSeqWindow::lengthTo()</a>, <a class="el" href="tcp__session_8h_source.html#l00133">mss</a>, <a class="el" href="s3fnet_8h_source.html#l00044">mymin</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00163">recover_seq</a>, <a class="el" href="tcp__session_8h_source.html#l00157">rxmit_seq</a>, <a class="el" href="tcp__session_8h_source.html#l00201">rxmit_timer_count</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, and <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, <a class="el" href="tcp__sack_8cc_source.html#l00145">sack_resend_segments()</a>, and <a class="el" href="tcp__sender_8cc_source.html#l00191">timeout_resend()</a>.</p>
<div class="fragment"><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;{ </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  <span class="comment">// first cancel retransmission timeout</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a> = 0;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="comment">// send up to nsegments</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> bytes_sent = 0;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  nsegments = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(nsegments, (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> - <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#aae295bf1686cbb71d2ab222f7821530a">lengthTo</a>(seqno))/<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">while</span>(nsegments &gt; 0)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="comment">// figure out minimum sized segment; minimum between mss and the</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// amount of data to send in window</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> nbytes = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">recover_seq</a> - seqno);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span>(nbytes &gt; 0)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(seqno, nbytes, 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      seqno += nbytes;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      bytes_sent += nbytes;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      nsegments--;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">// update rxmit_seq if nesessary</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">rxmit_seq</a> = seqno;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <span class="comment">// return nubmer for bytes sent</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  <span class="keywordflow">return</span> bytes_sent;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a56a6e70f6b65a6b8b33959997f4f1af1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">s3f::s3fnet::TCPSession::rxmit_seq</a></div><div class="ttdeci">uint32 rxmit_seq</div><div class="ttdoc">The last sequence number of retransmitted segment plus one. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00157">tcp_session.h:157</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a18e65bc289c8426ebd69f0714fa50a8d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">s3f::s3fnet::TCPSession::recover_seq</a></div><div class="ttdeci">uint32 recover_seq</div><div class="ttdoc">The largest seqno sent out when loss happens. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00163">tcp_session.h:163</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8b77936e0c278e8c4b88ecd7ac215551"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">s3f::s3fnet::TCPSession::rxmit_timer_count</a></div><div class="ttdeci">ltime_t rxmit_timer_count</div><div class="ttdoc">Retransmission timer count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00201">tcp_session.h:201</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a81734c4c094d55f4551a80f9722c5221"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">s3f::s3fnet::TCPSeqWindow::expect</a></div><div class="ttdeci">uint32 expect()</div><div class="ttdoc">Like start method, but also uses SYN &amp; FIN segments; the method is used for receiving window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00130">tcp_seqwnd.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_aae295bf1686cbb71d2ab222f7821530a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#aae295bf1686cbb71d2ab222f7821530a">s3f::s3fnet::TCPSeqWindow::lengthTo</a></div><div class="ttdeci">uint32 lengthTo(const uint32 seqno)</div><div class="ttdoc">Return the number of bytes between a give sequence number and the start of the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00056">tcp_seqwnd.h:56</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_afefcda998f745d17d668577610ab8c23"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">s3f::s3fnet::TCPSession::send_data</a></div><div class="ttdeci">void send_data(uint32 seqno, uint32 datalen=0, byte mask=0, uint32 ackno=0, bool need_calc_rtt=false, bool need_set_rextimeout=false)</div><div class="ttdoc">Physically send the data to the IP layer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00055">tcp_sender.cc:55</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1082383b1ab63ecfe7da04f4ae8fa07"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">s3f::s3fnet::TCPSession::mss</a></div><div class="ttdeci">uint32 mss</div><div class="ttdoc">Maximum segment size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00133">tcp_session.h:133</a></div></div>
<div class="ttc" id="s3fnet_8h_html_ae647aceb957903b3149e0783b10dc673"><div class="ttname"><a href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a></div><div class="ttdeci">#define mymin(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00044">s3fnet.h:44</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2cd5840cbc1191efd078c08076f279d3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">s3f::s3fnet::TCPSession::cwnd</a></div><div class="ttdeci">uint32 cwnd</div><div class="ttdoc">Congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00127">tcp_session.h:127</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad018222843ceeab54f405d80a938c9a2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::acknowledge </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>nodelay</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate acknowledgements; no delay is imposed if the nodelay parameter is true. </p>

<p>Definition at line <a class="el" href="tcp__sender_8cc_source.html#l00173">173</a> of file <a class="el" href="tcp__sender_8cc_source.html">tcp_sender.cc</a>.</p>

<p>References <a class="el" href="tcp__sender_8cc_source.html#l00266">cancel_delay_ack()</a>, <a class="el" href="tcp__session_8h_source.html#l00169">delayed_ack</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00043">s3f::s3fnet::TCPSeqWindow::firstUnused()</a>, <a class="el" href="tcp__rcvwnd_8cc_source.html#l00156">s3f::s3fnet::TCPRecvWindow::getExpectedSeqno()</a>, <a class="el" href="tcp__master_8h_source.html#l00139">s3f::s3fnet::TCPMaster::isDelayedAck()</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00260">send_delay_ack()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__message_8h_source.html#l00030">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a>, and <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a22579edae0a5cf5f55712a7f1acbe9f6">isDelayedAck</a>() &amp;&amp; !nodelay &amp;&amp; !<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">delayed_ack</a>)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// put ack on delayed ack queue</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a24322c47640acd2781cab62c705b3af2">send_delay_ack</a>();</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// send the ack</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>(), 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">TCPMessage::TCP_FLAG_ACK</a>,</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;              <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#a8a2d2e3f51f54c5ef0fe2a550f31bf94">getExpectedSeqno</a>(), <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="comment">// if delayed ack, we should cancel it</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a22579edae0a5cf5f55712a7f1acbe9f6">isDelayedAck</a>()) <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7a7702b0e5bbc4c2a10a6c2532224095">cancel_delay_ack</a>();</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  }</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a24322c47640acd2781cab62c705b3af2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a24322c47640acd2781cab62c705b3af2">s3f::s3fnet::TCPSession::send_delay_ack</a></div><div class="ttdeci">void send_delay_ack()</div><div class="ttdoc">Set the session to send delayed ACK when next time the fast timer fires. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00260">tcp_sender.cc:260</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a55f340d4380db8a98d154d66ba68b5c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">s3f::s3fnet::TCPSession::delayed_ack</a></div><div class="ttdeci">bool delayed_ack</div><div class="ttdoc">True if the delayed ack is turned on. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00169">tcp_session.h:169</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_afefcda998f745d17d668577610ab8c23"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">s3f::s3fnet::TCPSession::send_data</a></div><div class="ttdeci">void send_data(uint32 seqno, uint32 datalen=0, byte mask=0, uint32 ackno=0, bool need_calc_rtt=false, bool need_set_rextimeout=false)</div><div class="ttdoc">Physically send the data to the IP layer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00055">tcp_sender.cc:55</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7a7702b0e5bbc4c2a10a6c2532224095"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7a7702b0e5bbc4c2a10a6c2532224095">s3f::s3fnet::TCPSession::cancel_delay_ack</a></div><div class="ttdeci">void cancel_delay_ack()</div><div class="ttdoc">Set the session to cancel sending delayed ACK when next timer the fast timer fires. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00266">tcp_sender.cc:266</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_recv_window_html_a8a2d2e3f51f54c5ef0fe2a550f31bf94"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#a8a2d2e3f51f54c5ef0fe2a550f31bf94">s3f::s3fnet::TCPRecvWindow::getExpectedSeqno</a></div><div class="ttdeci">uint32 getExpectedSeqno()</div><div class="ttdoc">Get the expected sequence number from the buffer; this is necessary because an ACK packet may be sent...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__rcvwnd_8cc_source.html#l00156">tcp_rcvwnd.cc:156</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a8345d443cb07b92fa8e4e9780d32ca57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">s3f::s3fnet::TCPSeqWindow::firstUnused</a></div><div class="ttdeci">uint32 firstUnused()</div><div class="ttdoc">Return the first unused sequence in the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00043">tcp_seqwnd.h:43</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a22579edae0a5cf5f55712a7f1acbe9f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a22579edae0a5cf5f55712a7f1acbe9f6">s3f::s3fnet::TCPMaster::isDelayedAck</a></div><div class="ttdeci">bool isDelayedAck()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00139">tcp_master.h:139</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a></div><div class="ttdoc">acknowledgment field valid </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00030">tcp_message.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1eb688f0fbd5e0c2cab43473c5f2da10"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::timeout_resend </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This function is called when retransmission timer expires. </p>

<p>Definition at line <a class="el" href="tcp__sender_8cc_source.html#l00191">191</a> of file <a class="el" href="tcp__sender_8cc_source.html">tcp_sender.cc</a>.</p>

<p>References <a class="el" href="errhandle_8cc_source.html#l00128">s3f::s3fnet::error_quit()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00130">s3f::s3fnet::TCPSeqWindow::expect()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00043">s3f::s3fnet::TCPSeqWindow::firstUnused()</a>, <a class="el" href="tcp__master_8h_source.html#l00126">s3f::s3fnet::TCPMaster::getVersion()</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__sender_8cc_source.html#l00144">resend_segments()</a>, <a class="el" href="tcp__sack_8cc_source.html#l00145">sack_resend_segments()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00037">s3f::s3fnet::TCPSeqWindow::start()</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__message_8h_source.html#l00030">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a>, <a class="el" href="tcp__message_8h_source.html#l00026">s3f::s3fnet::TCPMessage::TCP_FLAG_FIN</a>, <a class="el" href="tcp__message_8h_source.html#l00027">s3f::s3fnet::TCPMessage::TCP_FLAG_SYN</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, <a class="el" href="tcp__session_8h_source.html#l00035">TCP_STATE_CLOSE_WAIT</a>, <a class="el" href="tcp__session_8h_source.html#l00036">TCP_STATE_CLOSING</a>, <a class="el" href="tcp__session_8h_source.html#l00034">TCP_STATE_ESTABLISHED</a>, <a class="el" href="tcp__session_8h_source.html#l00037">TCP_STATE_FIN_WAIT_1</a>, <a class="el" href="tcp__session_8h_source.html#l00039">TCP_STATE_LAST_ACK</a>, <a class="el" href="tcp__session_8h_source.html#l00033">TCP_STATE_SYN_RECEIVED</a>, <a class="el" href="tcp__session_8h_source.html#l00032">TCP_STATE_SYN_SENT</a>, <a class="el" href="tcp__master_8h_source.html#l00037">s3f::s3fnet::TCPMaster::TCP_VERSION_NEW_RENO</a>, <a class="el" href="tcp__master_8h_source.html#l00036">s3f::s3fnet::TCPMaster::TCP_VERSION_RENO</a>, <a class="el" href="tcp__master_8h_source.html#l00038">s3f::s3fnet::TCPMaster::TCP_VERSION_SACK</a>, and <a class="el" href="tcp__master_8h_source.html#l00035">s3f::s3fnet::TCPMaster::TCP_VERSION_TAHOE</a>.</p>

<p>Referenced by <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>.</p>
<div class="fragment"><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;{</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  <span class="keywordflow">switch</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a>) {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">TCP_STATE_SYN_SENT</a>:</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">// retransmit the syn segment</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>(), 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">TCPMessage::TCP_FLAG_SYN</a>, </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;              <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18">TCP_STATE_SYN_RECEIVED</a>:</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">// retransmit the syn and ack segment</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>(), 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">TCPMessage::TCP_FLAG_SYN</a> | <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">TCPMessage::TCP_FLAG_ACK</a>,</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;              <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a>:</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">TCP_STATE_CLOSE_WAIT</a>:</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    <span class="comment">// retransmit data segment</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">getVersion</a>()) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2aca16cf64e7e742d461d5932e6fe40597">TCPMaster::TCP_VERSION_TAHOE</a>:</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">resend_segments</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a0b6858cce05ab50a8e9cad0402e94659">start</a>(), INT_MAX);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">break</span>;      </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a835ba96773c5a14861086497efd8ef52">TCPMaster::TCP_VERSION_RENO</a>:</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2ad8dac06bf0b87186325589c2476b0323">TCPMaster::TCP_VERSION_NEW_RENO</a>:</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">resend_segments</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a0b6858cce05ab50a8e9cad0402e94659">start</a>(), 1);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9">TCPMaster::TCP_VERSION_SACK</a>:</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a193f27433620c8c44564859a9da7f37b">sack_resend_segments</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      assert(0);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296">TCP_STATE_CLOSING</a>:</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">TCP_STATE_FIN_WAIT_1</a>:</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914">TCP_STATE_LAST_ACK</a>:</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// resend the FIN segment</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a><span class="comment">/*next*/</span>(), 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7">TCPMessage::TCP_FLAG_FIN</a>, </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;              <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">false</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="keywordflow">default</span>:  </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">// TCP_STATE_LISTEN, TCP_STATE_CLOSED, TCP_STATE_TIME_WAIT,</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// or TCP_STATE_FIN_WAIT_2</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;PANIC: TCPSession::timeout_resend(), unexpected state: %d.\n&quot;</span>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  }</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18">s3f::s3fnet::TCPSession::TCP_STATE_SYN_RECEIVED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00033">tcp_session.h:33</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_1</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00037">tcp_session.h:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a81734c4c094d55f4551a80f9722c5221"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">s3f::s3fnet::TCPSeqWindow::expect</a></div><div class="ttdeci">uint32 expect()</div><div class="ttdoc">Like start method, but also uses SYN &amp; FIN segments; the method is used for receiving window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00130">tcp_seqwnd.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a99e7a3514c6966776f03a6847d9419f2a835ba96773c5a14861086497efd8ef52"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a835ba96773c5a14861086497efd8ef52">s3f::s3fnet::TCPMaster::TCP_VERSION_RENO</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00036">tcp_master.h:36</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_afefcda998f745d17d668577610ab8c23"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">s3f::s3fnet::TCPSession::send_data</a></div><div class="ttdeci">void send_data(uint32 seqno, uint32 datalen=0, byte mask=0, uint32 ackno=0, bool need_calc_rtt=false, bool need_set_rextimeout=false)</div><div class="ttdoc">Physically send the data to the IP layer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00055">tcp_sender.cc:55</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7">s3f::s3fnet::TCPMessage::TCP_FLAG_FIN</a></div><div class="ttdoc">final segmenet from sender </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00026">tcp_message.h:26</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a193f27433620c8c44564859a9da7f37b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a193f27433620c8c44564859a9da7f37b">s3f::s3fnet::TCPSession::sack_resend_segments</a></div><div class="ttdeci">bool sack_resend_segments(bool first_flag)</div><div class="ttdoc">When the sack option is set, this method is used for retransmissions. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sack_8cc_source.html#l00145">tcp_sack.cc:145</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a99e7a3514c6966776f03a6847d9419f2ad8dac06bf0b87186325589c2476b0323"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2ad8dac06bf0b87186325589c2476b0323">s3f::s3fnet::TCPMaster::TCP_VERSION_NEW_RENO</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00037">tcp_master.h:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a78430cee896ecf9f004a1cc11431697d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">s3f::s3fnet::TCPMaster::getVersion</a></div><div class="ttdeci">int getVersion()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00126">tcp_master.h:126</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">s3f::s3fnet::TCPSession::TCP_STATE_ESTABLISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00034">tcp_session.h:34</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">s3f::s3fnet::TCPMessage::TCP_FLAG_SYN</a></div><div class="ttdoc">start of a new connection </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00027">tcp_message.h:27</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296">s3f::s3fnet::TCPSession::TCP_STATE_CLOSING</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00036">tcp_session.h:36</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a8345d443cb07b92fa8e4e9780d32ca57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">s3f::s3fnet::TCPSeqWindow::firstUnused</a></div><div class="ttdeci">uint32 firstUnused()</div><div class="ttdoc">Return the first unused sequence in the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00043">tcp_seqwnd.h:43</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a0b6858cce05ab50a8e9cad0402e94659"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a0b6858cce05ab50a8e9cad0402e94659">s3f::s3fnet::TCPSeqWindow::start</a></div><div class="ttdeci">uint32 start()</div><div class="ttdoc">Return the first sequence of the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00037">tcp_seqwnd.h:37</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_aee6e3282670be024dcee8ac3cef67e85"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">s3f::s3fnet::error_quit</a></div><div class="ttdeci">void error_quit(const char *fmt,...)</div><div class="ttdoc">This function is called when there&#39;s a fatal error unrelated to a system call. </div><div class="ttdef"><b>Definition:</b> <a href="errhandle_8cc_source.html#l00128">errhandle.cc:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">s3f::s3fnet::TCPSession::TCP_STATE_SYN_SENT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00032">tcp_session.h:32</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914">s3f::s3fnet::TCPSession::TCP_STATE_LAST_ACK</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00039">tcp_session.h:39</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">s3f::s3fnet::TCPSession::TCP_STATE_CLOSE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00035">tcp_session.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a></div><div class="ttdoc">acknowledgment field valid </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00030">tcp_message.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ae65322a37b337f806238cc67289eaf5c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">s3f::s3fnet::TCPSession::resend_segments</a></div><div class="ttdeci">uint32 resend_segments(uint32 seqno, uint32 nsegments)</div><div class="ttdoc">Resend the segments. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00144">tcp_sender.cc:144</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a99e7a3514c6966776f03a6847d9419f2aca16cf64e7e742d461d5932e6fe40597"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2aca16cf64e7e742d461d5932e6fe40597">s3f::s3fnet::TCPMaster::TCP_VERSION_TAHOE</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00035">tcp_master.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9">s3f::s3fnet::TCPMaster::TCP_VERSION_SACK</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00038">tcp_master.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adea6916920265fc56e81d59869827a21"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::calc_advertised_wnd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate the advertised window size. </p>

<p>Definition at line <a class="el" href="tcp__sender_8cc_source.html#l00240">240</a> of file <a class="el" href="tcp__sender_8cc_source.html">tcp_sender.cc</a>.</p>

<p>References <a class="el" href="tcp__rcvwnd_8h_source.html#l00074">s3f::s3fnet::TCPRecvWindow::bufferSize()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00080">s3f::s3fnet::TCPSeqWindow::expand()</a>, <a class="el" href="tcp__rcvwnd_8h_source.html#l00071">s3f::s3fnet::TCPRecvWindow::freeInBuffer()</a>, <a class="el" href="tcp__session_8h_source.html#l00133">mss</a>, <a class="el" href="s3fnet_8h_source.html#l00045">mymax</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00046">s3f::s3fnet::TCPSeqWindow::size()</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, and <a class="el" href="tcp__session_8h_source.html#l00034">TCP_STATE_ESTABLISHED</a>.</p>

<p>Referenced by <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// first check the free space in the buffer</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> window = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#adb7af0be6cda9b9df5c8f8612fffffc8">freeInBuffer</a>(); </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> &lt; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a>) <span class="keywordflow">return</span> window;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="comment">// if silly-window-syndrome-avoidance algorithm is used, run it</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="keywordflow">if</span>(window * 4 &lt; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#a0f029f51246b69c28b6207e140008939">bufferSize</a>() || window &lt; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    window = 0;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">// never shrink an already advertised window</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  window = <a class="code" href="s3fnet_8h.html#ac3c1602f78264de1055419d3f5f8699a">mymax</a>(window, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a6cc41ade54618adb288966b0ad965338">size</a>());</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">// update the current receive window</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordtype">int</span> incremental = window - <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a6cc41ade54618adb288966b0ad965338">size</a>();</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  <span class="keywordflow">if</span>(incremental &gt; 0) <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a5082c14ecf592754fc313d7eaa2a0b12">expand</a>(incremental);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;  <span class="keywordflow">return</span> window;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_recv_window_html_a0f029f51246b69c28b6207e140008939"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#a0f029f51246b69c28b6207e140008939">s3f::s3fnet::TCPRecvWindow::bufferSize</a></div><div class="ttdeci">uint32 bufferSize()</div><div class="ttdoc">The buffer size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__rcvwnd_8h_source.html#l00074">tcp_rcvwnd.h:74</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="s3fnet_8h_html_ac3c1602f78264de1055419d3f5f8699a"><div class="ttname"><a href="s3fnet_8h.html#ac3c1602f78264de1055419d3f5f8699a">mymax</a></div><div class="ttdeci">#define mymax(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00045">s3fnet.h:45</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a6cc41ade54618adb288966b0ad965338"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a6cc41ade54618adb288966b0ad965338">s3f::s3fnet::TCPSeqWindow::size</a></div><div class="ttdeci">uint32 size()</div><div class="ttdoc">Return the size of the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00046">tcp_seqwnd.h:46</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_recv_window_html_adb7af0be6cda9b9df5c8f8612fffffc8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#adb7af0be6cda9b9df5c8f8612fffffc8">s3f::s3fnet::TCPRecvWindow::freeInBuffer</a></div><div class="ttdeci">uint32 freeInBuffer()</div><div class="ttdoc">The free space in the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__rcvwnd_8h_source.html#l00071">tcp_rcvwnd.h:71</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">s3f::s3fnet::TCPSession::TCP_STATE_ESTABLISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00034">tcp_session.h:34</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a5082c14ecf592754fc313d7eaa2a0b12"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a5082c14ecf592754fc313d7eaa2a0b12">s3f::s3fnet::TCPSeqWindow::expand</a></div><div class="ttdeci">void expand(uint32 nbytes)</div><div class="ttdoc">Expand the window size by nbytes. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00080">tcp_seqwnd.h:80</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1082383b1ab63ecfe7da04f4ae8fa07"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">s3f::s3fnet::TCPSession::mss</a></div><div class="ttdeci">uint32 mss</div><div class="ttdoc">Maximum segment size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00133">tcp_session.h:133</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a24322c47640acd2781cab62c705b3af2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::send_delay_ack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the session to send delayed ACK when next time the fast timer fires. </p>

<p>Definition at line <a class="el" href="tcp__sender_8cc_source.html#l00260">260</a> of file <a class="el" href="tcp__sender_8cc_source.html">tcp_sender.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00169">delayed_ack</a>, <a class="el" href="tcp__master_8cc_source.html#l00547">s3f::s3fnet::TCPMaster::enableFastTimeout()</a>, and <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>.</p>

<p>Referenced by <a class="el" href="tcp__sender_8cc_source.html#l00173">acknowledge()</a>.</p>
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">delayed_ack</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a10083a0f43e792c44d7dd8a361d06103">enableFastTimeout</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a55f340d4380db8a98d154d66ba68b5c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">s3f::s3fnet::TCPSession::delayed_ack</a></div><div class="ttdeci">bool delayed_ack</div><div class="ttdoc">True if the delayed ack is turned on. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00169">tcp_session.h:169</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a10083a0f43e792c44d7dd8a361d06103"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a10083a0f43e792c44d7dd8a361d06103">s3f::s3fnet::TCPMaster::enableFastTimeout</a></div><div class="ttdeci">void enableFastTimeout(TCPSession *session)</div><div class="ttdoc">Enable a TCP session for fast timeout handling. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8cc_source.html#l00547">tcp_master.cc:547</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7a7702b0e5bbc4c2a10a6c2532224095"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::cancel_delay_ack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the session to cancel sending delayed ACK when next timer the fast timer fires. </p>

<p>Definition at line <a class="el" href="tcp__sender_8cc_source.html#l00266">266</a> of file <a class="el" href="tcp__sender_8cc_source.html">tcp_sender.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00169">delayed_ack</a>, <a class="el" href="tcp__master_8cc_source.html#l00567">s3f::s3fnet::TCPMaster::disableFastTimeout()</a>, and <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>.</p>

<p>Referenced by <a class="el" href="tcp__sender_8cc_source.html#l00173">acknowledge()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00125">fastTimeoutHandling()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__state_8cc_source.html#l00166">init_state_fin_wait_1()</a>, <a class="el" href="tcp__state_8cc_source.html#l00152">init_state_last_ack()</a>, and <a class="el" href="tcp__state_8cc_source.html#l00088">init_state_listen()</a>.</p>
<div class="fragment"><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;{</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ac6847642e838e397c63a6e0fc85f8dfd">disableFastTimeout</a>(<span class="keyword">this</span>);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">delayed_ack</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_ac6847642e838e397c63a6e0fc85f8dfd"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ac6847642e838e397c63a6e0fc85f8dfd">s3f::s3fnet::TCPMaster::disableFastTimeout</a></div><div class="ttdeci">void disableFastTimeout(TCPSession *session)</div><div class="ttdoc">Disable a TCP session from fast timeout handling. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8cc_source.html#l00567">tcp_master.cc:567</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a55f340d4380db8a98d154d66ba68b5c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a55f340d4380db8a98d154d66ba68b5c1">s3f::s3fnet::TCPSession::delayed_ack</a></div><div class="ttdeci">bool delayed_ack</div><div class="ttdoc">True if the delayed ack is turned on. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00169">tcp_session.h:169</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2431ba6da58fbd49faf086ca1670887d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::appl_recv </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When the upper layer wants to receive data (length bytes) from TCP, this function will be called. </p>
<p>The msg parameter points the message buffer, which can be NULL if only fake data is needed. </p>

<p>Definition at line <a class="el" href="tcp__receiver_8cc_source.html#l00022">22</a> of file <a class="el" href="tcp__receiver_8cc_source.html">tcp_receiver.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8cc_source.html#l00281">clear_app_state()</a>, <a class="el" href="socket__session_8h_source.html#l00295">s3f::s3fnet::SocketSignal::DATA_AVAILABLE</a>, <a class="el" href="tcp__rcvwnd_8cc_source.html#l00053">s3f::s3fnet::TCPRecvWindow::generate()</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, and <a class="el" href="tcp__rcvwnd_8h_source.html#l00090">s3f::s3fnet::TCPRecvWindow::setRecvParameters()</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00084">recv()</a>.</p>
<div class="fragment"><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;{</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;  assert(length &gt; 0);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> got = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#a4a9ef2f1fad208b00efd7ba63a9a7382">generate</a>(length, msg);</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;  <span class="keywordflow">if</span>(got == 0)</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;  {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="comment">// if no data available, the socket will be suspended waiting for</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="comment">// the DATA_AVAILABLE signal, we set the receive parameters so</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <span class="comment">// that the socket will be notified when message arrives</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#a1c098f3e8ddef433b0b04beaea3062ac">setRecvParameters</a>(length, msg);</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="comment">// this function will be triggered from the socket layer. If we do</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="comment">// it once, we don&#39;t need to do it again.</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">clear_app_state</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">SocketSignal::DATA_AVAILABLE</a>);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;  }</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;  <span class="keywordflow">return</span> got;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_recv_window_html_a4a9ef2f1fad208b00efd7ba63a9a7382"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#a4a9ef2f1fad208b00efd7ba63a9a7382">s3f::s3fnet::TCPRecvWindow::generate</a></div><div class="ttdeci">uint32 generate(uint32 length, byte *msg)</div><div class="ttdoc">Generate the message of the given length and submit it to the upper layer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__rcvwnd_8cc_source.html#l00053">tcp_rcvwnd.cc:53</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_recv_window_html_a1c098f3e8ddef433b0b04beaea3062ac"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#a1c098f3e8ddef433b0b04beaea3062ac">s3f::s3fnet::TCPRecvWindow::setRecvParameters</a></div><div class="ttdeci">void setRecvParameters(uint32 bufsiz, byte *buf)</div><div class="ttdoc">Set the application buffer to receive data. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__rcvwnd_8h_source.html#l00090">tcp_rcvwnd.h:90</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">s3f::s3fnet::SocketSignal::DATA_AVAILABLE</a></div><div class="ttdoc">data is available </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00295">socket_session.h:295</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a00bfd0fea187f818bf0fd4c2a19cb214"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">s3f::s3fnet::TCPSession::clear_app_state</a></div><div class="ttdeci">void clear_app_state(int signal)</div><div class="ttdoc">Clear application signal bit(s). </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00281">tcp_session.cc:281</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a709cbd1c506cf6d33b510f3b570c58f8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::process_SYN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html">TCPMessage</a> *&#160;</td>
          <td class="paramname"><em>tcphdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>signal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="class_process.html" title="The code that executes should be thought of as embedded in an instant of time. ">Process</a> SYN packets. </p>

<p>Definition at line <a class="el" href="tcp__receiver_8cc_source.html#l00146">146</a> of file <a class="el" href="tcp__receiver_8cc_source.html">tcp_receiver.cc</a>.</p>

<p>References <a class="el" href="socket__session_8h_source.html#l00300">s3f::s3fnet::SocketSignal::FIRST_CONNECTION</a>, <a class="el" href="tcp__master_8h_source.html#l00127">s3f::s3fnet::TCPMaster::getISS()</a>, <a class="el" href="tcp__state_8cc_source.html#l00064">init_state_syn_received()</a>, <a class="el" href="tcp__session_8h_source.html#l00139">nrxmits</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00124">rcvwnd_size</a>, <a class="el" href="tcp__message_8h_source.html#l00041">s3f::s3fnet::TCPMessage::seqno</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00063">s3f::s3fnet::TCPSeqWindow::setStart()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00104">s3f::s3fnet::TCPSeqWindow::setSYN()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, <a class="el" href="tcp__session_8h_source.html#l00031">TCP_STATE_LISTEN</a>, <a class="el" href="tcp__session_8h_source.html#l00033">TCP_STATE_SYN_RECEIVED</a>, <a class="el" href="tcp__session_8h_source.html#l00032">TCP_STATE_SYN_SENT</a>, and <a class="el" href="tcp__message_8h_source.html#l00053">s3f::s3fnet::TCPMessage::wsize</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;{</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">switch</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a>) {</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">TCP_STATE_SYN_SENT</a>:</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#af0158d272d7a0108465394ada2ffe1e2">setStart</a>(tcphdr-&gt;seqno);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a3be9d536d8eda01e87fb5b4ecf93a067">setSYN</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">nrxmits</a> = 0;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">rcvwnd_size</a> = tcphdr-&gt;wsize; </div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    </div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18">TCP_STATE_SYN_RECEIVED</a>:</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// we are not supposed to receive it</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">TCP_STATE_LISTEN</a>:</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <span class="comment">// Initialize the receive window</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#af0158d272d7a0108465394ada2ffe1e2">setStart</a>(tcphdr-&gt;seqno);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a3be9d536d8eda01e87fb5b4ecf93a067">setSYN</a>(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// Get initial sequence no and initialize Send Window</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#af0158d272d7a0108465394ada2ffe1e2">setStart</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a3e7375067fee9eb26490c61e9679db59">getISS</a>());</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">rcvwnd_size</a> = tcphdr-&gt;wsize;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// We may want to signal the above application about that we have</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// received the first SYN segment. For further consideration.</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a289435c73bee57447a382ce5418da016">SocketSignal::FIRST_CONNECTION</a>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab158dc3ec6426cd625a4dde0b0d1f8d1">init_state_syn_received</a>();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    </div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// for all other states, just ignore SYN packet because it may be</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">// an retransmitted SYN packet sent by the other side.</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18">s3f::s3fnet::TCPSession::TCP_STATE_SYN_RECEIVED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00033">tcp_session.h:33</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a3e7375067fee9eb26490c61e9679db59"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a3e7375067fee9eb26490c61e9679db59">s3f::s3fnet::TCPMaster::getISS</a></div><div class="ttdeci">uint32 getISS()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00127">tcp_master.h:127</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab158dc3ec6426cd625a4dde0b0d1f8d1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab158dc3ec6426cd625a4dde0b0d1f8d1">s3f::s3fnet::TCPSession::init_state_syn_received</a></div><div class="ttdeci">int init_state_syn_received()</div><div class="ttdoc">Change to SYN_RECEIVED state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00064">tcp_state.cc:64</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a3be9d536d8eda01e87fb5b4ecf93a067"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a3be9d536d8eda01e87fb5b4ecf93a067">s3f::s3fnet::TCPSeqWindow::setSYN</a></div><div class="ttdeci">void setSYN(bool syn)</div><div class="ttdoc">set SYN bit. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00104">tcp_seqwnd.h:104</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_af0158d272d7a0108465394ada2ffe1e2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#af0158d272d7a0108465394ada2ffe1e2">s3f::s3fnet::TCPSeqWindow::setStart</a></div><div class="ttdeci">void setStart(const uint32 seqno)</div><div class="ttdoc">Set the start sequence number of the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00063">tcp_seqwnd.h:63</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab127443917c48253831516e6d0b72f09"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">s3f::s3fnet::TCPSession::nrxmits</a></div><div class="ttdeci">uint32 nrxmits</div><div class="ttdoc">Number of consecutive packet retransmissions. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00139">tcp_session.h:139</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">s3f::s3fnet::TCPSession::TCP_STATE_SYN_SENT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00032">tcp_session.h:32</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">s3f::s3fnet::TCPSession::TCP_STATE_LISTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00031">tcp_session.h:31</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2a7d2ba14ba1e9b7d5402275d92a1ee6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">s3f::s3fnet::TCPSession::rcvwnd_size</a></div><div class="ttdeci">uint32 rcvwnd_size</div><div class="ttdoc">Remote receive window size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00124">tcp_session.h:124</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a289435c73bee57447a382ce5418da016"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a289435c73bee57447a382ce5418da016">s3f::s3fnet::SocketSignal::FIRST_CONNECTION</a></div><div class="ttdoc">is the first connection </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00300">socket_session.h:300</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6cf7d70612655484b01b2ab67de60758"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::process_FIN </td>
          <td>(</td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>signal</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="class_process.html" title="The code that executes should be thought of as embedded in an instant of time. ">Process</a> FIN packets. </p>

<p>Definition at line <a class="el" href="tcp__receiver_8cc_source.html#l00183">183</a> of file <a class="el" href="tcp__receiver_8cc_source.html">tcp_receiver.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8cc_source.html#l00281">clear_app_state()</a>, <a class="el" href="tcp__session_8h_source.html#l00181">close_issued</a>, <a class="el" href="socket__session_8h_source.html#l00295">s3f::s3fnet::SocketSignal::DATA_AVAILABLE</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00150">s3f::s3fnet::TCPSeqWindow::empty()</a>, <a class="el" href="tcp__state_8cc_source.html#l00130">init_state_close_wait()</a>, <a class="el" href="tcp__state_8cc_source.html#l00210">init_state_closing()</a>, <a class="el" href="tcp__state_8cc_source.html#l00225">init_state_time_wait()</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00112">s3f::s3fnet::TCPSeqWindow::setFIN()</a>, <a class="el" href="tcp__session_8h_source.html#l00184">simultaneous_closing</a>, <a class="el" href="socket__session_8h_source.html#l00298">s3f::s3fnet::SocketSignal::SOCK_EOF</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__session_8h_source.html#l00035">TCP_STATE_CLOSE_WAIT</a>, <a class="el" href="tcp__session_8h_source.html#l00034">TCP_STATE_ESTABLISHED</a>, <a class="el" href="tcp__session_8h_source.html#l00037">TCP_STATE_FIN_WAIT_1</a>, and <a class="el" href="tcp__session_8h_source.html#l00038">TCP_STATE_FIN_WAIT_2</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;{</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="keywordflow">switch</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a>) {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a>:</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a254af26da7bf132000ee3cd7020ac4bd">setFIN</a>(<span class="keyword">true</span>);    </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// the other side wants to end the connection, we want to finish</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="comment">// it too; so it&#39;s simultaneous closing.</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a27bedc801b67220a9287e8628f782f2a">close_issued</a>) <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1f221b49ca3d30486828f3eac199da33">simultaneous_closing</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3b64e3f5e5f72b3e653db2de525dec29">init_state_close_wait</a>();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">TCP_STATE_CLOSE_WAIT</a>:</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="comment">// at this point we have received a FIN, so if nothing in receive</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="comment">// window, there won&#39;t be more, so signal EOF to application</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#aecf8e034a9cfb5e2fdd292ae0008c6e7">empty</a>())</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">clear_app_state</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">SocketSignal::DATA_AVAILABLE</a>);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a0d5ab302d6d81243673b3911e1631373">SocketSignal::SOCK_EOF</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    <span class="keywordflow">else</span> signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">SocketSignal::DATA_AVAILABLE</a> | <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a0d5ab302d6d81243673b3911e1631373">SocketSignal::SOCK_EOF</a>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">TCP_STATE_FIN_WAIT_1</a>:</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a254af26da7bf132000ee3cd7020ac4bd">setFIN</a>(<span class="keyword">true</span>); <span class="comment">// FIN byte</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="comment">// this state may be changed once ACK is handled</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1b43b090f13c89eef9f369d9806b1575">init_state_closing</a>();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">TCP_STATE_FIN_WAIT_2</a>:</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a254af26da7bf132000ee3cd7020ac4bd">setFIN</a>(<span class="keyword">true</span>); <span class="comment">// FIN byte</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af653b11b74a8d66fc176cc647e4444a5">init_state_time_wait</a>();</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    </div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="comment">// other states, do nothing right now</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;  }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a1b43b090f13c89eef9f369d9806b1575"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1b43b090f13c89eef9f369d9806b1575">s3f::s3fnet::TCPSession::init_state_closing</a></div><div class="ttdeci">int init_state_closing()</div><div class="ttdoc">Change to CLOSING state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00210">tcp_state.cc:210</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_1</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00037">tcp_session.h:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a0d5ab302d6d81243673b3911e1631373"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a0d5ab302d6d81243673b3911e1631373">s3f::s3fnet::SocketSignal::SOCK_EOF</a></div><div class="ttdoc">no more data </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00298">socket_session.h:298</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a1f221b49ca3d30486828f3eac199da33"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1f221b49ca3d30486828f3eac199da33">s3f::s3fnet::TCPSession::simultaneous_closing</a></div><div class="ttdeci">bool simultaneous_closing</div><div class="ttdoc">Whether it is a simultaneous closing. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00184">tcp_session.h:184</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a254af26da7bf132000ee3cd7020ac4bd"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a254af26da7bf132000ee3cd7020ac4bd">s3f::s3fnet::TCPSeqWindow::setFIN</a></div><div class="ttdeci">void setFIN(bool fin)</div><div class="ttdoc">set FIN bit. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00112">tcp_seqwnd.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a3b64e3f5e5f72b3e653db2de525dec29"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3b64e3f5e5f72b3e653db2de525dec29">s3f::s3fnet::TCPSession::init_state_close_wait</a></div><div class="ttdeci">int init_state_close_wait()</div><div class="ttdoc">Change to CLOSE_WAIT state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00130">tcp_state.cc:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">s3f::s3fnet::TCPSession::TCP_STATE_ESTABLISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00034">tcp_session.h:34</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7addb5f6c0352b0fa3ad562417272e6b5b">s3f::s3fnet::SocketSignal::DATA_AVAILABLE</a></div><div class="ttdoc">data is available </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00295">socket_session.h:295</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a27bedc801b67220a9287e8628f782f2a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a27bedc801b67220a9287e8628f782f2a">s3f::s3fnet::TCPSession::close_issued</a></div><div class="ttdeci">bool close_issued</div><div class="ttdoc">Whether the upper layer has issued close. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00181">tcp_session.h:181</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">s3f::s3fnet::TCPSession::TCP_STATE_CLOSE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00035">tcp_session.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_aecf8e034a9cfb5e2fdd292ae0008c6e7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#aecf8e034a9cfb5e2fdd292ae0008c6e7">s3f::s3fnet::TCPSeqWindow::empty</a></div><div class="ttdeci">bool empty()</div><div class="ttdoc">Returns true iff the window is empty (nothing used). </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00150">tcp_seqwnd.h:150</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a00bfd0fea187f818bf0fd4c2a19cb214"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a00bfd0fea187f818bf0fd4c2a19cb214">s3f::s3fnet::TCPSession::clear_app_state</a></div><div class="ttdeci">void clear_app_state(int signal)</div><div class="ttdoc">Clear application signal bit(s). </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00281">tcp_session.cc:281</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_af653b11b74a8d66fc176cc647e4444a5"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af653b11b74a8d66fc176cc647e4444a5">s3f::s3fnet::TCPSession::init_state_time_wait</a></div><div class="ttdeci">int init_state_time_wait()</div><div class="ttdoc">Change to TIME_WAIT state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00225">tcp_state.cc:225</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_2</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00038">tcp_session.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a79fcd28a086c6e6d4590d168a98c1326"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::process_ACK </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html">TCPMessage</a> *&#160;</td>
          <td class="paramname"><em>tcphdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>signal</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="class_process.html" title="The code that executes should be thought of as embedded in an instant of time. ">Process</a> ACK packets. </p>

<p>Definition at line <a class="el" href="tcp__receiver_8cc_source.html#l00222">222</a> of file <a class="el" href="tcp__receiver_8cc_source.html">tcp_receiver.cc</a>.</p>

<p>References <a class="el" href="tcp__message_8h_source.html#l00044">s3f::s3fnet::TCPMessage::ackno</a>, <a class="el" href="socket__session_8h_source.html#l00297">s3f::s3fnet::SocketSignal::CONN_CLOSED</a>, <a class="el" href="errhandle_8cc_source.html#l00128">s3f::s3fnet::error_quit()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00130">s3f::s3fnet::TCPSeqWindow::expect()</a>, <a class="el" href="tcp__message_8h_source.html#l00050">s3f::s3fnet::TCPMessage::flags</a>, <a class="el" href="tcp__session_8cc_source.html#l00132">get_state_name()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__state_8cc_source.html#l00117">init_state_established()</a>, <a class="el" href="tcp__state_8cc_source.html#l00200">init_state_fin_wait_2()</a>, <a class="el" href="tcp__state_8cc_source.html#l00064">init_state_syn_received()</a>, <a class="el" href="tcp__state_8cc_source.html#l00225">init_state_time_wait()</a>, <a class="el" href="tcp__session_8h_source.html#l00206">msl_timer_count</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00126">s3f::s3fnet::TCPSeqWindow::next()</a>, <a class="el" href="tcp__session_8h_source.html#l00139">nrxmits</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00328">process_acks()</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__session_8cc_source.html#l00258">reset()</a>, <a class="el" href="tcp__session_8h_source.html#l00201">rxmit_timer_count</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="socket__session_8h_source.html#l00301">s3f::s3fnet::SocketSignal::SESSION_RELEASED</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00112">s3f::s3fnet::TCPSeqWindow::setFIN()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00104">s3f::s3fnet::TCPSeqWindow::setSYN()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__message_8h_source.html#l00026">s3f::s3fnet::TCPMessage::TCP_FLAG_FIN</a>, <a class="el" href="tcp__message_8h_source.html#l00028">s3f::s3fnet::TCPMessage::TCP_FLAG_RST</a>, <a class="el" href="tcp__message_8h_source.html#l00027">s3f::s3fnet::TCPMessage::TCP_FLAG_SYN</a>, <a class="el" href="tcp__session_8h_source.html#l00035">TCP_STATE_CLOSE_WAIT</a>, <a class="el" href="tcp__session_8h_source.html#l00030">TCP_STATE_CLOSED</a>, <a class="el" href="tcp__session_8h_source.html#l00036">TCP_STATE_CLOSING</a>, <a class="el" href="tcp__session_8h_source.html#l00034">TCP_STATE_ESTABLISHED</a>, <a class="el" href="tcp__session_8h_source.html#l00037">TCP_STATE_FIN_WAIT_1</a>, <a class="el" href="tcp__session_8h_source.html#l00038">TCP_STATE_FIN_WAIT_2</a>, <a class="el" href="tcp__session_8h_source.html#l00039">TCP_STATE_LAST_ACK</a>, <a class="el" href="tcp__session_8h_source.html#l00031">TCP_STATE_LISTEN</a>, <a class="el" href="tcp__session_8h_source.html#l00033">TCP_STATE_SYN_RECEIVED</a>, <a class="el" href="tcp__session_8h_source.html#l00032">TCP_STATE_SYN_SENT</a>, and <a class="el" href="tcp__session_8h_source.html#l00040">TCP_STATE_TIME_WAIT</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;  <span class="keywordflow">switch</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a>) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">TCP_STATE_CLOSED</a>:</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;PANIC: TCPSession::process_ACK(), state=%s.\n&quot;</span>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aed4d30a3e6ffdcd0b22aa7dbc651e589">get_state_name</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a>));</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">TCP_STATE_LISTEN</a>:</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">// shouldn&#39;t be receiving ACK&#39;s yet</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(tcphdr-&gt;ackno, 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f">TCPMessage::TCP_FLAG_RST</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">TCP_STATE_SYN_SENT</a>:</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// illegal acknowledgment</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">if</span>(tcphdr-&gt;ackno != <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">next</a>())</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(tcphdr-&gt;ackno, 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f">TCPMessage::TCP_FLAG_RST</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6aafb0e4307fa93fe65f309573deb8f5">reset</a>();</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab3a5f7604a879c134c73ac0284029fd5">process_acks</a>(tcphdr);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">if</span>(tcphdr-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">TCPMessage::TCP_FLAG_SYN</a>)</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a3be9d536d8eda01e87fb5b4ecf93a067">setSYN</a>(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7454ca316e4759015c6b2015c2d06c67">init_state_established</a>();</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordflow">else</span> signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab158dc3ec6426cd625a4dde0b0d1f8d1">init_state_syn_received</a>();</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18">TCP_STATE_SYN_RECEIVED</a>:</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="keywordflow">if</span>(tcphdr-&gt;ackno != <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">next</a>())</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(tcphdr-&gt;ackno, 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f">TCPMessage::TCP_FLAG_RST</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6aafb0e4307fa93fe65f309573deb8f5">reset</a>();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    }    </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab3a5f7604a879c134c73ac0284029fd5">process_acks</a>(tcphdr))  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a3be9d536d8eda01e87fb5b4ecf93a067">setSYN</a>(<span class="keyword">false</span>); <span class="comment">// SYN byte</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7454ca316e4759015c6b2015c2d06c67">init_state_established</a>();</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    </div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a>:</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">TCP_STATE_CLOSE_WAIT</a>:</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab3a5f7604a879c134c73ac0284029fd5">process_acks</a>(tcphdr);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914">TCP_STATE_LAST_ACK</a>:</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">if</span>(tcphdr-&gt;ackno == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">next</a>())</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    {</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a> = 0;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a254af26da7bf132000ee3cd7020ac4bd">setFIN</a>(<span class="keyword">false</span>);  <span class="comment">// ACK our FIN</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b4f89c223928fe58699e239e1cd11e6">init_state_closed</a>();</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="comment">// when connection is closed, we release the session</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7adcdf24edc9ef559c4ef179f93082fc73">SocketSignal::CONN_CLOSED</a> | <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a292d8fc724d3facc009c34a3e1f37e4e">SocketSignal::SESSION_RELEASED</a>;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">true</span>;   <span class="comment">// illegal packet</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    </div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">TCP_STATE_FIN_WAIT_1</a>:</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="keywordflow">if</span>(tcphdr-&gt;ackno == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">next</a>())</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a254af26da7bf132000ee3cd7020ac4bd">setFIN</a>(<span class="keyword">false</span>); <span class="comment">// our FIN was acked</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">nrxmits</a> = 0;      </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="keywordflow">if</span>(tcphdr-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7">TCPMessage::TCP_FLAG_FIN</a>)</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a254af26da7bf132000ee3cd7020ac4bd">setFIN</a>(<span class="keyword">true</span>); <span class="comment">// FIN byte</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af653b11b74a8d66fc176cc647e4444a5">init_state_time_wait</a>();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">else</span> signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3c827e6a31f92c419b34e0e085c37d9b">init_state_fin_wait_2</a>();</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">TCP_STATE_FIN_WAIT_2</a>:</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296">TCP_STATE_CLOSING</a>:</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">if</span>(tcphdr-&gt;ackno == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">next</a>())</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a> = 0;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a254af26da7bf132000ee3cd7020ac4bd">setFIN</a>(<span class="keyword">false</span>);  <span class="comment">// ACK our FIN</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      signal |= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af653b11b74a8d66fc176cc647e4444a5">init_state_time_wait</a>();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    } </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    </div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">TCP_STATE_TIME_WAIT</a>: </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span>(tcphdr-&gt;ackno == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">next</a>())</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">msl_timer_count</a> = 0;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937ad2b29ec85055d6fadbb7054a76857e18">s3f::s3fnet::TCPSession::TCP_STATE_SYN_RECEIVED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00033">tcp_session.h:33</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_ac2e2ec8a145a83d1489748fd6f7fd8b3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">s3f::s3fnet::TCPSeqWindow::next</a></div><div class="ttdeci">uint32 next()</div><div class="ttdoc">Like firstUnused method, but also uses SYN &amp; FIN segments; the method is used for sending window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00126">tcp_seqwnd.h:126</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a593af77beeffed59c8ae5c6ffe583d57">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_1</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00037">tcp_session.h:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8b77936e0c278e8c4b88ecd7ac215551"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">s3f::s3fnet::TCPSession::rxmit_timer_count</a></div><div class="ttdeci">ltime_t rxmit_timer_count</div><div class="ttdoc">Retransmission timer count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00201">tcp_session.h:201</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a81734c4c094d55f4551a80f9722c5221"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">s3f::s3fnet::TCPSeqWindow::expect</a></div><div class="ttdeci">uint32 expect()</div><div class="ttdoc">Like start method, but also uses SYN &amp; FIN segments; the method is used for receiving window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00130">tcp_seqwnd.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_afefcda998f745d17d668577610ab8c23"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">s3f::s3fnet::TCPSession::send_data</a></div><div class="ttdeci">void send_data(uint32 seqno, uint32 datalen=0, byte mask=0, uint32 ackno=0, bool need_calc_rtt=false, bool need_set_rextimeout=false)</div><div class="ttdoc">Physically send the data to the IP layer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00055">tcp_sender.cc:55</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7c5180b90e5affbf5a38b5a3b578b849"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7c5180b90e5affbf5a38b5a3b578b849">s3f::s3fnet::TCPSession::msl_timer_count</a></div><div class="ttdeci">ltime_t msl_timer_count</div><div class="ttdoc">The timer count that lasts 2*msl. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00206">tcp_session.h:206</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ac9122405cf038765cc4918f75f590bb7">s3f::s3fnet::TCPMessage::TCP_FLAG_FIN</a></div><div class="ttdoc">final segmenet from sender </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00026">tcp_message.h:26</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f">s3f::s3fnet::TCPMessage::TCP_FLAG_RST</a></div><div class="ttdoc">connection to be reset </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00028">tcp_message.h:28</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab158dc3ec6426cd625a4dde0b0d1f8d1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab158dc3ec6426cd625a4dde0b0d1f8d1">s3f::s3fnet::TCPSession::init_state_syn_received</a></div><div class="ttdeci">int init_state_syn_received()</div><div class="ttdoc">Change to SYN_RECEIVED state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00064">tcp_state.cc:64</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a3be9d536d8eda01e87fb5b4ecf93a067"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a3be9d536d8eda01e87fb5b4ecf93a067">s3f::s3fnet::TCPSeqWindow::setSYN</a></div><div class="ttdeci">void setSYN(bool syn)</div><div class="ttdoc">set SYN bit. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00104">tcp_seqwnd.h:104</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_aed4d30a3e6ffdcd0b22aa7dbc651e589"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aed4d30a3e6ffdcd0b22aa7dbc651e589">s3f::s3fnet::TCPSession::get_state_name</a></div><div class="ttdeci">static char * get_state_name(int state)</div><div class="ttdoc">Translate the tcp state into a string. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00132">tcp_session.cc:132</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a6aafb0e4307fa93fe65f309573deb8f5"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6aafb0e4307fa93fe65f309573deb8f5">s3f::s3fnet::TCPSession::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Reset the session to CLOSED state and wake up application. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00258">tcp_session.cc:258</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a254af26da7bf132000ee3cd7020ac4bd"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a254af26da7bf132000ee3cd7020ac4bd">s3f::s3fnet::TCPSeqWindow::setFIN</a></div><div class="ttdeci">void setFIN(bool fin)</div><div class="ttdoc">set FIN bit. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00112">tcp_seqwnd.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">s3f::s3fnet::TCPSession::TCP_STATE_ESTABLISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00034">tcp_session.h:34</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">s3f::s3fnet::TCPMessage::TCP_FLAG_SYN</a></div><div class="ttdoc">start of a new connection </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00027">tcp_message.h:27</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a2e9f752518bcb10aaf8dc1ff06393edb">s3f::s3fnet::TCPSession::TCP_STATE_CLOSED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00030">tcp_session.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a73c5188cc81d692b2920cbd59e732296">s3f::s3fnet::TCPSession::TCP_STATE_CLOSING</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00036">tcp_session.h:36</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7adcdf24edc9ef559c4ef179f93082fc73"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7adcdf24edc9ef559c4ef179f93082fc73">s3f::s3fnet::SocketSignal::CONN_CLOSED</a></div><div class="ttdoc">connection is closed </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00297">socket_session.h:297</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7454ca316e4759015c6b2015c2d06c67"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7454ca316e4759015c6b2015c2d06c67">s3f::s3fnet::TCPSession::init_state_established</a></div><div class="ttdeci">int init_state_established()</div><div class="ttdoc">Change to ESTABLISHED state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00117">tcp_state.cc:117</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab3a5f7604a879c134c73ac0284029fd5"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab3a5f7604a879c134c73ac0284029fd5">s3f::s3fnet::TCPSession::process_acks</a></div><div class="ttdeci">bool process_acks(TCPMessage *tcphdr)</div><div class="ttdoc">Process the ACKs that correspond to received TCP message, and update session states like RTT and retr...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__receiver_8cc_source.html#l00328">tcp_receiver.cc:328</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_aee6e3282670be024dcee8ac3cef67e85"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">s3f::s3fnet::error_quit</a></div><div class="ttdeci">void error_quit(const char *fmt,...)</div><div class="ttdoc">This function is called when there&#39;s a fatal error unrelated to a system call. </div><div class="ttdef"><b>Definition:</b> <a href="errhandle_8cc_source.html#l00128">errhandle.cc:128</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab127443917c48253831516e6d0b72f09"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">s3f::s3fnet::TCPSession::nrxmits</a></div><div class="ttdeci">uint32 nrxmits</div><div class="ttdoc">Number of consecutive packet retransmissions. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00139">tcp_session.h:139</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a284f589a3a6fa4607a69986f38b7b6ea">s3f::s3fnet::TCPSession::TCP_STATE_SYN_SENT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00032">tcp_session.h:32</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a6b1d20ffe0439b3454b4b6bcfbada0b2">s3f::s3fnet::TCPSession::TCP_STATE_LISTEN</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00031">tcp_session.h:31</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a3c827e6a31f92c419b34e0e085c37d9b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3c827e6a31f92c419b34e0e085c37d9b">s3f::s3fnet::TCPSession::init_state_fin_wait_2</a></div><div class="ttdeci">int init_state_fin_wait_2()</div><div class="ttdoc">Change to FIN_WAIT_2 state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00200">tcp_state.cc:200</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a292d8fc724d3facc009c34a3e1f37e4e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a292d8fc724d3facc009c34a3e1f37e4e">s3f::s3fnet::SocketSignal::SESSION_RELEASED</a></div><div class="ttdoc">session has already been released </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00301">socket_session.h:301</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a89ea6d20fdd43897d1f70b6b52fc0914">s3f::s3fnet::TCPSession::TCP_STATE_LAST_ACK</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00039">tcp_session.h:39</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">s3f::s3fnet::TCPSession::TCP_STATE_CLOSE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00035">tcp_session.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">s3f::s3fnet::TCPSession::TCP_STATE_TIME_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00040">tcp_session.h:40</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_af653b11b74a8d66fc176cc647e4444a5"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af653b11b74a8d66fc176cc647e4444a5">s3f::s3fnet::TCPSession::init_state_time_wait</a></div><div class="ttdeci">int init_state_time_wait()</div><div class="ttdoc">Change to TIME_WAIT state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00225">tcp_state.cc:225</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8b4f89c223928fe58699e239e1cd11e6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b4f89c223928fe58699e239e1cd11e6">s3f::s3fnet::TCPSession::init_state_closed</a></div><div class="ttdeci">int init_state_closed()</div><div class="ttdoc">Change to CLOSED state. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__state_8cc_source.html#l00020">tcp_state.cc:20</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a717b3375e0e44f932bc9020de17bb303">s3f::s3fnet::TCPSession::TCP_STATE_FIN_WAIT_2</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00038">tcp_session.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab3a5f7604a879c134c73ac0284029fd5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::process_acks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html">TCPMessage</a> *&#160;</td>
          <td class="paramname"><em>tcphdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="class_process.html" title="The code that executes should be thought of as embedded in an instant of time. ">Process</a> the ACKs that correspond to received TCP message, and update session states like RTT and retransmission timer. </p>

<p>Definition at line <a class="el" href="tcp__receiver_8cc_source.html#l00328">328</a> of file <a class="el" href="tcp__receiver_8cc_source.html">tcp_receiver.cc</a>.</p>

<p>References <a class="el" href="tcp__message_8h_source.html#l00044">s3f::s3fnet::TCPMessage::ackno</a>, <a class="el" href="tcp__session_8h_source.html#l00136">ndupacks</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00126">s3f::s3fnet::TCPSeqWindow::next()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, <a class="el" href="tcp__session_8h_source.html#l00124">rcvwnd_size</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00037">s3f::s3fnet::TCPSeqWindow::start()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00617">update_remote_window_size()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00049">s3f::s3fnet::TCPSeqWindow::used()</a>, and <a class="el" href="tcp__message_8h_source.html#l00053">s3f::s3fnet::TCPMessage::wsize</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>.</p>
<div class="fragment"><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;{</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> snd_una = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a0b6858cce05ab50a8e9cad0402e94659">start</a>();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;  <span class="comment">// check if ACK is not within our window. if so, send an immediate</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;  <span class="comment">// ACK and drop the segment</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">if</span>(tcphdr-&gt;ackno &lt; snd_una || tcphdr-&gt;ackno &gt; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">next</a>())</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;  <span class="comment">// check to see if we have a duplicate ACK</span></div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="keywordflow">if</span>(tcphdr-&gt;ackno == snd_una &amp;&amp;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;     tcphdr-&gt;wsize == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">rcvwnd_size</a> &amp;&amp;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;     <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">used</a>() &gt; 0)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a78bdb9e9ed6101cff65a1a2eaf4dd979">process_dup_acks</a>();</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  } </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;  <span class="comment">// update the remote window size</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7b0dd75a7ab0122d616fd850de3decc0">update_remote_window_size</a>(tcphdr-&gt;wsize);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">// we really got new data acked</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> acked;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">if</span>((acked = tcphdr-&gt;ackno - snd_una) &gt; 0)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac055ef42ccbd6c109cc080d21cbb452a">process_new_acks</a>(tcphdr, acked);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;  <span class="comment">// reset duplicate ACK count</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">ndupacks</a> = 0;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a78bdb9e9ed6101cff65a1a2eaf4dd979"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a78bdb9e9ed6101cff65a1a2eaf4dd979">s3f::s3fnet::TCPSession::process_dup_acks</a></div><div class="ttdeci">void process_dup_acks()</div><div class="ttdoc">Process duplicate ACKs received. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__receiver_8cc_source.html#l00517">tcp_receiver.cc:517</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_ac2e2ec8a145a83d1489748fd6f7fd8b3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ac2e2ec8a145a83d1489748fd6f7fd8b3">s3f::s3fnet::TCPSeqWindow::next</a></div><div class="ttdeci">uint32 next()</div><div class="ttdoc">Like firstUnused method, but also uses SYN &amp; FIN segments; the method is used for sending window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00126">tcp_seqwnd.h:126</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ac055ef42ccbd6c109cc080d21cbb452a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac055ef42ccbd6c109cc080d21cbb452a">s3f::s3fnet::TCPSession::process_new_acks</a></div><div class="ttdeci">void process_new_acks(TCPMessage *tcphdr, uint32 acked)</div><div class="ttdoc">Process ACKs that respond to new data. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__receiver_8cc_source.html#l00359">tcp_receiver.cc:359</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7b0dd75a7ab0122d616fd850de3decc0"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7b0dd75a7ab0122d616fd850de3decc0">s3f::s3fnet::TCPSession::update_remote_window_size</a></div><div class="ttdeci">void update_remote_window_size(uint32 window_size)</div><div class="ttdoc">update the remote receive window size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__receiver_8cc_source.html#l00617">tcp_receiver.cc:617</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a0b6858cce05ab50a8e9cad0402e94659"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a0b6858cce05ab50a8e9cad0402e94659">s3f::s3fnet::TCPSeqWindow::start</a></div><div class="ttdeci">uint32 start()</div><div class="ttdoc">Return the first sequence of the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00037">tcp_seqwnd.h:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a93827f7ec39fba34aa3bc5f1eba82f24"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">s3f::s3fnet::TCPSeqWindow::used</a></div><div class="ttdeci">uint32 used()</div><div class="ttdoc">Return how much of the window is used up in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00049">tcp_seqwnd.h:49</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2a7d2ba14ba1e9b7d5402275d92a1ee6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">s3f::s3fnet::TCPSession::rcvwnd_size</a></div><div class="ttdeci">uint32 rcvwnd_size</div><div class="ttdoc">Remote receive window size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00124">tcp_session.h:124</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a3bda2d05daddfd070c267bc73140a84d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">s3f::s3fnet::TCPSession::ndupacks</a></div><div class="ttdeci">uint32 ndupacks</div><div class="ttdoc">Number of consecutive duplicate ACKs received. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00136">tcp_session.h:136</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acd4de03ec3bfe3bb54fda7f7fe772c4f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::process_new_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_data_message.html">DataMessage</a> *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>seqno</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="class_process.html" title="The code that executes should be thought of as embedded in an instant of time. ">Process</a> data arrival. </p>

<p>Definition at line <a class="el" href="tcp__receiver_8cc_source.html#l00316">316</a> of file <a class="el" href="tcp__receiver_8cc_source.html">tcp_receiver.cc</a>.</p>

<p>References <a class="el" href="tcp__rcvwnd_8cc_source.html#l00130">s3f::s3fnet::TCPRecvWindow::addToBuffer()</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, and <a class="el" href="tcp__seqwnd_8h_source.html#l00137">s3f::s3fnet::TCPSeqWindow::within()</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>.</p>
<div class="fragment"><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;{</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">// check whether the seqno falls in the window</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ae98569cec9bab18026352020405ac85d">within</a>(seqno))</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  {</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="comment">// URG and PSH are unsupported (RFC 793).</span></div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#afdf3c4d567fc59b12c00ac33a8beec0a">addToBuffer</a>(payload, seqno); </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// illegal data</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_ae98569cec9bab18026352020405ac85d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#ae98569cec9bab18026352020405ac85d">s3f::s3fnet::TCPSeqWindow::within</a></div><div class="ttdeci">bool within(uint32 seqno)</div><div class="ttdoc">Returns true iff &#39;seqno&#39; is within the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00137">tcp_seqwnd.h:137</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_recv_window_html_afdf3c4d567fc59b12c00ac33a8beec0a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html#afdf3c4d567fc59b12c00ac33a8beec0a">s3f::s3fnet::TCPRecvWindow::addToBuffer</a></div><div class="ttdeci">void addToBuffer(DataMessage *msg, uint32 seqno)</div><div class="ttdoc">Add the message to the receive buffer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__rcvwnd_8cc_source.html#l00130">tcp_rcvwnd.cc:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a78bdb9e9ed6101cff65a1a2eaf4dd979"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::process_dup_acks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="class_process.html" title="The code that executes should be thought of as embedded in an instant of time. ">Process</a> duplicate ACKs received. </p>

<p>Definition at line <a class="el" href="tcp__receiver_8cc_source.html#l00517">517</a> of file <a class="el" href="tcp__receiver_8cc_source.html">tcp_receiver.cc</a>.</p>

<p>References <a class="el" href="tcp__receiver_8cc_source.html#l00612">calc_threshold()</a>, <a class="el" href="tcp__session_8h_source.html#l00127">cwnd</a>, <a class="el" href="tcp__sndwnd_8h_source.html#l00052">s3f::s3fnet::TCPSendWindow::dataInBuffer()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00043">s3f::s3fnet::TCPSeqWindow::firstUnused()</a>, <a class="el" href="tcp__master_8h_source.html#l00140">s3f::s3fnet::TCPMaster::getMaxConWnd()</a>, <a class="el" href="tcp__master_8h_source.html#l00126">s3f::s3fnet::TCPMaster::getVersion()</a>, <a class="el" href="tcp__session_8h_source.html#l00133">mss</a>, <a class="el" href="s3fnet_8h_source.html#l00044">mymin</a>, <a class="el" href="tcp__session_8h_source.html#l00136">ndupacks</a>, <a class="el" href="tcp__session_8h_source.html#l00163">recover_seq</a>, <a class="el" href="tcp__sender_8cc_source.html#l00144">resend_segments()</a>, <a class="el" href="tcp__session_8h_source.html#l00151">rtt_count</a>, <a class="el" href="tcp__session_8h_source.html#l00166">sack_pipe</a>, <a class="el" href="tcp__sack_8cc_source.html#l00145">sack_resend_segments()</a>, <a class="el" href="tcp__sack_8cc_source.html#l00162">sack_send_in_fast_recovery()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00110">segment_and_send()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00130">ssthresh</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00037">s3f::s3fnet::TCPSeqWindow::start()</a>, <a class="el" href="tcp__init_8h_source.html#l00052">TCP_DEFAULT_MAX_DUPACKS</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, <a class="el" href="tcp__master_8h_source.html#l00037">s3f::s3fnet::TCPMaster::TCP_VERSION_NEW_RENO</a>, <a class="el" href="tcp__master_8h_source.html#l00036">s3f::s3fnet::TCPMaster::TCP_VERSION_RENO</a>, <a class="el" href="tcp__master_8h_source.html#l00038">s3f::s3fnet::TCPMaster::TCP_VERSION_SACK</a>, <a class="el" href="tcp__master_8h_source.html#l00035">s3f::s3fnet::TCPMaster::TCP_VERSION_TAHOE</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00052">s3f::s3fnet::TCPSeqWindow::unused()</a>, and <a class="el" href="tcp__seqwnd_8h_source.html#l00049">s3f::s3fnet::TCPSeqWindow::used()</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00328">process_acks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;{</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;  <span class="comment">// another duplicate ack</span></div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">ndupacks</a>++;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">ndupacks</a> == <a class="code" href="tcp__init_8h.html#a2f4624d08b10fafb7e6c903f774a3878">TCP_DEFAULT_MAX_DUPACKS</a>)</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;  {</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aac1a8c6887f8bf4cb418e813a08a3397">calc_threshold</a>();</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="comment">// we remember the largest seqno already sent out</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">recover_seq</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>();</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="comment">// we think this packet is lost, so we disable measuring rtt</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">rtt_count</a> = 0;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">getVersion</a>()){</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2aca16cf64e7e742d461d5932e6fe40597">TCPMaster::TCP_VERSION_TAHOE</a>:</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <span class="comment">// in tahoe, fast recovery is off; tahoe fast rxmit resets</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <span class="comment">// congestion window to mss and resend 1 segment</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">resend_segments</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a0b6858cce05ab50a8e9cad0402e94659">start</a>(), 1); </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a835ba96773c5a14861086497efd8ef52">TCPMaster::TCP_VERSION_RENO</a>:</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2ad8dac06bf0b87186325589c2476b0323">TCPMaster::TCP_VERSION_NEW_RENO</a>:</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <span class="comment">// in Reno, fast recovery is on</span></div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">ssthresh</a> + 3*<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab2c3e09fa7d278cd9b6613c86adafa27">getMaxConWnd</a>());</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">resend_segments</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a0b6858cce05ab50a8e9cad0402e94659">start</a>(), 1); </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;      </div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="comment">// more data to send out</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a534e7bea2c3001a1577e627a92d27877">unused</a>() &gt;= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>)</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;        <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4fbadc4c967c43982e16d9c8c249fbc6">segment_and_send</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>(),</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                        <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a534e7bea2c3001a1577e627a92d27877">unused</a>(), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#acf3cacfd0832a6f14ab0db8bdd2e1771">dataInBuffer</a>() - <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">used</a>()) );</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      }</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      </div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9">TCPMaster::TCP_VERSION_SACK</a>:</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a02b1d16e35ea1d70428b1a940802ebc8">sack_pipe</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> - <a class="code" href="tcp__init_8h.html#a2f4624d08b10fafb7e6c903f774a3878">TCP_DEFAULT_MAX_DUPACKS</a>;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">ssthresh</a> <span class="comment">/* + 3*mss */</span>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab2c3e09fa7d278cd9b6613c86adafa27">getMaxConWnd</a>());</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="comment">// we resend a packet</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      assert(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a193f27433620c8c44564859a9da7f37b">sack_resend_segments</a>(<span class="keyword">true</span>));</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      </div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      assert(0);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;  }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">ndupacks</a> &gt; TCP_DEFAULT_MAX_DUPACKS)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;  {</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="comment">// now we have more than TCP_DEFAULT_MAX_DUPACKS duplicate acks so if Reno</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    <span class="comment">// then increase the Congestion Window by mss and resend another</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">// segment Do fast recovery</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">getVersion</a>()){</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2aca16cf64e7e742d461d5932e6fe40597">TCPMaster::TCP_VERSION_TAHOE</a>: </div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="comment">// do nothing</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;      </div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a835ba96773c5a14861086497efd8ef52">TCPMaster::TCP_VERSION_RENO</a>:</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2ad8dac06bf0b87186325589c2476b0323">TCPMaster::TCP_VERSION_NEW_RENO</a>:</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> + <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab2c3e09fa7d278cd9b6613c86adafa27">getMaxConWnd</a>());</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a534e7bea2c3001a1577e627a92d27877">unused</a>() &gt;= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>)</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4fbadc4c967c43982e16d9c8c249fbc6">segment_and_send</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>(),</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                        <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a534e7bea2c3001a1577e627a92d27877">unused</a>(), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#acf3cacfd0832a6f14ab0db8bdd2e1771">dataInBuffer</a>() - <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">used</a>()) );</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;      }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9">TCPMaster::TCP_VERSION_SACK</a>:</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a02b1d16e35ea1d70428b1a940802ebc8">sack_pipe</a> -= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a35cfaa9743e32ecd2c505211187bd902">sack_send_in_fast_recovery</a>();</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      </div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      assert(0);</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;    }</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;  }</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a07975f88fa9d44f71eaa96061bcfe4b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">s3f::s3fnet::TCPSession::rtt_count</a></div><div class="ttdeci">int rtt_count</div><div class="ttdoc">The current RTT count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00151">tcp_session.h:151</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a18e65bc289c8426ebd69f0714fa50a8d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">s3f::s3fnet::TCPSession::recover_seq</a></div><div class="ttdeci">uint32 recover_seq</div><div class="ttdoc">The largest seqno sent out when loss happens. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00163">tcp_session.h:163</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a534e7bea2c3001a1577e627a92d27877"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a534e7bea2c3001a1577e627a92d27877">s3f::s3fnet::TCPSeqWindow::unused</a></div><div class="ttdeci">uint32 unused()</div><div class="ttdoc">Return how much of the window is unused in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00052">tcp_seqwnd.h:52</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a99e7a3514c6966776f03a6847d9419f2a835ba96773c5a14861086497efd8ef52"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a835ba96773c5a14861086497efd8ef52">s3f::s3fnet::TCPMaster::TCP_VERSION_RENO</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00036">tcp_master.h:36</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_aac1a8c6887f8bf4cb418e813a08a3397"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aac1a8c6887f8bf4cb418e813a08a3397">s3f::s3fnet::TCPSession::calc_threshold</a></div><div class="ttdeci">void calc_threshold()</div><div class="ttdoc">Calculate the threshold. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__receiver_8cc_source.html#l00612">tcp_receiver.cc:612</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a35cfaa9743e32ecd2c505211187bd902"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a35cfaa9743e32ecd2c505211187bd902">s3f::s3fnet::TCPSession::sack_send_in_fast_recovery</a></div><div class="ttdeci">void sack_send_in_fast_recovery()</div><div class="ttdoc">The method handles sending sack when fast recovery is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sack_8cc_source.html#l00162">tcp_sack.cc:162</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a193f27433620c8c44564859a9da7f37b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a193f27433620c8c44564859a9da7f37b">s3f::s3fnet::TCPSession::sack_resend_segments</a></div><div class="ttdeci">bool sack_resend_segments(bool first_flag)</div><div class="ttdoc">When the sack option is set, this method is used for retransmissions. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sack_8cc_source.html#l00145">tcp_sack.cc:145</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a99e7a3514c6966776f03a6847d9419f2ad8dac06bf0b87186325589c2476b0323"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2ad8dac06bf0b87186325589c2476b0323">s3f::s3fnet::TCPMaster::TCP_VERSION_NEW_RENO</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00037">tcp_master.h:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a02b1d16e35ea1d70428b1a940802ebc8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a02b1d16e35ea1d70428b1a940802ebc8">s3f::s3fnet::TCPSession::sack_pipe</a></div><div class="ttdeci">uint32 sack_pipe</div><div class="ttdoc">Indicate how much can be sent during fast recovery in SACK. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00166">tcp_session.h:166</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a78430cee896ecf9f004a1cc11431697d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">s3f::s3fnet::TCPMaster::getVersion</a></div><div class="ttdeci">int getVersion()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00126">tcp_master.h:126</a></div></div>
<div class="ttc" id="tcp__init_8h_html_a2f4624d08b10fafb7e6c903f774a3878"><div class="ttname"><a href="tcp__init_8h.html#a2f4624d08b10fafb7e6c903f774a3878">TCP_DEFAULT_MAX_DUPACKS</a></div><div class="ttdeci">#define TCP_DEFAULT_MAX_DUPACKS</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00052">tcp_init.h:52</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_ab2c3e09fa7d278cd9b6613c86adafa27"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab2c3e09fa7d278cd9b6613c86adafa27">s3f::s3fnet::TCPMaster::getMaxConWnd</a></div><div class="ttdeci">uint32 getMaxConWnd()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00140">tcp_master.h:140</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_acf3cacfd0832a6f14ab0db8bdd2e1771"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#acf3cacfd0832a6f14ab0db8bdd2e1771">s3f::s3fnet::TCPSendWindow::dataInBuffer</a></div><div class="ttdeci">uint32 dataInBuffer()</div><div class="ttdoc">Returns how much of the buffer is used. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8h_source.html#l00052">tcp_sndwnd.h:52</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a4fbadc4c967c43982e16d9c8c249fbc6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4fbadc4c967c43982e16d9c8c249fbc6">s3f::s3fnet::TCPSession::segment_and_send</a></div><div class="ttdeci">uint32 segment_and_send(uint32 seqno, uint32 length)</div><div class="ttdoc">Segment and send data. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00110">tcp_sender.cc:110</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a8345d443cb07b92fa8e4e9780d32ca57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">s3f::s3fnet::TCPSeqWindow::firstUnused</a></div><div class="ttdeci">uint32 firstUnused()</div><div class="ttdoc">Return the first unused sequence in the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00043">tcp_seqwnd.h:43</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ac4ddc45afd099ae4889834159cadd631"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">s3f::s3fnet::TCPSession::ssthresh</a></div><div class="ttdeci">uint32 ssthresh</div><div class="ttdoc">Threshold size for updating the congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00130">tcp_session.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a0b6858cce05ab50a8e9cad0402e94659"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a0b6858cce05ab50a8e9cad0402e94659">s3f::s3fnet::TCPSeqWindow::start</a></div><div class="ttdeci">uint32 start()</div><div class="ttdoc">Return the first sequence of the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00037">tcp_seqwnd.h:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1082383b1ab63ecfe7da04f4ae8fa07"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">s3f::s3fnet::TCPSession::mss</a></div><div class="ttdeci">uint32 mss</div><div class="ttdoc">Maximum segment size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00133">tcp_session.h:133</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a93827f7ec39fba34aa3bc5f1eba82f24"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">s3f::s3fnet::TCPSeqWindow::used</a></div><div class="ttdeci">uint32 used()</div><div class="ttdoc">Return how much of the window is used up in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00049">tcp_seqwnd.h:49</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="s3fnet_8h_html_ae647aceb957903b3149e0783b10dc673"><div class="ttname"><a href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a></div><div class="ttdeci">#define mymin(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00044">s3fnet.h:44</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a3bda2d05daddfd070c267bc73140a84d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">s3f::s3fnet::TCPSession::ndupacks</a></div><div class="ttdeci">uint32 ndupacks</div><div class="ttdoc">Number of consecutive duplicate ACKs received. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00136">tcp_session.h:136</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ae65322a37b337f806238cc67289eaf5c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">s3f::s3fnet::TCPSession::resend_segments</a></div><div class="ttdeci">uint32 resend_segments(uint32 seqno, uint32 nsegments)</div><div class="ttdoc">Resend the segments. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00144">tcp_sender.cc:144</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a99e7a3514c6966776f03a6847d9419f2aca16cf64e7e742d461d5932e6fe40597"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2aca16cf64e7e742d461d5932e6fe40597">s3f::s3fnet::TCPMaster::TCP_VERSION_TAHOE</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00035">tcp_master.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2cd5840cbc1191efd078c08076f279d3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">s3f::s3fnet::TCPSession::cwnd</a></div><div class="ttdeci">uint32 cwnd</div><div class="ttdoc">Congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00127">tcp_session.h:127</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9">s3f::s3fnet::TCPMaster::TCP_VERSION_SACK</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00038">tcp_master.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac055ef42ccbd6c109cc080d21cbb452a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::process_new_acks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html">TCPMessage</a> *&#160;</td>
          <td class="paramname"><em>tcphdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>acked</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="class_process.html" title="The code that executes should be thought of as embedded in an instant of time. ">Process</a> ACKs that respond to new data. </p>

<p>Definition at line <a class="el" href="tcp__receiver_8cc_source.html#l00359">359</a> of file <a class="el" href="tcp__receiver_8cc_source.html">tcp_receiver.cc</a>.</p>

<p>References <a class="el" href="tcp__message_8h_source.html#l00044">s3f::s3fnet::TCPMessage::ackno</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00595">check_cwnd()</a>, <a class="el" href="tcp__blocks_8cc_source.html#l00157">s3f::s3fnet::TCPBlockList::clear_all_blocks()</a>, <a class="el" href="tcp__session_8h_source.html#l00127">cwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00172">fast_recovery</a>, <a class="el" href="tcp__master_8h_source.html#l00140">s3f::s3fnet::TCPMaster::getMaxConWnd()</a>, <a class="el" href="tcp__master_8h_source.html#l00126">s3f::s3fnet::TCPMaster::getVersion()</a>, <a class="el" href="tcp__session_8h_source.html#l00160">measured_seq</a>, <a class="el" href="tcp__session_8h_source.html#l00133">mss</a>, <a class="el" href="s3fnet_8h_source.html#l00044">mymin</a>, <a class="el" href="tcp__session_8h_source.html#l00136">ndupacks</a>, <a class="el" href="tcp__session_8h_source.html#l00163">recover_seq</a>, <a class="el" href="tcp__sndwnd_8cc_source.html#l00175">s3f::s3fnet::TCPSendWindow::release()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00144">resend_segments()</a>, <a class="el" href="tcp__session_8h_source.html#l00151">rtt_count</a>, <a class="el" href="tcp__session_8h_source.html#l00148">rtt_measured</a>, <a class="el" href="tcp__session_8h_source.html#l00157">rxmit_seq</a>, <a class="el" href="tcp__session_8h_source.html#l00201">rxmit_timer_count</a>, <a class="el" href="tcp__session_8h_source.html#l00166">sack_pipe</a>, <a class="el" href="tcp__sack_8cc_source.html#l00162">sack_send_in_fast_recovery()</a>, <a class="el" href="tcp__session_8h_source.html#l00187">snd_scoreboard</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00130">ssthresh</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__init_8h_source.html#l00052">TCP_DEFAULT_MAX_DUPACKS</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, <a class="el" href="tcp__session_8h_source.html#l00035">TCP_STATE_CLOSE_WAIT</a>, <a class="el" href="tcp__session_8h_source.html#l00034">TCP_STATE_ESTABLISHED</a>, <a class="el" href="tcp__master_8h_source.html#l00037">s3f::s3fnet::TCPMaster::TCP_VERSION_NEW_RENO</a>, <a class="el" href="tcp__master_8h_source.html#l00036">s3f::s3fnet::TCPMaster::TCP_VERSION_RENO</a>, <a class="el" href="tcp__master_8h_source.html#l00038">s3f::s3fnet::TCPMaster::TCP_VERSION_SACK</a>, <a class="el" href="tcp__master_8h_source.html#l00035">s3f::s3fnet::TCPMaster::TCP_VERSION_TAHOE</a>, <a class="el" href="tcp__session_8h_source.html#l00175">timeout_loss</a>, <a class="el" href="tcp__session_8h_source.html#l00388">timeout_value()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00134">update_timeout()</a>, and <a class="el" href="tcp__seqwnd_8h_source.html#l00049">s3f::s3fnet::TCPSeqWindow::used()</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00328">process_acks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;{  </div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a> || </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;     <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">TCP_STATE_CLOSE_WAIT</a>)</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  {</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="comment">// shift the window</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#abab8412185235faec68e8c0393d4746c">release</a>(acked);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  </div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  <span class="comment">// As implemented in Java SSFNet, when new data got acked, first</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="comment">// update retransmission timeout, and then update rtt. Is it right?</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <span class="comment">// we don&#39;t need the retransmission timer any more</span></div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a> = 0;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  </div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;  <span class="comment">// if there&#39;s still packet on the fly, we should reset the timeout</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">used</a>() &gt; 0)</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;  {</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">// reschedule timer</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae8a8130abf0e7a46c2ff0f2991c1a593">timeout_value</a>();</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;  }</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;  <span class="comment">// update timers. if data acked was RXMIT data then do not update</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;  <span class="comment">// (Karn&#39;s algorithm) Smoothed RTT and Dev calculations</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">rtt_count</a> &amp;&amp; (tcphdr-&gt;ackno &gt; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a5b15db876b9718d7c0c8c68747235a5c">measured_seq</a>))</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;  {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="comment">// Jakobson&#39;s Algorithm for timers (1988)</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a44aecd8df9f166b738771ab9bf4d36d9">rtt_measured</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">rtt_count</a> - 1;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab00dc49da5ea3e23621cb51bfca36164">update_timeout</a>();</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  }</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;  </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> != <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">TCP_STATE_ESTABLISHED</a> &amp;&amp; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;     <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> != <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">TCP_STATE_CLOSE_WAIT</a>)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;  <span class="comment">// indicate whether it&#39;s the first partial ack</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  <span class="keywordtype">bool</span> is_FirstNonDupACK;</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">ndupacks</a> &gt;= <a class="code" href="tcp__init_8h.html#a2f4624d08b10fafb7e6c903f774a3878">TCP_DEFAULT_MAX_DUPACKS</a>)</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;  {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="comment">// when the first non-duplicate ACK has arrived, enter fast</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">// recovery</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    is_FirstNonDupACK = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">getVersion</a>()) {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2aca16cf64e7e742d461d5932e6fe40597">TCPMaster::TCP_VERSION_TAHOE</a>:</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="comment">// do nothing, just go to slow start!</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      </div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a835ba96773c5a14861086497efd8ef52">TCPMaster::TCP_VERSION_RENO</a>:</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="comment">// reset congestion window and go to congestion avoidance</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">ssthresh</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab2c3e09fa7d278cd9b6613c86adafa27">getMaxConWnd</a>());      </div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <span class="comment">// we check whether there are new data to send out we don&#39;t need</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <span class="comment">// to resend any segments here</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      </div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2ad8dac06bf0b87186325589c2476b0323">TCPMaster::TCP_VERSION_NEW_RENO</a>:</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="comment">// still stay in fast recovery, until acks of new data received</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="comment">// we use fast_recovery to indicate it&#39;s still in fast</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="comment">// recovery</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acbeb5f9dae19d6315d7ac3cdefeddd04">fast_recovery</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9">TCPMaster::TCP_VERSION_SACK</a>:</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acbeb5f9dae19d6315d7ac3cdefeddd04">fast_recovery</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      </div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      assert(0);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;  }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;  <span class="keywordflow">else</span> is_FirstNonDupACK = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;  </div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;  <span class="comment">// if no new data has been confirmed, we have to resend segments</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;  <span class="keywordflow">if</span>(tcphdr-&gt;ackno &lt; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">recover_seq</a>)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;  {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="keywordflow">switch</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">getVersion</a>()) {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2aca16cf64e7e742d461d5932e6fe40597">TCPMaster::TCP_VERSION_TAHOE</a>:</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      <span class="comment">// do nothing, just go to slow start!</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="comment">// The C++ TCP implementation is modified here to make it</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="comment">// compatible with the Java version (and the NS-2 version as</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="comment">// well). The congestion window is bumped by one each time a</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <span class="comment">// non-duplicate packet is received (we&#39;re in the slow start</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="comment">// mood now). This happens no matter whether the ack is the</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="comment">// first non-duplicate ack or not! -jason.</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      <span class="keywordflow">if</span>(<span class="keyword">true</span> || !is_FirstNonDupACK)</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      {</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a39fd0661d9f9c1481afffce94455534b">check_cwnd</a>();</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;          </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="comment">// we resend the segments - GO-BACK-N</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">if</span>(tcphdr-&gt;ackno &gt; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">rxmit_seq</a>)</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">resend_segments</a>(tcphdr-&gt;ackno, UINT_MAX);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="keywordflow">else</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      {</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">resend_segments</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">rxmit_seq</a>, UINT_MAX);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      </div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a835ba96773c5a14861086497efd8ef52">TCPMaster::TCP_VERSION_RENO</a>:</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="comment">// go to congestion avoidance phase</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a39fd0661d9f9c1481afffce94455534b">check_cwnd</a>();</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a9758ecfbe05f6c846d428e3beec784e2">timeout_loss</a>)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      {</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;        <span class="keywordflow">if</span>(tcphdr-&gt;ackno &gt; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">rxmit_seq</a>)</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        {</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;          <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">resend_segments</a>(tcphdr-&gt;ackno, UINT_MAX);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        }</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;        {</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;          <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">resend_segments</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">rxmit_seq</a>, UINT_MAX);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      }</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2ad8dac06bf0b87186325589c2476b0323">TCPMaster::TCP_VERSION_NEW_RENO</a>:</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="comment">// it&#39;s still a partial ack, we resend one segment indicated by</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="comment">// the ack number</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">resend_segments</a>(tcphdr-&gt;ackno, 1); </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="comment">// update congestion window: deflate the congestion window by</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      <span class="comment">// the amount of data acknowledged and then add one back and</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="comment">// send one new segment if permitted by the new value of cwnd</span></div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> -= (acked - <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>);</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9">TCPMaster::TCP_VERSION_SACK</a>:     </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a02b1d16e35ea1d70428b1a940802ebc8">sack_pipe</a> -= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a35cfaa9743e32ecd2c505211187bd902">sack_send_in_fast_recovery</a>();</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      </div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      assert(0);</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    }</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  }</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;  </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  <span class="comment">// we have to update congestion window</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  {</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="comment">// no timeout loss </span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a9758ecfbe05f6c846d428e3beec784e2">timeout_loss</a> = <span class="keyword">false</span>;             </div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acbeb5f9dae19d6315d7ac3cdefeddd04">fast_recovery</a> &amp;&amp; </div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;       (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">getVersion</a>() == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2ad8dac06bf0b87186325589c2476b0323">TCPMaster::TCP_VERSION_NEW_RENO</a> || </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">getVersion</a>() == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9">TCPMaster::TCP_VERSION_SACK</a>))</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">ssthresh</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a> + <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">used</a>());</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acbeb5f9dae19d6315d7ac3cdefeddd04">fast_recovery</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      <span class="comment">// clear all blocks</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">getVersion</a>() == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9">TCPMaster::TCP_VERSION_SACK</a>)</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;          <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa4636596abc9ea8b60f44ebb76e7ade7">snd_scoreboard</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a20cdf09750c00a816baa10bfb59ee0b9">clear_all_blocks</a>();</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    }</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">else</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a39fd0661d9f9c1481afffce94455534b">check_cwnd</a>();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;  }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a56a6e70f6b65a6b8b33959997f4f1af1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">s3f::s3fnet::TCPSession::rxmit_seq</a></div><div class="ttdeci">uint32 rxmit_seq</div><div class="ttdoc">The last sequence number of retransmitted segment plus one. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00157">tcp_session.h:157</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ae8a8130abf0e7a46c2ff0f2991c1a593"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae8a8130abf0e7a46c2ff0f2991c1a593">s3f::s3fnet::TCPSession::timeout_value</a></div><div class="ttdeci">ltime_t timeout_value()</div><div class="ttdoc">Current smoothed RTT timeout value. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00388">tcp_session.h:388</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a07975f88fa9d44f71eaa96061bcfe4b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">s3f::s3fnet::TCPSession::rtt_count</a></div><div class="ttdeci">int rtt_count</div><div class="ttdoc">The current RTT count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00151">tcp_session.h:151</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a18e65bc289c8426ebd69f0714fa50a8d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">s3f::s3fnet::TCPSession::recover_seq</a></div><div class="ttdeci">uint32 recover_seq</div><div class="ttdoc">The largest seqno sent out when loss happens. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00163">tcp_session.h:163</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8b77936e0c278e8c4b88ecd7ac215551"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">s3f::s3fnet::TCPSession::rxmit_timer_count</a></div><div class="ttdeci">ltime_t rxmit_timer_count</div><div class="ttdoc">Retransmission timer count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00201">tcp_session.h:201</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a99e7a3514c6966776f03a6847d9419f2a835ba96773c5a14861086497efd8ef52"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a835ba96773c5a14861086497efd8ef52">s3f::s3fnet::TCPMaster::TCP_VERSION_RENO</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00036">tcp_master.h:36</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acbeb5f9dae19d6315d7ac3cdefeddd04"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acbeb5f9dae19d6315d7ac3cdefeddd04">s3f::s3fnet::TCPSession::fast_recovery</a></div><div class="ttdeci">bool fast_recovery</div><div class="ttdoc">True if the session is still in the fast recovery mode. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00172">tcp_session.h:172</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a35cfaa9743e32ecd2c505211187bd902"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a35cfaa9743e32ecd2c505211187bd902">s3f::s3fnet::TCPSession::sack_send_in_fast_recovery</a></div><div class="ttdeci">void sack_send_in_fast_recovery()</div><div class="ttdoc">The method handles sending sack when fast recovery is enabled. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sack_8cc_source.html#l00162">tcp_sack.cc:162</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_block_list_html_a20cdf09750c00a816baa10bfb59ee0b9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a20cdf09750c00a816baa10bfb59ee0b9">s3f::s3fnet::TCPBlockList::clear_all_blocks</a></div><div class="ttdeci">void clear_all_blocks()</div><div class="ttdoc">Clear all blocks. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__blocks_8cc_source.html#l00157">tcp_blocks.cc:157</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a99e7a3514c6966776f03a6847d9419f2ad8dac06bf0b87186325589c2476b0323"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2ad8dac06bf0b87186325589c2476b0323">s3f::s3fnet::TCPMaster::TCP_VERSION_NEW_RENO</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00037">tcp_master.h:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a02b1d16e35ea1d70428b1a940802ebc8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a02b1d16e35ea1d70428b1a940802ebc8">s3f::s3fnet::TCPSession::sack_pipe</a></div><div class="ttdeci">uint32 sack_pipe</div><div class="ttdoc">Indicate how much can be sent during fast recovery in SACK. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00166">tcp_session.h:166</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a78430cee896ecf9f004a1cc11431697d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">s3f::s3fnet::TCPMaster::getVersion</a></div><div class="ttdeci">int getVersion()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00126">tcp_master.h:126</a></div></div>
<div class="ttc" id="tcp__init_8h_html_a2f4624d08b10fafb7e6c903f774a3878"><div class="ttname"><a href="tcp__init_8h.html#a2f4624d08b10fafb7e6c903f774a3878">TCP_DEFAULT_MAX_DUPACKS</a></div><div class="ttdeci">#define TCP_DEFAULT_MAX_DUPACKS</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00052">tcp_init.h:52</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937a1919175090ceea425e5efcf8eafc19fb">s3f::s3fnet::TCPSession::TCP_STATE_ESTABLISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00034">tcp_session.h:34</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_ab2c3e09fa7d278cd9b6613c86adafa27"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab2c3e09fa7d278cd9b6613c86adafa27">s3f::s3fnet::TCPMaster::getMaxConWnd</a></div><div class="ttdeci">uint32 getMaxConWnd()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00140">tcp_master.h:140</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a9758ecfbe05f6c846d428e3beec784e2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a9758ecfbe05f6c846d428e3beec784e2">s3f::s3fnet::TCPSession::timeout_loss</a></div><div class="ttdeci">bool timeout_loss</div><div class="ttdoc">Whether it is a timeout loss. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00175">tcp_session.h:175</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_send_window_html_abab8412185235faec68e8c0393d4746c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html#abab8412185235faec68e8c0393d4746c">s3f::s3fnet::TCPSendWindow::release</a></div><div class="ttdeci">void release(uint32 length)</div><div class="ttdoc">Shift the send window and then release the buffer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sndwnd_8cc_source.html#l00175">tcp_sndwnd.cc:175</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ac4ddc45afd099ae4889834159cadd631"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">s3f::s3fnet::TCPSession::ssthresh</a></div><div class="ttdeci">uint32 ssthresh</div><div class="ttdoc">Threshold size for updating the congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00130">tcp_session.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a5b15db876b9718d7c0c8c68747235a5c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a5b15db876b9718d7c0c8c68747235a5c">s3f::s3fnet::TCPSession::measured_seq</a></div><div class="ttdeci">uint32 measured_seq</div><div class="ttdoc">The sequence number of the segment currently being measured. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00160">tcp_session.h:160</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1082383b1ab63ecfe7da04f4ae8fa07"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">s3f::s3fnet::TCPSession::mss</a></div><div class="ttdeci">uint32 mss</div><div class="ttdoc">Maximum segment size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00133">tcp_session.h:133</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab00dc49da5ea3e23621cb51bfca36164"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab00dc49da5ea3e23621cb51bfca36164">s3f::s3fnet::TCPSession::update_timeout</a></div><div class="ttdeci">void update_timeout()</div><div class="ttdoc">Update the current smoothed RTT timeout with the new rtt measurment. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__timer_8cc_source.html#l00134">tcp_timer.cc:134</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a39fd0661d9f9c1481afffce94455534b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a39fd0661d9f9c1481afffce94455534b">s3f::s3fnet::TCPSession::check_cwnd</a></div><div class="ttdeci">void check_cwnd()</div><div class="ttdoc">Check congestion window size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__receiver_8cc_source.html#l00595">tcp_receiver.cc:595</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_aa4636596abc9ea8b60f44ebb76e7ade7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa4636596abc9ea8b60f44ebb76e7ade7">s3f::s3fnet::TCPSession::snd_scoreboard</a></div><div class="ttdeci">TCPBlockList * snd_scoreboard</div><div class="ttdoc">The score board for blocks sacked maintained by the sender side. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00187">tcp_session.h:187</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a93827f7ec39fba34aa3bc5f1eba82f24"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">s3f::s3fnet::TCPSeqWindow::used</a></div><div class="ttdeci">uint32 used()</div><div class="ttdoc">Return how much of the window is used up in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00049">tcp_seqwnd.h:49</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937afcb186b0667f82df1cea14b92901e7d6">s3f::s3fnet::TCPSession::TCP_STATE_CLOSE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00035">tcp_session.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="s3fnet_8h_html_ae647aceb957903b3149e0783b10dc673"><div class="ttname"><a href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a></div><div class="ttdeci">#define mymin(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00044">s3fnet.h:44</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a3bda2d05daddfd070c267bc73140a84d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">s3f::s3fnet::TCPSession::ndupacks</a></div><div class="ttdeci">uint32 ndupacks</div><div class="ttdoc">Number of consecutive duplicate ACKs received. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00136">tcp_session.h:136</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ae65322a37b337f806238cc67289eaf5c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">s3f::s3fnet::TCPSession::resend_segments</a></div><div class="ttdeci">uint32 resend_segments(uint32 seqno, uint32 nsegments)</div><div class="ttdoc">Resend the segments. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00144">tcp_sender.cc:144</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a99e7a3514c6966776f03a6847d9419f2aca16cf64e7e742d461d5932e6fe40597"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2aca16cf64e7e742d461d5932e6fe40597">s3f::s3fnet::TCPMaster::TCP_VERSION_TAHOE</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00035">tcp_master.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a44aecd8df9f166b738771ab9bf4d36d9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a44aecd8df9f166b738771ab9bf4d36d9">s3f::s3fnet::TCPSession::rtt_measured</a></div><div class="ttdeci">int rtt_measured</div><div class="ttdoc">Measured round trip time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00148">tcp_session.h:148</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2cd5840cbc1191efd078c08076f279d3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">s3f::s3fnet::TCPSession::cwnd</a></div><div class="ttdeci">uint32 cwnd</div><div class="ttdoc">Congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00127">tcp_session.h:127</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9">s3f::s3fnet::TCPMaster::TCP_VERSION_SACK</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00038">tcp_master.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a39fd0661d9f9c1481afffce94455534b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::check_cwnd </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check congestion window size. </p>

<p>Definition at line <a class="el" href="tcp__receiver_8cc_source.html#l00595">595</a> of file <a class="el" href="tcp__receiver_8cc_source.html">tcp_receiver.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00127">cwnd</a>, <a class="el" href="tcp__master_8h_source.html#l00140">s3f::s3fnet::TCPMaster::getMaxConWnd()</a>, <a class="el" href="tcp__session_8h_source.html#l00133">mss</a>, <a class="el" href="s3fnet_8h_source.html#l00044">mymin</a>, <a class="el" href="tcp__session_8h_source.html#l00130">ssthresh</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00016">TCP_DUMP</a>, and <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;{</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="preprocessor">#ifdef TCP_DEBUG  </span></div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="preprocessor"></span>  <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> old_cwnd = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a>;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="preprocessor"></span>  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> &lt; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">ssthresh</a>)</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;  { <span class="comment">// slow start</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> + <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab2c3e09fa7d278cd9b6613c86adafa27">getMaxConWnd</a>());</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <a class="code" href="tcp__receiver_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a>(printf(<span class="stringliteral">&quot;check_cwnd(), slow start: CW %u =&gt; %u.\n&quot;</span>, old_cwnd, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a>));</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;  }</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  { <span class="comment">// congestion avoidance</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> = <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> + (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>*<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>)/<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab2c3e09fa7d278cd9b6613c86adafa27">getMaxConWnd</a>());</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <a class="code" href="tcp__receiver_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a>(printf(<span class="stringliteral">&quot;check_cwnd(), congestion avoidance: CW %u =&gt; %u.\n&quot;</span>, old_cwnd, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a>));</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;}</div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_ab2c3e09fa7d278cd9b6613c86adafa27"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab2c3e09fa7d278cd9b6613c86adafa27">s3f::s3fnet::TCPMaster::getMaxConWnd</a></div><div class="ttdeci">uint32 getMaxConWnd()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00140">tcp_master.h:140</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ac4ddc45afd099ae4889834159cadd631"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">s3f::s3fnet::TCPSession::ssthresh</a></div><div class="ttdeci">uint32 ssthresh</div><div class="ttdoc">Threshold size for updating the congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00130">tcp_session.h:130</a></div></div>
<div class="ttc" id="tcp__receiver_8cc_html_ae626a9851fdb5af743c1eb8643d81adc"><div class="ttname"><a href="tcp__receiver_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a></div><div class="ttdeci">#define TCP_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="tcp__receiver_8cc_source.html#l00016">tcp_receiver.cc:16</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1082383b1ab63ecfe7da04f4ae8fa07"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">s3f::s3fnet::TCPSession::mss</a></div><div class="ttdeci">uint32 mss</div><div class="ttdoc">Maximum segment size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00133">tcp_session.h:133</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="s3fnet_8h_html_ae647aceb957903b3149e0783b10dc673"><div class="ttname"><a href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a></div><div class="ttdeci">#define mymin(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00044">s3fnet.h:44</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2cd5840cbc1191efd078c08076f279d3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">s3f::s3fnet::TCPSession::cwnd</a></div><div class="ttdeci">uint32 cwnd</div><div class="ttdoc">Congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00127">tcp_session.h:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aac1a8c6887f8bf4cb418e813a08a3397"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::calc_threshold </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate the threshold. </p>

<p>Definition at line <a class="el" href="tcp__receiver_8cc_source.html#l00612">612</a> of file <a class="el" href="tcp__receiver_8cc_source.html">tcp_receiver.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00127">cwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00133">mss</a>, <a class="el" href="s3fnet_8h_source.html#l00045">mymax</a>, <a class="el" href="s3fnet_8h_source.html#l00044">mymin</a>, <a class="el" href="tcp__session_8h_source.html#l00124">rcvwnd_size</a>, <a class="el" href="tcp__session_8h_source.html#l00130">ssthresh</a>, and <a class="el" href="tcp__init_8h_source.html#l00057">TCP_DEFAULT_THRESH_FACTOR</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>.</p>
<div class="fragment"><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;{</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">ssthresh</a> = <a class="code" href="s3fnet_8h.html#ac3c1602f78264de1055419d3f5f8699a">mymax</a>(<a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">rcvwnd_size</a>)/<a class="code" href="tcp__init_8h.html#ae2e2c5eb453c2509e3401731cf57642a">TCP_DEFAULT_THRESH_FACTOR</a>, 2 * <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;}</div>
<div class="ttc" id="s3fnet_8h_html_ac3c1602f78264de1055419d3f5f8699a"><div class="ttname"><a href="s3fnet_8h.html#ac3c1602f78264de1055419d3f5f8699a">mymax</a></div><div class="ttdeci">#define mymax(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00045">s3fnet.h:45</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ac4ddc45afd099ae4889834159cadd631"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ac4ddc45afd099ae4889834159cadd631">s3f::s3fnet::TCPSession::ssthresh</a></div><div class="ttdeci">uint32 ssthresh</div><div class="ttdoc">Threshold size for updating the congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00130">tcp_session.h:130</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1082383b1ab63ecfe7da04f4ae8fa07"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">s3f::s3fnet::TCPSession::mss</a></div><div class="ttdeci">uint32 mss</div><div class="ttdoc">Maximum segment size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00133">tcp_session.h:133</a></div></div>
<div class="ttc" id="tcp__init_8h_html_ae2e2c5eb453c2509e3401731cf57642a"><div class="ttname"><a href="tcp__init_8h.html#ae2e2c5eb453c2509e3401731cf57642a">TCP_DEFAULT_THRESH_FACTOR</a></div><div class="ttdeci">#define TCP_DEFAULT_THRESH_FACTOR</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00057">tcp_init.h:57</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2a7d2ba14ba1e9b7d5402275d92a1ee6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">s3f::s3fnet::TCPSession::rcvwnd_size</a></div><div class="ttdeci">uint32 rcvwnd_size</div><div class="ttdoc">Remote receive window size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00124">tcp_session.h:124</a></div></div>
<div class="ttc" id="s3fnet_8h_html_ae647aceb957903b3149e0783b10dc673"><div class="ttname"><a href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a></div><div class="ttdeci">#define mymin(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00044">s3fnet.h:44</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2cd5840cbc1191efd078c08076f279d3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">s3f::s3fnet::TCPSession::cwnd</a></div><div class="ttdeci">uint32 cwnd</div><div class="ttdoc">Congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00127">tcp_session.h:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7b0dd75a7ab0122d616fd850de3decc0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::update_remote_window_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>window_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>update the remote receive window size. </p>

<p>Definition at line <a class="el" href="tcp__receiver_8cc_source.html#l00617">617</a> of file <a class="el" href="tcp__receiver_8cc_source.html">tcp_receiver.cc</a>.</p>

<p>References <a class="el" href="tcp__master_8h_source.html#l00129">s3f::s3fnet::TCPMaster::getRcvWndSize()</a>, <a class="el" href="tcp__session_8h_source.html#l00124">rcvwnd_size</a>, and <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00328">process_acks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;{</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;  <span class="comment">// update recv window size</span></div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">rcvwnd_size</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab08eada3d5418613a310a874708982c6">getRcvWndSize</a>();</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_ab08eada3d5418613a310a874708982c6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ab08eada3d5418613a310a874708982c6">s3f::s3fnet::TCPMaster::getRcvWndSize</a></div><div class="ttdeci">uint32 getRcvWndSize()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00129">tcp_master.h:129</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2a7d2ba14ba1e9b7d5402275d92a1ee6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2a7d2ba14ba1e9b7d5402275d92a1ee6">s3f::s3fnet::TCPSession::rcvwnd_size</a></div><div class="ttdeci">uint32 rcvwnd_size</div><div class="ttdoc">Remote receive window size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00124">tcp_session.h:124</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a09791230ab5d227d3e1f3106132276f7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::slow_timeout_handling_helper </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>timerid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Slow timeout handler with a given timer id. </p>

<p>Definition at line <a class="el" href="tcp__timer_8cc_source.html#l00068">68</a> of file <a class="el" href="tcp__timer_8cc_source.html">tcp_timer.cc</a>.</p>

<p>References <a class="el" href="tcp__timer_8cc_source.html#l00163">backoff_timeout()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00612">calc_threshold()</a>, <a class="el" href="tcp__blocks_8cc_source.html#l00157">s3f::s3fnet::TCPBlockList::clear_all_blocks()</a>, <a class="el" href="socket__session_8h_source.html#l00297">s3f::s3fnet::SocketSignal::CONN_CLOSED</a>, <a class="el" href="tcp__session_8h_source.html#l00127">cwnd</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00130">s3f::s3fnet::TCPSeqWindow::expect()</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00043">s3f::s3fnet::TCPSeqWindow::firstUnused()</a>, <a class="el" href="tcp__master_8h_source.html#l00132">s3f::s3fnet::TCPMaster::getMaxRxmit()</a>, <a class="el" href="tcp__master_8h_source.html#l00126">s3f::s3fnet::TCPMaster::getVersion()</a>, <a class="el" href="tcp__session_8h_source.html#l00133">mss</a>, <a class="el" href="tcp__session_8h_source.html#l00136">ndupacks</a>, <a class="el" href="tcp__session_8h_source.html#l00139">nrxmits</a>, <a class="el" href="tcp__session_8h_source.html#l00118">rcvwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00163">recover_seq</a>, <a class="el" href="tcp__session_8cc_source.html#l00258">reset()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00021">RETX_TIMER</a>, <a class="el" href="tcp__session_8h_source.html#l00151">rtt_count</a>, <a class="el" href="tcp__session_8h_source.html#l00145">rtt_smoothed</a>, <a class="el" href="tcp__session_8h_source.html#l00154">rtt_var</a>, <a class="el" href="tcp__session_8h_source.html#l00201">rxmit_timer_count</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="socket__session_8h_source.html#l00301">s3f::s3fnet::SocketSignal::SESSION_RELEASED</a>, <a class="el" href="tcp__session_8h_source.html#l00187">snd_scoreboard</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00112">state</a>, <a class="el" href="tcp__init_8h_source.html#l00060">TCP_DEFAULT_RTT_SHIFT</a>, <a class="el" href="tcp__message_8h_source.html#l00028">s3f::s3fnet::TCPMessage::TCP_FLAG_RST</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, <a class="el" href="tcp__session_8h_source.html#l00040">TCP_STATE_TIME_WAIT</a>, <a class="el" href="tcp__master_8h_source.html#l00038">s3f::s3fnet::TCPMaster::TCP_VERSION_SACK</a>, <a class="el" href="tcp__session_8h_source.html#l00175">timeout_loss</a>, <a class="el" href="tcp__sender_8cc_source.html#l00191">timeout_resend()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00024">TWO_MSL_TIMER</a>.</p>

<p>Referenced by <a class="el" href="tcp__timer_8cc_source.html#l00029">slowTimeoutHandling()</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;{</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> signal = 0;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">if</span>(timerid == <a class="code" href="tcp__timer_8cc.html#a6b3c05da4dfaa394202f411134443c28">RETX_TIMER</a>)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  {</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">// we should set clear off all &quot;sacked&quot; flags</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9">TCPMaster::TCP_VERSION_SACK</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">getVersion</a>())</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa4636596abc9ea8b60f44ebb76e7ade7">snd_scoreboard</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a20cdf09750c00a816baa10bfb59ee0b9">clear_all_blocks</a>();</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="comment">// no longer measure RTT </span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">rtt_count</a> = 0;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">nrxmits</a>++;  <span class="comment">// this also takes care of Karn&#39;s algorithm</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">recover_seq</a>  = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a9758ecfbe05f6c846d428e3beec784e2">timeout_loss</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7973e68b212ac3cac8d62bfbb1b6da4c">backoff_timeout</a>();</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">if</span>(nrxmits &lt;= tcp_master-&gt;getMaxRxmit())</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      <span class="comment">// Jacobson&#39;s Slow Start</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      <span class="comment">// </span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;      <span class="comment">// Cut the threshold to 1/2 of mymin(CW, RWndSize) and reset</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <span class="comment">// Congestion window</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aac1a8c6887f8bf4cb418e813a08a3397">calc_threshold</a>();</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">ndupacks</a> = 0;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;      <span class="comment">// update rtt var (according to Java SSFNet)</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">nrxmits</a> &gt; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ad5e55892c0bf558bad6f0332885ea993">getMaxRxmit</a>() / 4)</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">rtt_var</a> += (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">rtt_smoothed</a> &gt;&gt; <a class="code" href="tcp__init_8h.html#a813b1efb0f6d22b0ca66152447e588b7">TCP_DEFAULT_RTT_SHIFT</a>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">rtt_smoothed</a> = 0;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="comment">// cancel retransmission timer</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">rxmit_timer_count</a> = 0;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;      <span class="comment">// we should resend the packet assumed to get lost</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1eb688f0fbd5e0c2cab43473c5f2da10">timeout_resend</a>();</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;      <span class="comment">// we have tried one too many times...connection must be dead</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">send_data</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>(), 0, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f">TCPMessage::TCP_FLAG_RST</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">rcvwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">expect</a>(), <span class="keyword">false</span>, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6aafb0e4307fa93fe65f309573deb8f5">reset</a>();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(timerid == <a class="code" href="tcp__timer_8cc.html#ac9df89d5f56ddd045e8ac836176dff53">TWO_MSL_TIMER</a>)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    assert(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">state</a> == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">TCP_STATE_TIME_WAIT</a>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    signal |= (<a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7adcdf24edc9ef559c4ef179f93082fc73">SocketSignal::CONN_CLOSED</a> | </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;               <a class="code" href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a292d8fc724d3facc009c34a3e1f37e4e">SocketSignal::SESSION_RELEASED</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <span class="keywordflow">else</span> assert(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <span class="keywordflow">return</span> signal;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a07975f88fa9d44f71eaa96061bcfe4b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">s3f::s3fnet::TCPSession::rtt_count</a></div><div class="ttdeci">int rtt_count</div><div class="ttdoc">The current RTT count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00151">tcp_session.h:151</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a18e65bc289c8426ebd69f0714fa50a8d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">s3f::s3fnet::TCPSession::recover_seq</a></div><div class="ttdeci">uint32 recover_seq</div><div class="ttdoc">The largest seqno sent out when loss happens. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00163">tcp_session.h:163</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8b77936e0c278e8c4b88ecd7ac215551"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8b77936e0c278e8c4b88ecd7ac215551">s3f::s3fnet::TCPSession::rxmit_timer_count</a></div><div class="ttdeci">ltime_t rxmit_timer_count</div><div class="ttdoc">Retransmission timer count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00201">tcp_session.h:201</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a81734c4c094d55f4551a80f9722c5221"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a81734c4c094d55f4551a80f9722c5221">s3f::s3fnet::TCPSeqWindow::expect</a></div><div class="ttdeci">uint32 expect()</div><div class="ttdoc">Like start method, but also uses SYN &amp; FIN segments; the method is used for receiving window...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00130">tcp_seqwnd.h:130</a></div></div>
<div class="ttc" id="tcp__timer_8cc_html_ac9df89d5f56ddd045e8ac836176dff53"><div class="ttname"><a href="tcp__timer_8cc.html#ac9df89d5f56ddd045e8ac836176dff53">TWO_MSL_TIMER</a></div><div class="ttdeci">#define TWO_MSL_TIMER</div><div class="ttdef"><b>Definition:</b> <a href="tcp__timer_8cc_source.html#l00024">tcp_timer.cc:24</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_aac1a8c6887f8bf4cb418e813a08a3397"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aac1a8c6887f8bf4cb418e813a08a3397">s3f::s3fnet::TCPSession::calc_threshold</a></div><div class="ttdeci">void calc_threshold()</div><div class="ttdoc">Calculate the threshold. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__receiver_8cc_source.html#l00612">tcp_receiver.cc:612</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a30d3084b61186cbb889007b1ef1d79c2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">s3f::s3fnet::TCPSession::rtt_smoothed</a></div><div class="ttdeci">int rtt_smoothed</div><div class="ttdoc">Smoothed round trip time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00145">tcp_session.h:145</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_block_list_html_a20cdf09750c00a816baa10bfb59ee0b9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a20cdf09750c00a816baa10bfb59ee0b9">s3f::s3fnet::TCPBlockList::clear_all_blocks</a></div><div class="ttdeci">void clear_all_blocks()</div><div class="ttdoc">Clear all blocks. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__blocks_8cc_source.html#l00157">tcp_blocks.cc:157</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_afefcda998f745d17d668577610ab8c23"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#afefcda998f745d17d668577610ab8c23">s3f::s3fnet::TCPSession::send_data</a></div><div class="ttdeci">void send_data(uint32 seqno, uint32 datalen=0, byte mask=0, uint32 ackno=0, bool need_calc_rtt=false, bool need_set_rextimeout=false)</div><div class="ttdoc">Physically send the data to the IP layer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00055">tcp_sender.cc:55</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="tcp__timer_8cc_html_a6b3c05da4dfaa394202f411134443c28"><div class="ttname"><a href="tcp__timer_8cc.html#a6b3c05da4dfaa394202f411134443c28">RETX_TIMER</a></div><div class="ttdeci">#define RETX_TIMER</div><div class="ttdef"><b>Definition:</b> <a href="tcp__timer_8cc_source.html#l00021">tcp_timer.cc:21</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9aea5e81337a968c3f52a840ff0c595e4f">s3f::s3fnet::TCPMessage::TCP_FLAG_RST</a></div><div class="ttdoc">connection to be reset </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00028">tcp_message.h:28</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a6aafb0e4307fa93fe65f309573deb8f5"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a6aafb0e4307fa93fe65f309573deb8f5">s3f::s3fnet::TCPSession::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Reset the session to CLOSED state and wake up application. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8cc_source.html#l00258">tcp_session.cc:258</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a78430cee896ecf9f004a1cc11431697d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">s3f::s3fnet::TCPMaster::getVersion</a></div><div class="ttdeci">int getVersion()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00126">tcp_master.h:126</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a1eb688f0fbd5e0c2cab43473c5f2da10"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1eb688f0fbd5e0c2cab43473c5f2da10">s3f::s3fnet::TCPSession::timeout_resend</a></div><div class="ttdeci">void timeout_resend()</div><div class="ttdoc">This function is called when retransmission timer expires. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00191">tcp_sender.cc:191</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a9758ecfbe05f6c846d428e3beec784e2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a9758ecfbe05f6c846d428e3beec784e2">s3f::s3fnet::TCPSession::timeout_loss</a></div><div class="ttdeci">bool timeout_loss</div><div class="ttdoc">Whether it is a timeout loss. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00175">tcp_session.h:175</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7adcdf24edc9ef559c4ef179f93082fc73"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7adcdf24edc9ef559c4ef179f93082fc73">s3f::s3fnet::SocketSignal::CONN_CLOSED</a></div><div class="ttdoc">connection is closed </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00297">socket_session.h:297</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_af7814c955b9d8b4fa0177387e1970a81"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">s3f::s3fnet::TCPSession::rtt_var</a></div><div class="ttdeci">int rtt_var</div><div class="ttdoc">Current estimated RTT variance. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00154">tcp_session.h:154</a></div></div>
<div class="ttc" id="tcp__init_8h_html_a813b1efb0f6d22b0ca66152447e588b7"><div class="ttname"><a href="tcp__init_8h.html#a813b1efb0f6d22b0ca66152447e588b7">TCP_DEFAULT_RTT_SHIFT</a></div><div class="ttdeci">#define TCP_DEFAULT_RTT_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00060">tcp_init.h:60</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_ad5e55892c0bf558bad6f0332885ea993"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#ad5e55892c0bf558bad6f0332885ea993">s3f::s3fnet::TCPMaster::getMaxRxmit</a></div><div class="ttdeci">uint32 getMaxRxmit()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00132">tcp_master.h:132</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a8345d443cb07b92fa8e4e9780d32ca57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">s3f::s3fnet::TCPSeqWindow::firstUnused</a></div><div class="ttdeci">uint32 firstUnused()</div><div class="ttdoc">Return the first unused sequence in the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00043">tcp_seqwnd.h:43</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a7973e68b212ac3cac8d62bfbb1b6da4c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a7973e68b212ac3cac8d62bfbb1b6da4c">s3f::s3fnet::TCPSession::backoff_timeout</a></div><div class="ttdeci">void backoff_timeout()</div><div class="ttdoc">Backoff the current timeout. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__timer_8cc_source.html#l00163">tcp_timer.cc:163</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1082383b1ab63ecfe7da04f4ae8fa07"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">s3f::s3fnet::TCPSession::mss</a></div><div class="ttdeci">uint32 mss</div><div class="ttdoc">Maximum segment size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00133">tcp_session.h:133</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab127443917c48253831516e6d0b72f09"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">s3f::s3fnet::TCPSession::nrxmits</a></div><div class="ttdeci">uint32 nrxmits</div><div class="ttdoc">Number of consecutive packet retransmissions. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00139">tcp_session.h:139</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_aa4636596abc9ea8b60f44ebb76e7ade7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa4636596abc9ea8b60f44ebb76e7ade7">s3f::s3fnet::TCPSession::snd_scoreboard</a></div><div class="ttdeci">TCPBlockList * snd_scoreboard</div><div class="ttdoc">The score board for blocks sacked maintained by the sender side. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00187">tcp_session.h:187</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_socket_signal_html_a05a709989381a0673d1ba03fca8568c7a292d8fc724d3facc009c34a3e1f37e4e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_socket_signal.html#a05a709989381a0673d1ba03fca8568c7a292d8fc724d3facc009c34a3e1f37e4e">s3f::s3fnet::SocketSignal::SESSION_RELEASED</a></div><div class="ttdoc">session has already been released </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00301">socket_session.h:301</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad8679036b779679c1807c4f425c182c3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad8679036b779679c1807c4f425c182c3">s3f::s3fnet::TCPSession::state</a></div><div class="ttdeci">int state</div><div class="ttdoc">The current state of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00112">tcp_session.h:112</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1a2f59d4c85556763203b9ecce13937adef5e7061fd56c6fa831d133c4eb0612">s3f::s3fnet::TCPSession::TCP_STATE_TIME_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00040">tcp_session.h:40</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a3bda2d05daddfd070c267bc73140a84d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a3bda2d05daddfd070c267bc73140a84d">s3f::s3fnet::TCPSession::ndupacks</a></div><div class="ttdeci">uint32 ndupacks</div><div class="ttdoc">Number of consecutive duplicate ACKs received. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00136">tcp_session.h:136</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2cd5840cbc1191efd078c08076f279d3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">s3f::s3fnet::TCPSession::cwnd</a></div><div class="ttdeci">uint32 cwnd</div><div class="ttdoc">Congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00127">tcp_session.h:127</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a173bf8f7e8ee35dc3929d8ab21b04c7c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a173bf8f7e8ee35dc3929d8ab21b04c7c">s3f::s3fnet::TCPSession::rcvwnd</a></div><div class="ttdeci">TCPRecvWindow * rcvwnd</div><div class="ttdoc">The receive window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00118">tcp_session.h:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9">s3f::s3fnet::TCPMaster::TCP_VERSION_SACK</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00038">tcp_master.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab00dc49da5ea3e23621cb51bfca36164"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::update_timeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the current smoothed RTT timeout with the new rtt measurment. </p>

<p>Definition at line <a class="el" href="tcp__timer_8cc_source.html#l00134">134</a> of file <a class="el" href="tcp__timer_8cc_source.html">tcp_timer.cc</a>.</p>

<p>References <a class="el" href="entity_8cc_source.html#l00269">Entity::d2t()</a>, <a class="el" href="protocol__session_8cc_source.html#l00128">s3f::s3fnet::ProtocolSession::getNowWithThousandSeparator()</a>, <a class="el" href="tcp__master_8h_source.html#l00134">s3f::s3fnet::TCPMaster::getSlowTimeoutDouble()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="s3fnet_8h_source.html#l00045">mymax</a>, <a class="el" href="s3fnet_8h_source.html#l00044">mymin</a>, <a class="el" href="dmlobj_8h_source.html#l00047">s3f::s3fnet::DmlObject::nhi</a>, <a class="el" href="tcp__session_8h_source.html#l00139">nrxmits</a>, <a class="el" href="tcp__session_8h_source.html#l00151">rtt_count</a>, <a class="el" href="tcp__session_8h_source.html#l00148">rtt_measured</a>, <a class="el" href="tcp__session_8h_source.html#l00145">rtt_smoothed</a>, <a class="el" href="tcp__session_8h_source.html#l00154">rtt_var</a>, <a class="el" href="tcp__session_8h_source.html#l00193">rxmit_timeout</a>, <a class="el" href="tcp__session_8h_source.html#l00194">rxmit_timeout_double</a>, <a class="el" href="tcp__init_8h_source.html#l00060">TCP_DEFAULT_RTT_SHIFT</a>, <a class="el" href="tcp__init_8h_source.html#l00062">TCP_DEFAULT_RTTVAR_SHIFT</a>, <a class="el" href="tcp__init_8h_source.html#l00054">TCP_DEFAULT_RXMIT_MAX_TIMEOUT</a>, <a class="el" href="tcp__init_8h_source.html#l00053">TCP_DEFAULT_RXMIT_MIN_TIMEOUT</a>, <a class="el" href="tcp__timer_8cc_source.html#l00017">TCP_DUMP</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, <a class="el" href="tcp__session_8h_source.html#l00388">timeout_value()</a>, and <a class="el" href="nhi_8cc_source.html#l00076">s3f::s3fnet::Nhi::toString()</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;{  </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">rtt_smoothed</a>)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  {</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="keywordtype">int</span> delta = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a44aecd8df9f166b738771ab9bf4d36d9">rtt_measured</a> - (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">rtt_smoothed</a> &gt;&gt; <a class="code" href="tcp__init_8h.html#a813b1efb0f6d22b0ca66152447e588b7">TCP_DEFAULT_RTT_SHIFT</a>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">if</span>((<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">rtt_smoothed</a> += delta) &lt;= 0)  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">rtt_smoothed</a> = 1;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span>(delta &lt; 0)  delta = -delta;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    delta -= (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">rtt_var</a> &gt;&gt; <a class="code" href="tcp__init_8h.html#aa1ac56653bc057e96211eaa09273940f">TCP_DEFAULT_RTTVAR_SHIFT</a>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span>((<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">rtt_var</a> += delta) &lt;= 0)  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">rtt_var</a> = 1;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  }</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">rtt_smoothed</a> = (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a44aecd8df9f166b738771ab9bf4d36d9">rtt_measured</a> + 1) &lt;&lt; <a class="code" href="tcp__init_8h.html#a813b1efb0f6d22b0ca66152447e588b7">TCP_DEFAULT_RTT_SHIFT</a>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">rtt_var</a> = (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a44aecd8df9f166b738771ab9bf4d36d9">rtt_measured</a> + 1) &lt;&lt; (<a class="code" href="tcp__init_8h.html#aa1ac56653bc057e96211eaa09273940f">TCP_DEFAULT_RTTVAR_SHIFT</a> - 1);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  }</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a74f0ff8ef6fad49191be26d984b14414">rxmit_timeout_double</a> = <a class="code" href="s3fnet_8h.html#ac3c1602f78264de1055419d3f5f8699a">mymax</a>(<a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a8e21b8b2dece3202c6779330f061c631">getSlowTimeoutDouble</a>() * ((<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">rtt_smoothed</a> &gt;&gt; <a class="code" href="tcp__init_8h.html#a813b1efb0f6d22b0ca66152447e588b7">TCP_DEFAULT_RTT_SHIFT</a>) + <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">rtt_var</a>),</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                              <a class="code" href="tcp__init_8h.html#ad3a0906957131d40bd1270c16fb0c531">TCP_DEFAULT_RXMIT_MAX_TIMEOUT</a>), <a class="code" href="tcp__init_8h.html#a868bb2e7130608bdbcb7ca556f7bd280">TCP_DEFAULT_RXMIT_MIN_TIMEOUT</a>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a0ab01b89e85d83119e4cd776e34ef479">rxmit_timeout</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a6ac4fe093bf16c28a822bdfb0bd89dc6">d2t</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a74f0ff8ef6fad49191be26d984b14414">rxmit_timeout_double</a>, 0);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">rtt_count</a> = 0;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">nrxmits</a> = 0;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <a class="code" href="tcp__timer_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a>(printf(<span class="stringliteral">&quot;[host=\&quot;%s\&quot;] %s: update_timeout(), rtt_measured=%d, rtt_smoothed=%d, RTO=%ld.\n&quot;</span>,</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_dml_object.html#a602e2119414b0758d299582bca25f30b">nhi</a>.<a class="code" href="classs3f_1_1s3fnet_1_1_nhi.html#a12348ee85a1bd6d7ddaf4876b8d32501">toString</a>(),</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a0250c97bad17f18ef7037fd76f7e5083">getNowWithThousandSeparator</a>(), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a44aecd8df9f166b738771ab9bf4d36d9">rtt_measured</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">rtt_smoothed</a>,</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae8a8130abf0e7a46c2ff0f2991c1a593">timeout_value</a>()));</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ae8a8130abf0e7a46c2ff0f2991c1a593"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae8a8130abf0e7a46c2ff0f2991c1a593">s3f::s3fnet::TCPSession::timeout_value</a></div><div class="ttdeci">ltime_t timeout_value()</div><div class="ttdoc">Current smoothed RTT timeout value. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00388">tcp_session.h:388</a></div></div>
<div class="ttc" id="tcp__init_8h_html_ad3a0906957131d40bd1270c16fb0c531"><div class="ttname"><a href="tcp__init_8h.html#ad3a0906957131d40bd1270c16fb0c531">TCP_DEFAULT_RXMIT_MAX_TIMEOUT</a></div><div class="ttdeci">#define TCP_DEFAULT_RXMIT_MAX_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00054">tcp_init.h:54</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a07975f88fa9d44f71eaa96061bcfe4b2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a07975f88fa9d44f71eaa96061bcfe4b2">s3f::s3fnet::TCPSession::rtt_count</a></div><div class="ttdeci">int rtt_count</div><div class="ttdoc">The current RTT count. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00151">tcp_session.h:151</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a8e21b8b2dece3202c6779330f061c631"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a8e21b8b2dece3202c6779330f061c631">s3f::s3fnet::TCPMaster::getSlowTimeoutDouble</a></div><div class="ttdeci">double getSlowTimeoutDouble()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00134">tcp_master.h:134</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a30d3084b61186cbb889007b1ef1d79c2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">s3f::s3fnet::TCPSession::rtt_smoothed</a></div><div class="ttdeci">int rtt_smoothed</div><div class="ttdoc">Smoothed round trip time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00145">tcp_session.h:145</a></div></div>
<div class="ttc" id="s3fnet_8h_html_ac3c1602f78264de1055419d3f5f8699a"><div class="ttname"><a href="s3fnet_8h.html#ac3c1602f78264de1055419d3f5f8699a">mymax</a></div><div class="ttdeci">#define mymax(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00045">s3fnet.h:45</a></div></div>
<div class="ttc" id="tcp__init_8h_html_aa1ac56653bc057e96211eaa09273940f"><div class="ttname"><a href="tcp__init_8h.html#aa1ac56653bc057e96211eaa09273940f">TCP_DEFAULT_RTTVAR_SHIFT</a></div><div class="ttdeci">#define TCP_DEFAULT_RTTVAR_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00062">tcp_init.h:62</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_af7814c955b9d8b4fa0177387e1970a81"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">s3f::s3fnet::TCPSession::rtt_var</a></div><div class="ttdeci">int rtt_var</div><div class="ttdoc">Current estimated RTT variance. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00154">tcp_session.h:154</a></div></div>
<div class="ttc" id="tcp__init_8h_html_a813b1efb0f6d22b0ca66152447e588b7"><div class="ttname"><a href="tcp__init_8h.html#a813b1efb0f6d22b0ca66152447e588b7">TCP_DEFAULT_RTT_SHIFT</a></div><div class="ttdeci">#define TCP_DEFAULT_RTT_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00060">tcp_init.h:60</a></div></div>
<div class="ttc" id="class_entity_html_a6ac4fe093bf16c28a822bdfb0bd89dc6"><div class="ttname"><a href="class_entity.html#a6ac4fe093bf16c28a822bdfb0bd89dc6">Entity::d2t</a></div><div class="ttdeci">ltime_t d2t(double d)</div><div class="ttdoc">Conversion routines to translate from double precision to clock ticks. </div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00269">entity.cc:269</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_dml_object_html_a602e2119414b0758d299582bca25f30b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_dml_object.html#a602e2119414b0758d299582bca25f30b">s3f::s3fnet::DmlObject::nhi</a></div><div class="ttdeci">Nhi nhi</div><div class="ttdoc">The nhi address to identify the object. </div><div class="ttdef"><b>Definition:</b> <a href="dmlobj_8h_source.html#l00047">dmlobj.h:47</a></div></div>
<div class="ttc" id="tcp__timer_8cc_html_ae626a9851fdb5af743c1eb8643d81adc"><div class="ttname"><a href="tcp__timer_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a></div><div class="ttdeci">#define TCP_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="tcp__timer_8cc_source.html#l00017">tcp_timer.cc:17</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab127443917c48253831516e6d0b72f09"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">s3f::s3fnet::TCPSession::nrxmits</a></div><div class="ttdeci">uint32 nrxmits</div><div class="ttdoc">Number of consecutive packet retransmissions. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00139">tcp_session.h:139</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_nhi_html_a12348ee85a1bd6d7ddaf4876b8d32501"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_nhi.html#a12348ee85a1bd6d7ddaf4876b8d32501">s3f::s3fnet::Nhi::toString</a></div><div class="ttdeci">char * toString(char *buf)</div><div class="ttdoc">Returns a char array representation of this NHI. </div><div class="ttdef"><b>Definition:</b> <a href="nhi_8cc_source.html#l00076">nhi.cc:76</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a0250c97bad17f18ef7037fd76f7e5083"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a0250c97bad17f18ef7037fd76f7e5083">s3f::s3fnet::ProtocolSession::getNowWithThousandSeparator</a></div><div class="ttdeci">char * getNowWithThousandSeparator()</div><div class="ttdoc">For printing the current simulation time in a better readable format. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00128">protocol_session.cc:128</a></div></div>
<div class="ttc" id="tcp__init_8h_html_a868bb2e7130608bdbcb7ca556f7bd280"><div class="ttname"><a href="tcp__init_8h.html#a868bb2e7130608bdbcb7ca556f7bd280">TCP_DEFAULT_RXMIT_MIN_TIMEOUT</a></div><div class="ttdeci">#define TCP_DEFAULT_RXMIT_MIN_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00053">tcp_init.h:53</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a0ab01b89e85d83119e4cd776e34ef479"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a0ab01b89e85d83119e4cd776e34ef479">s3f::s3fnet::TCPSession::rxmit_timeout</a></div><div class="ttdeci">ltime_t rxmit_timeout</div><div class="ttdoc">The current retransmission timeout. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00193">tcp_session.h:193</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="s3fnet_8h_html_ae647aceb957903b3149e0783b10dc673"><div class="ttname"><a href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a></div><div class="ttdeci">#define mymin(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00044">s3fnet.h:44</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a74f0ff8ef6fad49191be26d984b14414"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a74f0ff8ef6fad49191be26d984b14414">s3f::s3fnet::TCPSession::rxmit_timeout_double</a></div><div class="ttdeci">double rxmit_timeout_double</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00194">tcp_session.h:194</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a44aecd8df9f166b738771ab9bf4d36d9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a44aecd8df9f166b738771ab9bf4d36d9">s3f::s3fnet::TCPSession::rtt_measured</a></div><div class="ttdeci">int rtt_measured</div><div class="ttdoc">Measured round trip time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00148">tcp_session.h:148</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7973e68b212ac3cac8d62bfbb1b6da4c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::backoff_timeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Backoff the current timeout. </p>

<p>Definition at line <a class="el" href="tcp__timer_8cc_source.html#l00163">163</a> of file <a class="el" href="tcp__timer_8cc_source.html">tcp_timer.cc</a>.</p>

<p>References <a class="el" href="entity_8cc_source.html#l00269">Entity::d2t()</a>, <a class="el" href="tcp__master_8h_source.html#l00134">s3f::s3fnet::TCPMaster::getSlowTimeoutDouble()</a>, <a class="el" href="protocol__session_8cc_source.html#l00118">s3f::s3fnet::ProtocolSession::inHost()</a>, <a class="el" href="s3fnet_8h_source.html#l00045">mymax</a>, <a class="el" href="s3fnet_8h_source.html#l00044">mymin</a>, <a class="el" href="tcp__session_8h_source.html#l00139">nrxmits</a>, <a class="el" href="tcp__session_8h_source.html#l00145">rtt_smoothed</a>, <a class="el" href="tcp__session_8h_source.html#l00154">rtt_var</a>, <a class="el" href="tcp__session_8h_source.html#l00193">rxmit_timeout</a>, <a class="el" href="tcp__session_8h_source.html#l00194">rxmit_timeout_double</a>, <a class="el" href="tcp__timer_8cc_source.html#l00026">s3f::s3fnet::tcp_backoff</a>, <a class="el" href="tcp__init_8h_source.html#l00074">TCP_DEFAULT_BACKOFF_LIMIT</a>, <a class="el" href="tcp__init_8h_source.html#l00060">TCP_DEFAULT_RTT_SHIFT</a>, <a class="el" href="tcp__init_8h_source.html#l00054">TCP_DEFAULT_RXMIT_MAX_TIMEOUT</a>, <a class="el" href="tcp__init_8h_source.html#l00053">TCP_DEFAULT_RXMIT_MIN_TIMEOUT</a>, and <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>.</p>

<p>Referenced by <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>.</p>
<div class="fragment"><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;{</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a74f0ff8ef6fad49191be26d984b14414">rxmit_timeout_double</a> = <a class="code" href="s3fnet_8h.html#ac3c1602f78264de1055419d3f5f8699a">mymax</a>( <a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>((<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a8e21b8b2dece3202c6779330f061c631">getSlowTimeoutDouble</a>() *</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                               <a class="code" href="namespaces3f_1_1s3fnet.html#ad3a2497c4bc1ee642bbed306e9eb57fa">tcp_backoff</a>[<a class="code" href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">nrxmits</a>, (<a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>)<a class="code" href="tcp__init_8h.html#afbb886a1f4470c7178ebff92291e48f0">TCP_DEFAULT_BACKOFF_LIMIT</a>)] *</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                               ((<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">rtt_smoothed</a> &gt;&gt; <a class="code" href="tcp__init_8h.html#a813b1efb0f6d22b0ca66152447e588b7">TCP_DEFAULT_RTT_SHIFT</a>) + <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">rtt_var</a>)), <a class="code" href="tcp__init_8h.html#ad3a0906957131d40bd1270c16fb0c531">TCP_DEFAULT_RXMIT_MAX_TIMEOUT</a>),</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                               <a class="code" href="tcp__init_8h.html#a868bb2e7130608bdbcb7ca556f7bd280">TCP_DEFAULT_RXMIT_MIN_TIMEOUT</a>);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a0ab01b89e85d83119e4cd776e34ef479">rxmit_timeout</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">inHost</a>()-&gt;<a class="code" href="class_entity.html#a6ac4fe093bf16c28a822bdfb0bd89dc6">d2t</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a74f0ff8ef6fad49191be26d984b14414">rxmit_timeout_double</a>, 0);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div>
<div class="ttc" id="tcp__init_8h_html_ad3a0906957131d40bd1270c16fb0c531"><div class="ttname"><a href="tcp__init_8h.html#ad3a0906957131d40bd1270c16fb0c531">TCP_DEFAULT_RXMIT_MAX_TIMEOUT</a></div><div class="ttdeci">#define TCP_DEFAULT_RXMIT_MAX_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00054">tcp_init.h:54</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a8e21b8b2dece3202c6779330f061c631"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a8e21b8b2dece3202c6779330f061c631">s3f::s3fnet::TCPMaster::getSlowTimeoutDouble</a></div><div class="ttdeci">double getSlowTimeoutDouble()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00134">tcp_master.h:134</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a30d3084b61186cbb889007b1ef1d79c2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">s3f::s3fnet::TCPSession::rtt_smoothed</a></div><div class="ttdeci">int rtt_smoothed</div><div class="ttdoc">Smoothed round trip time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00145">tcp_session.h:145</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="s3fnet_8h_html_ac3c1602f78264de1055419d3f5f8699a"><div class="ttname"><a href="s3fnet_8h.html#ac3c1602f78264de1055419d3f5f8699a">mymax</a></div><div class="ttdeci">#define mymax(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00045">s3fnet.h:45</a></div></div>
<div class="ttc" id="tcp__init_8h_html_afbb886a1f4470c7178ebff92291e48f0"><div class="ttname"><a href="tcp__init_8h.html#afbb886a1f4470c7178ebff92291e48f0">TCP_DEFAULT_BACKOFF_LIMIT</a></div><div class="ttdeci">#define TCP_DEFAULT_BACKOFF_LIMIT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00074">tcp_init.h:74</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_ad3a2497c4bc1ee642bbed306e9eb57fa"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#ad3a2497c4bc1ee642bbed306e9eb57fa">s3f::s3fnet::tcp_backoff</a></div><div class="ttdeci">static int tcp_backoff[]</div><div class="ttdef"><b>Definition:</b> <a href="tcp__timer_8cc_source.html#l00026">tcp_timer.cc:26</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_af7814c955b9d8b4fa0177387e1970a81"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">s3f::s3fnet::TCPSession::rtt_var</a></div><div class="ttdeci">int rtt_var</div><div class="ttdoc">Current estimated RTT variance. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00154">tcp_session.h:154</a></div></div>
<div class="ttc" id="tcp__init_8h_html_a813b1efb0f6d22b0ca66152447e588b7"><div class="ttname"><a href="tcp__init_8h.html#a813b1efb0f6d22b0ca66152447e588b7">TCP_DEFAULT_RTT_SHIFT</a></div><div class="ttdeci">#define TCP_DEFAULT_RTT_SHIFT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00060">tcp_init.h:60</a></div></div>
<div class="ttc" id="class_entity_html_a6ac4fe093bf16c28a822bdfb0bd89dc6"><div class="ttname"><a href="class_entity.html#a6ac4fe093bf16c28a822bdfb0bd89dc6">Entity::d2t</a></div><div class="ttdeci">ltime_t d2t(double d)</div><div class="ttdoc">Conversion routines to translate from double precision to clock ticks. </div><div class="ttdef"><b>Definition:</b> <a href="entity_8cc_source.html#l00269">entity.cc:269</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_afadb38bfa4c4daa1049b229d7abce81c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#afadb38bfa4c4daa1049b229d7abce81c">s3f::s3fnet::ProtocolSession::inHost</a></div><div class="ttdeci">virtual Host * inHost()</div><div class="ttdoc">Return a pointer to the host owning this protocol session. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00118">protocol_session.cc:118</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ab127443917c48253831516e6d0b72f09"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ab127443917c48253831516e6d0b72f09">s3f::s3fnet::TCPSession::nrxmits</a></div><div class="ttdeci">uint32 nrxmits</div><div class="ttdoc">Number of consecutive packet retransmissions. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00139">tcp_session.h:139</a></div></div>
<div class="ttc" id="tcp__init_8h_html_a868bb2e7130608bdbcb7ca556f7bd280"><div class="ttname"><a href="tcp__init_8h.html#a868bb2e7130608bdbcb7ca556f7bd280">TCP_DEFAULT_RXMIT_MIN_TIMEOUT</a></div><div class="ttdeci">#define TCP_DEFAULT_RXMIT_MIN_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00053">tcp_init.h:53</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a0ab01b89e85d83119e4cd776e34ef479"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a0ab01b89e85d83119e4cd776e34ef479">s3f::s3fnet::TCPSession::rxmit_timeout</a></div><div class="ttdeci">ltime_t rxmit_timeout</div><div class="ttdoc">The current retransmission timeout. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00193">tcp_session.h:193</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="s3fnet_8h_html_ae647aceb957903b3149e0783b10dc673"><div class="ttname"><a href="s3fnet_8h.html#ae647aceb957903b3149e0783b10dc673">mymin</a></div><div class="ttdeci">#define mymin(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00044">s3fnet.h:44</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a74f0ff8ef6fad49191be26d984b14414"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a74f0ff8ef6fad49191be26d984b14414">s3f::s3fnet::TCPSession::rxmit_timeout_double</a></div><div class="ttdeci">double rxmit_timeout_double</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00194">tcp_session.h:194</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a69d9114cde84414fb2fa305b21268868"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> s3f::s3fnet::TCPSession::now </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>An alias to get the current simulation time. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00385">385</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>References <a class="el" href="protocol__session_8cc_source.html#l00123">s3f::s3fnet::ProtocolSession::getNow()</a>, and <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>.</p>

<p>Referenced by <a class="el" href="tcp__timer_8cc_source.html#l00172">checkIdle()</a>.</p>
<div class="fragment"><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7a8fc3b0c62b09c82b72268b56abb58c">getNow</a>(); }</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_protocol_session_html_a7a8fc3b0c62b09c82b72268b56abb58c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_protocol_session.html#a7a8fc3b0c62b09c82b72268b56abb58c">s3f::s3fnet::ProtocolSession::getNow</a></div><div class="ttdeci">ltime_t getNow()</div><div class="ttdoc">The method returns the current simulation time. </div><div class="ttdef"><b>Definition:</b> <a href="protocol__session_8cc_source.html#l00123">protocol_session.cc:123</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae8a8130abf0e7a46c2ff0f2991c1a593"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> s3f::s3fnet::TCPSession::timeout_value </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current smoothed RTT timeout value. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00388">388</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00193">rxmit_timeout</a>.</p>

<p>Referenced by <a class="el" href="tcp__timer_8cc_source.html#l00172">checkIdle()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00134">update_timeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a0ab01b89e85d83119e4cd776e34ef479">rxmit_timeout</a>; }</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a0ab01b89e85d83119e4cd776e34ef479"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a0ab01b89e85d83119e4cd776e34ef479">s3f::s3fnet::TCPSession::rxmit_timeout</a></div><div class="ttdeci">ltime_t rxmit_timeout</div><div class="ttdoc">The current retransmission timeout. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00193">tcp_session.h:193</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a42a23756bf8288199fe4a26d072ea129"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double s3f::s3fnet::TCPSession::timeout_double_value </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00389">389</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00194">rxmit_timeout_double</a>.</p>
<div class="fragment"><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;{ <span class="keywordflow">return</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a74f0ff8ef6fad49191be26d984b14414">rxmit_timeout_double</a>; }</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a74f0ff8ef6fad49191be26d984b14414"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a74f0ff8ef6fad49191be26d984b14414">s3f::s3fnet::TCPSession::rxmit_timeout_double</a></div><div class="ttdeci">double rxmit_timeout_double</div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00194">tcp_session.h:194</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa8ff1695f8741d222d9ff6af5ac2eed4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double s3f::s3fnet::TCPSession::initial_timeout </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return initial timeout value for the first timeout. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00392">392</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00145">rtt_smoothed</a>, <a class="el" href="tcp__session_8h_source.html#l00154">rtt_var</a>, and <a class="el" href="tcp__init_8h_source.html#l00045">TCP_DEFAULT_SLOW_TIMEOUT</a>.</p>

<p>Referenced by <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>.</p>
<div class="fragment"><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;  {</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">return</span> (((<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">rtt_smoothed</a>&gt;&gt;2) + <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">rtt_var</a>)&gt;&gt;1) * <a class="code" href="tcp__init_8h.html#a3ee4e530c8d68f15c7d36a1e677cc3bc">TCP_DEFAULT_SLOW_TIMEOUT</a>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;  }</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a30d3084b61186cbb889007b1ef1d79c2"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a30d3084b61186cbb889007b1ef1d79c2">s3f::s3fnet::TCPSession::rtt_smoothed</a></div><div class="ttdeci">int rtt_smoothed</div><div class="ttdoc">Smoothed round trip time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00145">tcp_session.h:145</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_af7814c955b9d8b4fa0177387e1970a81"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#af7814c955b9d8b4fa0177387e1970a81">s3f::s3fnet::TCPSession::rtt_var</a></div><div class="ttdeci">int rtt_var</div><div class="ttdoc">Current estimated RTT variance. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00154">tcp_session.h:154</a></div></div>
<div class="ttc" id="tcp__init_8h_html_a3ee4e530c8d68f15c7d36a1e677cc3bc"><div class="ttname"><a href="tcp__init_8h.html#a3ee4e530c8d68f15c7d36a1e677cc3bc">TCP_DEFAULT_SLOW_TIMEOUT</a></div><div class="ttdeci">#define TCP_DEFAULT_SLOW_TIMEOUT</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00045">tcp_init.h:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae6c35466f27df34126e7c111c836dd7f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::checkIdle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether the idle time is long enough to slow start. </p>

<p>Definition at line <a class="el" href="tcp__timer_8cc_source.html#l00172">172</a> of file <a class="el" href="tcp__timer_8cc_source.html">tcp_timer.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00127">cwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00197">idle_time</a>, <a class="el" href="tcp__session_8h_source.html#l00133">mss</a>, <a class="el" href="tcp__session_8h_source.html#l00385">now()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__session_8h_source.html#l00388">timeout_value()</a>, and <a class="el" href="tcp__seqwnd_8h_source.html#l00049">s3f::s3fnet::TCPSeqWindow::used()</a>.</p>
<div class="fragment"><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;{</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="keywordtype">int</span> idle = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">used</a>() == 0;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="keywordflow">if</span>(idle &amp;&amp; (<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a69d9114cde84414fb2fa305b21268868">now</a>() - <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8807efeb4c27e42a192e79917cc0e9da">idle_time</a> &gt;= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae8a8130abf0e7a46c2ff0f2991c1a593">timeout_value</a>()))</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  }</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ae8a8130abf0e7a46c2ff0f2991c1a593"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae8a8130abf0e7a46c2ff0f2991c1a593">s3f::s3fnet::TCPSession::timeout_value</a></div><div class="ttdeci">ltime_t timeout_value()</div><div class="ttdoc">Current smoothed RTT timeout value. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00388">tcp_session.h:388</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a69d9114cde84414fb2fa305b21268868"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a69d9114cde84414fb2fa305b21268868">s3f::s3fnet::TCPSession::now</a></div><div class="ttdeci">ltime_t now()</div><div class="ttdoc">An alias to get the current simulation time. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00385">tcp_session.h:385</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1082383b1ab63ecfe7da04f4ae8fa07"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">s3f::s3fnet::TCPSession::mss</a></div><div class="ttdeci">uint32 mss</div><div class="ttdoc">Maximum segment size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00133">tcp_session.h:133</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a8807efeb4c27e42a192e79917cc0e9da"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a8807efeb4c27e42a192e79917cc0e9da">s3f::s3fnet::TCPSession::idle_time</a></div><div class="ttdeci">ltime_t idle_time</div><div class="ttdoc">Idle time for the other party. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00197">tcp_session.h:197</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a93827f7ec39fba34aa3bc5f1eba82f24"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a93827f7ec39fba34aa3bc5f1eba82f24">s3f::s3fnet::TCPSeqWindow::used</a></div><div class="ttdeci">uint32 used()</div><div class="ttdoc">Return how much of the window is used up in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00049">tcp_seqwnd.h:49</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2cd5840cbc1191efd078c08076f279d3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">s3f::s3fnet::TCPSession::cwnd</a></div><div class="ttdeci">uint32 cwnd</div><div class="ttdoc">Congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00127">tcp_session.h:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaf5d0ff4aff82f4a404a620d95e59c5d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::sender_send_sack </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sack_flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a>&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *&amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method handles the situation when a sender tries to send a packet. </p>
<p>It sends the sack permitted option. At the same time, it keeps which segments are sent out but have not yet been acknowledged (maybe sacked) in the list of entries. </p>

<p>Definition at line <a class="el" href="tcp__sack_8cc_source.html#l00040">40</a> of file <a class="el" href="tcp__sack_8cc_source.html">tcp_sack.cc</a>.</p>

<p>References <a class="el" href="errhandle_8cc_source.html#l00128">s3f::s3fnet::error_quit()</a>, <a class="el" href="tcp__message_8h_source.html#l00027">s3f::s3fnet::TCPMessage::TCP_FLAG_SYN</a>, <a class="el" href="tcp__init_8h_source.html#l00065">TCP_SACK_PERMITTED</a>, and <a class="el" href="tcp__init_8h_source.html#l00068">TCP_SACK_PERMITTED_KIND</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;{</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;  <span class="comment">// sender notifies the other side that sack is permitted.</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;  <span class="keywordflow">if</span>(sack_flag == <a class="code" href="tcp__init_8h.html#a802c4f8f60f95b1c316d37f7f6a3105e">TCP_SACK_PERMITTED</a>)</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">// TCP_SACK_PERMITTED when SYN is set,otherwise terminate the program.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">if</span>(!(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">TCPMessage::TCP_FLAG_SYN</a> &amp; mask))</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      <a class="code" href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">error_quit</a>(<span class="stringliteral">&quot;ERROR: TCPSession::sender_send_sack(), &quot;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                 <span class="stringliteral">&quot;TCP_SACK_PERMITTED must be used together with SYN mask.\n&quot;</span>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="comment">// because the header should be a multiple of 32 bits, so 4 bytes are here.</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a>* sack_permitted_option = <span class="keyword">new</span> <a class="code" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a>[4];</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    </div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    sack_permitted_option[0] = <a class="code" href="tcp__init_8h.html#ab81e28d11960f1e1ca23ee3179daa94c">TCP_SACK_PERMITTED_KIND</a>;         <span class="comment">// Kind   = 4</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    sack_permitted_option[1] = 2;                           <span class="comment">// Length = 2</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    options = sack_permitted_option;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    </div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">return</span> 4;   <span class="comment">// add 4 bytes.</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ade342cfe36e64b7af9152e0b680f7940">s3f::s3fnet::TCPMessage::TCP_FLAG_SYN</a></div><div class="ttdoc">start of a new connection </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00027">tcp_message.h:27</a></div></div>
<div class="ttc" id="tcp__init_8h_html_ab81e28d11960f1e1ca23ee3179daa94c"><div class="ttname"><a href="tcp__init_8h.html#ab81e28d11960f1e1ca23ee3179daa94c">TCP_SACK_PERMITTED_KIND</a></div><div class="ttdeci">#define TCP_SACK_PERMITTED_KIND</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00068">tcp_init.h:68</a></div></div>
<div class="ttc" id="tcp__init_8h_html_a802c4f8f60f95b1c316d37f7f6a3105e"><div class="ttname"><a href="tcp__init_8h.html#a802c4f8f60f95b1c316d37f7f6a3105e">TCP_SACK_PERMITTED</a></div><div class="ttdeci">#define TCP_SACK_PERMITTED</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00065">tcp_init.h:65</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_aee6e3282670be024dcee8ac3cef67e85"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#aee6e3282670be024dcee8ac3cef67e85">s3f::s3fnet::error_quit</a></div><div class="ttdeci">void error_quit(const char *fmt,...)</div><div class="ttdoc">This function is called when there&#39;s a fatal error unrelated to a system call. </div><div class="ttdef"><b>Definition:</b> <a href="errhandle_8cc_source.html#l00128">errhandle.cc:128</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a57db3413e727c04a04ffc3a6bc27efa5"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">s3f::s3fnet::byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdoc">8-bit unsigned character type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00031">s3fnet.h:31</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a286c689db6d08bb289ef241172008bbb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::receiver_send_sack </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sack_flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a>&#160;</td>
          <td class="paramname"><em>mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a>&#160;</td>
          <td class="paramname"><em>ackno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a> *&amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method handles the situation when a receiver tries to send a packet. </p>
<p>It should consider sending the sack options. The method returns the length to be added to the standard TCP header length. </p>

<p>Definition at line <a class="el" href="tcp__sack_8cc_source.html#l00061">61</a> of file <a class="el" href="tcp__sack_8cc_source.html">tcp_sack.cc</a>.</p>

<p>References <a class="el" href="tcp__blocks_8cc_source.html#l00106">s3f::s3fnet::TCPBlockList::clear_blocks()</a>, <a class="el" href="tcp__blocks_8cc_source.html#l00162">s3f::s3fnet::TCPBlockList::fetch_blocks()</a>, <a class="el" href="tcp__session_8h_source.html#l00190">rcv_scoreboard</a>, <a class="el" href="tcp__init_8h_source.html#l00071">TCP_SACK_MAX_BLOCKS</a>, <a class="el" href="tcp__init_8h_source.html#l00066">TCP_SACK_OPTION</a>, and <a class="el" href="tcp__init_8h_source.html#l00069">TCP_SACK_OPTION_KIND</a>.</p>
<div class="fragment"><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;{</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;  <span class="comment">// as RFC 2018, SACK options should be included in all ACKs which do not ACK</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  <span class="comment">// the highest seqnuence number in the data receiver&#39;s queue.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <span class="keywordflow">if</span>((<a class="code" href="tcp__init_8h.html#a62b55a4bba5f65eacce797a38adc0575">TCP_SACK_OPTION</a> == sack_flag) &amp;&amp;(ackno &lt; rcvwnd-&gt;getHighestSeqno()))</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// the first 2 bytes are empty. 2 -&gt; Kind(5), length; 4 * (left, right)</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// important: make it&#39;s multiple of 32 bits.</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">//      byte tcp_option[4+8*4];</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a>* tcp_option = <span class="keyword">new</span> <a class="code" href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">byte</a>[4 + 8 * <a class="code" href="tcp__init_8h.html#a2fb6b5df09c8e443f31770a5e145268b">TCP_SACK_MAX_BLOCKS</a>];</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    </div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// kind = 5</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    tcp_option[0]  = <a class="code" href="tcp__init_8h.html#a693191a801a4debdc4224be7d6b02a44">TCP_SACK_OPTION_KIND</a>;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> *buffer =  (<a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> *)&amp;tcp_option[2];</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <span class="comment">// before sending out attached sack blocks, remove lowest</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4ab9b3653da38b2ea02aab65e1042d25">rcv_scoreboard</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a127d07573d1690df30c3760a69518449">clear_blocks</a>(ackno);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// we can convey TCP_SACK_MAX_BLOCKS blocks</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordtype">int</span> real_num = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4ab9b3653da38b2ea02aab65e1042d25">rcv_scoreboard</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a79e89028fbe266c64e922a20087b544c">fetch_blocks</a>(buffer, <a class="code" href="tcp__init_8h.html#a2fb6b5df09c8e443f31770a5e145268b">TCP_SACK_MAX_BLOCKS</a>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// update the length of valid sack option. totally, there are real_num blocks.</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    tcp_option[1] = 2 + 8 * real_num;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// return added length</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// attention: 4 + 8 * real_num includes the 2 padding bytes, which make</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">// the length be a multiple of 4 bytes.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// data-&gt;insert_at_front(tcp_option, 4 + 8 * real_num);</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="comment">// return 1 + 2 * real_num;         // (1 + 2 * real_num) * (32 bits)</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// [03/23/04] always carry the same size.</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    options = tcp_option;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">return</span> 4 + 8 * <a class="code" href="tcp__init_8h.html#a2fb6b5df09c8e443f31770a5e145268b">TCP_SACK_MAX_BLOCKS</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div>
<div class="ttc" id="tcp__init_8h_html_a2fb6b5df09c8e443f31770a5e145268b"><div class="ttname"><a href="tcp__init_8h.html#a2fb6b5df09c8e443f31770a5e145268b">TCP_SACK_MAX_BLOCKS</a></div><div class="ttdeci">#define TCP_SACK_MAX_BLOCKS</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00071">tcp_init.h:71</a></div></div>
<div class="ttc" id="tcp__init_8h_html_a693191a801a4debdc4224be7d6b02a44"><div class="ttname"><a href="tcp__init_8h.html#a693191a801a4debdc4224be7d6b02a44">TCP_SACK_OPTION_KIND</a></div><div class="ttdeci">#define TCP_SACK_OPTION_KIND</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00069">tcp_init.h:69</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_block_list_html_a79e89028fbe266c64e922a20087b544c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a79e89028fbe266c64e922a20087b544c">s3f::s3fnet::TCPBlockList::fetch_blocks</a></div><div class="ttdeci">int fetch_blocks(uint32 *buffer, int num)</div><div class="ttdoc">Fetch blocks. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__blocks_8cc_source.html#l00162">tcp_blocks.cc:162</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_block_list_html_a127d07573d1690df30c3760a69518449"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a127d07573d1690df30c3760a69518449">s3f::s3fnet::TCPBlockList::clear_blocks</a></div><div class="ttdeci">void clear_blocks(uint32 seqno)</div><div class="ttdoc">Clear all blocks less than a given seqno. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__blocks_8cc_source.html#l00106">tcp_blocks.cc:106</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a4ab9b3653da38b2ea02aab65e1042d25"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4ab9b3653da38b2ea02aab65e1042d25">s3f::s3fnet::TCPSession::rcv_scoreboard</a></div><div class="ttdeci">TCPBlockList * rcv_scoreboard</div><div class="ttdoc">The score board for the receiver side. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00190">tcp_session.h:190</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_a57db3413e727c04a04ffc3a6bc27efa5"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#a57db3413e727c04a04ffc3a6bc27efa5">s3f::s3fnet::byte</a></div><div class="ttdeci">unsigned char byte</div><div class="ttdoc">8-bit unsigned character type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00031">s3fnet.h:31</a></div></div>
<div class="ttc" id="tcp__init_8h_html_a62b55a4bba5f65eacce797a38adc0575"><div class="ttname"><a href="tcp__init_8h.html#a62b55a4bba5f65eacce797a38adc0575">TCP_SACK_OPTION</a></div><div class="ttdeci">#define TCP_SACK_OPTION</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00066">tcp_init.h:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af0330f4923b4dabdf51a91f725126692"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::sender_recv_sack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html">TCPMessage</a> *&#160;</td>
          <td class="paramname"><em>tcphdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method handles the situation when a sender receives sack options. </p>
<p>The information is kept accordingly. </p>

<p>Definition at line <a class="el" href="tcp__sack_8cc_source.html#l00099">99</a> of file <a class="el" href="tcp__sack_8cc_source.html">tcp_sack.cc</a>.</p>

<p>References <a class="el" href="tcp__message_8h_source.html#l00044">s3f::s3fnet::TCPMessage::ackno</a>, <a class="el" href="tcp__blocks_8cc_source.html#l00106">s3f::s3fnet::TCPBlockList::clear_blocks()</a>, <a class="el" href="tcp__message_8h_source.html#l00050">s3f::s3fnet::TCPMessage::flags</a>, <a class="el" href="tcp__master_8h_source.html#l00126">s3f::s3fnet::TCPMaster::getVersion()</a>, <a class="el" href="tcp__blocks_8cc_source.html#l00018">s3f::s3fnet::TCPBlockList::insert_block()</a>, <a class="el" href="tcp__message_8h_source.html#l00056">s3f::s3fnet::TCPMessage::options</a>, <a class="el" href="tcp__session_8h_source.html#l00187">snd_scoreboard</a>, <a class="el" href="tcp__sack_8cc_source.html#l00034">TCP_DUMP</a>, <a class="el" href="tcp__message_8h_source.html#l00030">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a>, <a class="el" href="tcp__session_8h_source.html#l00109">tcp_master</a>, <a class="el" href="tcp__init_8h_source.html#l00069">TCP_SACK_OPTION_KIND</a>, and <a class="el" href="tcp__master_8h_source.html#l00038">s3f::s3fnet::TCPMaster::TCP_VERSION_SACK</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="comment">// update the sack information obtained.</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;  <span class="keywordflow">if</span>(tmsg-&gt;options &amp;&amp; <a class="code" href="tcp__init_8h.html#a693191a801a4debdc4224be7d6b02a44">TCP_SACK_OPTION_KIND</a> == tmsg-&gt;options[0])</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="tcp__sack_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a>(printf(<span class="stringliteral">&quot;sender_recv_sack(), SACK option set!\n&quot;</span>));</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    assert(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">tcp_master</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">getVersion</a>() == <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9">TCPMaster::TCP_VERSION_SACK</a>);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// first if ack advances, we update the mySack_Entries.</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span>(tmsg-&gt;flags &amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">TCPMessage::TCP_FLAG_ACK</a>)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa4636596abc9ea8b60f44ebb76e7ade7">snd_scoreboard</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a127d07573d1690df30c3760a69518449">clear_blocks</a>(tmsg-&gt;ackno);</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// sack_length is 2 + 8 * num</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="comment">// int num = ((tcp_hdr_option_length(msg)-2)/8);</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    assert(tmsg-&gt;options);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordtype">int</span> num = (tmsg-&gt;options[1] - 2) / 8;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> left,right;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// now we sack the entries </span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;num; i++)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="comment">// 2  is (kind, length)</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      left  = *((<a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> *)&amp;tmsg-&gt;options[2 + 4 * 2 * i]);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      right = *((<a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> *)&amp;tmsg-&gt;options[2 + 4 * (2 * i + 1)]);      </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa4636596abc9ea8b60f44ebb76e7ade7">snd_scoreboard</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a78e8714545a5e5ea88c3fe377b671f59">insert_block</a>(left, right - left);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    }</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_block_list_html_a78e8714545a5e5ea88c3fe377b671f59"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a78e8714545a5e5ea88c3fe377b671f59">s3f::s3fnet::TCPBlockList::insert_block</a></div><div class="ttdeci">void insert_block(uint32 seqno, uint32 len)</div><div class="ttdoc">Insert a block with sequence numbers of length len starting from seqno into the list. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__blocks_8cc_source.html#l00018">tcp_blocks.cc:18</a></div></div>
<div class="ttc" id="tcp__init_8h_html_a693191a801a4debdc4224be7d6b02a44"><div class="ttname"><a href="tcp__init_8h.html#a693191a801a4debdc4224be7d6b02a44">TCP_SACK_OPTION_KIND</a></div><div class="ttdeci">#define TCP_SACK_OPTION_KIND</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00069">tcp_init.h:69</a></div></div>
<div class="ttc" id="tcp__sack_8cc_html_ae626a9851fdb5af743c1eb8643d81adc"><div class="ttname"><a href="tcp__sack_8cc.html#ae626a9851fdb5af743c1eb8643d81adc">TCP_DUMP</a></div><div class="ttdeci">#define TCP_DUMP(x)</div><div class="ttdef"><b>Definition:</b> <a href="tcp__sack_8cc_source.html#l00034">tcp_sack.cc:34</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a78430cee896ecf9f004a1cc11431697d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a78430cee896ecf9f004a1cc11431697d">s3f::s3fnet::TCPMaster::getVersion</a></div><div class="ttdeci">int getVersion()</div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00126">tcp_master.h:126</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_block_list_html_a127d07573d1690df30c3760a69518449"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a127d07573d1690df30c3760a69518449">s3f::s3fnet::TCPBlockList::clear_blocks</a></div><div class="ttdeci">void clear_blocks(uint32 seqno)</div><div class="ttdoc">Clear all blocks less than a given seqno. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__blocks_8cc_source.html#l00106">tcp_blocks.cc:106</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_aa4636596abc9ea8b60f44ebb76e7ade7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa4636596abc9ea8b60f44ebb76e7ade7">s3f::s3fnet::TCPSession::snd_scoreboard</a></div><div class="ttdeci">TCPBlockList * snd_scoreboard</div><div class="ttdoc">The score board for blocks sacked maintained by the sender side. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00187">tcp_session.h:187</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a42d470213dbe54d26fbb1ffe6c8cbf56"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a42d470213dbe54d26fbb1ffe6c8cbf56">s3f::s3fnet::TCPSession::tcp_master</a></div><div class="ttdeci">TCPMaster * tcp_master</div><div class="ttdoc">Point to the tcp master. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00109">tcp_session.h:109</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_message_html_a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_message.html#a2a06f05745817d29a302ba661d4cfbc9ae716eb1ea97b2ee0663f99ebfd98c9c1">s3f::s3fnet::TCPMessage::TCP_FLAG_ACK</a></div><div class="ttdoc">acknowledgment field valid </div><div class="ttdef"><b>Definition:</b> <a href="tcp__message_8h_source.html#l00030">tcp_message.h:30</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_master_html_a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_master.html#a99e7a3514c6966776f03a6847d9419f2a116f11945f56e9336d3355de2b4c2fc9">s3f::s3fnet::TCPMaster::TCP_VERSION_SACK</a></div><div class="ttdef"><b>Definition:</b> <a href="tcp__master_8h_source.html#l00038">tcp_master.h:38</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a28b8d4408231d67649dcb56d26d7f420"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::receiver_recv_sack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_message.html">TCPMessage</a> *&#160;</td>
          <td class="paramname"><em>tcphdr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method handles the situation when a receiver receives a packet. </p>
<p>The method retrieves the sack permitted information. At the same time, it updates the highest sequence number received so far. </p>

<p>Definition at line <a class="el" href="tcp__sack_8cc_source.html#l00130">130</a> of file <a class="el" href="tcp__sack_8cc_source.html">tcp_sack.cc</a>.</p>

<p>References <a class="el" href="tcp__blocks_8cc_source.html#l00018">s3f::s3fnet::TCPBlockList::insert_block()</a>, <a class="el" href="tcp__blocks_8cc_source.html#l00219">s3f::s3fnet::TCPBlockList::is_new()</a>, <a class="el" href="tcp__message_8h_source.html#l00056">s3f::s3fnet::TCPMessage::options</a>, <a class="el" href="protocol__message_8h_source.html#l00103">s3f::s3fnet::ProtocolMessage::payload()</a>, <a class="el" href="tcp__session_8h_source.html#l00190">rcv_scoreboard</a>, <a class="el" href="data__message_8cc_source.html#l00078">s3f::s3fnet::DataMessage::realByteCount()</a>, <a class="el" href="tcp__session_8h_source.html#l00178">sack_permitted</a>, <a class="el" href="tcp__message_8h_source.html#l00041">s3f::s3fnet::TCPMessage::seqno</a>, and <a class="el" href="tcp__init_8h_source.html#l00068">TCP_SACK_PERMITTED_KIND</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  <span class="keywordflow">if</span>(tmsg-&gt;options &amp;&amp; (<a class="code" href="tcp__init_8h.html#ab81e28d11960f1e1ca23ee3179daa94c">TCP_SACK_PERMITTED_KIND</a> == tmsg-&gt;options[0]))</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1e826c077abf934e4fa45bfbec2bda14">sack_permitted</a> = <span class="keyword">true</span>;  </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  DataMessage* payload = (DataMessage*)tmsg-&gt;payload();</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <span class="keywordflow">if</span>(!payload || !payload-&gt;realByteCount()) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> real_seqno  = tmsg-&gt;seqno;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  <a class="code" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> real_length = payload-&gt;realByteCount();</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4ab9b3653da38b2ea02aab65e1042d25">rcv_scoreboard</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a38a117a46595192907e5429ff35f7960">is_new</a>(&amp;real_seqno, &amp;real_length))</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4ab9b3653da38b2ea02aab65e1042d25">rcv_scoreboard</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a78e8714545a5e5ea88c3fe377b671f59">insert_block</a>(real_seqno, real_length);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_block_list_html_a78e8714545a5e5ea88c3fe377b671f59"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a78e8714545a5e5ea88c3fe377b671f59">s3f::s3fnet::TCPBlockList::insert_block</a></div><div class="ttdeci">void insert_block(uint32 seqno, uint32 len)</div><div class="ttdoc">Insert a block with sequence numbers of length len starting from seqno into the list. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__blocks_8cc_source.html#l00018">tcp_blocks.cc:18</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_block_list_html_a38a117a46595192907e5429ff35f7960"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a38a117a46595192907e5429ff35f7960">s3f::s3fnet::TCPBlockList::is_new</a></div><div class="ttdeci">bool is_new(uint32 *seqno, uint32 *length)</div><div class="ttdoc">Return whether the block delineated by the starting seqno and length is a new block in the list; if n...</div><div class="ttdef"><b>Definition:</b> <a href="tcp__blocks_8cc_source.html#l00219">tcp_blocks.cc:219</a></div></div>
<div class="ttc" id="namespaces3f_1_1s3fnet_html_af9913b509c50836bbe30b0a16b2500b9"><div class="ttname"><a href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">s3f::s3fnet::uint32</a></div><div class="ttdeci">unsigned int uint32</div><div class="ttdoc">32-bit unsigned integer type </div><div class="ttdef"><b>Definition:</b> <a href="s3fnet_8h_source.html#l00035">s3fnet.h:35</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a1e826c077abf934e4fa45bfbec2bda14"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a1e826c077abf934e4fa45bfbec2bda14">s3f::s3fnet::TCPSession::sack_permitted</a></div><div class="ttdeci">bool sack_permitted</div><div class="ttdoc">Whether SACK is permitted as indicated by the peer. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00178">tcp_session.h:178</a></div></div>
<div class="ttc" id="tcp__init_8h_html_ab81e28d11960f1e1ca23ee3179daa94c"><div class="ttname"><a href="tcp__init_8h.html#ab81e28d11960f1e1ca23ee3179daa94c">TCP_SACK_PERMITTED_KIND</a></div><div class="ttdeci">#define TCP_SACK_PERMITTED_KIND</div><div class="ttdef"><b>Definition:</b> <a href="tcp__init_8h_source.html#l00068">tcp_init.h:68</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a4ab9b3653da38b2ea02aab65e1042d25"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4ab9b3653da38b2ea02aab65e1042d25">s3f::s3fnet::TCPSession::rcv_scoreboard</a></div><div class="ttdeci">TCPBlockList * rcv_scoreboard</div><div class="ttdoc">The score board for the receiver side. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00190">tcp_session.h:190</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a35cfaa9743e32ecd2c505211187bd902"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void s3f::s3fnet::TCPSession::sack_send_in_fast_recovery </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The method handles sending sack when fast recovery is enabled. </p>

<p>Definition at line <a class="el" href="tcp__sack_8cc_source.html#l00162">162</a> of file <a class="el" href="tcp__sack_8cc_source.html">tcp_sack.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00127">cwnd</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00043">s3f::s3fnet::TCPSeqWindow::firstUnused()</a>, <a class="el" href="tcp__session_8h_source.html#l00133">mss</a>, <a class="el" href="tcp__session_8h_source.html#l00166">sack_pipe</a>, <a class="el" href="tcp__sack_8cc_source.html#l00145">sack_resend_segments()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00110">segment_and_send()</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, and <a class="el" href="tcp__seqwnd_8h_source.html#l00052">s3f::s3fnet::TCPSeqWindow::unused()</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, and <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>.</p>
<div class="fragment"><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;{</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="keywordtype">bool</span> found = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="keywordflow">while</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a02b1d16e35ea1d70428b1a940802ebc8">sack_pipe</a> &lt; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> &amp;&amp; found)</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a193f27433620c8c44564859a9da7f37b">sack_resend_segments</a>(<span class="keyword">false</span>)) found = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">else</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a02b1d16e35ea1d70428b1a940802ebc8">sack_pipe</a> += <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  }</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  <span class="keywordflow">if</span>(!found &amp;&amp; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a534e7bea2c3001a1577e627a92d27877">unused</a>() &gt;= <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">mss</a>)</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a02b1d16e35ea1d70428b1a940802ebc8">sack_pipe</a> += <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4fbadc4c967c43982e16d9c8c249fbc6">segment_and_send</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">firstUnused</a>(), <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">cwnd</a> - <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a02b1d16e35ea1d70428b1a940802ebc8">sack_pipe</a>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a534e7bea2c3001a1577e627a92d27877"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a534e7bea2c3001a1577e627a92d27877">s3f::s3fnet::TCPSeqWindow::unused</a></div><div class="ttdeci">uint32 unused()</div><div class="ttdoc">Return how much of the window is unused in bytes. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00052">tcp_seqwnd.h:52</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a193f27433620c8c44564859a9da7f37b"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a193f27433620c8c44564859a9da7f37b">s3f::s3fnet::TCPSession::sack_resend_segments</a></div><div class="ttdeci">bool sack_resend_segments(bool first_flag)</div><div class="ttdoc">When the sack option is set, this method is used for retransmissions. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sack_8cc_source.html#l00145">tcp_sack.cc:145</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a02b1d16e35ea1d70428b1a940802ebc8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a02b1d16e35ea1d70428b1a940802ebc8">s3f::s3fnet::TCPSession::sack_pipe</a></div><div class="ttdeci">uint32 sack_pipe</div><div class="ttdoc">Indicate how much can be sent during fast recovery in SACK. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00166">tcp_session.h:166</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a4fbadc4c967c43982e16d9c8c249fbc6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a4fbadc4c967c43982e16d9c8c249fbc6">s3f::s3fnet::TCPSession::segment_and_send</a></div><div class="ttdeci">uint32 segment_and_send(uint32 seqno, uint32 length)</div><div class="ttdoc">Segment and send data. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00110">tcp_sender.cc:110</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a8345d443cb07b92fa8e4e9780d32ca57"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a8345d443cb07b92fa8e4e9780d32ca57">s3f::s3fnet::TCPSeqWindow::firstUnused</a></div><div class="ttdeci">uint32 firstUnused()</div><div class="ttdoc">Return the first unused sequence in the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00043">tcp_seqwnd.h:43</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ad1082383b1ab63ecfe7da04f4ae8fa07"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ad1082383b1ab63ecfe7da04f4ae8fa07">s3f::s3fnet::TCPSession::mss</a></div><div class="ttdeci">uint32 mss</div><div class="ttdoc">Maximum segment size. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00133">tcp_session.h:133</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a2cd5840cbc1191efd078c08076f279d3"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a2cd5840cbc1191efd078c08076f279d3">s3f::s3fnet::TCPSession::cwnd</a></div><div class="ttdeci">uint32 cwnd</div><div class="ttdoc">Congestion window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00127">tcp_session.h:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a193f27433620c8c44564859a9da7f37b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::sack_resend_segments </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>first_flag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>When the sack option is set, this method is used for retransmissions. </p>

<p>Definition at line <a class="el" href="tcp__sack_8cc_source.html#l00145">145</a> of file <a class="el" href="tcp__sack_8cc_source.html">tcp_sack.cc</a>.</p>

<p>References <a class="el" href="tcp__session_8h_source.html#l00163">recover_seq</a>, <a class="el" href="tcp__sender_8cc_source.html#l00144">resend_segments()</a>, <a class="el" href="tcp__session_8h_source.html#l00157">rxmit_seq</a>, <a class="el" href="tcp__session_8h_source.html#l00187">snd_scoreboard</a>, <a class="el" href="tcp__session_8h_source.html#l00121">sndwnd</a>, <a class="el" href="tcp__seqwnd_8h_source.html#l00037">s3f::s3fnet::TCPSeqWindow::start()</a>, and <a class="el" href="tcp__blocks_8cc_source.html#l00258">s3f::s3fnet::TCPBlockList::unavailable()</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, <a class="el" href="tcp__sack_8cc_source.html#l00162">sack_send_in_fast_recovery()</a>, and <a class="el" href="tcp__sender_8cc_source.html#l00191">timeout_resend()</a>.</p>
<div class="fragment"><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;  <span class="comment">// we only support fixed-sized packet length</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;  <span class="keywordflow">if</span>(first_flag)  <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">rxmit_seq</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa4636596abc9ea8b60f44ebb76e7ade7">snd_scoreboard</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a8c787da1a4292d08d939cace0cd72b1a">unavailable</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">sndwnd</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a0b6858cce05ab50a8e9cad0402e94659">start</a>());</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  <span class="keywordflow">else</span> <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">rxmit_seq</a> = <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa4636596abc9ea8b60f44ebb76e7ade7">snd_scoreboard</a>-&gt;<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a8c787da1a4292d08d939cace0cd72b1a">unavailable</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">rxmit_seq</a>); </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  </div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <span class="keywordflow">if</span>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">rxmit_seq</a> &lt; <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">recover_seq</a>)</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  {</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// here note that rxmit_seq will be updated in resend_segments</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">resend_segments</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">rxmit_seq</a>, 1);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;  }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">// can&#39;t find a packet to be retransmitted.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a56a6e70f6b65a6b8b33959997f4f1af1"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a56a6e70f6b65a6b8b33959997f4f1af1">s3f::s3fnet::TCPSession::rxmit_seq</a></div><div class="ttdeci">uint32 rxmit_seq</div><div class="ttdoc">The last sequence number of retransmitted segment plus one. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00157">tcp_session.h:157</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_a18e65bc289c8426ebd69f0714fa50a8d"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#a18e65bc289c8426ebd69f0714fa50a8d">s3f::s3fnet::TCPSession::recover_seq</a></div><div class="ttdeci">uint32 recover_seq</div><div class="ttdoc">The largest seqno sent out when loss happens. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00163">tcp_session.h:163</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_acf4d0b1a9c8acff51c33f3256583a0f6"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#acf4d0b1a9c8acff51c33f3256583a0f6">s3f::s3fnet::TCPSession::sndwnd</a></div><div class="ttdeci">TCPSendWindow * sndwnd</div><div class="ttdoc">The send window of the tcp session. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00121">tcp_session.h:121</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_seq_window_html_a0b6858cce05ab50a8e9cad0402e94659"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_seq_window.html#a0b6858cce05ab50a8e9cad0402e94659">s3f::s3fnet::TCPSeqWindow::start</a></div><div class="ttdeci">uint32 start()</div><div class="ttdoc">Return the first sequence of the window. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__seqwnd_8h_source.html#l00037">tcp_seqwnd.h:37</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_aa4636596abc9ea8b60f44ebb76e7ade7"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#aa4636596abc9ea8b60f44ebb76e7ade7">s3f::s3fnet::TCPSession::snd_scoreboard</a></div><div class="ttdeci">TCPBlockList * snd_scoreboard</div><div class="ttdoc">The score board for blocks sacked maintained by the sender side. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__session_8h_source.html#l00187">tcp_session.h:187</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_session_html_ae65322a37b337f806238cc67289eaf5c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_session.html#ae65322a37b337f806238cc67289eaf5c">s3f::s3fnet::TCPSession::resend_segments</a></div><div class="ttdeci">uint32 resend_segments(uint32 seqno, uint32 nsegments)</div><div class="ttdoc">Resend the segments. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__sender_8cc_source.html#l00144">tcp_sender.cc:144</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_t_c_p_block_list_html_a8c787da1a4292d08d939cace0cd72b1a"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html#a8c787da1a4292d08d939cace0cd72b1a">s3f::s3fnet::TCPBlockList::unavailable</a></div><div class="ttdeci">uint32 unavailable(uint32 startno)</div><div class="ttdoc">Used only when the pattern is PATTERN_INCREASE. </div><div class="ttdef"><b>Definition:</b> <a href="tcp__blocks_8cc_source.html#l00258">tcp_blocks.cc:258</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af7c78b279408e057c92401895fb13a9d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void s3f::s3fnet::SocketSession::reinit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">virtual</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Called by socket to reinitialize the destination ip and port. </p>

<p>Definition at line <a class="el" href="socket__session_8h_source.html#l00268">268</a> of file <a class="el" href="socket__session_8h_source.html">socket_session.h</a>.</p>

<p>References <a class="el" href="socket__session_8h_source.html#l00138">s3f::s3fnet::SessionID::dst_ip</a>, <a class="el" href="socket__session_8h_source.html#l00144">s3f::s3fnet::SessionID::dst_port</a>, and <a class="el" href="ip__prefix_8h_source.html#l00038">IPADDR_ANYDEST</a>.</p>

<p>Referenced by <a class="el" href="socket__master_8cc_source.html#l00052">s3f::s3fnet::SocketMaster::control()</a>, and <a class="el" href="nb__socket__master_8cc_source.html#l00052">s3f::s3fnet::NBSocketMaster::control()</a>.</p>
<div class="fragment"><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                        {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#a40000686ed11d99e747b2b2bb51a316e">dst_ip</a> = <a class="code" href="ip__prefix_8h.html#a763762a2edad5a8d349f3c687f16ddca">IPADDR_ANYDEST</a>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#ac777d144a536fe6992da8c0f2c5bb450">dst_port</a> = 0;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  }</div>
<div class="ttc" id="ip__prefix_8h_html_a763762a2edad5a8d349f3c687f16ddca"><div class="ttname"><a href="ip__prefix_8h.html#a763762a2edad5a8d349f3c687f16ddca">IPADDR_ANYDEST</a></div><div class="ttdeci">#define IPADDR_ANYDEST</div><div class="ttdoc">IP broadcast address (255.255.255.255). </div><div class="ttdef"><b>Definition:</b> <a href="ip__prefix_8h_source.html#l00038">ip_prefix.h:38</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_a40000686ed11d99e747b2b2bb51a316e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#a40000686ed11d99e747b2b2bb51a316e">s3f::s3fnet::SessionID::dst_ip</a></div><div class="ttdeci">IPADDR dst_ip</div><div class="ttdoc">Destination ip address. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00138">socket_session.h:138</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_ac777d144a536fe6992da8c0f2c5bb450"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#ac777d144a536fe6992da8c0f2c5bb450">s3f::s3fnet::SessionID::dst_port</a></div><div class="ttdeci">uint16 dst_port</div><div class="ttdoc">Destination port number. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00144">socket_session.h:144</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a85e7c910d1b68c5b79f888474ad80e79"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* s3f::s3fnet::SessionID::toString </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Translate the ID into a textual string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>buffer to write into (MUST NOT BE NULL) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to the same buffer passe din </dd></dl>

<p>Definition at line <a class="el" href="socket__session_8h_source.html#l00121">121</a> of file <a class="el" href="socket__session_8h_source.html">socket_session.h</a>.</p>

<p>References <a class="el" href="socket__session_8h_source.html#l00138">s3f::s3fnet::SessionID::dst_ip</a>, <a class="el" href="socket__session_8h_source.html#l00144">s3f::s3fnet::SessionID::dst_port</a>, <a class="el" href="ip__prefix_8cc_source.html#l00041">s3f::s3fnet::IPPrefix::ip2txt()</a>, <a class="el" href="socket__session_8h_source.html#l00132">s3f::s3fnet::SessionID::prot_id</a>, <a class="el" href="socket__session_8h_source.html#l00135">s3f::s3fnet::SessionID::src_ip</a>, and <a class="el" href="socket__session_8h_source.html#l00141">s3f::s3fnet::SessionID::src_port</a>.</p>
<div class="fragment"><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                            {</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    assert(buf);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordtype">char</span> buf0[50], buf1[50];</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    sprintf(buf, <span class="stringliteral">&quot;prot %u src_ip %s src_port %u dst_ip %s dst_port %u&quot;</span>,</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#a34995ecb78b03982de7b34709b6f7271">prot_id</a>, <a class="code" href="classs3f_1_1s3fnet_1_1_i_p_prefix.html#a4649010db0c18ea0c15e1d42e96467e8">IPPrefix::ip2txt</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#afc2e0c48325b4faff47ca2f155a4956c">src_ip</a>, buf0), <a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#a8b7a04b54cb31c4d060657593ed88d2f">src_port</a>, </div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <a class="code" href="classs3f_1_1s3fnet_1_1_i_p_prefix.html#a4649010db0c18ea0c15e1d42e96467e8">IPPrefix::ip2txt</a>(<a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#a40000686ed11d99e747b2b2bb51a316e">dst_ip</a>, buf1), <a class="code" href="classs3f_1_1s3fnet_1_1_session_i_d.html#ac777d144a536fe6992da8c0f2c5bb450">dst_port</a>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">return</span> buf;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_a8b7a04b54cb31c4d060657593ed88d2f"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#a8b7a04b54cb31c4d060657593ed88d2f">s3f::s3fnet::SessionID::src_port</a></div><div class="ttdeci">uint16 src_port</div><div class="ttdoc">Source port number. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00141">socket_session.h:141</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_a34995ecb78b03982de7b34709b6f7271"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#a34995ecb78b03982de7b34709b6f7271">s3f::s3fnet::SessionID::prot_id</a></div><div class="ttdeci">uint32 prot_id</div><div class="ttdoc">The protocol number. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00132">socket_session.h:132</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_i_p_prefix_html_a4649010db0c18ea0c15e1d42e96467e8"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_i_p_prefix.html#a4649010db0c18ea0c15e1d42e96467e8">s3f::s3fnet::IPPrefix::ip2txt</a></div><div class="ttdeci">static char * ip2txt(IPADDR ip, char *str)</div><div class="ttdoc">Convert an IP prefix to a string. </div><div class="ttdef"><b>Definition:</b> <a href="ip__prefix_8cc_source.html#l00041">ip_prefix.cc:41</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_a40000686ed11d99e747b2b2bb51a316e"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#a40000686ed11d99e747b2b2bb51a316e">s3f::s3fnet::SessionID::dst_ip</a></div><div class="ttdeci">IPADDR dst_ip</div><div class="ttdoc">Destination ip address. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00138">socket_session.h:138</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_ac777d144a536fe6992da8c0f2c5bb450"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#ac777d144a536fe6992da8c0f2c5bb450">s3f::s3fnet::SessionID::dst_port</a></div><div class="ttdeci">uint16 dst_port</div><div class="ttdoc">Destination port number. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00144">socket_session.h:144</a></div></div>
<div class="ttc" id="classs3f_1_1s3fnet_1_1_session_i_d_html_afc2e0c48325b4faff47ca2f155a4956c"><div class="ttname"><a href="classs3f_1_1s3fnet_1_1_session_i_d.html#afc2e0c48325b4faff47ca2f155a4956c">s3f::s3fnet::SessionID::src_ip</a></div><div class="ttdeci">IPADDR src_ip</div><div class="ttdoc">Source ip address. </div><div class="ttdef"><b>Definition:</b> <a href="socket__session_8h_source.html#l00135">socket_session.h:135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a42d470213dbe54d26fbb1ffe6c8cbf56"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_master.html">TCPMaster</a>* s3f::s3fnet::TCPSession::tcp_master</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Point to the tcp master. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00109">109</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__sender_8cc_source.html#l00173">acknowledge()</a>, <a class="el" href="tcp__session_8cc_source.html#l00178">active_open()</a>, <a class="el" href="tcp__session_8cc_source.html#l00241">allocate_buffers()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00163">backoff_timeout()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00266">cancel_delay_ack()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00595">check_cwnd()</a>, <a class="el" href="tcp__session_8cc_source.html#l00281">clear_app_state()</a>, <a class="el" href="tcp__session_8h_source.html#l00091">getSessionMaster()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__state_8cc_source.html#l00117">init_state_established()</a>, <a class="el" href="tcp__state_8cc_source.html#l00166">init_state_fin_wait_1()</a>, <a class="el" href="tcp__state_8cc_source.html#l00152">init_state_last_ack()</a>, <a class="el" href="tcp__state_8cc_source.html#l00088">init_state_listen()</a>, <a class="el" href="tcp__state_8cc_source.html#l00064">init_state_syn_received()</a>, <a class="el" href="tcp__state_8cc_source.html#l00050">init_state_syn_sent()</a>, <a class="el" href="tcp__state_8cc_source.html#l00225">init_state_time_wait()</a>, <a class="el" href="tcp__session_8cc_source.html#l00151">is_ok()</a>, <a class="el" href="tcp__session_8h_source.html#l00385">now()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00146">process_SYN()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>, <a class="el" href="tcp__session_8cc_source.html#l00126">release()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00260">send_delay_ack()</a>, <a class="el" href="tcp__sack_8cc_source.html#l00099">sender_recv_sack()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00029">slowTimeoutHandling()</a>, <a class="el" href="tcp__session_8cc_source.html#l00029">TCPSession()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00191">timeout_resend()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00617">update_remote_window_size()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00134">update_timeout()</a>, and <a class="el" href="tcp__session_8cc_source.html#l00269">wake_app()</a>.</p>

</div>
</div>
<a class="anchor" id="ad8679036b779679c1807c4f425c182c3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current state of the tcp session. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00112">112</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00208">appl_close()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00240">calc_advertised_wnd()</a>, <a class="el" href="tcp__session_8cc_source.html#l00103">connected()</a>, <a class="el" href="tcp__state_8cc_source.html#l00130">init_state_close_wait()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__state_8cc_source.html#l00210">init_state_closing()</a>, <a class="el" href="tcp__state_8cc_source.html#l00117">init_state_established()</a>, <a class="el" href="tcp__state_8cc_source.html#l00166">init_state_fin_wait_1()</a>, <a class="el" href="tcp__state_8cc_source.html#l00200">init_state_fin_wait_2()</a>, <a class="el" href="tcp__state_8cc_source.html#l00152">init_state_last_ack()</a>, <a class="el" href="tcp__state_8cc_source.html#l00088">init_state_listen()</a>, <a class="el" href="tcp__state_8cc_source.html#l00064">init_state_syn_received()</a>, <a class="el" href="tcp__state_8cc_source.html#l00050">init_state_syn_sent()</a>, <a class="el" href="tcp__state_8cc_source.html#l00225">init_state_time_wait()</a>, <a class="el" href="tcp__session_8cc_source.html#l00151">is_ok()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00183">process_FIN()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00146">process_SYN()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00029">slowTimeoutHandling()</a>, and <a class="el" href="tcp__sender_8cc_source.html#l00191">timeout_resend()</a>.</p>

</div>
</div>
<a class="anchor" id="a21969070f7b142c7f761f11f0266f812"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::socket</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The socket id. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00115">115</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00281">clear_app_state()</a>, <a class="el" href="tcp__master_8cc_source.html#l00483">s3f::s3fnet::TCPMaster::deleteSession()</a>, <a class="el" href="tcp__master_8cc_source.html#l00520">s3f::s3fnet::TCPMaster::setConnected()</a>, <a class="el" href="tcp__master_8cc_source.html#l00538">s3f::s3fnet::TCPMaster::setIdle()</a>, <a class="el" href="tcp__master_8cc_source.html#l00529">s3f::s3fnet::TCPMaster::setListening()</a>, <a class="el" href="tcp__session_8h_source.html#l00088">setSocketID()</a>, and <a class="el" href="tcp__session_8cc_source.html#l00269">wake_app()</a>.</p>

</div>
</div>
<a class="anchor" id="a173bf8f7e8ee35dc3929d8ab21b04c7c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_recv_window.html">TCPRecvWindow</a>* s3f::s3fnet::TCPSession::rcvwnd</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The receive window of the tcp session. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00118">118</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00116">abort()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00173">acknowledge()</a>, <a class="el" href="tcp__session_8cc_source.html#l00241">allocate_buffers()</a>, <a class="el" href="tcp__session_8cc_source.html#l00208">appl_close()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00022">appl_recv()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00240">calc_advertised_wnd()</a>, <a class="el" href="tcp__session_8cc_source.html#l00252">deallocate_buffers()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00125">fastTimeoutHandling()</a>, <a class="el" href="tcp__state_8cc_source.html#l00130">init_state_close_wait()</a>, <a class="el" href="tcp__state_8cc_source.html#l00210">init_state_closing()</a>, <a class="el" href="tcp__state_8cc_source.html#l00166">init_state_fin_wait_1()</a>, <a class="el" href="tcp__state_8cc_source.html#l00152">init_state_last_ack()</a>, <a class="el" href="tcp__state_8cc_source.html#l00088">init_state_listen()</a>, <a class="el" href="tcp__state_8cc_source.html#l00064">init_state_syn_received()</a>, <a class="el" href="tcp__state_8cc_source.html#l00050">init_state_syn_sent()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00183">process_FIN()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00316">process_new_data()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00146">process_SYN()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00144">resend_segments()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00110">segment_and_send()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00191">timeout_resend()</a>, <a class="el" href="tcp__session_8cc_source.html#l00269">wake_app()</a>, and <a class="el" href="tcp__session_8cc_source.html#l00050">~TCPSession()</a>.</p>

</div>
</div>
<a class="anchor" id="acf4d0b1a9c8acff51c33f3256583a0f6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_send_window.html">TCPSendWindow</a>* s3f::s3fnet::TCPSession::sndwnd</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The send window of the tcp session. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00121">121</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00116">abort()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00173">acknowledge()</a>, <a class="el" href="tcp__session_8cc_source.html#l00178">active_open()</a>, <a class="el" href="tcp__session_8cc_source.html#l00241">allocate_buffers()</a>, <a class="el" href="tcp__session_8cc_source.html#l00208">appl_close()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00023">appl_send()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00172">checkIdle()</a>, <a class="el" href="tcp__session_8cc_source.html#l00252">deallocate_buffers()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00125">fastTimeoutHandling()</a>, <a class="el" href="tcp__state_8cc_source.html#l00117">init_state_established()</a>, <a class="el" href="tcp__state_8cc_source.html#l00166">init_state_fin_wait_1()</a>, <a class="el" href="tcp__state_8cc_source.html#l00152">init_state_last_ack()</a>, <a class="el" href="tcp__state_8cc_source.html#l00088">init_state_listen()</a>, <a class="el" href="tcp__state_8cc_source.html#l00064">init_state_syn_received()</a>, <a class="el" href="tcp__state_8cc_source.html#l00050">init_state_syn_sent()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00328">process_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00146">process_SYN()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00144">resend_segments()</a>, <a class="el" href="tcp__sack_8cc_source.html#l00145">sack_resend_segments()</a>, <a class="el" href="tcp__sack_8cc_source.html#l00162">sack_send_in_fast_recovery()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00110">segment_and_send()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00191">timeout_resend()</a>, <a class="el" href="tcp__session_8cc_source.html#l00269">wake_app()</a>, and <a class="el" href="tcp__session_8cc_source.html#l00050">~TCPSession()</a>.</p>

</div>
</div>
<a class="anchor" id="a2a7d2ba14ba1e9b7d5402275d92a1ee6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::rcvwnd_size</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remote receive window size. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00124">124</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00612">calc_threshold()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__state_8cc_source.html#l00088">init_state_listen()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00328">process_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00146">process_SYN()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00110">segment_and_send()</a>, and <a class="el" href="tcp__receiver_8cc_source.html#l00617">update_remote_window_size()</a>.</p>

</div>
</div>
<a class="anchor" id="a2cd5840cbc1191efd078c08076f279d3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::cwnd</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Congestion window. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00127">127</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00612">calc_threshold()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00595">check_cwnd()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00172">checkIdle()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__state_8cc_source.html#l00088">init_state_listen()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00144">resend_segments()</a>, <a class="el" href="tcp__sack_8cc_source.html#l00162">sack_send_in_fast_recovery()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00110">segment_and_send()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>.</p>

</div>
</div>
<a class="anchor" id="ac4ddc45afd099ae4889834159cadd631"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::ssthresh</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Threshold size for updating the congestion window. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00130">130</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00612">calc_threshold()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00595">check_cwnd()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__state_8cc_source.html#l00117">init_state_established()</a>, <a class="el" href="tcp__state_8cc_source.html#l00088">init_state_listen()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, and <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>.</p>

</div>
</div>
<a class="anchor" id="ad1082383b1ab63ecfe7da04f4ae8fa07"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::mss</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Maximum segment size. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00133">133</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__sender_8cc_source.html#l00240">calc_advertised_wnd()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00612">calc_threshold()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00595">check_cwnd()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00172">checkIdle()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__state_8cc_source.html#l00088">init_state_listen()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00144">resend_segments()</a>, <a class="el" href="tcp__sack_8cc_source.html#l00162">sack_send_in_fast_recovery()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00110">segment_and_send()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>.</p>

</div>
</div>
<a class="anchor" id="a3bda2d05daddfd070c267bc73140a84d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::ndupacks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of consecutive duplicate ACKs received. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00136">136</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__state_8cc_source.html#l00088">init_state_listen()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00328">process_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>.</p>

</div>
</div>
<a class="anchor" id="ab127443917c48253831516e6d0b72f09"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::nrxmits</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Number of consecutive packet retransmissions. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00139">139</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__timer_8cc_source.html#l00163">backoff_timeout()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__state_8cc_source.html#l00166">init_state_fin_wait_1()</a>, <a class="el" href="tcp__state_8cc_source.html#l00064">init_state_syn_received()</a>, <a class="el" href="tcp__state_8cc_source.html#l00050">init_state_syn_sent()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00146">process_SYN()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00134">update_timeout()</a>.</p>

</div>
</div>
<a class="anchor" id="a521a6df2160ce6154d048e5f1ba2acea"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::persist_shift</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Left shift to get persist (exponential) timeout. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00142">142</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

</div>
</div>
<a class="anchor" id="a30d3084b61186cbb889007b1ef1d79c2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::rtt_smoothed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Smoothed round trip time. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00145">145</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__timer_8cc_source.html#l00163">backoff_timeout()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__session_8h_source.html#l00392">initial_timeout()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00134">update_timeout()</a>.</p>

</div>
</div>
<a class="anchor" id="a44aecd8df9f166b738771ab9bf4d36d9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::rtt_measured</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Measured round trip time. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00148">148</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00134">update_timeout()</a>.</p>

</div>
</div>
<a class="anchor" id="a07975f88fa9d44f71eaa96061bcfe4b2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::rtt_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current RTT count. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00151">151</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00029">slowTimeoutHandling()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00134">update_timeout()</a>.</p>

</div>
</div>
<a class="anchor" id="af7814c955b9d8b4fa0177387e1970a81"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int s3f::s3fnet::TCPSession::rtt_var</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current estimated RTT variance. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00154">154</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__timer_8cc_source.html#l00163">backoff_timeout()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__session_8h_source.html#l00392">initial_timeout()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00134">update_timeout()</a>.</p>

</div>
</div>
<a class="anchor" id="a56a6e70f6b65a6b8b33959997f4f1af1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::rxmit_seq</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The last sequence number of retransmitted segment plus one. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00157">157</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00144">resend_segments()</a>, and <a class="el" href="tcp__sack_8cc_source.html#l00145">sack_resend_segments()</a>.</p>

</div>
</div>
<a class="anchor" id="a5b15db876b9718d7c0c8c68747235a5c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::measured_seq</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The sequence number of the segment currently being measured. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00160">160</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, and <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>.</p>

</div>
</div>
<a class="anchor" id="a18e65bc289c8426ebd69f0714fa50a8d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::recover_seq</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The largest seqno sent out when loss happens. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00163">163</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__state_8cc_source.html#l00117">init_state_established()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00144">resend_segments()</a>, <a class="el" href="tcp__sack_8cc_source.html#l00145">sack_resend_segments()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>.</p>

</div>
</div>
<a class="anchor" id="a02b1d16e35ea1d70428b1a940802ebc8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::TCPSession::sack_pipe</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Indicate how much can be sent during fast recovery in SACK. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00166">166</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00517">process_dup_acks()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, and <a class="el" href="tcp__sack_8cc_source.html#l00162">sack_send_in_fast_recovery()</a>.</p>

</div>
</div>
<a class="anchor" id="a55f340d4380db8a98d154d66ba68b5c1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::delayed_ack</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True if the delayed ack is turned on. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00169">169</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__sender_8cc_source.html#l00173">acknowledge()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00266">cancel_delay_ack()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00125">fastTimeoutHandling()</a>, <a class="el" href="tcp__state_8cc_source.html#l00166">init_state_fin_wait_1()</a>, <a class="el" href="tcp__state_8cc_source.html#l00152">init_state_last_ack()</a>, and <a class="el" href="tcp__sender_8cc_source.html#l00260">send_delay_ack()</a>.</p>

</div>
</div>
<a class="anchor" id="acbeb5f9dae19d6315d7ac3cdefeddd04"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::fast_recovery</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>True if the session is still in the fast recovery mode. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00172">172</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>.</p>

</div>
</div>
<a class="anchor" id="a9758ecfbe05f6c846d428e3beec784e2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::timeout_loss</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether it is a timeout loss. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00175">175</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>.</p>

</div>
</div>
<a class="anchor" id="a1e826c077abf934e4fa45bfbec2bda14"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::sack_permitted</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether SACK is permitted as indicated by the peer. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00178">178</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__sack_8cc_source.html#l00130">receiver_recv_sack()</a>.</p>

</div>
</div>
<a class="anchor" id="a27bedc801b67220a9287e8628f782f2a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::close_issued</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether the upper layer has issued close. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00181">181</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00208">appl_close()</a>, <a class="el" href="tcp__state_8cc_source.html#l00117">init_state_established()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00183">process_FIN()</a>, and <a class="el" href="tcp__receiver_8cc_source.html#l00040">receive()</a>.</p>

</div>
</div>
<a class="anchor" id="a1f221b49ca3d30486828f3eac199da33"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool s3f::s3fnet::TCPSession::simultaneous_closing</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether it is a simultaneous closing. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00184">184</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__state_8cc_source.html#l00117">init_state_established()</a>, <a class="el" href="tcp__state_8cc_source.html#l00166">init_state_fin_wait_1()</a>, and <a class="el" href="tcp__receiver_8cc_source.html#l00183">process_FIN()</a>.</p>

</div>
</div>
<a class="anchor" id="aa4636596abc9ea8b60f44ebb76e7ade7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html">TCPBlockList</a>* s3f::s3fnet::TCPSession::snd_scoreboard</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The score board for blocks sacked maintained by the sender side. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00187">187</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, <a class="el" href="tcp__sack_8cc_source.html#l00145">sack_resend_segments()</a>, <a class="el" href="tcp__sack_8cc_source.html#l00099">sender_recv_sack()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>.</p>

</div>
</div>
<a class="anchor" id="a4ab9b3653da38b2ea02aab65e1042d25"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_block_list.html">TCPBlockList</a>* s3f::s3fnet::TCPSession::rcv_scoreboard</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The score board for the receiver side. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00190">190</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__sack_8cc_source.html#l00130">receiver_recv_sack()</a>, and <a class="el" href="tcp__sack_8cc_source.html#l00061">receiver_send_sack()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ab01b89e85d83119e4cd776e34ef479"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> s3f::s3fnet::TCPSession::rxmit_timeout</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current retransmission timeout. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00193">193</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__timer_8cc_source.html#l00163">backoff_timeout()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__session_8h_source.html#l00388">timeout_value()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00134">update_timeout()</a>.</p>

</div>
</div>
<a class="anchor" id="a74f0ff8ef6fad49191be26d984b14414"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double s3f::s3fnet::TCPSession::rxmit_timeout_double</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00194">194</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__timer_8cc_source.html#l00163">backoff_timeout()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__session_8h_source.html#l00389">timeout_double_value()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00134">update_timeout()</a>.</p>

</div>
</div>
<a class="anchor" id="a8807efeb4c27e42a192e79917cc0e9da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> s3f::s3fnet::TCPSession::idle_time</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Idle time for the other party. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00197">197</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__timer_8cc_source.html#l00172">checkIdle()</a>.</p>

</div>
</div>
<a class="anchor" id="aee2f6564a6f2b36bc2307b03fd2a3d0b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double s3f::s3fnet::TCPSession::idle_time_double</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00198">198</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8b77936e0c278e8c4b88ecd7ac215551"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> s3f::s3fnet::TCPSession::rxmit_timer_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Retransmission timer count. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00201">201</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__state_8cc_source.html#l00130">init_state_close_wait()</a>, <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__state_8cc_source.html#l00200">init_state_fin_wait_2()</a>, <a class="el" href="tcp__state_8cc_source.html#l00088">init_state_listen()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00359">process_new_acks()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00144">resend_segments()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="tcp__timer_8cc_source.html#l00068">slow_timeout_handling_helper()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00029">slowTimeoutHandling()</a>.</p>

</div>
</div>
<a class="anchor" id="a0068039bc0052784bc906becd9606a2b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double s3f::s3fnet::TCPSession::rxmit_timer_count_double</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00202">202</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7c5180b90e5affbf5a38b5a3b578b849"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="s3f_8h.html#adfa38db6ddd965e5a50cec3ddc678778">ltime_t</a> s3f::s3fnet::TCPSession::msl_timer_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The timer count that lasts 2*msl. </p>

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00206">206</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__state_8cc_source.html#l00020">init_state_closed()</a>, <a class="el" href="tcp__state_8cc_source.html#l00088">init_state_listen()</a>, <a class="el" href="tcp__state_8cc_source.html#l00225">init_state_time_wait()</a>, <a class="el" href="tcp__receiver_8cc_source.html#l00222">process_ACK()</a>, and <a class="el" href="tcp__timer_8cc_source.html#l00029">slowTimeoutHandling()</a>.</p>

</div>
</div>
<a class="anchor" id="a119101f4488f0c1612ca97d7cf42068d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double s3f::s3fnet::TCPSession::msl_timer_count_double</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="tcp__session_8h_source.html#l00207">207</a> of file <a class="el" href="tcp__session_8h_source.html">tcp_session.h</a>.</p>

</div>
</div>
<a class="anchor" id="a34995ecb78b03982de7b34709b6f7271"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#af9913b509c50836bbe30b0a16b2500b9">uint32</a> s3f::s3fnet::SessionID::prot_id</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The protocol number. </p>

<p>Definition at line <a class="el" href="socket__session_8h_source.html#l00132">132</a> of file <a class="el" href="socket__session_8h_source.html">socket_session.h</a>.</p>

<p>Referenced by <a class="el" href="socket__session_8h_source.html#l00154">s3f::s3fnet::SessionCmp::operator()()</a>, <a class="el" href="socket__session_8h_source.html#l00093">s3f::s3fnet::SessionID::operator=()</a>, and <a class="el" href="socket__session_8h_source.html#l00121">s3f::s3fnet::SessionID::toString()</a>.</p>

</div>
</div>
<a class="anchor" id="afc2e0c48325b4faff47ca2f155a4956c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a> s3f::s3fnet::SessionID::src_ip</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Source ip address. </p>

<p>Definition at line <a class="el" href="socket__session_8h_source.html#l00135">135</a> of file <a class="el" href="socket__session_8h_source.html">socket_session.h</a>.</p>

<p>Referenced by <a class="el" href="nb__socket__master_8cc_source.html#l00435">s3f::s3fnet::NBSocketMaster::accept()</a>, <a class="el" href="socket__master_8cc_source.html#l00535">s3f::s3fnet::SocketMaster::accept2a()</a>, <a class="el" href="socket__session_8h_source.html#l00154">s3f::s3fnet::SessionCmp::operator()()</a>, <a class="el" href="socket__session_8h_source.html#l00093">s3f::s3fnet::SessionID::operator=()</a>, <a class="el" href="udp__session_8cc_source.html#l00144">s3f::s3fnet::UDPSession::send()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="udp__session_8cc_source.html#l00084">s3f::s3fnet::UDPSession::setSource()</a>, <a class="el" href="tcp__session_8cc_source.html#l00108">setSource()</a>, and <a class="el" href="socket__session_8h_source.html#l00121">s3f::s3fnet::SessionID::toString()</a>.</p>

</div>
</div>
<a class="anchor" id="a40000686ed11d99e747b2b2bb51a316e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#adb6ef126f30d476c9b658aa224769652">IPADDR</a> s3f::s3fnet::SessionID::dst_ip</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destination ip address. </p>

<p>Definition at line <a class="el" href="socket__session_8h_source.html#l00138">138</a> of file <a class="el" href="socket__session_8h_source.html">socket_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00178">active_open()</a>, <a class="el" href="udp__session_8cc_source.html#l00041">s3f::s3fnet::UDPSession::connect()</a>, <a class="el" href="socket__master_8cc_source.html#l00240">s3f::s3fnet::SocketMaster::connected()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00251">s3f::s3fnet::NBSocketMaster::connected()</a>, <a class="el" href="socket__session_8h_source.html#l00154">s3f::s3fnet::SessionCmp::operator()()</a>, <a class="el" href="socket__session_8h_source.html#l00093">s3f::s3fnet::SessionID::operator=()</a>, <a class="el" href="socket__session_8h_source.html#l00268">s3f::s3fnet::SocketSession::reinit()</a>, <a class="el" href="udp__session_8cc_source.html#l00144">s3f::s3fnet::UDPSession::send()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, and <a class="el" href="socket__session_8h_source.html#l00121">s3f::s3fnet::SessionID::toString()</a>.</p>

</div>
</div>
<a class="anchor" id="a8b7a04b54cb31c4d060657593ed88d2f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a> s3f::s3fnet::SessionID::src_port</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Source port number. </p>

<p>Definition at line <a class="el" href="socket__session_8h_source.html#l00141">141</a> of file <a class="el" href="socket__session_8h_source.html">socket_session.h</a>.</p>

<p>Referenced by <a class="el" href="nb__socket__master_8cc_source.html#l00435">s3f::s3fnet::NBSocketMaster::accept()</a>, <a class="el" href="socket__master_8cc_source.html#l00535">s3f::s3fnet::SocketMaster::accept2a()</a>, <a class="el" href="socket__session_8h_source.html#l00154">s3f::s3fnet::SessionCmp::operator()()</a>, <a class="el" href="socket__session_8h_source.html#l00093">s3f::s3fnet::SessionID::operator=()</a>, <a class="el" href="udp__session_8cc_source.html#l00144">s3f::s3fnet::UDPSession::send()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, <a class="el" href="udp__session_8cc_source.html#l00084">s3f::s3fnet::UDPSession::setSource()</a>, <a class="el" href="tcp__session_8cc_source.html#l00108">setSource()</a>, and <a class="el" href="socket__session_8h_source.html#l00121">s3f::s3fnet::SessionID::toString()</a>.</p>

</div>
</div>
<a class="anchor" id="ac777d144a536fe6992da8c0f2c5bb450"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaces3f_1_1s3fnet.html#a86b23dba95adcf3919f9e2bd6207b6f8">uint16</a> s3f::s3fnet::SessionID::dst_port</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destination port number. </p>

<p>Definition at line <a class="el" href="socket__session_8h_source.html#l00144">144</a> of file <a class="el" href="socket__session_8h_source.html">socket_session.h</a>.</p>

<p>Referenced by <a class="el" href="tcp__session_8cc_source.html#l00178">active_open()</a>, <a class="el" href="udp__session_8cc_source.html#l00041">s3f::s3fnet::UDPSession::connect()</a>, <a class="el" href="socket__master_8cc_source.html#l00240">s3f::s3fnet::SocketMaster::connected()</a>, <a class="el" href="nb__socket__master_8cc_source.html#l00251">s3f::s3fnet::NBSocketMaster::connected()</a>, <a class="el" href="socket__session_8h_source.html#l00154">s3f::s3fnet::SessionCmp::operator()()</a>, <a class="el" href="socket__session_8h_source.html#l00093">s3f::s3fnet::SessionID::operator=()</a>, <a class="el" href="socket__session_8h_source.html#l00268">s3f::s3fnet::SocketSession::reinit()</a>, <a class="el" href="udp__session_8cc_source.html#l00144">s3f::s3fnet::UDPSession::send()</a>, <a class="el" href="tcp__sender_8cc_source.html#l00055">send_data()</a>, and <a class="el" href="socket__session_8h_source.html#l00121">s3f::s3fnet::SessionID::toString()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="tcp__session_8h_source.html">tcp_session.h</a></li>
<li><a class="el" href="tcp__receiver_8cc_source.html">tcp_receiver.cc</a></li>
<li><a class="el" href="tcp__sack_8cc_source.html">tcp_sack.cc</a></li>
<li><a class="el" href="tcp__sender_8cc_source.html">tcp_sender.cc</a></li>
<li><a class="el" href="tcp__session_8cc_source.html">tcp_session.cc</a></li>
<li><a class="el" href="tcp__state_8cc_source.html">tcp_state.cc</a></li>
<li><a class="el" href="tcp__timer_8cc_source.html">tcp_timer.cc</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaces3f.html">s3f</a></li><li class="navelem"><a class="el" href="namespaces3f_1_1s3fnet.html">s3fnet</a></li><li class="navelem"><a class="el" href="classs3f_1_1s3fnet_1_1_t_c_p_session.html">TCPSession</a></li>
    <li class="footer">Generated on Tue Apr 15 2014 00:36:03 for S3F by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
